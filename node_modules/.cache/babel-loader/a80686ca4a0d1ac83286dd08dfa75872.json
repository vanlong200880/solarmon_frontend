{"ast":null,"code":"import React from'react';import Libs from'../../../../../../utils/Libs';import{RCheckbox}from'../../../../../../components/Controls';import CMSDatePicker from'../../../../../../components/CMSDatePicker/CMSDatePicker';import Highcharts from'highcharts';import HighchartsReact from'highcharts-react-official';import HighchartsExporting from'highcharts/modules/exporting';import bellcurve from\"highcharts/modules/histogram-bellcurve\";import'./DeviceCharting.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";bellcurve(Highcharts);if(typeof Highcharts==='object'){HighchartsExporting(Highcharts);}export default function DeviceCharting(){var _this=this;var t=this.props.t;var _this$state=this.state,chartParams=_this$state.chartParams,dataFilter=_this$state.dataFilter,chartToolOption=_this$state.chartToolOption,dataParameter=_this$state.dataParameter;var itemFilters=null;if(Libs.isArrayData(dataFilter)){itemFilters=dataFilter.map(function(item,index){return/*#__PURE__*/_jsx(\"a\",{onClick:_this.onClickFilter.bind(_this,item.id),className:item.id==chartParams.id_filter?\"item active\":\"item\",children:item.text},index);});}var itemTimes=null;if(!Libs.isObjectEmpty(chartParams)){switch(chartParams.id_filter){case'today':itemTimes=/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 line-date text-center\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:chartParams.end_date,inputId:\"today\",format:\"MM/DD/YYYY\",dateFormat:\"dd/MM/yyyy\",inputClass:\"form-control\",inputName:\"end_date\",maxDate:chartParams.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:true})})]});break;case'3_day':itemTimes=/*#__PURE__*/_jsx(\"div\",{className:\"show-3day\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:chartParams.start_date,inputId:\"start_3day\",format:\"DD/MM/YYYY\",dateFormat:\"dd/MM/yyyy\",inputClass:\"form-control\",inputName:\"start_date\",maxDate:chartParams.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:false})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 line-date text-center\",children:/*#__PURE__*/_jsx(\"span\",{children:\" - \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:chartParams.end_date,inputId:\"end_3day\",format:\"DD/MM/YYYY\",dateFormat:\"dd/MM/yyyy\",inputClass:\"form-control\",inputName:\"end_date\",maxDate:chartParams.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:false})})]})});break;case'last_month':case'this_month':itemTimes=/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 line-date text-center\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:chartParams.end_date,inputId:\"this_month\",format:\"MM/yyyy\",dateFormat:\"MM/yyyy\",inputClass:\"form-control\",inputName:\"end_date\",maxDate:chartParams.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:true,showMonthYearPicker:true,showFullMonthYearPicker:true,showTwoColumnMonthYearPicker:true,showCustomMonth:false})})]});break;case'12_month':itemTimes=/*#__PURE__*/_jsx(\"div\",{className:\"show-12month\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:chartParams.start_date,inputId:\"start_12month\",format:\"MM/yyyy\",dateFormat:\"MM/yyyy\",inputClass:\"form-control\",inputName:\"start_date\",maxDate:chartParams.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:false,showCustomMonth:true,showMonthYearPicker:true,showFullMonthYearPicker:true,showTwoColumnMonthYearPicker:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 line-date text-center\",children:/*#__PURE__*/_jsx(\"span\",{children:\" - \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:chartParams.end_date,inputId:\"end_12month\",format:\"MM/yyyy\",dateFormat:\"MM/yyyy\",inputClass:\"form-control\",inputName:\"end_date\",maxDate:chartParams.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:false,showCustomMonth:true,showMonthYearPicker:true,showFullMonthYearPicker:true,showTwoColumnMonthYearPicker:true})})]})});break;}}return/*#__PURE__*/_jsx(\"div\",{className:\"device-charting\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-chart-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box-chart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-param\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"list-parameter\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Parameter\"}),/*#__PURE__*/_jsx(\"div\",{className:\"list-params\",children:/*#__PURE__*/_jsx(\"ul\",{children:Libs.isArrayData(dataParameter)?dataParameter.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(RCheckbox,{inputId:\"parameter_\"+index,inputName:\"parameter\",labelClass:\"no-label\",checked:item.is_checked,onChange:function onChange(e){_this.handleParameterInputChange(e,index);},label:item.name})},index);}):\"\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"chart-view\",className:\"chart-view\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-filter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-1 col-lg-1 col-md-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"download\",onClick:this.downloadData.bind(this),children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"var\",{className:\"icon-download\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xl-11 col-lg-11 col-md-11\",children:[/*#__PURE__*/_jsxs(\"div\",{className:chartParams.show_filter?\"filter on\":\"filter\",children:[chartParams.id_filter=='today'||chartParams.id_filter=='3_day'?/*#__PURE__*/_jsx(\"div\",{className:\"filter-raw\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-raw\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:this.changeViewMinute.bind(this,1),className:chartParams.data_send_time==1?\"active\":\"\",children:\"5 Minutes\"}),/*#__PURE__*/_jsx(\"span\",{onClick:this.changeViewMinute.bind(this,2),className:chartParams.data_send_time==2?\"active\":\"\",children:\"15 Minutes\"}),/*#__PURE__*/_jsx(\"span\",{onClick:this.changeViewMinute.bind(this,3),className:chartParams.data_send_time==3?\"active\":\"\",children:\"1 hour\"})]})}):\"\",/*#__PURE__*/_jsxs(\"a\",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:\"view\",children:[chartParams.text_filter,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"icon-down-open-big\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-dropdown\",children:itemFilters})]}),itemTimes?/*#__PURE__*/_jsx(\"div\",{className:\"time-filter\",children:itemTimes}):\"\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-content\",children:!Libs.isObjectEmpty(chartToolOption)?/*#__PURE__*/_jsx(HighchartsReact,{highcharts:Highcharts,allowChartUpdate:true,immutable:true,options:chartToolOption},Math.random()):\"\"})]})]})})});};","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModuleProject/Device/DeviceCharting/DeviceCharting.jsx"],"names":["React","Libs","RCheckbox","CMSDatePicker","Highcharts","HighchartsReact","HighchartsExporting","bellcurve","DeviceCharting","t","props","state","chartParams","dataFilter","chartToolOption","dataParameter","itemFilters","isArrayData","map","item","index","onClickFilter","bind","id","id_filter","text","itemTimes","isObjectEmpty","end_date","max_date","handleInputDateChange","start_date","start_max_date","max_start_date","is_checked","e","handleParameterInputChange","name","downloadData","show_filter","changeViewMinute","data_send_time","wrapperRef","onClickShowFilter","text_filter","Math","random"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,8BAAjB,CACA,OAASC,SAAT,KAA0B,uCAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,0DAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,eAAP,KAA4B,2BAA5B,CACA,MAAOC,CAAAA,mBAAP,KAAgC,8BAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,wCAAtB,CAEA,MAAO,uBAAP,C,wFACAA,SAAS,CAACH,UAAD,CAAT,CACA,GAAI,MAAOA,CAAAA,UAAP,GAAsB,QAA1B,CAAoC,CAChCE,mBAAmB,CAACF,UAAD,CAAnB,CACH,CAGD,cAAe,SAASI,CAAAA,cAAT,EAA0B,gBACrC,GAAQC,CAAAA,CAAR,CAAc,KAAKC,KAAnB,CAAQD,CAAR,CACA,gBAAkE,KAAKE,KAAvE,CAAMC,WAAN,aAAMA,WAAN,CAAmBC,UAAnB,aAAmBA,UAAnB,CAA+BC,eAA/B,aAA+BA,eAA/B,CAAgDC,aAAhD,aAAgDA,aAAhD,CACA,GAAIC,CAAAA,WAAW,CAAG,IAAlB,CACA,GAAIf,IAAI,CAACgB,WAAL,CAAiBJ,UAAjB,CAAJ,CAAkC,CAC9BG,WAAW,CAAGH,UAAU,CAACK,GAAX,CAAe,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC1C,mBAAO,UAAe,OAAO,CAAE,KAAI,CAACC,aAAL,CAAmBC,IAAnB,CAAwB,KAAxB,CAA8BH,IAAI,CAACI,EAAnC,CAAxB,CAAgE,SAAS,CAAEJ,IAAI,CAACI,EAAL,EAAWX,WAAW,CAACY,SAAvB,CAAmC,aAAnC,CAAmD,MAA9H,UAAuIL,IAAI,CAACM,IAA5I,EAAQL,KAAR,CAAP,CACH,CAFa,CAAd,CAGH,CAED,GAAIM,CAAAA,SAAS,CAAG,IAAhB,CACA,GAAI,CAACzB,IAAI,CAAC0B,aAAL,CAAmBf,WAAnB,CAAL,CAAsC,CAClC,OAAQA,WAAW,CAACY,SAApB,EACI,IAAK,OAAL,CACIE,SAAS,cACL,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,UAAf,EADJ,cAGI,YAAK,SAAS,CAAC,gCAAf,EAHJ,cAKI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,aAAD,EACI,KAAK,CAAEd,WAAW,CAACgB,QADvB,CAEI,OAAO,CAAC,OAFZ,CAGI,MAAM,CAAC,YAHX,CAII,UAAU,CAAC,YAJf,CAKI,UAAU,CAAC,cALf,CAMI,SAAS,CAAC,UANd,CAOI,OAAO,CAAEhB,WAAW,CAACiB,QAPzB,CAQI,YAAY,CAAE,KAAKC,qBAAL,CAA2BR,IAA3B,CAAgC,IAAhC,CARlB,CASI,SAAS,CAAE,EATf,CAUI,gBAAgB,CAAE,IAVtB,EADJ,EALJ,GADJ,CAsBA,MACJ,IAAK,OAAL,CACII,SAAS,cAAG,YAAK,SAAS,CAAC,WAAf,uBACR,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,UAAf,EADJ,cAEI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,aAAD,EACI,KAAK,CAAEd,WAAW,CAACmB,UADvB,CAEI,OAAO,CAAC,YAFZ,CAGI,MAAM,CAAC,YAHX,CAII,UAAU,CAAC,YAJf,CAKI,UAAU,CAAC,cALf,CAMI,SAAS,CAAC,YANd,CAOI,OAAO,CAAEnB,WAAW,CAACoB,cAPzB,CAQI,YAAY,CAAE,KAAKF,qBAAL,CAA2BR,IAA3B,CAAgC,IAAhC,CARlB,CASI,SAAS,CAAE,EATf,CAUI,gBAAgB,CAAE,KAVtB,EADJ,EAFJ,cAgBI,YAAK,SAAS,CAAC,gCAAf,uBACI,6BADJ,EAhBJ,cAmBI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,aAAD,EACI,KAAK,CAAEV,WAAW,CAACgB,QADvB,CAEI,OAAO,CAAC,UAFZ,CAGI,MAAM,CAAC,YAHX,CAII,UAAU,CAAC,YAJf,CAKI,UAAU,CAAC,cALf,CAMI,SAAS,CAAC,UANd,CAOI,OAAO,CAAEhB,WAAW,CAACiB,QAPzB,CAQI,YAAY,CAAE,KAAKC,qBAAL,CAA2BR,IAA3B,CAAgC,IAAhC,CARlB,CASI,SAAS,CAAE,EATf,CAUI,gBAAgB,CAAE,KAVtB,EADJ,EAnBJ,GADQ,EAAZ,CAoCA,MACJ,IAAK,YAAL,CACA,IAAK,YAAL,CACII,SAAS,cACL,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,UAAf,EADJ,cAGI,YAAK,SAAS,CAAC,gCAAf,EAHJ,cAKI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,aAAD,EACI,KAAK,CAAEd,WAAW,CAACgB,QADvB,CAEI,OAAO,CAAC,YAFZ,CAGI,MAAM,CAAC,SAHX,CAII,UAAU,CAAC,SAJf,CAKI,UAAU,CAAC,cALf,CAMI,SAAS,CAAC,UANd,CAOI,OAAO,CAAEhB,WAAW,CAACiB,QAPzB,CAQI,YAAY,CAAE,KAAKC,qBAAL,CAA2BR,IAA3B,CAAgC,IAAhC,CARlB,CASI,SAAS,CAAE,EATf,CAUI,gBAAgB,CAAE,IAVtB,CAWI,mBAAmB,CAAE,IAXzB,CAYI,uBAAuB,CAAE,IAZ7B,CAaI,4BAA4B,CAAE,IAblC,CAcI,eAAe,CAAE,KAdrB,EADJ,EALJ,GADJ,CA0BA,MACJ,IAAK,UAAL,CACII,SAAS,cAAG,YAAK,SAAS,CAAC,cAAf,uBACR,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,UAAf,EADJ,cAEI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,aAAD,EACI,KAAK,CAAEd,WAAW,CAACmB,UADvB,CAEI,OAAO,CAAC,eAFZ,CAGI,MAAM,CAAC,SAHX,CAII,UAAU,CAAC,SAJf,CAKI,UAAU,CAAC,cALf,CAMI,SAAS,CAAC,YANd,CAOI,OAAO,CAAEnB,WAAW,CAACqB,cAPzB,CAQI,YAAY,CAAE,KAAKH,qBAAL,CAA2BR,IAA3B,CAAgC,IAAhC,CARlB,CASI,SAAS,CAAE,EATf,CAUI,gBAAgB,CAAE,KAVtB,CAWI,eAAe,CAAE,IAXrB,CAYI,mBAAmB,CAAE,IAZzB,CAaI,uBAAuB,CAAE,IAb7B,CAcI,4BAA4B,CAAE,IAdlC,EADJ,EAFJ,cAoBI,YAAK,SAAS,CAAC,gCAAf,uBACI,6BADJ,EApBJ,cAuBI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,aAAD,EACI,KAAK,CAAEV,WAAW,CAACgB,QADvB,CAEI,OAAO,CAAC,aAFZ,CAGI,MAAM,CAAC,SAHX,CAII,UAAU,CAAC,SAJf,CAKI,UAAU,CAAC,cALf,CAMI,SAAS,CAAC,UANd,CAOI,OAAO,CAAEhB,WAAW,CAACiB,QAPzB,CAQI,YAAY,CAAE,KAAKC,qBAAL,CAA2BR,IAA3B,CAAgC,IAAhC,CARlB,CASI,SAAS,CAAE,EATf,CAUI,gBAAgB,CAAE,KAVtB,CAWI,eAAe,CAAE,IAXrB,CAYI,mBAAmB,CAAE,IAZzB,CAaI,uBAAuB,CAAE,IAb7B,CAcI,4BAA4B,CAAE,IAdlC,EADJ,EAvBJ,GADQ,EAAZ,CA4CA,MAzIR,CA2IH,CAED,mBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,WAAf,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,iCADJ,cAEI,YAAK,SAAS,CAAC,aAAf,uBACI,oBACKrB,IAAI,CAACgB,WAAL,CAAiBF,aAAjB,EACGA,aAAa,CAACG,GAAd,CAAkB,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC/B,mBACI,iCACI,KAAC,SAAD,EACI,OAAO,CAAE,aAAeA,KAD5B,CAEI,SAAS,CAAC,WAFd,CAGI,UAAU,CAAC,UAHf,CAII,OAAO,CAAED,IAAI,CAACe,UAJlB,CAKI,QAAQ,CAAE,kBAACC,CAAD,CAAO,CAAE,KAAI,CAACC,0BAAL,CAAgCD,CAAhC,CAAmCf,KAAnC,EAA4C,CALnE,CAMI,KAAK,CAAED,IAAI,CAACkB,IANhB,EADJ,EAASjB,KAAT,CADJ,CAYH,CAbD,CADH,CAeK,EAhBV,EADJ,EAFJ,GADJ,EADJ,cA4BI,aAAK,EAAE,CAAC,YAAR,CAAqB,SAAS,CAAC,YAA/B,wBACI,YAAK,SAAS,CAAC,cAAf,uBACI,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,4BAAf,uBACI,YAAK,SAAS,CAAC,UAAf,CAA0B,OAAO,CAAE,KAAKkB,YAAL,CAAkBhB,IAAlB,CAAuB,IAAvB,CAAnC,uBAAiE,mCAAM,YAAK,SAAS,CAAC,eAAf,EAAN,EAAjE,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,+BAAf,wBACI,aAAK,SAAS,CAAEV,WAAW,CAAC2B,WAAZ,CAA0B,WAA1B,CAAwC,QAAxD,WACK3B,WAAW,CAACY,SAAZ,EAAyB,OAAzB,EAAoCZ,WAAW,CAACY,SAAZ,EAAyB,OAA7D,cACG,YAAK,SAAS,CAAC,YAAf,uBACI,aAAK,SAAS,CAAC,UAAf,wBACI,aAAM,OAAO,CAAE,KAAKgB,gBAAL,CAAsBlB,IAAtB,CAA2B,IAA3B,CAAiC,CAAjC,CAAf,CAAoD,SAAS,CAAEV,WAAW,CAAC6B,cAAZ,EAA8B,CAA9B,CAAkC,QAAlC,CAA6C,EAA5G,uBADJ,cAEI,aAAM,OAAO,CAAE,KAAKD,gBAAL,CAAsBlB,IAAtB,CAA2B,IAA3B,CAAiC,CAAjC,CAAf,CAAoD,SAAS,CAAEV,WAAW,CAAC6B,cAAZ,EAA8B,CAA9B,CAAkC,QAAlC,CAA6C,EAA5G,wBAFJ,cAGI,aAAM,OAAO,CAAE,KAAKD,gBAAL,CAAsBlB,IAAtB,CAA2B,IAA3B,CAAiC,CAAjC,CAAf,CAAoD,SAAS,CAAEV,WAAW,CAAC6B,cAAZ,EAA8B,CAA9B,CAAkC,QAAlC,CAA6C,EAA5G,oBAHJ,GADJ,EADH,CAQK,EATV,cAWI,WAAG,GAAG,CAAE,KAAKC,UAAb,CAAyB,OAAO,CAAE,KAAKC,iBAAL,CAAuBrB,IAAvB,CAA4B,IAA5B,CAAlC,CAAqE,SAAS,CAAC,MAA/E,WAAuFV,WAAW,CAACgC,WAAnG,kBAAgH,aAAM,SAAS,CAAC,oBAAhB,EAAhH,GAXJ,cAYI,YAAK,SAAS,CAAC,iBAAf,UACK5B,WADL,EAZJ,GADJ,CAiBKU,SAAS,cACN,YAAK,SAAS,CAAC,aAAf,UACKA,SADL,EADM,CAIJ,EArBV,GAJJ,GADJ,EADJ,cAiCI,YAAK,SAAS,CAAC,eAAf,UACK,CAACzB,IAAI,CAAC0B,aAAL,CAAmBb,eAAnB,CAAD,cAAuC,KAAC,eAAD,EAAqC,UAAU,CAAEV,UAAjD,CAA6D,gBAAgB,CAAE,IAA/E,CAAqF,SAAS,CAAE,IAAhG,CAAsG,OAAO,CAAEU,eAA/G,EAAsB+B,IAAI,CAACC,MAAL,EAAtB,CAAvC,CAA4K,EADjL,EAjCJ,GA5BJ,GADJ,EADJ,EADJ,CAyEH","sourcesContent":["import React from 'react';\nimport Libs from '../../../../../../utils/Libs';\nimport { RCheckbox } from '../../../../../../components/Controls';\nimport CMSDatePicker from '../../../../../../components/CMSDatePicker/CMSDatePicker';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\nimport HighchartsExporting from 'highcharts/modules/exporting';\nimport bellcurve from \"highcharts/modules/histogram-bellcurve\";\n\nimport './DeviceCharting.scss';\nbellcurve(Highcharts);\nif (typeof Highcharts === 'object') {\n    HighchartsExporting(Highcharts)\n}\n\n\nexport default function DeviceCharting() {\n    const { t } = this.props;\n    var { chartParams, dataFilter, chartToolOption, dataParameter } = this.state;\n    var itemFilters = null;\n    if (Libs.isArrayData(dataFilter)) {\n        itemFilters = dataFilter.map((item, index) => {\n            return <a key={index} onClick={this.onClickFilter.bind(this, item.id)} className={item.id == chartParams.id_filter ? \"item active\" : \"item\"}>{item.text}</a>\n        })\n    }\n\n    var itemTimes = null;\n    if (!Libs.isObjectEmpty(chartParams)) {\n        switch (chartParams.id_filter) {\n            case 'today':\n                itemTimes =\n                    <div className=\"row\">\n                        <div className=\"col-md-6\">\n                        </div>\n                        <div className=\"col-md-1 line-date text-center\">\n                        </div>\n                        <div className=\"col-md-5\">\n                            <CMSDatePicker\n                                value={chartParams.end_date}\n                                inputId=\"today\"\n                                format=\"MM/DD/YYYY\"\n                                dateFormat=\"dd/MM/yyyy\"\n                                inputClass=\"form-control\"\n                                inputName=\"end_date\"\n                                maxDate={chartParams.max_date}\n                                handleChange={this.handleInputDateChange.bind(this)}\n                                maxLength={20}\n                                showIconCalendar={true}\n                            />\n                        </div>\n                    </div>\n\n                break;\n            case '3_day':\n                itemTimes = <div className=\"show-3day\">\n                    <div className=\"row\">\n                        <div className=\"col-md-1\"></div>\n                        <div className=\"col-md-5\">\n                            <CMSDatePicker\n                                value={chartParams.start_date}\n                                inputId=\"start_3day\"\n                                format=\"DD/MM/YYYY\"\n                                dateFormat=\"dd/MM/yyyy\"\n                                inputClass=\"form-control\"\n                                inputName=\"start_date\"\n                                maxDate={chartParams.start_max_date}\n                                handleChange={this.handleInputDateChange.bind(this)}\n                                maxLength={20}\n                                showIconCalendar={false}\n                            />\n                        </div>\n                        <div className=\"col-md-1 line-date text-center\">\n                            <span> - </span>\n                        </div>\n                        <div className=\"col-md-5\">\n                            <CMSDatePicker\n                                value={chartParams.end_date}\n                                inputId=\"end_3day\"\n                                format=\"DD/MM/YYYY\"\n                                dateFormat=\"dd/MM/yyyy\"\n                                inputClass=\"form-control\"\n                                inputName=\"end_date\"\n                                maxDate={chartParams.max_date}\n                                handleChange={this.handleInputDateChange.bind(this)}\n                                maxLength={20}\n                                showIconCalendar={false}\n                            />\n                        </div>\n                    </div>\n                </div>\n                break;\n            case 'last_month':\n            case 'this_month':\n                itemTimes =\n                    <div className=\"row\">\n                        <div className=\"col-md-6\">\n                        </div>\n                        <div className=\"col-md-1 line-date text-center\">\n                        </div>\n                        <div className=\"col-md-5\">\n                            <CMSDatePicker\n                                value={chartParams.end_date}\n                                inputId=\"this_month\"\n                                format=\"MM/yyyy\"\n                                dateFormat=\"MM/yyyy\"\n                                inputClass=\"form-control\"\n                                inputName=\"end_date\"\n                                maxDate={chartParams.max_date}\n                                handleChange={this.handleInputDateChange.bind(this)}\n                                maxLength={20}\n                                showIconCalendar={true}\n                                showMonthYearPicker={true}\n                                showFullMonthYearPicker={true}\n                                showTwoColumnMonthYearPicker={true}\n                                showCustomMonth={false}\n                            />\n                        </div>\n                    </div>\n\n                break;\n            case '12_month':\n                itemTimes = <div className=\"show-12month\">\n                    <div className=\"row\">\n                        <div className=\"col-md-1\"></div>\n                        <div className=\"col-md-5\">\n                            <CMSDatePicker\n                                value={chartParams.start_date}\n                                inputId=\"start_12month\"\n                                format=\"MM/yyyy\"\n                                dateFormat=\"MM/yyyy\"\n                                inputClass=\"form-control\"\n                                inputName=\"start_date\"\n                                maxDate={chartParams.max_start_date}\n                                handleChange={this.handleInputDateChange.bind(this)}\n                                maxLength={20}\n                                showIconCalendar={false}\n                                showCustomMonth={true}\n                                showMonthYearPicker={true}\n                                showFullMonthYearPicker={true}\n                                showTwoColumnMonthYearPicker={true}\n                            />\n                        </div>\n                        <div className=\"col-md-1 line-date text-center\">\n                            <span> - </span>\n                        </div>\n                        <div className=\"col-md-5\">\n                            <CMSDatePicker\n                                value={chartParams.end_date}\n                                inputId=\"end_12month\"\n                                format=\"MM/yyyy\"\n                                dateFormat=\"MM/yyyy\"\n                                inputClass=\"form-control\"\n                                inputName=\"end_date\"\n                                maxDate={chartParams.max_date}\n                                handleChange={this.handleInputDateChange.bind(this)}\n                                maxLength={20}\n                                showIconCalendar={false}\n                                showCustomMonth={true}\n                                showMonthYearPicker={true}\n                                showFullMonthYearPicker={true}\n                                showTwoColumnMonthYearPicker={true}\n                            />\n                        </div>\n                    </div>\n                </div>\n                break;\n        }\n    }\n\n    return (\n        <div className=\"device-charting\">\n            <div className=\"main-chart-view\">\n                <div className=\"box-chart\">\n                    <div className=\"main-param\">\n                        <div className=\"list-parameter\">\n                            <h2>Parameter</h2>\n                            <div className=\"list-params\">\n                                <ul>\n                                    {Libs.isArrayData(dataParameter) ?\n                                        dataParameter.map((item, index) => {\n                                            return (\n                                                <li key={index}>\n                                                    <RCheckbox\n                                                        inputId={\"parameter_\" + index}\n                                                        inputName=\"parameter\"\n                                                        labelClass=\"no-label\"\n                                                        checked={item.is_checked}\n                                                        onChange={(e) => { this.handleParameterInputChange(e, index); }}\n                                                        label={item.name}\n                                                    />\n                                                </li>\n                                            );\n                                        })\n                                        : \"\"}\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    <div id=\"chart-view\" className=\"chart-view\">\n                        <div className=\"chart-filter\">\n                            <div className=\"row\">\n                                <div className=\"col-xl-1 col-lg-1 col-md-1\">\n                                    <div className=\"download\" onClick={this.downloadData.bind(this)}><span><var className=\"icon-download\"></var></span></div>\n                                </div>\n                                <div className=\"col-xl-11 col-lg-11 col-md-11\">\n                                    <div className={chartParams.show_filter ? \"filter on\" : \"filter\"}>\n                                        {chartParams.id_filter == 'today' || chartParams.id_filter == '3_day' ?\n                                            <div className=\"filter-raw\">\n                                                <div className=\"main-raw\">\n                                                    <span onClick={this.changeViewMinute.bind(this, 1)} className={chartParams.data_send_time == 1 ? \"active\" : \"\"}>5 Minutes</span>\n                                                    <span onClick={this.changeViewMinute.bind(this, 2)} className={chartParams.data_send_time == 2 ? \"active\" : \"\"}>15 Minutes</span>\n                                                    <span onClick={this.changeViewMinute.bind(this, 3)} className={chartParams.data_send_time == 3 ? \"active\" : \"\"}>1 hour</span>\n                                                </div>\n                                            </div>\n                                            : \"\"}\n\n                                        <a ref={this.wrapperRef} onClick={this.onClickShowFilter.bind(this)} className=\"view\">{chartParams.text_filter} <span className=\"icon-down-open-big\"></span></a>\n                                        <div className=\"filter-dropdown\">\n                                            {itemFilters}\n                                        </div>\n                                    </div>\n                                    {itemTimes ?\n                                        <div className=\"time-filter\">\n                                            {itemTimes}\n                                        </div>\n                                        : \"\"}\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <div className=\"chart-content\">\n                            {!Libs.isObjectEmpty(chartToolOption) ? <HighchartsReact key={Math.random()} highcharts={Highcharts} allowChartUpdate={true} immutable={true} options={chartToolOption} /> : \"\"}\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}