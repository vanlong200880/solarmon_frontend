{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ChartDeviceDiagnosticsJsx from'./ChartDeviceDiagnostics.jsx';import BaseComponent from'../../../../../BaseComponent';import Libs from'../../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../../utils/Constants';import ChartsDiagnosticsService from'../../../../../../services/ChartsDiagnosticsService';import moment from'moment';var ChartDeviceDiagnostics=/*#__PURE__*/function(_BaseComponent){_inherits(ChartDeviceDiagnostics,_BaseComponent);var _super=_createSuper(ChartDeviceDiagnostics);function ChartDeviceDiagnostics(props,context){var _this;_classCallCheck(this,ChartDeviceDiagnostics);_this=_super.call(this,props,context);_this.handleDropdownChange=function(item,name){var self=_assertThisInitialized(_this);var curItem=self.state.curItem;if(Libs.isObjectEmpty(item)&&name=='statype_diagnosticsus'){curItem.statype_diagnosticsus='';}else if(Libs.isObjectEmpty(item)&&name=='type_string_index'){curItem.type_string_index='';}else{var value=item.value;curItem[name]=value;}self.setState({curItem:curItem});};_this.handleClickOutside=function(event){var target=event.target;var chartParams=_this.state.chartParams,self=_assertThisInitialized(_this);if(!Libs.isBlank(_this.wrapperRef.current)&&!_this.wrapperRef.current.contains(target)){if(chartParams.show_filter){chartParams.show_filter=false;self.setState({chartParams:chartParams});}}};_this.onClickShowFilter=function(){var chartParams=_this.state.chartParams;chartParams.show_filter=true;_this.setState({chartParams:chartParams});};_this.onClickFilter=function(value){var _this$state=_this.state,chartParams=_this$state.chartParams,dataFilter=_this$state.dataFilter,curItem=_this$state.curItem;var self=_assertThisInitialized(_this);if(!Libs.isArrayData(dataFilter))return;var item=Libs.find(dataFilter,'id',value);if(Libs.isObjectEmpty(item))return;chartParams.id_filter=item.id;chartParams.text_filter=item.text;chartParams.show_filter=false;chartParams.showNextBtn=false;switch(value){case'today':chartParams.start_date=Libs.getCurrentMMDDYYYYHI();chartParams.end_date=Libs.getCurrentMMDDYYYYHI();break;case'lifetime':chartParams.start_date=moment(curItem.commissioning).format('MM/DD/YYYY HH:mm:ss');chartParams.end_date=Libs.getCurrentMMDDYYYYHI();break;case'this_month':chartParams.end_date=Libs.getCurrentMMDDYYYYHI();var t=new Date(chartParams.end_date);var y=t.getFullYear(),m=t.getMonth();chartParams.start_date=moment(new Date(y,m,1)).format('MM/DD/YYYY HH:mm');break;case'last_month':var tlast=new Date(Libs.getCurrentMMDDYYYYHI());var ylast=tlast.getFullYear(),mlast=tlast.getMonth();chartParams.end_date=moment(Libs.addMonths(new Date(ylast,mlast,1),-1)).endOf('month').format('MM/DD/YYYY HH:mm');chartParams.start_date=moment(Libs.addMonths(new Date(ylast,mlast,1),-1)).format('MM/DD/YYYY HH:mm');break;case'12_month':chartParams.start_date=moment(Libs.addMonths(Libs.getCurrentMMDDYYYYHI(),-12)).format('MM/DD/YYYY HH:mm:ss');chartParams.end_date=Libs.getCurrentMMDDYYYYHI();break;}_this.setState({chartParams:chartParams},function(){// self.getDataChart();\n});};_this.changeViewMinute=function(value){var chartParams=_this.state.chartParams,self=_assertThisInitialized(_this);if(Libs.isBlank(value))return;chartParams.data_send_time=value;_this.setState({chartParams:chartParams},function(){// self.getDataChart();\n});};_this.onClickAdd=function(){var curItem=_this.state.curItem;var data=[];var allLanguage=_this.state.allLanguage;curItem.screen_mode=Constants.SCREEN_MODE.ADD;curItem.tabActive='';allLanguage.map(function(language,index){if(language.is_default===1){curItem.tabActive=language.is_default===1?language.iso_code:'';}var item={is_default:language.is_default,iso_code:language.iso_code,id_language:language.id,name:\"\",description:\"\"};return data.push(item);});curItem.data=data;_this.setState({curItem:curItem,add:true});};_this.onClickCloseAdd=function(status){if(status){_this.getList();}_this.setState({add:false});};_this.onClickCloseDelete=function(status,data){if(status&&data){_this.getList();}_this.setState({delete:false});};_this.onItemClick=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index],self=_assertThisInitialized(_this);var params=_this.state.curItem;params.id_company=item.id_company;params.id=item.id;// ChartDeviceDiagnosticsService.instance.getDetail(params, data => {\n//     if (data) {\n//         item.data = data.data;\n//         item.screen_mode = Constants.SCREEN_MODE.EDIT;\n//         let curTransItem = Libs.find(data.data,'is_default', 1);\n//         if(Libs.isObjectEmpty(curTransItem)){ return false; }\n//         item[\"name_\"+curTransItem.iso_code] = curTransItem.name;\n//         if(Libs.isArrayData(data.data)){\n//             var dataLang = data.data;\n//             dataLang.map((row, index) => {\n//                 if(row.is_default === 1){\n//                     item.tabActive = row.iso_code;\n//                 }\n//                 return 1;\n//             });\n//         }\n//         self.setState({\n//             curItem: item,\n//             add: true\n//         });\n//     }\n// }, false);\n};_this.onStatusChange=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index],self=_assertThisInitialized(_this);item.screen_mode=Constants.SCREEN_MODE.EDIT;item.id_company=_this.employee.id_company;item.id_language=_this.employee.id_language;var isActiveUpdate=item.status;if(isActiveUpdate*1===1){isActiveUpdate=0;}else{isActiveUpdate=1;}item.status=isActiveUpdate;item.updated_by=_this.employee.first_name+' '+_this.employee.last_name;// ChartDeviceDiagnosticsService.instance.updateStatus(item, function (status, msg) {\n//     if (status) {\n//         self.setState({\n//             dataList: self.state.dataList\n//         });\n//     }\n// });\n};_this.onItemClickDelete=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index];_this.setState({curItem:item,delete:true});};_this.state={curItem:{data_send_time:1,type:2,type_diagnostics:2,type_string_index:1},dataDevice:[{id:1,name:\"Satcon PVS-375 Inverter\",is_active:0},{id:2,name:\"Shark 100\",is_active:0},{id:3,name:\"Inverter 1\",is_active:0}],dataDiagnostics:[{id:1,value:1,label:\"AC Output\"},{id:2,value:2,label:\"DC Input\"},{id:3,value:3,label:\"DC Input Channel\"}],dataStringIndex:[{id:1,value:1,label:\"Power\"},{id:2,value:2,label:\"Voltage\"},{id:3,value:3,label:\"Current\"}],dataList:[],searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1},allLanguage:Libs.isBlank(_this.employee)?[]:_this.employee.languages,dataFilter:[{id:\"today\",text:\"Today\"},{id:\"this_month\",text:\"This month\"},{id:\"last_month\",text:\"Last month\"},{id:\"12_month\",text:\"Last 12 months\"},{id:\"lifetime\",text:\"Lifetime\"}],chartParams:{id_site:null,id_filter:'today',text_filter:'Today',show_filter:false,showNextBtn:false,current_time:Libs.getCurrentMMDDYYYYHI(),end_date:Libs.getCurrentMMDDYYYYHI(),start_date:Libs.getCurrentMMDDYYYYHI(),data_send_time:2}};_this.paging={total:0,current:1,currentInput:1};_this.jsxTemplate=ChartDeviceDiagnosticsJsx;_this.inputChangedHandler=_this.inputChangedHandler.bind(_assertThisInitialized(_this));_this.inputChangedEnter=_this.inputChangedEnter.bind(_assertThisInitialized(_this));_this.inputChangedBlue=_this.inputChangedBlue.bind(_assertThisInitialized(_this));_this.wrapperRef=/*#__PURE__*/React.createRef();_this.myRef=/*#__PURE__*/React.createRef();return _this;}_createClass(ChartDeviceDiagnostics,[{key:\"componentDidMount\",value:function componentDidMount(){// this.getList();\ndocument.addEventListener('click',this.handleClickOutside);this.getDataChart();// this.showHeaderMenuProject(true);\n// if (typeof this.props.parent.reloadHeaderShops == 'function') {\n//     // this.props.parent.showHeaderShops(false);\n// }\n// this.forceUpdate();\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){// document.removeEventListener('click', this.handleClickOutside)\n}},{key:\"getDataChart\",value:// showFilterParameter = () => {\n//     this.setState({\n//         show_parameter: true\n//     });\n// }\n// addFilterParameter = () => {\n//     this.setState({\n//         show_parameter: false\n//     });\n// }\n// closeFilterParameter = () => {\n//     this.setState({\n//         show_parameter: false\n//     });\n// }\n// clearFilterParameter = () => {\n//     var { dataParameter } = this.state;\n//     if (!Libs.isArrayData(dataParameter)) return;\n//     dataParameter.map((item, index) => {\n//         dataParameter[index].is_active = 0;\n//     });\n//     this.setState({\n//         dataParameter: dataParameter\n//     });\n// }\n// handleParameterInputChange = (e, index, k) => {\n//     var { dataParameter } = this.state;\n//     if (!Libs.isArrayData(dataParameter)) return;\n//     var item = dataParameter[index];\n//     if (Libs.isObjectEmpty(item)) return;\n//     var childs = item.dataParameter;\n//     if (!Libs.isArrayData(childs)) return;\n//     // childs[k].is_active = childs[k].is_active ? 0 : 1;\n//     dataParameter[index].dataParameter[k].is_active = dataParameter[index].dataParameter[k].is_active ? 0 : 1;\n//     // dataParameter[index].dataParameter = childs;\n//     this.setState({\n//         dataParameter: dataParameter\n//     });\n// }\n// handleDeviceInputChange = (e, index) => {\n//     var { dataDevice, dataParameter } = this.state;\n//     if (!Libs.isArrayData(dataDevice)) return;\n//     var item = dataDevice[index];\n//     if (Libs.isObjectEmpty(item)) return;\n//     if (dataDevice[index].is_active) {\n//         dataDevice[index].is_active = 0;\n//         if (Libs.isArrayData(dataParameter)) {\n//             for (var i = 0, len = dataParameter.length; i < len; i++) {\n//                 if (dataParameter[i].id == item.id) {\n//                     dataParameter.splice(i, 1);\n//                 }\n//             }\n//         }\n//     } else {\n//         dataDevice[index].is_active = 1;\n//         dataParameter.push(item);\n//     }\n//     this.setState({\n//         dataDevice: dataDevice,\n//         dataParameter: dataParameter,\n//         show_parameter: true\n//     });\n// }\n/**\n   * Get chart data\n   * @author long.pham 2020-12-03\n   * @param id_site, id_customer\n   * @return Object\n   */function getDataChart(){var _this$state2=this.state,chartParams=_this$state2.chartParams,curItem=_this$state2.curItem,self=this;if(Libs.isObjectEmpty(chartParams))return;var params={};params.start_date=Libs.convertAllFormatDate(Libs.dateFormat(chartParams.start_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")+\" 00:00:00\");if(Libs.dateFormat(chartParams.current_time,\"MM/DD/YYYY\",\"MM/DD/YYYY\")==Libs.dateFormat(chartParams.end_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")){params.end_date=Libs.convertAllFormatDate(chartParams.end_date);// '2020-11-01 23:59:59';\n}else{params.end_date=Libs.convertAllFormatDate(Libs.dateFormat(chartParams.end_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")+\" 23:59:59\");}// params.start_date = '2021-08-09 00:00:00';\n// params.end_date = '2021-08-09 23:59:59';\nparams.id_site=curItem.id;params.id_customer=curItem.id_customer;params.customer_type=!Libs.isBlank(this.user)?this.user.customer_type:null;// params.offset_timezone = Libs.getOffsetTimeZone(chartParams.end_date);\n// params.offset_timezone = '-08:00';\nparams.filterBy=chartParams.id_filter;// params.format_sql_long = Constants.DATE_FORMAT.format_sql_long;\nparams.id_site_type=curItem.id_site_type;params.setup_send_time=curItem.data_send_time;// Use only for lifetime\nparams.typeView=moment(curItem.commissioning).format('YYYY')-moment(chartParams.end_date).format('YYYY')>3?null:'month';params.data_send_time=chartParams.data_send_time;ChartsDiagnosticsService.instance.getDataChart(params,function(data){if(!Libs.isObjectEmpty(data)){var dataListEnergy=data.energy;var dataIrradiance=[],dataEnergy=[],categories=[],arrEnergy=[],arrMeasure=[];var generationTotal=0,series=[],lastUpdated=moment().format('LLL');if(params.filterBy=='today'){switch(chartParams.data_send_time){case 1:curItem.tickInterval=24;categories=['0AM','0:05 AM','0:10 AM','0:15 AM','0:20 AM','0:25 AM','0:30 AM','0:35 AM','0:40 AM','0:45 AM','0:50 AM','0:55 AM','1AM','1:05 AM','1:10 AM','1:15 AM','1:20 AM','1:25 AM','1:30 AM','1:35 AM','1:40 AM','1:45 AM','1:50 AM','1:55 AM','2AM','2:05 AM','2:10 AM','2:15 AM','2:20 AM','2:25 AM','2:30 AM','2:35 AM','2:40 AM','2:45 AM','2:50 AM','2:55 AM','3AM','3:05 AM','3:10 AM','3:15 AM','3:20 AM','3:25 AM','3:30 AM','3:35 AM','3:40 AM','3:45 AM','3:50 AM','3:55 AM','4AM','4:05 AM','4:10 AM','4:15 AM','4:20 AM','4:25 AM','4:30 AM','4:35 AM','4:40 AM','4:45 AM','4:50 AM','4:55 AM','5AM','5:05 AM','5:10 AM','5:15 AM','5:20 AM','5:25 AM','5:30 AM','5:35 AM','5:40 AM','5:45 AM','5:50 AM','5:55 AM','6AM','6:05 AM','6:10 AM','6:15 AM','6:20 AM','6:25 AM','6:30 AM','6:35 AM','6:40 AM','6:45 AM','6:50 AM','6:55 AM','7AM','7:05 AM','7:10 AM','7:15 AM','7:20 AM','7:25 AM','7:30 AM','7:35 AM','7:40 AM','7:45 AM','7:50 AM','7:55 AM','8AM','8:05 AM','8:10 AM','8:15 AM','8:20 AM','8:25 AM','8:30 AM','8:35 AM','8:40 AM','8:45 AM','8:50 AM','8:55 AM','9AM','9:05 AM','9:10 AM','9:15 AM','9:20 AM','9:25 AM','9:30 AM','9:35 AM','9:40 AM','9:45 AM','9:50 AM','9:55 AM','10AM','10:05 AM','10:10 AM','10:15 AM','10:20 AM','10:25 AM','10:30 AM','10:35 AM','10:40 AM','10:45 AM','10:50 AM','10:55 AM','11AM','11:05 AM','11:10 AM','11:15 AM','11:20 AM','11:25 AM','11:30 AM','11:35 AM','11:40 AM','11:45 AM','11:50 AM','11:55 AM','12PM','12:05 PM','12:10 PM','12:15 PM','12:20 PM','12:25 PM','12:30 PM','12:35 PM','12:40 PM','12:45 PM','12:50 PM','12:55 PM','1PM','1:05 PM','1:10 PM','1:15 PM','1:20 PM','1:25 PM','1:30 PM','1:35 PM','1:40 PM','1:45 PM','1:50 PM','1:55 PM','2PM','2:05 PM','2:10 PM','2:15 PM','2:20 PM','2:25 PM','2:30 PM','2:35 PM','2:40 PM','2:45 PM','2:50 PM','2:55 PM','3PM','3:05 PM','3:10 PM','3:15 PM','3:20 PM','3:25 PM','3:30 PM','3:35 PM','3:40 PM','3:45 PM','3:50 PM','3:55 PM','4PM','4:05 PM','4:10 PM','4:15 PM','4:20 PM','4:25 PM','4:30 PM','4:35 PM','4:40 PM','4:45 PM','4:50 PM','4:55 PM','5PM','5:05 PM','5:10 PM','5:15 PM','5:20 PM','5:25 PM','5:30 PM','5:35 PM','5:40 PM','5:45 PM','5:50 PM','5:55 PM','6PM','6:05 PM','6:10 PM','6:15 PM','6:20 PM','6:25 PM','6:30 PM','6:35 PM','6:40 PM','6:45 PM','6:50 PM','6:55 PM','7PM','7:05 PM','7:10 PM','7:15 PM','7:20 PM','7:25 PM','7:30 PM','7:35 PM','7:40 PM','7:45 PM','7:50 PM','7:55 PM','8PM','8:05 PM','8:10 PM','8:15 PM','8:20 PM','8:25 PM','8:30 PM','8:35 PM','8:40 PM','8:45 PM','8:50 PM','8:55 PM','9PM','9:05 PM','9:10 PM','9:15 PM','9:20 PM','9:25 PM','9:30 PM','9:35 PM','9:40 PM','9:45 PM','9:50 PM','9:55 PM','10PM','10:05 PM','10:10 PM','10:15 PM','10:20 PM','10:25 PM','10:30 PM','10:35 PM','10:40 PM','10:45 PM','10:50 PM','10:55 PM','11PM','11:05 PM','11:10 PM','11:15 PM','11:20 PM','11:25 PM','11:30 PM','11:35 PM','11:40 PM','11:45 PM','11:50 PM','11:55 PM'];for(var i1=0;i1<dataListEnergy.length;i1++){var seriesItem={};seriesItem.name=dataListEnergy[i1].devicename;seriesItem.data=[];seriesItem.zIndex=i1;if(dataListEnergy[i1].type=='energy'){seriesItem.type='spline';seriesItem.tooltip={valueSuffix:' kW'};seriesItem.lineWidth=3;seriesItem.marker={radius:1.5};}else if(dataListEnergy[i1].type=='irradiance'){seriesItem.type='spline';seriesItem.xAxis=1;seriesItem.yAxis=1;seriesItem.lineWidth=3;seriesItem.tooltip={valueSuffix:' kW'};seriesItem.id='s1';seriesItem.marker={radius:1.5};}// Put data energy\nvar dataModelEnergy=dataListEnergy[i1].data_energy;var rowItem=[];if(Libs.isArrayData(dataModelEnergy)){for(var j1=0;j1<dataModelEnergy.length;j1++){if(dataListEnergy[i1].type=='energy'){arrEnergy.push({\"ID\":i1+1+\"_\"+j1+1,\"DateTime\":dataModelEnergy[j1].download_time,\"Device Name\":dataListEnergy[i1].export_devicename,\"Power (kW)\":dataModelEnergy[j1].chart_energy_kwh});generationTotal=generationTotal+dataModelEnergy[j1].chart_energy_kwh;}else{arrMeasure.push({\"ID\":i1+1+\"_\"+j1+1,\"DateTime\":dataModelEnergy[j1].download_time,\"Device Name\":dataListEnergy[i1].export_devicename,\"Measured Irradiance (w/m2)\":dataModelEnergy[j1].chart_energy_kwh});}rowItem.push([dataModelEnergy[j1].full_time,dataModelEnergy[j1].chart_energy_kwh]);}if(dataModelEnergy.length<288&&dataModelEnergy.length>0){var lastDate='';for(var izero1=dataModelEnergy.length;izero1<288;izero1++){if(izero1==dataModelEnergy.length){lastDate=dataModelEnergy[dataModelEnergy.length-1].full_time;}if(lastDate!=null){lastDate=Libs.addMinutes(lastDate,5);rowItem.push([Libs.dateFormat(lastDate,'YYYY-MM-DD HH:mm','YYYY-MM-DD HH:mm:ss'),0]);}}}}seriesItem.data=rowItem;series.push(seriesItem);}break;case 2:curItem.tickInterval=8;categories=['0AM','0:15AM','0:30AM','0:45AM','1AM','1:15AM','1:30AM','1:45AM','2AM','2:15AM','2:30AM','2:45AM','3AM','3:15AM','3:30AM','3:45AM','4AM','4:15AM','4:30AM','4:45AM','5AM','5:15AM','5:30AM','5:45AM','6AM','6:15AM','6:30AM','6:45AM','7AM','7:15AM','7:30AM','7:45AM','8AM','8:15AM','8:30AM','8:45AM','9AM','9:15AM','9:30AM','9:45AM','10AM','10:15AM','10:30AM','10:45AM','11AM','11:15AM','11:30AM','11:45AM','12PM','12:15PM','12:30PM','12:45PM','1PM','1:15PM','1:30PM','1:45PM','2PM','2:15PM','2:30PM','2:45PM','3PM','3:15PM','3:30PM','3:45PM','4PM','4:15PM','4:30PM','4:45PM','5PM','5:15PM','5:30PM','5:45PM','6PM','6:15PM','6:30PM','6:45PM','7PM','7:15PM','7:30PM','7:45PM','8PM','8:15PM','8:30PM','8:45PM','9PM','9:15PM','9:30PM','9:45PM','10PM','10:15PM','10:30PM','10:45PM','11PM','11:15PM','11:30PM','11:45PM'];for(var i2=0;i2<dataListEnergy.length;i2++){var seriesItem2={};seriesItem2.name=dataListEnergy[i2].devicename;seriesItem2.data=[];seriesItem2.zIndex=i2;if(dataListEnergy[i2].type=='energy'){seriesItem2.type='spline';seriesItem2.tooltip={valueSuffix:' kW'};seriesItem2.yAxis=1;seriesItem2.lineWidth=3;}else if(dataListEnergy[i2].type=='irradiance'){seriesItem2.type='spline';// seriesItem2.xAxis = 1;\n// seriesItem2.yAxis = 1;\nseriesItem2.lineWidth=3;seriesItem2.tooltip={valueSuffix:' kW'};seriesItem2.id='s1';seriesItem2.marker={radius:1.5};}// Put data energy\nvar dataModelEnergy2=dataListEnergy[i2].data_energy;var rowItem2=[];if(Libs.isArrayData(dataModelEnergy2)){for(var j2=0;j2<dataModelEnergy2.length;j2++){if(dataListEnergy[i2].type=='energy'){arrEnergy.push({\"ID\":i2+1+\"_\"+j2+1,\"DateTime\":dataModelEnergy2[j2].download_time,\"Device Name\":dataListEnergy[i2].export_devicename,\"Power (kW)\":dataModelEnergy2[j2].chart_energy_kwh});generationTotal=generationTotal+dataModelEnergy2[j2].chart_energy_kwh;}else{arrMeasure.push({\"ID\":i2+1+\"_\"+j2+1,\"DateTime\":dataModelEnergy2[j2].download_time,\"Device Name\":dataListEnergy[i2].export_devicename,\"Measured Irradiance (w/m2)\":dataModelEnergy2[j2].chart_energy_kwh});}rowItem2.push([dataModelEnergy2[j2].full_time,dataModelEnergy2[j2].chart_energy_kwh]);}if(dataModelEnergy2.length<96&&dataModelEnergy2.length>0){var lastDate2='';for(var izero2=dataModelEnergy2.length;izero2<96;izero2++){if(izero2==dataModelEnergy2.length){lastDate2=dataModelEnergy2[dataModelEnergy2.length-1].full_time;}if(lastDate2!=null){lastDate2=Libs.addMinutes(lastDate2,5);rowItem2.push([Libs.dateFormat(lastDate2,'YYYY-MM-DD HH:mm','YYYY-MM-DD HH:mm:ss'),0]);}}}}seriesItem2.data=rowItem2;series.push(seriesItem2);}break;default:curItem.tickInterval=2;categories=[];for(var i3=0;i3<dataListEnergy.length;i3++){var seriesItem3={};seriesItem3.name=dataListEnergy[i3].devicename;seriesItem3.data=[];seriesItem3.zIndex=i3;if(dataListEnergy[i3].type=='energy'){seriesItem3.type='spline';seriesItem3.tooltip={valueSuffix:' kW'};}else if(dataListEnergy[i3].type=='irradiance'){seriesItem3.type='spline';seriesItem3.xAxis=1;seriesItem3.yAxis=1;seriesItem3.lineWidth=3;seriesItem3.tooltip={valueSuffix:' kW'};seriesItem3.id='s1';seriesItem3.marker={radius:1.5};}// Put data energy\nvar dataModelEnergy3=dataListEnergy[i3].data_energy,rowItem3=[];if(Libs.isArrayData(dataModelEnergy3)){for(var j3=0;j3<dataModelEnergy3.length;j3++){categories.push([dataModelEnergy3[j3].categories_time]);if(dataListEnergy[i3].type=='energy'){arrEnergy.push({\"ID\":i3+1+\"_\"+j3+1,\"DateTime\":dataModelEnergy3[j3].download_time,\"Device Name\":dataListEnergy[i3].export_devicename,\"Power (kW)\":dataModelEnergy3[j3].chart_energy_kwh});generationTotal=generationTotal+dataModelEnergy3[j3].chart_energy_kwh;}else{arrMeasure.push({\"ID\":i3+1+\"_\"+j3+1,\"DateTime\":dataModelEnergy3[j3].download_time,\"Device Name\":dataListEnergy[i3].export_devicename,\"Measured Irradiance (w/m2)\":dataModelEnergy3[j3].chart_energy_kwh});}rowItem3.push([dataModelEnergy3[j3].full_time,dataModelEnergy3[j3].chart_energy_kwh]);}if(chartParams.id_filter=='today'&&dataModelEnergy3.length<24){for(var izero3=dataModelEnergy3.length;izero3<24;izero3++){if(izero3<=11){categories.push([izero3+\"AM\"]);rowItem3.push([izero3+\"AM\",0]);}else{var pm=null;if(izero3<12){pm=izero3;}else if(izero3==12){pm=izero3;}else{pm=izero3-12;}rowItem3.push([pm+\"PM\",0]);categories.push([pm+\"PM\"]);}}}}seriesItem3.data=rowItem3;series.push(seriesItem3);}break;}}else{curItem.tickInterval=1;categories=[];for(var i4=0;i4<dataListEnergy.length;i4++){var seriesItem4={};seriesItem4.name=dataListEnergy[i4].devicename;seriesItem4.data=[];seriesItem4.zIndex=i4;if(dataListEnergy[i4].type=='energy'){seriesItem4.type='spline';seriesItem4.tooltip={valueSuffix:' kW'};}else if(dataListEnergy[i4].type=='irradiance'){seriesItem4.type='spline';seriesItem4.xAxis=1;seriesItem4.yAxis=1;seriesItem4.lineWidth=3;seriesItem4.tooltip={valueSuffix:' kW'};seriesItem4.id='s1';seriesItem4.marker={radius:1.5};}// Put data energy\nvar dataModelEnergy4=dataListEnergy[i4].data_energy;var rowItem4=[];if(Libs.isArrayData(dataModelEnergy4)){for(var j4=0;j4<dataModelEnergy4.length;j4++){categories.push([dataModelEnergy4[j4].categories_time]);if(dataListEnergy[i4].type=='energy'){arrEnergy.push({\"ID\":i4+1+\"_\"+j4+1,\"DateTime\":dataModelEnergy4[j4].download_time,\"Device Name\":dataListEnergy[i4].export_devicename,\"Power (kW)\":dataModelEnergy4[j4].chart_energy_kwh});generationTotal=generationTotal+dataModelEnergy4[j4].chart_energy_kwh;}else{arrMeasure.push({\"ID\":i4+1+\"_\"+j4+1,\"DateTime\":dataModelEnergy4[j4].download_time,\"Device Name\":dataListEnergy[i4].export_devicename,\"Measured Irradiance (w/m2)\":dataModelEnergy4[j4].chart_energy_kwh});}rowItem4.push([dataModelEnergy4[j4].full_time,dataModelEnergy4[j4].chart_energy_kwh]);}if(chartParams.id_filter=='today'&&dataModelEnergy4.length<24){for(var izero4=dataModelEnergy4.length;izero4<24;izero4++){if(izero4<=11){categories.push([izero4+\"AM\"]);rowItem4.push([izero4+\"AM\",0]);}else{var pm4=null;if(izero3<12){pm4=izero4;}else if(izero4==12){pm4=izero4;}else{pm4=izero4-12;}rowItem4.push([pm4+\"PM\",0]);categories.push([pm4+\"PM\"]);}}}}seriesItem4.data=rowItem4;series.push(seriesItem4);}}curItem.generation_total=generationTotal;curItem.lastUpdated=lastUpdated;self.setState({dataCategories:categories,dataEnergy:dataEnergy,dataIrradiance:dataIrradiance,curItem:curItem,dataEnergyExport:arrEnergy,dataMeasureExport:arrMeasure,series:series},function(){self.loadChartOption();});}});}},{key:\"loadChartOption\",value:function loadChartOption(){var clientHeight=this.myRef.current.clientHeight;var chartOption={credits:{enabled:false},exporting:{enabled:true},title:{text:null},chart:{type:'column',// height: window.innerWidth <= 1024 ? 300 : null\nheight:clientHeight?clientHeight-15:null},legend:{layout:'horizontal',align:'center',verticalAlign:'bottom',borderWidth:0,showInLegend:false},colors:['#82cdff','#f2ae1b','#1e477f','#e68600','#00b767','#ffc300'],xAxis:[{title:{text:\"Power\",enabled:false},alignTicks:true,gridLineWidth:1,tickInterval:this.state.curItem.tickInterval,visible:true,categories:this.state.dataCategories},{title:{text:'Data',enabled:false},tickInterval:1,opposite:true,visible:false}],yAxis:[{min:0,title:{text:'kW',enabled:true},lineWidth:1,gridLineWidth:1,labels:{enabled:true}},{title:{text:'Watts/meter²',enabled:false},lineWidth:1,opposite:true,gridLineWidth:1,labels:{enabled:false}}],plotOptions:{column:{stacking:'normal'}},tooltip:{shared:false,crosshairs:true},series:this.state.series};this.setState({chartOption:chartOption});}},{key:\"onClickNext\",value:function onClickNext(){var chartParams=this.state.chartParams,self=this;var showNextBtn=chartParams.showNextBtn;var compareDate=Libs.compareDate(Libs.addDays(chartParams.end_date,1),'MM/DD/YYYY',chartParams.current_time);switch(chartParams.id_filter){case'today':if(compareDate>=0){showNextBtn=false;chartParams.end_date=Libs.addDays(chartParams.end_date,1);chartParams.start_date=chartParams.end_date;}else{chartParams.end_date=Libs.addDays(chartParams.end_date,1);chartParams.start_date=chartParams.end_date;showNextBtn=true;}break;case'this_month':var tcurrent=new Date(chartParams.end_date);var ycurrent=tcurrent.getFullYear(),mcurrent=tcurrent.getMonth();if(compareDate>0){showNextBtn=false;chartParams.end_date=Libs.getCurrentMMDDYYYYHI();chartParams.start_date=moment(new Date(ycurrent,mcurrent,1)).format('MM/DD/YYYY HH:mm');}else{chartParams.end_date=moment(Libs.addMonths(new Date(ycurrent,mcurrent,1),1)).endOf('month').format('MM/DD/YYYY HH:mm');chartParams.start_date=moment(Libs.addMonths(new Date(ycurrent,mcurrent,1),1)).format('MM/DD/YYYY HH:mm');showNextBtn=true;}break;case'last_month':var tc=new Date(Libs.getCurrentMMDDYYYYHI());var yc=tc.getFullYear(),mc=tc.getMonth();if(moment(chartParams.current_time).format('MM/YYYY')==moment(chartParams.end_date).format('MM/YYYY')){showNextBtn=false;chartParams.end_date=moment(Libs.addMonths(new Date(yc,mc,1),-1)).endOf('month').format('MM/DD/YYYY HH:mm');chartParams.start_date=moment(Libs.addMonths(new Date(yc,mc,1),-1)).format('MM/DD/YYYY HH:mm');}else{var tlast=new Date(chartParams.end_date);var ylast=tlast.getFullYear(),mlast=tlast.getMonth();chartParams.end_date=moment(Libs.addMonths(new Date(ylast,mlast,1),1)).endOf('month').format('MM/DD/YYYY HH:mm');chartParams.start_date=moment(Libs.addMonths(new Date(ylast,mlast,1),1)).format('MM/DD/YYYY HH:mm');showNextBtn=true;}break;case'12_month':var tstart=new Date(chartParams.end_date);var ystart=tstart.getFullYear(),mstart=tstart.getMonth();var compareEndDate=moment(Libs.addMonths(new Date(ystart,mstart,1),12)).format('YYYY');if(moment(chartParams.current_time).format('YYYY')<=compareEndDate){chartParams.end_date=Libs.getCurrentMMDDYYYYHI();var tn=new Date(chartParams.end_date);var yn=tn.getFullYear(),mn=tn.getMonth();chartParams.start_date=moment(Libs.addMonths(new Date(yn,mn,1),-12)).format('MM/DD/YYYY HH:mm');showNextBtn=false;}else{var te=new Date(chartParams.end_date);var ye=te.getFullYear(),me=te.getMonth();chartParams.end_date=moment(Libs.addMonths(new Date(ye,me,1),12)).endOf('month').format('MM/DD/YYYY HH:mm');var ts=new Date(chartParams.start_date);var ys=ts.getFullYear(),ms=ts.getMonth();chartParams.start_date=moment(Libs.addMonths(new Date(ys,ms,1),12)).format('MM/DD/YYYY HH:mm');showNextBtn=true;}break;}chartParams.showNextBtn=showNextBtn;this.setState({chartParams:chartParams},function(){//   self.getDataChart();\n});}},{key:\"onClickPrev\",value:function onClickPrev(){var self=this;var chartParams=this.state.chartParams;chartParams.showNextBtn=true;var t=new Date(chartParams.end_date);var y=t.getFullYear(),m=t.getMonth();switch(chartParams.id_filter){case'today':chartParams.end_date=moment(Libs.addDays(chartParams.end_date,-1)).format('MM/DD/YYYY HH:mm:ss');chartParams.start_date=chartParams.end_date;break;case'last_month':case'this_month':chartParams.end_date=moment(Libs.addMonths(new Date(y,m,1),-1)).endOf('month').format('MM/DD/YYYY HH:mm');chartParams.start_date=moment(Libs.addMonths(new Date(y,m,1),-1)).format('MM/DD/YYYY HH:mm');break;case'12_month':chartParams.end_date=moment(Libs.addMonths(new Date(y,m,1),-12)).endOf('month').format('MM/DD/YYYY HH:mm');var tstart=new Date(chartParams.start_date);var ystart=tstart.getFullYear(),mstart=tstart.getMonth();chartParams.start_date=moment(Libs.addMonths(new Date(ystart,mstart,1),-12)).format('MM/DD/YYYY HH:mm');break;}this.setState({chartParams:chartParams},function(){//   self.getDataChart();\n});}},{key:\"getList\",value:/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */function getList(){var self=this;var params=this.state.searchParam;params.id_language=this.employee.id_language;params.id_company=this.employee.id_company;// AnalyticsService.instance.getList(params, (data, total_row) => {\n//     if (Libs.isArrayData(data)) {\n//         self.setState({\n//             dataList: data\n//         });\n//         var total = parseInt(total_row / self.state.searchParam.limit);\n//         if (total_row % self.state.searchParam.limit > 0) {\n//             total = total + 1;\n//         }\n//         self.paging.total = total;\n//         self.paging.current = self.state.searchParam.index;\n//         self.paging.currentInput = self.state.searchParam.index;\n//         self.state.total_row = total_row;\n//     } else {\n//         self.setState({\n//             dataList: [],\n//             total_row: 0\n//         });\n//         self.paging.total = 0;\n//         self.paging.current = 1;\n//         self.paging.currentInput = 1;\n//     }\n//     self.forceUpdate();\n// });\n}},{key:\"inputChangedHandler\",value:function inputChangedHandler(event){var self=this;var target=event.target;var name=target.name;var value=target.value;if(name==='current'){if(!Libs.isBlank(value)){var t=this.props.t;if(!Libs.isNumber(value)){self.toast(t('common.page_is_number'),\"error\");return;}}self.paging.currentInput=value;self.forceUpdate();}if(name==='limit'){var searchParam=this.state.searchParam;searchParam.limit=value;this.setState({searchParam:searchParam},function(){self.getList();});}}},{key:\"inputChangedEnter\",value:function inputChangedEnter(event){var self=this;if(event.key==='Enter'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}},{key:\"inputChangedBlue\",value:function inputChangedBlue(event){var self=this;var target=event.target;var name=target.name;if(name==='current'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}/**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onSelectPage\",value:function onSelectPage(index){var self=this;self.state.searchParam.index=index;if(index>0){self.state.searchParam.offset=(index-1)*self.state.searchParam.limit;}else{self.state.searchParam.offset=0;}self.getList();}/**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onClickReload\",value:function onClickReload(){var self=this;self.getList();}/**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */},{key:\"onSort\",value:function onSort(event,sortKey){this.state.searchParam.sort_column=sortKey;this.state.searchParam.order_by=this.state.searchParam.order_by===''||this.state.searchParam.order_by==='asc'?'desc':'asc';this.getList();}/**\n      * @description Call form search\n      * @author Long.Pham 12/05/2021\n      */},{key:\"onSearch\",value:function onSearch(){var formSearch=this.state.formSearch===false?true:false;this.setState({formSearch:formSearch});}},{key:\"onResetSearch\",value:function onResetSearch(){var self=this;var searchParam=this.state.searchParam;searchParam.name=null;searchParam.id=null;searchParam.index=1;searchParam.offset=0;self.paging.current=1;self.paging.currentInput=1;self.paging.total=1;self.setState({searchParam:searchParam},function(){self.getList();});}/**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */},{key:\"handleSearch\",value:function handleSearch(){this.getList();}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return ChartDeviceDiagnostics;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(ChartDeviceDiagnostics);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/views/desktop/ModuleProject/Analytics/ChartDeviceDiagnostics/ChartDeviceDiagnostics.js"],"names":["React","ChartDeviceDiagnosticsJsx","BaseComponent","Libs","withTranslation","Constants","ChartsDiagnosticsService","moment","ChartDeviceDiagnostics","props","context","handleDropdownChange","item","name","self","curItem","state","isObjectEmpty","statype_diagnosticsus","type_string_index","value","setState","handleClickOutside","event","target","chartParams","isBlank","wrapperRef","current","contains","show_filter","onClickShowFilter","onClickFilter","dataFilter","isArrayData","find","id_filter","id","text_filter","text","showNextBtn","start_date","getCurrentMMDDYYYYHI","end_date","commissioning","format","t","Date","y","getFullYear","m","getMonth","tlast","ylast","mlast","addMonths","endOf","changeViewMinute","data_send_time","onClickAdd","data","allLanguage","screen_mode","SCREEN_MODE","ADD","tabActive","map","language","index","is_default","iso_code","id_language","description","push","add","onClickCloseAdd","status","getList","onClickCloseDelete","delete","onItemClick","dataList","params","id_company","onStatusChange","EDIT","employee","isActiveUpdate","updated_by","first_name","last_name","onItemClickDelete","type","type_diagnostics","dataDevice","is_active","dataDiagnostics","label","dataStringIndex","searchParam","limit","COMMON","LIMIT","offset","languages","id_site","current_time","paging","total","currentInput","jsxTemplate","inputChangedHandler","bind","inputChangedEnter","inputChangedBlue","createRef","myRef","document","addEventListener","getDataChart","convertAllFormatDate","dateFormat","id_customer","customer_type","user","filterBy","id_site_type","setup_send_time","typeView","instance","dataListEnergy","energy","dataIrradiance","dataEnergy","categories","arrEnergy","arrMeasure","generationTotal","series","lastUpdated","tickInterval","i1","length","seriesItem","devicename","zIndex","tooltip","valueSuffix","lineWidth","marker","radius","xAxis","yAxis","dataModelEnergy","data_energy","rowItem","j1","download_time","export_devicename","chart_energy_kwh","full_time","lastDate","izero1","addMinutes","i2","seriesItem2","dataModelEnergy2","rowItem2","j2","lastDate2","izero2","i3","seriesItem3","dataModelEnergy3","rowItem3","j3","categories_time","izero3","pm","i4","seriesItem4","dataModelEnergy4","rowItem4","j4","izero4","pm4","generation_total","dataCategories","dataEnergyExport","dataMeasureExport","loadChartOption","clientHeight","chartOption","credits","enabled","exporting","title","chart","height","legend","layout","align","verticalAlign","borderWidth","showInLegend","colors","alignTicks","gridLineWidth","visible","opposite","min","labels","plotOptions","column","stacking","shared","crosshairs","compareDate","addDays","tcurrent","ycurrent","mcurrent","tc","yc","mc","tstart","ystart","mstart","compareEndDate","tn","yn","mn","te","ye","me","ts","ys","ms","isNumber","toast","forceUpdate","key","parseInt","onSelectPage","sortKey","sort_column","order_by","formSearch","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ChartDeviceDiagnosticsJsx from './ChartDeviceDiagnostics.jsx';\nimport BaseComponent from '../../../../../BaseComponent';\nimport Libs from '../../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../../utils/Constants';\nimport ChartsDiagnosticsService from '../../../../../../services/ChartsDiagnosticsService';\n\nimport moment from 'moment';\nclass ChartDeviceDiagnostics extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n\n        this.state = {\n            curItem: {\n                data_send_time: 1,\n                type: 2,\n                type_diagnostics: 2,\n                type_string_index: 1\n            },\n\n            dataDevice: [\n                {\n                    id: 1,\n                    name: \"Satcon PVS-375 Inverter\",\n                    is_active: 0,\n                },\n                {\n                    id: 2,\n                    name: \"Shark 100\",\n                    is_active: 0\n                },\n                {\n                    id: 3,\n                    name: \"Inverter 1\",\n                    is_active: 0,\n                }\n            ],\n\n            dataDiagnostics: [\n                {\n                    id: 1,\n                    value: 1,\n                    label: \"AC Output\"\n                },\n                {\n                    id: 2,\n                    value: 2,\n                    label: \"DC Input\"\n                },\n                {\n                    id: 3,\n                    value: 3,\n                    label: \"DC Input Channel\"\n                }\n            ],\n\n            dataStringIndex: [\n                {\n                    id: 1,\n                    value: 1,\n                    label: \"Power\"\n                },\n                {\n                    id: 2,\n                    value: 2,\n                    label: \"Voltage\"\n                },\n                {\n                    id: 3,\n                    value: 3,\n                    label: \"Current\"\n                }\n            ],\n\n            dataList: [],\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n            },\n            allLanguage: Libs.isBlank(this.employee) ? [] : this.employee.languages,\n\n            dataFilter: [\n                { id: \"today\", text: \"Today\" },\n                { id: \"this_month\", text: \"This month\" },\n                { id: \"last_month\", text: \"Last month\" },\n                { id: \"12_month\", text: \"Last 12 months\" },\n                { id: \"lifetime\", text: \"Lifetime\" }\n            ],\n\n            chartParams: {\n                id_site: null,\n                id_filter: 'today',\n                text_filter: 'Today',\n                show_filter: false,\n                showNextBtn: false,\n                current_time: Libs.getCurrentMMDDYYYYHI(),\n                end_date: Libs.getCurrentMMDDYYYYHI(),\n                start_date: Libs.getCurrentMMDDYYYYHI(),\n                data_send_time: 2\n            },\n        };\n\n        this.paging = {\n            total: 0,\n            current: 1,\n            currentInput: 1\n        };\n\n        this.jsxTemplate = ChartDeviceDiagnosticsJsx;\n\n        this.inputChangedHandler = this.inputChangedHandler.bind(this);\n        this.inputChangedEnter = this.inputChangedEnter.bind(this);\n        this.inputChangedBlue = this.inputChangedBlue.bind(this);\n        this.wrapperRef = React.createRef();\n        this.myRef = React.createRef();\n\n    }\n\n    componentDidMount() {\n        \n        // this.getList();\n        document.addEventListener('click', this.handleClickOutside);\n        this.getDataChart();\n        // this.showHeaderMenuProject(true);\n\n        // if (typeof this.props.parent.reloadHeaderShops == 'function') {\n        //     // this.props.parent.showHeaderShops(false);\n        // }\n        // this.forceUpdate();\n    }\n    componentWillUnmount() {\n        // document.removeEventListener('click', this.handleClickOutside)\n    }\n\n    handleDropdownChange = (item, name) => {\n        var self = this;\n        let curItem = self.state.curItem;\n\n        if (Libs.isObjectEmpty(item) && name == 'statype_diagnosticsus') {\n            curItem.statype_diagnosticsus = '';\n        } else if(Libs.isObjectEmpty(item) && name == 'type_string_index'){\n            curItem.type_string_index = '';\n        } else {\n            var value = item.value;\n            curItem[name] = value;\n        }\n\n        self.setState({\n            curItem: curItem\n        });\n    }\n\n    // showFilterParameter = () => {\n    //     this.setState({\n    //         show_parameter: true\n    //     });\n    // }\n\n\n    // addFilterParameter = () => {\n    //     this.setState({\n    //         show_parameter: false\n    //     });\n    // }\n\n    // closeFilterParameter = () => {\n    //     this.setState({\n    //         show_parameter: false\n    //     });\n    // }\n\n    // clearFilterParameter = () => {\n    //     var { dataParameter } = this.state;\n    //     if (!Libs.isArrayData(dataParameter)) return;\n\n    //     dataParameter.map((item, index) => {\n    //         dataParameter[index].is_active = 0;\n    //     });\n\n    //     this.setState({\n    //         dataParameter: dataParameter\n    //     });\n    // }\n\n    // handleParameterInputChange = (e, index, k) => {\n    //     var { dataParameter } = this.state;\n\n\n    //     if (!Libs.isArrayData(dataParameter)) return;\n    //     var item = dataParameter[index];\n    //     if (Libs.isObjectEmpty(item)) return;\n    //     var childs = item.dataParameter;\n    //     if (!Libs.isArrayData(childs)) return;\n\n        \n\n    //     // childs[k].is_active = childs[k].is_active ? 0 : 1;\n\n    //     dataParameter[index].dataParameter[k].is_active = dataParameter[index].dataParameter[k].is_active ? 0 : 1;\n    //     // dataParameter[index].dataParameter = childs;\n    //     this.setState({\n    //         dataParameter: dataParameter\n    //     });\n    // }\n\n    // handleDeviceInputChange = (e, index) => {\n    //     var { dataDevice, dataParameter } = this.state;\n    //     if (!Libs.isArrayData(dataDevice)) return;\n    //     var item = dataDevice[index];\n    //     if (Libs.isObjectEmpty(item)) return;\n    //     if (dataDevice[index].is_active) {\n    //         dataDevice[index].is_active = 0;\n    //         if (Libs.isArrayData(dataParameter)) {\n    //             for (var i = 0, len = dataParameter.length; i < len; i++) {\n    //                 if (dataParameter[i].id == item.id) {\n    //                     dataParameter.splice(i, 1);\n    //                 }\n    //             }\n    //         }\n    //     } else {\n    //         dataDevice[index].is_active = 1;\n    //         dataParameter.push(item);\n    //     }\n\n\n    //     this.setState({\n    //         dataDevice: dataDevice,\n    //         dataParameter: dataParameter,\n    //         show_parameter: true\n    //     });\n    // }\n\n    /**\n   * Get chart data\n   * @author long.pham 2020-12-03\n   * @param id_site, id_customer\n   * @return Object\n   */\n    getDataChart() {\n        var { chartParams, curItem } = this.state, self = this;\n\n        if (Libs.isObjectEmpty(chartParams)) return;\n\n        var params = {};\n        params.start_date = Libs.convertAllFormatDate(Libs.dateFormat(chartParams.start_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\") + \" 00:00:00\");\n        if (Libs.dateFormat(chartParams.current_time, \"MM/DD/YYYY\", \"MM/DD/YYYY\") == Libs.dateFormat(chartParams.end_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\")) {\n            params.end_date = Libs.convertAllFormatDate(chartParams.end_date); // '2020-11-01 23:59:59';\n        } else {\n            params.end_date = Libs.convertAllFormatDate(Libs.dateFormat(chartParams.end_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\") + \" 23:59:59\");\n        }\n\n\n        // params.start_date = '2021-08-09 00:00:00';\n        // params.end_date = '2021-08-09 23:59:59';\n        params.id_site = curItem.id;\n        params.id_customer = curItem.id_customer;\n        params.customer_type = !Libs.isBlank(this.user) ? this.user.customer_type : null;\n        // params.offset_timezone = Libs.getOffsetTimeZone(chartParams.end_date);\n        // params.offset_timezone = '-08:00';\n        params.filterBy = chartParams.id_filter;\n        // params.format_sql_long = Constants.DATE_FORMAT.format_sql_long;\n        params.id_site_type = curItem.id_site_type;\n        params.setup_send_time = curItem.data_send_time;\n        // Use only for lifetime\n        params.typeView = (moment(curItem.commissioning).format('YYYY') - moment(chartParams.end_date).format('YYYY')) > 3 ? null : 'month';\n        params.data_send_time = chartParams.data_send_time;\n        ChartsDiagnosticsService.instance.getDataChart(params, (data) => {\n            if (!Libs.isObjectEmpty(data)) {\n                var dataListEnergy = data.energy;\n                var dataIrradiance = [], dataEnergy = [], categories = [], arrEnergy = [], arrMeasure = [];\n                var generationTotal = 0, series = [], lastUpdated = moment().format('LLL');\n                if (params.filterBy == 'today') {\n                    switch (chartParams.data_send_time) {\n                        case 1:\n                            curItem.tickInterval = 24;\n                            categories = [\n                                '0AM', '0:05 AM', '0:10 AM', '0:15 AM', '0:20 AM', '0:25 AM', '0:30 AM', '0:35 AM', '0:40 AM', '0:45 AM', '0:50 AM', '0:55 AM',\n                                '1AM', '1:05 AM', '1:10 AM', '1:15 AM', '1:20 AM', '1:25 AM', '1:30 AM', '1:35 AM', '1:40 AM', '1:45 AM', '1:50 AM', '1:55 AM',\n                                '2AM', '2:05 AM', '2:10 AM', '2:15 AM', '2:20 AM', '2:25 AM', '2:30 AM', '2:35 AM', '2:40 AM', '2:45 AM', '2:50 AM', '2:55 AM',\n                                '3AM', '3:05 AM', '3:10 AM', '3:15 AM', '3:20 AM', '3:25 AM', '3:30 AM', '3:35 AM', '3:40 AM', '3:45 AM', '3:50 AM', '3:55 AM',\n                                '4AM', '4:05 AM', '4:10 AM', '4:15 AM', '4:20 AM', '4:25 AM', '4:30 AM', '4:35 AM', '4:40 AM', '4:45 AM', '4:50 AM', '4:55 AM',\n                                '5AM', '5:05 AM', '5:10 AM', '5:15 AM', '5:20 AM', '5:25 AM', '5:30 AM', '5:35 AM', '5:40 AM', '5:45 AM', '5:50 AM', '5:55 AM',\n                                '6AM', '6:05 AM', '6:10 AM', '6:15 AM', '6:20 AM', '6:25 AM', '6:30 AM', '6:35 AM', '6:40 AM', '6:45 AM', '6:50 AM', '6:55 AM',\n                                '7AM', '7:05 AM', '7:10 AM', '7:15 AM', '7:20 AM', '7:25 AM', '7:30 AM', '7:35 AM', '7:40 AM', '7:45 AM', '7:50 AM', '7:55 AM',\n                                '8AM', '8:05 AM', '8:10 AM', '8:15 AM', '8:20 AM', '8:25 AM', '8:30 AM', '8:35 AM', '8:40 AM', '8:45 AM', '8:50 AM', '8:55 AM',\n                                '9AM', '9:05 AM', '9:10 AM', '9:15 AM', '9:20 AM', '9:25 AM', '9:30 AM', '9:35 AM', '9:40 AM', '9:45 AM', '9:50 AM', '9:55 AM',\n                                '10AM', '10:05 AM', '10:10 AM', '10:15 AM', '10:20 AM', '10:25 AM', '10:30 AM', '10:35 AM', '10:40 AM', '10:45 AM', '10:50 AM', '10:55 AM',\n                                '11AM', '11:05 AM', '11:10 AM', '11:15 AM', '11:20 AM', '11:25 AM', '11:30 AM', '11:35 AM', '11:40 AM', '11:45 AM', '11:50 AM', '11:55 AM',\n                                '12PM', '12:05 PM', '12:10 PM', '12:15 PM', '12:20 PM', '12:25 PM', '12:30 PM', '12:35 PM', '12:40 PM', '12:45 PM', '12:50 PM', '12:55 PM',\n                                '1PM', '1:05 PM', '1:10 PM', '1:15 PM', '1:20 PM', '1:25 PM', '1:30 PM', '1:35 PM', '1:40 PM', '1:45 PM', '1:50 PM', '1:55 PM',\n                                '2PM', '2:05 PM', '2:10 PM', '2:15 PM', '2:20 PM', '2:25 PM', '2:30 PM', '2:35 PM', '2:40 PM', '2:45 PM', '2:50 PM', '2:55 PM',\n                                '3PM', '3:05 PM', '3:10 PM', '3:15 PM', '3:20 PM', '3:25 PM', '3:30 PM', '3:35 PM', '3:40 PM', '3:45 PM', '3:50 PM', '3:55 PM',\n                                '4PM', '4:05 PM', '4:10 PM', '4:15 PM', '4:20 PM', '4:25 PM', '4:30 PM', '4:35 PM', '4:40 PM', '4:45 PM', '4:50 PM', '4:55 PM',\n                                '5PM', '5:05 PM', '5:10 PM', '5:15 PM', '5:20 PM', '5:25 PM', '5:30 PM', '5:35 PM', '5:40 PM', '5:45 PM', '5:50 PM', '5:55 PM',\n                                '6PM', '6:05 PM', '6:10 PM', '6:15 PM', '6:20 PM', '6:25 PM', '6:30 PM', '6:35 PM', '6:40 PM', '6:45 PM', '6:50 PM', '6:55 PM',\n                                '7PM', '7:05 PM', '7:10 PM', '7:15 PM', '7:20 PM', '7:25 PM', '7:30 PM', '7:35 PM', '7:40 PM', '7:45 PM', '7:50 PM', '7:55 PM',\n                                '8PM', '8:05 PM', '8:10 PM', '8:15 PM', '8:20 PM', '8:25 PM', '8:30 PM', '8:35 PM', '8:40 PM', '8:45 PM', '8:50 PM', '8:55 PM',\n                                '9PM', '9:05 PM', '9:10 PM', '9:15 PM', '9:20 PM', '9:25 PM', '9:30 PM', '9:35 PM', '9:40 PM', '9:45 PM', '9:50 PM', '9:55 PM',\n                                '10PM', '10:05 PM', '10:10 PM', '10:15 PM', '10:20 PM', '10:25 PM', '10:30 PM', '10:35 PM', '10:40 PM', '10:45 PM', '10:50 PM', '10:55 PM',\n                                '11PM', '11:05 PM', '11:10 PM', '11:15 PM', '11:20 PM', '11:25 PM', '11:30 PM', '11:35 PM', '11:40 PM', '11:45 PM', '11:50 PM', '11:55 PM'\n                            ];\n\n                            for (var i1 = 0; i1 < dataListEnergy.length; i1++) {\n                                var seriesItem = {};\n                                seriesItem.name = dataListEnergy[i1].devicename;\n                                seriesItem.data = [];\n                                seriesItem.zIndex = i1;\n                                if (dataListEnergy[i1].type == 'energy') {\n                                    seriesItem.type = 'spline';\n                                    seriesItem.tooltip = {\n                                        valueSuffix: ' kW'\n                                    };\n                                    seriesItem.lineWidth = 3;\n                                    seriesItem.marker = {\n                                        radius: 1.5\n                                    };\n                                } else if (dataListEnergy[i1].type == 'irradiance') {\n                                    seriesItem.type = 'spline';\n                                    seriesItem.xAxis = 1;\n                                    seriesItem.yAxis = 1;\n                                    seriesItem.lineWidth = 3;\n                                    seriesItem.tooltip = {\n                                        valueSuffix: ' kW'\n                                    };\n                                    seriesItem.id = 's1';\n                                    seriesItem.marker = {\n                                        radius: 1.5\n                                    };\n\n                                }\n\n                                // Put data energy\n                                var dataModelEnergy = dataListEnergy[i1].data_energy;\n                                var rowItem = [];\n                                if (Libs.isArrayData(dataModelEnergy)) {\n                                    for (var j1 = 0; j1 < dataModelEnergy.length; j1++) {\n\n                                        if (dataListEnergy[i1].type == 'energy') {\n                                            arrEnergy.push({\n                                                \"ID\": i1 + 1 + \"_\" + j1 + 1,\n                                                \"DateTime\": dataModelEnergy[j1].download_time,\n                                                \"Device Name\": dataListEnergy[i1].export_devicename,\n                                                \"Power (kW)\": dataModelEnergy[j1].chart_energy_kwh\n                                            });\n                                            generationTotal = generationTotal + dataModelEnergy[j1].chart_energy_kwh;\n                                        } else {\n                                            arrMeasure.push({\n                                                \"ID\": i1 + 1 + \"_\" + j1 + 1,\n                                                \"DateTime\": dataModelEnergy[j1].download_time,\n                                                \"Device Name\": dataListEnergy[i1].export_devicename,\n                                                \"Measured Irradiance (w/m2)\": dataModelEnergy[j1].chart_energy_kwh\n                                            });\n                                        }\n\n                                        rowItem.push([dataModelEnergy[j1].full_time, dataModelEnergy[j1].chart_energy_kwh]);\n                                    }\n                                    if (dataModelEnergy.length < 288 && dataModelEnergy.length > 0) {\n                                        var lastDate = '';\n                                        for (var izero1 = dataModelEnergy.length; izero1 < 288; izero1++) {\n                                            if (izero1 == dataModelEnergy.length) { lastDate = dataModelEnergy[dataModelEnergy.length - 1].full_time; }\n                                            if (lastDate != null) {\n                                                lastDate = Libs.addMinutes(lastDate, 5);\n                                                rowItem.push([Libs.dateFormat(lastDate, 'YYYY-MM-DD HH:mm', 'YYYY-MM-DD HH:mm:ss'), 0]);\n                                            }\n                                        }\n                                    }\n                                }\n\n                                seriesItem.data = rowItem;\n                                series.push(seriesItem);\n                            }\n\n                            break;\n                        case 2:\n                            curItem.tickInterval = 8;\n                            categories = [\n                                '0AM', '0:15AM', '0:30AM', '0:45AM',\n                                '1AM', '1:15AM', '1:30AM', '1:45AM',\n                                '2AM', '2:15AM', '2:30AM', '2:45AM',\n                                '3AM', '3:15AM', '3:30AM', '3:45AM',\n                                '4AM', '4:15AM', '4:30AM', '4:45AM',\n                                '5AM', '5:15AM', '5:30AM', '5:45AM',\n                                '6AM', '6:15AM', '6:30AM', '6:45AM',\n                                '7AM', '7:15AM', '7:30AM', '7:45AM',\n                                '8AM', '8:15AM', '8:30AM', '8:45AM',\n                                '9AM', '9:15AM', '9:30AM', '9:45AM',\n                                '10AM', '10:15AM', '10:30AM', '10:45AM',\n                                '11AM', '11:15AM', '11:30AM', '11:45AM',\n                                '12PM', '12:15PM', '12:30PM', '12:45PM',\n                                '1PM', '1:15PM', '1:30PM', '1:45PM',\n                                '2PM', '2:15PM', '2:30PM', '2:45PM',\n                                '3PM', '3:15PM', '3:30PM', '3:45PM',\n                                '4PM', '4:15PM', '4:30PM', '4:45PM',\n                                '5PM', '5:15PM', '5:30PM', '5:45PM',\n                                '6PM', '6:15PM', '6:30PM', '6:45PM',\n                                '7PM', '7:15PM', '7:30PM', '7:45PM',\n                                '8PM', '8:15PM', '8:30PM', '8:45PM',\n                                '9PM', '9:15PM', '9:30PM', '9:45PM',\n                                '10PM', '10:15PM', '10:30PM', '10:45PM',\n                                '11PM', '11:15PM', '11:30PM', '11:45PM',\n                            ];\n\n                            for (var i2 = 0; i2 < dataListEnergy.length; i2++) {\n                                var seriesItem2 = {};\n                                seriesItem2.name = dataListEnergy[i2].devicename;\n                                seriesItem2.data = [];\n                                seriesItem2.zIndex = i2;\n                                if (dataListEnergy[i2].type == 'energy') {\n                                    seriesItem2.type = 'spline';\n                                    seriesItem2.tooltip = {\n                                        valueSuffix: ' kW'\n                                    };\n                                    seriesItem2.yAxis = 1;\n                                    seriesItem2.lineWidth = 3;\n\n                                } else if (dataListEnergy[i2].type == 'irradiance') {\n                                    seriesItem2.type = 'spline';\n                                    // seriesItem2.xAxis = 1;\n                                    // seriesItem2.yAxis = 1;\n                                    seriesItem2.lineWidth = 3;\n                                    seriesItem2.tooltip = {\n                                        valueSuffix: ' kW'\n                                    };\n                                    seriesItem2.id = 's1';\n                                    seriesItem2.marker = {\n                                        radius: 1.5\n                                    };\n\n                                }\n\n                                // Put data energy\n                                var dataModelEnergy2 = dataListEnergy[i2].data_energy;\n\n                                var rowItem2 = [];\n                                if (Libs.isArrayData(dataModelEnergy2)) {\n                                    for (var j2 = 0; j2 < dataModelEnergy2.length; j2++) {\n\n                                        if (dataListEnergy[i2].type == 'energy') {\n                                            arrEnergy.push({\n                                                \"ID\": i2 + 1 + \"_\" + j2 + 1,\n                                                \"DateTime\": dataModelEnergy2[j2].download_time,\n                                                \"Device Name\": dataListEnergy[i2].export_devicename,\n                                                \"Power (kW)\": dataModelEnergy2[j2].chart_energy_kwh\n                                            });\n\n                                            generationTotal = generationTotal + dataModelEnergy2[j2].chart_energy_kwh;\n                                        } else {\n                                            arrMeasure.push({\n                                                \"ID\": i2 + 1 + \"_\" + j2 + 1,\n                                                \"DateTime\": dataModelEnergy2[j2].download_time,\n                                                \"Device Name\": dataListEnergy[i2].export_devicename,\n                                                \"Measured Irradiance (w/m2)\": dataModelEnergy2[j2].chart_energy_kwh\n                                            });\n                                        }\n\n                                        rowItem2.push([dataModelEnergy2[j2].full_time, dataModelEnergy2[j2].chart_energy_kwh]);\n                                    }\n\n                                    if (dataModelEnergy2.length < 96 && dataModelEnergy2.length > 0) {\n                                        var lastDate2 = '';\n                                        for (var izero2 = dataModelEnergy2.length; izero2 < 96; izero2++) {\n                                            if (izero2 == dataModelEnergy2.length) { lastDate2 = dataModelEnergy2[dataModelEnergy2.length - 1].full_time; }\n                                            if (lastDate2 != null) {\n                                                lastDate2 = Libs.addMinutes(lastDate2, 5);\n                                                rowItem2.push([Libs.dateFormat(lastDate2, 'YYYY-MM-DD HH:mm', 'YYYY-MM-DD HH:mm:ss'), 0]);\n                                            }\n                                        }\n                                    }\n                                }\n\n                                seriesItem2.data = rowItem2;\n                                series.push(seriesItem2);\n                            }\n\n                            break;\n                        default:\n                            curItem.tickInterval = 2;\n                            categories = [];\n                            for (var i3 = 0; i3 < dataListEnergy.length; i3++) {\n                                var seriesItem3 = {};\n                                seriesItem3.name = dataListEnergy[i3].devicename;\n                                seriesItem3.data = [];\n                                seriesItem3.zIndex = i3;\n                                if (dataListEnergy[i3].type == 'energy') {\n                                    seriesItem3.type = 'spline';\n                                    seriesItem3.tooltip = {\n                                        valueSuffix: ' kW'\n                                    };\n                                } else if (dataListEnergy[i3].type == 'irradiance') {\n                                    seriesItem3.type = 'spline';\n                                    seriesItem3.xAxis = 1;\n                                    seriesItem3.yAxis = 1;\n                                    seriesItem3.lineWidth = 3;\n                                    seriesItem3.tooltip = {\n                                        valueSuffix: ' kW'\n                                    };\n                                    seriesItem3.id = 's1';\n                                    seriesItem3.marker = {\n                                        radius: 1.5\n                                    };\n\n                                }\n\n                                // Put data energy\n                                var dataModelEnergy3 = dataListEnergy[i3].data_energy, rowItem3 = [];\n                                if (Libs.isArrayData(dataModelEnergy3)) {\n                                    for (var j3 = 0; j3 < dataModelEnergy3.length; j3++) {\n\n                                        categories.push([dataModelEnergy3[j3].categories_time]);\n                                        if (dataListEnergy[i3].type == 'energy') {\n                                            arrEnergy.push({\n                                                \"ID\": i3 + 1 + \"_\" + j3 + 1,\n                                                \"DateTime\": dataModelEnergy3[j3].download_time,\n                                                \"Device Name\": dataListEnergy[i3].export_devicename,\n                                                \"Power (kW)\": dataModelEnergy3[j3].chart_energy_kwh\n                                            });\n                                            generationTotal = generationTotal + dataModelEnergy3[j3].chart_energy_kwh;\n                                        } else {\n                                            arrMeasure.push({\n                                                \"ID\": i3 + 1 + \"_\" + j3 + 1,\n                                                \"DateTime\": dataModelEnergy3[j3].download_time,\n                                                \"Device Name\": dataListEnergy[i3].export_devicename,\n                                                \"Measured Irradiance (w/m2)\": dataModelEnergy3[j3].chart_energy_kwh\n                                            });\n                                        }\n\n                                        rowItem3.push([dataModelEnergy3[j3].full_time, dataModelEnergy3[j3].chart_energy_kwh]);\n                                    }\n                                    if (chartParams.id_filter == 'today' && dataModelEnergy3.length < 24) {\n                                        for (var izero3 = dataModelEnergy3.length; izero3 < 24; izero3++) {\n                                            if (izero3 <= 11) {\n                                                categories.push([izero3 + \"AM\"]);\n                                                rowItem3.push([izero3 + \"AM\", 0]);\n                                            } else {\n                                                var pm = null;\n                                                if (izero3 < 12) {\n                                                    pm = izero3;\n                                                } else if (izero3 == 12) {\n                                                    pm = (izero3);\n                                                } else {\n                                                    pm = izero3 - 12;\n                                                }\n                                                rowItem3.push([pm + \"PM\", 0]);\n                                                categories.push([pm + \"PM\"]);\n                                            }\n                                        }\n                                    }\n                                }\n\n                                seriesItem3.data = rowItem3;\n                                series.push(seriesItem3);\n                            }\n                            break;\n                    }\n                } else {\n                    curItem.tickInterval = 1;\n                    categories = [];\n\n                    for (var i4 = 0; i4 < dataListEnergy.length; i4++) {\n                        var seriesItem4 = {};\n                        seriesItem4.name = dataListEnergy[i4].devicename;\n                        seriesItem4.data = [];\n                        seriesItem4.zIndex = i4;\n                        if (dataListEnergy[i4].type == 'energy') {\n                            seriesItem4.type = 'spline';\n                            seriesItem4.tooltip = {\n                                valueSuffix: ' kW'\n                            };\n                        } else if (dataListEnergy[i4].type == 'irradiance') {\n                            seriesItem4.type = 'spline';\n                            seriesItem4.xAxis = 1;\n                            seriesItem4.yAxis = 1;\n                            seriesItem4.lineWidth = 3;\n                            seriesItem4.tooltip = {\n                                valueSuffix: ' kW'\n                            };\n                            seriesItem4.id = 's1';\n                            seriesItem4.marker = {\n                                radius: 1.5\n                            };\n\n                        }\n\n                        // Put data energy\n                        var dataModelEnergy4 = dataListEnergy[i4].data_energy;\n                        var rowItem4 = [];\n                        if (Libs.isArrayData(dataModelEnergy4)) {\n                            for (var j4 = 0; j4 < dataModelEnergy4.length; j4++) {\n                                categories.push([dataModelEnergy4[j4].categories_time]);\n                                if (dataListEnergy[i4].type == 'energy') {\n                                    arrEnergy.push({\n                                        \"ID\": i4 + 1 + \"_\" + j4 + 1,\n                                        \"DateTime\": dataModelEnergy4[j4].download_time,\n                                        \"Device Name\": dataListEnergy[i4].export_devicename,\n                                        \"Power (kW)\": dataModelEnergy4[j4].chart_energy_kwh\n                                    });\n\n                                    generationTotal = generationTotal + dataModelEnergy4[j4].chart_energy_kwh;\n                                } else {\n                                    arrMeasure.push({\n                                        \"ID\": i4 + 1 + \"_\" + j4 + 1,\n                                        \"DateTime\": dataModelEnergy4[j4].download_time,\n                                        \"Device Name\": dataListEnergy[i4].export_devicename,\n                                        \"Measured Irradiance (w/m2)\": dataModelEnergy4[j4].chart_energy_kwh\n                                    });\n                                }\n\n                                rowItem4.push([dataModelEnergy4[j4].full_time, dataModelEnergy4[j4].chart_energy_kwh]);\n                            }\n                            if (chartParams.id_filter == 'today' && dataModelEnergy4.length < 24) {\n                                for (var izero4 = dataModelEnergy4.length; izero4 < 24; izero4++) {\n                                    if (izero4 <= 11) {\n                                        categories.push([izero4 + \"AM\"]);\n                                        rowItem4.push([izero4 + \"AM\", 0]);\n                                    } else {\n                                        var pm4 = null;\n                                        if (izero3 < 12) {\n                                            pm4 = izero4;\n                                        } else if (izero4 == 12) {\n                                            pm4 = (izero4);\n                                        } else {\n                                            pm4 = izero4 - 12;\n                                        }\n                                        rowItem4.push([pm4 + \"PM\", 0]);\n                                        categories.push([pm4 + \"PM\"]);\n                                    }\n                                }\n                            }\n                        }\n\n                        seriesItem4.data = rowItem4;\n                        series.push(seriesItem4);\n                    }\n                }\n\n                curItem.generation_total = generationTotal;\n                curItem.lastUpdated = lastUpdated;\n                self.setState({\n                    dataCategories: categories,\n                    dataEnergy: dataEnergy,\n                    dataIrradiance: dataIrradiance,\n                    curItem: curItem,\n                    dataEnergyExport: arrEnergy,\n                    dataMeasureExport: arrMeasure,\n                    series: series\n                }, () => {\n                    self.loadChartOption();\n                });\n            }\n        });\n\n    }\n\n\n    loadChartOption() {\n        let { clientHeight } = this.myRef.current;\n        var chartOption = {\n            credits: { enabled: false },\n            exporting: { enabled: true },\n            title: { text: null },\n\n            chart: {\n                type: 'column',\n                // height: window.innerWidth <= 1024 ? 300 : null\n                height: clientHeight ? clientHeight - 15 : null\n            },\n            legend: {\n                layout: 'horizontal',\n                align: 'center',\n                verticalAlign: 'bottom',\n                borderWidth: 0,\n                showInLegend: false\n            },\n            colors: ['#82cdff', '#f2ae1b', '#1e477f', '#e68600', '#00b767', '#ffc300'],\n            xAxis: [\n                {\n                    title: { text: \"Power\", enabled: false },\n                    alignTicks: true,\n                    gridLineWidth: 1,\n                    tickInterval: this.state.curItem.tickInterval,\n                    visible: true,\n                    categories: this.state.dataCategories\n                },\n\n                {\n                    title: { text: 'Data', enabled: false },\n                    tickInterval: 1,\n                    opposite: true,\n                    visible: false,\n                },\n\n            ],\n\n            yAxis: [{\n                min: 0,\n                title: {\n                    text: 'kW',\n                    enabled: true\n                },\n                lineWidth: 1,\n                gridLineWidth: 1,\n                labels: {\n                    enabled: true\n                },\n            }, {\n                title: { text: 'Watts/meter²', enabled: false },\n                lineWidth: 1,\n                opposite: true,\n                gridLineWidth: 1,\n                labels: {\n                    enabled: false\n                },\n            }\n            ],\n\n            plotOptions: {\n                column: {\n                    stacking: 'normal'\n                },\n            },\n\n            tooltip: {\n                shared: false,\n                crosshairs: true\n            },\n            series: this.state.series\n        };\n\n        this.setState({ chartOption: chartOption });\n    }\n\n\n\n    onClickNext() {\n        var { chartParams } = this.state, self = this;\n        var showNextBtn = chartParams.showNextBtn;\n        var compareDate = Libs.compareDate(Libs.addDays(chartParams.end_date, 1), 'MM/DD/YYYY', chartParams.current_time);\n        switch (chartParams.id_filter) {\n            case 'today':\n                if (compareDate >= 0) {\n                    showNextBtn = false;\n                    chartParams.end_date = Libs.addDays(chartParams.end_date, 1);\n                    chartParams.start_date = chartParams.end_date;\n                } else {\n                    chartParams.end_date = Libs.addDays(chartParams.end_date, 1);\n                    chartParams.start_date = chartParams.end_date;\n                    showNextBtn = true;\n                }\n                break;\n\n            case 'this_month':\n                var tcurrent = new Date(chartParams.end_date);\n                var ycurrent = tcurrent.getFullYear(), mcurrent = tcurrent.getMonth();\n                if (compareDate > 0) {\n                    showNextBtn = false;\n                    chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n                    chartParams.start_date = moment(new Date(ycurrent, mcurrent, 1)).format('MM/DD/YYYY HH:mm');\n                } else {\n                    chartParams.end_date = moment(Libs.addMonths(new Date(ycurrent, mcurrent, 1), 1)).endOf('month').format('MM/DD/YYYY HH:mm');\n                    chartParams.start_date = moment(Libs.addMonths(new Date(ycurrent, mcurrent, 1), 1)).format('MM/DD/YYYY HH:mm');\n                    showNextBtn = true;\n                }\n\n                break;\n\n            case 'last_month':\n                var tc = new Date(Libs.getCurrentMMDDYYYYHI());\n                var yc = tc.getFullYear(), mc = tc.getMonth();\n\n                if (moment(chartParams.current_time).format('MM/YYYY') == moment(chartParams.end_date).format('MM/YYYY')) {\n                    showNextBtn = false;\n                    chartParams.end_date = moment(Libs.addMonths(new Date(yc, mc, 1), -1)).endOf('month').format('MM/DD/YYYY HH:mm');\n                    chartParams.start_date = moment(Libs.addMonths(new Date(yc, mc, 1), -1)).format('MM/DD/YYYY HH:mm');\n\n                } else {\n                    var tlast = new Date(chartParams.end_date);\n                    var ylast = tlast.getFullYear(), mlast = tlast.getMonth();\n                    chartParams.end_date = moment(Libs.addMonths(new Date(ylast, mlast, 1), 1)).endOf('month').format('MM/DD/YYYY HH:mm');\n                    chartParams.start_date = moment(Libs.addMonths(new Date(ylast, mlast, 1), 1)).format('MM/DD/YYYY HH:mm');\n                    showNextBtn = true;\n                }\n\n                break;\n\n\n            case '12_month':\n                var tstart = new Date(chartParams.end_date);\n                var ystart = tstart.getFullYear(), mstart = tstart.getMonth();\n                var compareEndDate = moment(Libs.addMonths(new Date(ystart, mstart, 1), 12)).format('YYYY');\n                if (moment(chartParams.current_time).format('YYYY') <= compareEndDate) {\n                    chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n\n                    var tn = new Date(chartParams.end_date);\n                    var yn = tn.getFullYear(), mn = tn.getMonth();\n                    chartParams.start_date = moment(Libs.addMonths(new Date(yn, mn, 1), -12)).format('MM/DD/YYYY HH:mm');\n                    showNextBtn = false;\n                } else {\n                    var te = new Date(chartParams.end_date);\n                    var ye = te.getFullYear(), me = te.getMonth();\n                    chartParams.end_date = moment(Libs.addMonths(new Date(ye, me, 1), 12)).endOf('month').format('MM/DD/YYYY HH:mm');\n                    var ts = new Date(chartParams.start_date);\n                    var ys = ts.getFullYear(), ms = ts.getMonth();\n                    chartParams.start_date = moment(Libs.addMonths(new Date(ys, ms, 1), 12)).format('MM/DD/YYYY HH:mm');\n                    showNextBtn = true;\n                }\n\n                break;\n        }\n        chartParams.showNextBtn = showNextBtn;\n        this.setState({\n            chartParams: chartParams\n        }, () => {\n            //   self.getDataChart();\n        })\n    }\n\n\n    onClickPrev() {\n        let self = this;\n        var { chartParams } = this.state;\n        chartParams.showNextBtn = true;\n        var t = new Date(chartParams.end_date);\n        var y = t.getFullYear(), m = t.getMonth();\n        switch (chartParams.id_filter) {\n            case 'today':\n                chartParams.end_date = moment(Libs.addDays(chartParams.end_date, -1)).format('MM/DD/YYYY HH:mm:ss');\n                chartParams.start_date = chartParams.end_date;\n                break;\n            case 'last_month':\n            case 'this_month':\n                chartParams.end_date = moment(Libs.addMonths(new Date(y, m, 1), -1)).endOf('month').format('MM/DD/YYYY HH:mm');\n                chartParams.start_date = moment(Libs.addMonths(new Date(y, m, 1), -1)).format('MM/DD/YYYY HH:mm');\n                break;\n            case '12_month':\n                chartParams.end_date = moment(Libs.addMonths(new Date(y, m, 1), -12)).endOf('month').format('MM/DD/YYYY HH:mm');\n                var tstart = new Date(chartParams.start_date);\n                var ystart = tstart.getFullYear(), mstart = tstart.getMonth();\n                chartParams.start_date = moment(Libs.addMonths(new Date(ystart, mstart, 1), -12)).format('MM/DD/YYYY HH:mm');\n                break;\n        }\n        this.setState({\n            chartParams: chartParams\n        }, () => {\n            //   self.getDataChart();\n        })\n    }\n\n    handleClickOutside = (event) => {\n        const { target } = event;\n        var { chartParams } = this.state, self = this;\n        if (!Libs.isBlank(this.wrapperRef.current) && !this.wrapperRef.current.contains(target)) {\n            if (chartParams.show_filter) {\n                chartParams.show_filter = false;\n                self.setState({\n                    chartParams: chartParams\n                })\n            }\n\n        }\n    }\n\n    onClickShowFilter = () => {\n        var { chartParams } = this.state;\n        chartParams.show_filter = true;\n        this.setState({\n            chartParams: chartParams\n        });\n    }\n\n    onClickFilter = (value) => {\n        var { chartParams, dataFilter, curItem } = this.state;\n        var self = this;\n        if (!Libs.isArrayData(dataFilter)) return;\n        var item = Libs.find(dataFilter, 'id', value);\n        if (Libs.isObjectEmpty(item)) return;\n\n        chartParams.id_filter = item.id;\n        chartParams.text_filter = item.text;\n        chartParams.show_filter = false;\n        chartParams.showNextBtn = false;\n\n        switch (value) {\n            case 'today':\n                chartParams.start_date = Libs.getCurrentMMDDYYYYHI();\n                chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n                break;\n            case 'lifetime':\n                chartParams.start_date = moment(curItem.commissioning).format('MM/DD/YYYY HH:mm:ss');\n                chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n                break;\n            case 'this_month':\n                chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n                var t = new Date(chartParams.end_date);\n                var y = t.getFullYear(), m = t.getMonth();\n                chartParams.start_date = moment(new Date(y, m, 1)).format('MM/DD/YYYY HH:mm');\n                break;\n            case 'last_month':\n                var tlast = new Date(Libs.getCurrentMMDDYYYYHI());\n                var ylast = tlast.getFullYear(), mlast = tlast.getMonth();\n                chartParams.end_date = moment(Libs.addMonths(new Date(ylast, mlast, 1), -1)).endOf('month').format('MM/DD/YYYY HH:mm');\n                chartParams.start_date = moment(Libs.addMonths(new Date(ylast, mlast, 1), -1)).format('MM/DD/YYYY HH:mm');\n                break;\n\n            case '12_month':\n                chartParams.start_date = moment(Libs.addMonths(Libs.getCurrentMMDDYYYYHI(), -12)).format('MM/DD/YYYY HH:mm:ss');\n                chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n                break;\n        }\n\n        this.setState({\n            chartParams: chartParams\n        }, () => {\n            // self.getDataChart();\n        });\n    }\n\n    changeViewMinute = (value) => {\n        var chartParams = this.state.chartParams, self = this;\n        if (Libs.isBlank(value)) return;\n        chartParams.data_send_time = value;\n        this.setState({ chartParams: chartParams }, () => {\n            // self.getDataChart();\n        });\n    }\n\n\n\n\n\n\n\n\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getList() {\n        let self = this;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        params.id_company = this.employee.id_company;\n        // AnalyticsService.instance.getList(params, (data, total_row) => {\n        //     if (Libs.isArrayData(data)) {\n        //         self.setState({\n        //             dataList: data\n        //         });\n\n        //         var total = parseInt(total_row / self.state.searchParam.limit);\n        //         if (total_row % self.state.searchParam.limit > 0) {\n        //             total = total + 1;\n        //         }\n        //         self.paging.total = total;\n        //         self.paging.current = self.state.searchParam.index;\n        //         self.paging.currentInput = self.state.searchParam.index;\n        //         self.state.total_row = total_row;\n\n        //     } else {\n        //         self.setState({\n        //             dataList: [],\n        //             total_row: 0\n        //         });\n        //         self.paging.total = 0;\n        //         self.paging.current = 1;\n        //         self.paging.currentInput = 1;\n        //     }\n        //     self.forceUpdate();\n        // });\n    }\n\n\n    onClickAdd = () => {\n        let curItem = this.state.curItem;\n        let data = [];\n        var allLanguage = this.state.allLanguage;\n        curItem.screen_mode = Constants.SCREEN_MODE.ADD;\n        curItem.tabActive = '';\n        allLanguage.map((language, index) => {\n            if (language.is_default === 1) { curItem.tabActive = language.is_default === 1 ? language.iso_code : ''; }\n            let item = {\n                is_default: language.is_default,\n                iso_code: language.iso_code,\n                id_language: language.id,\n                name: \"\",\n                description: \"\"\n            };\n            return data.push(item);\n        });\n\n        curItem.data = data;\n        this.setState({\n            curItem: curItem,\n            add: true\n        });\n\n    };\n\n    onClickCloseAdd = (status) => {\n        if (status) {\n            this.getList();\n        }\n        this.setState({\n            add: false\n        })\n    }\n\n    onClickCloseDelete = (status, data) => {\n        if (status && data) {\n            this.getList();\n        }\n        this.setState({\n            delete: false\n        })\n    }\n\n    /**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    onItemClick = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index], self = this;\n\n        var params = this.state.curItem;\n        params.id_company = item.id_company;\n        params.id = item.id;\n\n        // ChartDeviceDiagnosticsService.instance.getDetail(params, data => {\n        //     if (data) {\n        //         item.data = data.data;\n        //         item.screen_mode = Constants.SCREEN_MODE.EDIT;\n        //         let curTransItem = Libs.find(data.data,'is_default', 1);\n        //         if(Libs.isObjectEmpty(curTransItem)){ return false; }\n        //         item[\"name_\"+curTransItem.iso_code] = curTransItem.name;\n\n        //         if(Libs.isArrayData(data.data)){\n        //             var dataLang = data.data;\n        //             dataLang.map((row, index) => {\n        //                 if(row.is_default === 1){\n        //                     item.tabActive = row.iso_code;\n        //                 }\n        //                 return 1;\n        //             });\n        //         }\n\n        //         self.setState({\n        //             curItem: item,\n        //             add: true\n        //         });\n        //     }\n        // }, false);\n    }\n\n\n\n    /**\n     * @description Item click event change status\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    onStatusChange = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index], self = this;\n        item.screen_mode = Constants.SCREEN_MODE.EDIT;\n        item.id_company = this.employee.id_company;\n        item.id_language = this.employee.id_language;\n\n        var isActiveUpdate = item.status;\n        if (isActiveUpdate * 1 === 1) {\n            isActiveUpdate = 0;\n        }\n        else {\n            isActiveUpdate = 1;\n        }\n\n        item.status = isActiveUpdate;\n        item.updated_by = this.employee.first_name + ' ' + this.employee.last_name;\n\n        // ChartDeviceDiagnosticsService.instance.updateStatus(item, function (status, msg) {\n        //     if (status) {\n        //         self.setState({\n        //             dataList: self.state.dataList\n        //         });\n        //     }\n        // });\n    }\n\n    /**\n   * @description Item click event delete\n   * @author Long.Pham 12-05-2021\n   * @param index Order element in the list\n   */\n    onItemClickDelete = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index];\n        this.setState({\n            curItem: item,\n            delete: true\n        });\n    }\n\n\n    inputChangedHandler(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name === 'current') {\n            if (!Libs.isBlank(value)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(value)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            self.paging.currentInput = value;\n            self.forceUpdate();\n        }\n\n        if (name === 'limit') {\n            var { searchParam } = this.state;\n            searchParam.limit = value;\n            this.setState({\n                searchParam: searchParam\n            }, () => {\n                self.getList();\n            })\n        }\n    }\n\n    inputChangedEnter(event) {\n        let self = this;\n        if (event.key === 'Enter') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n    inputChangedBlue(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        if (name === 'current') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n\n    /**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onSelectPage(index) {\n        let self = this;\n        self.state.searchParam.index = index;\n\n        if (index > 0) {\n            self.state.searchParam.offset = (index - 1) * self.state.searchParam.limit;\n        } else {\n            self.state.searchParam.offset = 0;\n        }\n        self.getList();\n    }\n\n\n    /**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onClickReload() {\n        let self = this;\n        self.getList();\n    }\n\n\n    /**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */\n\n    onSort(event, sortKey) {\n        this.state.searchParam.sort_column = sortKey;\n        this.state.searchParam.order_by = (this.state.searchParam.order_by === '' || this.state.searchParam.order_by === 'asc') ? 'desc' : 'asc';\n        this.getList();\n    }\n\n    /**\n      * @description Call form search\n      * @author Long.Pham 12/05/2021\n      */\n    onSearch() {\n        let formSearch = (this.state.formSearch === false) ? true : false;\n        this.setState({\n            formSearch: formSearch\n        });\n    }\n\n    onResetSearch() {\n        let self = this;\n        let searchParam = this.state.searchParam;\n        searchParam.name = null;\n        searchParam.id = null;\n        searchParam.index = 1;\n        searchParam.offset = 0;\n        self.paging.current = 1;\n        self.paging.currentInput = 1;\n        self.paging.total = 1;\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            self.getList();\n        });\n    }\n\n    /**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */\n    handleSearch() {\n        this.getList();\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(ChartDeviceDiagnostics)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}