{"ast":null,"code":"/**\n * 随机数\n * @author ydr.me\n * @create 2014-10-30 19:03\n */\nvar number = require('./number.js');\n\nvar string = require('./string.js');\n\nvar allocation = require('./allocation.js');\n\nvar regExist = /[aA0]/g;\nvar dictionaryMap = {\n  a: 'abcdefghijklmnopqrstuvwxyz',\n  A: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n  0: '0123456789'\n};\nvar guidIndex = 0;\nvar lastGuidTime = 0;\n/**\n * 随机数字\n * @param [min=0] {Number} 最小值，默认0\n * @param [max=0] {Number} 最大值，默认0\n * @returns {Number}\n *\n * @example\n * random.number(1, 3);\n * // => 1 or 2 or 3\n */\n\nexports.number = function (min, max) {\n  var temp;\n  min = number.parseInt(min, 0);\n  max = number.parseInt(max, 0);\n\n  if (min === max) {\n    return min;\n  }\n\n  if (min > max) {\n    temp = min;\n    min = max;\n    max = temp;\n  }\n\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n/**\n * 随机字符串\n * @param [length=6] {Number} 随机字符串长度\n * @param [dictionary='aA0'] {String} 字典\n *\n * @example\n * // 字典对应关系\n * // a => a-z\n * // A => A-Z\n * // 0 => 0-9\n * // 其他字符\n * random.string(6, 'a');\n * // => abcdef\n * random.string(6, '!@#$%^&*()_+');\n * // => @*)&(^\n */\n\n\nexports.string = function (length, dictionary) {\n  var ret = '';\n  var pool = '';\n  var max;\n  length = Math.abs(number.parseInt(length, 6));\n  dictionary = String(dictionary || 'a');\n\n  if (dictionary.indexOf('a') > -1) {\n    pool += dictionaryMap.a;\n  }\n\n  if (dictionary.indexOf('A') > -1) {\n    pool += dictionaryMap.A;\n  }\n\n  if (dictionary.indexOf('0') > -1) {\n    pool += dictionaryMap[0];\n  }\n\n  pool += dictionary.replace(regExist, '');\n  max = pool.length - 1;\n\n  while (length--) {\n    ret += pool[exports.number(0, max)];\n  }\n\n  return ret;\n};\n/**\n * 最短 16 位长度的随机不重复字符串\n * @param [isTimeStamp=false] 是否时间戳形式\n * @param [maxLength=16] 最大长度\n * @returns {String}\n */\n\n\nexports.guid = function (isTimeStamp, maxLength) {\n  var a = [];\n  var d = new Date();\n  var ret = '';\n  var now = d.getTime();\n  var args = allocation.args(arguments);\n  var suffix = '';\n  var minLength = 16;\n\n  switch (args.length) {\n    case 0:\n      isTimeStamp = false;\n      maxLength = minLength;\n      break;\n\n    case 1:\n      // guid(isTimeStamp);\n      if (typeof args[0] === 'boolean') {\n        maxLength = minLength;\n      } // guid(maxLength);\n      else {\n          isTimeStamp = false;\n          maxLength = args[0];\n        }\n\n      break;\n\n    default:\n      break;\n  }\n\n  maxLength = Math.max(maxLength, minLength);\n\n  if (isTimeStamp) {\n    if (now !== lastGuidTime) {\n      lastGuidTime = now;\n      guidIndex = 0;\n    }\n\n    now = String(now);\n    var timeStampLength = now.length;\n    suffix = number.to62(guidIndex++);\n    suffix = string.padLeft(suffix, maxLength - timeStampLength, '0');\n    ret = now + suffix;\n  } else {\n    // 4\n    var Y = string.padLeft(d.getFullYear(), 4, '0'); // 2\n\n    var M = string.padLeft(d.getMonth() + 1, 2, '0'); // 2\n\n    var D = string.padLeft(d.getDate(), 2, '0'); // 2\n\n    var H = string.padLeft(d.getHours(), 2, '0'); // 2\n\n    var I = string.padLeft(d.getMinutes(), 2, '0'); // 2\n\n    var S = string.padLeft(d.getSeconds(), 2, '0'); //// 3\n    //var C = string.padLeft(d.getMilliseconds(), 3, '0');\n    //// 9\n    //var N = string.padLeft(process.hrtime()[1], 9, '0');\n\n    a.push(Y);\n    a.push(M);\n    a.push(D);\n    a.push(H);\n    a.push(I);\n    a.push(S);\n    var dateTime = a.join('');\n\n    if (dateTime !== lastGuidTime) {\n      lastGuidTime = dateTime;\n      guidIndex = 0;\n    }\n\n    suffix = number.to62(guidIndex++);\n    suffix = string.padLeft(suffix, maxLength - 14, '0');\n    a.push(suffix);\n    ret = a.join('');\n  }\n\n  return ret;\n};","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/validator/libs/random.js"],"names":["number","require","string","allocation","regExist","dictionaryMap","a","A","guidIndex","lastGuidTime","exports","min","max","temp","parseInt","Math","floor","random","length","dictionary","ret","pool","abs","String","indexOf","replace","guid","isTimeStamp","maxLength","d","Date","now","getTime","args","arguments","suffix","minLength","timeStampLength","to62","padLeft","Y","getFullYear","M","getMonth","D","getDate","H","getHours","I","getMinutes","S","getSeconds","push","dateTime","join"],"mappings":"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","sourcesContent":["/**\n * 随机数\n * @author ydr.me\n * @create 2014-10-30 19:03\n */\n\nvar number = require('./number.js');\nvar string = require('./string.js');\nvar allocation = require('./allocation.js');\nvar regExist = /[aA0]/g;\nvar dictionaryMap = {\n    a: 'abcdefghijklmnopqrstuvwxyz',\n    A: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n    0: '0123456789'\n};\nvar guidIndex = 0;\nvar lastGuidTime = 0;\n\n\n/**\n * 随机数字\n * @param [min=0] {Number} 最小值，默认0\n * @param [max=0] {Number} 最大值，默认0\n * @returns {Number}\n *\n * @example\n * random.number(1, 3);\n * // => 1 or 2 or 3\n */\nexports.number = function (min, max) {\n    var temp;\n\n    min = number.parseInt(min, 0);\n    max = number.parseInt(max, 0);\n\n    if (min === max) {\n        return min;\n    }\n\n    if (min > max) {\n        temp = min;\n        min = max;\n        max = temp;\n    }\n\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\n\n/**\n * 随机字符串\n * @param [length=6] {Number} 随机字符串长度\n * @param [dictionary='aA0'] {String} 字典\n *\n * @example\n * // 字典对应关系\n * // a => a-z\n * // A => A-Z\n * // 0 => 0-9\n * // 其他字符\n * random.string(6, 'a');\n * // => abcdef\n * random.string(6, '!@#$%^&*()_+');\n * // => @*)&(^\n */\nexports.string = function (length, dictionary) {\n    var ret = '';\n    var pool = '';\n    var max;\n\n    length = Math.abs(number.parseInt(length, 6));\n    dictionary = String(dictionary || 'a');\n\n    if (dictionary.indexOf('a') > -1) {\n        pool += dictionaryMap.a;\n    }\n\n    if (dictionary.indexOf('A') > -1) {\n        pool += dictionaryMap.A;\n    }\n\n    if (dictionary.indexOf('0') > -1) {\n        pool += dictionaryMap[0];\n    }\n\n    pool += dictionary.replace(regExist, '');\n    max = pool.length - 1;\n\n    while (length--) {\n        ret += pool[exports.number(0, max)];\n    }\n\n    return ret;\n};\n\n\n/**\n * 最短 16 位长度的随机不重复字符串\n * @param [isTimeStamp=false] 是否时间戳形式\n * @param [maxLength=16] 最大长度\n * @returns {String}\n */\nexports.guid = function (isTimeStamp, maxLength) {\n    var a = [];\n    var d = new Date();\n    var ret = '';\n    var now = d.getTime();\n    var args = allocation.args(arguments);\n    var suffix = '';\n    var minLength = 16;\n\n    switch (args.length) {\n        case 0:\n            isTimeStamp = false;\n            maxLength = minLength;\n            break;\n\n        case 1:\n            // guid(isTimeStamp);\n            if (typeof args[0] === 'boolean') {\n                maxLength = minLength;\n            }\n            // guid(maxLength);\n            else {\n                isTimeStamp = false;\n                maxLength = args[0];\n            }\n            break;\n        default:\n            break;\n    }\n\n    maxLength = Math.max(maxLength, minLength);\n\n    if (isTimeStamp) {\n        if (now !== lastGuidTime) {\n            lastGuidTime = now;\n            guidIndex = 0;\n        }\n\n        now = String(now);\n        var timeStampLength = now.length;\n        suffix = number.to62(guidIndex++);\n        suffix = string.padLeft(suffix, maxLength - timeStampLength, '0');\n        ret = now + suffix;\n    } else {\n        // 4\n        var Y = string.padLeft(d.getFullYear(), 4, '0');\n        // 2\n        var M = string.padLeft(d.getMonth() + 1, 2, '0');\n        // 2\n        var D = string.padLeft(d.getDate(), 2, '0');\n        // 2\n        var H = string.padLeft(d.getHours(), 2, '0');\n        // 2\n        var I = string.padLeft(d.getMinutes(), 2, '0');\n        // 2\n        var S = string.padLeft(d.getSeconds(), 2, '0');\n        //// 3\n        //var C = string.padLeft(d.getMilliseconds(), 3, '0');\n        //// 9\n        //var N = string.padLeft(process.hrtime()[1], 9, '0');\n\n        a.push(Y);\n        a.push(M);\n        a.push(D);\n        a.push(H);\n        a.push(I);\n        a.push(S);\n\n        var dateTime = a.join('');\n\n        if (dateTime !== lastGuidTime) {\n            lastGuidTime = dateTime;\n            guidIndex = 0;\n        }\n\n        suffix = number.to62(guidIndex++);\n        suffix = string.padLeft(suffix, maxLength - 14, '0');\n        a.push(suffix);\n        ret = a.join('');\n    }\n\n    return ret;\n};\n\n"]},"metadata":{},"sourceType":"module"}