{"ast":null,"code":"import React, { Component } from 'react'; // import BaseComponent from '../../BaseComponent';\n\nimport HeaderJsx from './Header.jsx';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../utils/Constants';\nimport ClientNotifyService from '../../../services/ClientNotifyService';\nimport Libs from '../../../utils/Libs';\nimport './Header.scss';\n\nclass Header extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.menuCollapseSidebar = () => {\n      var {\n        menu_collapse\n      } = this.state;\n      let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n      let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n\n      if (!Libs.isObjectEmpty(employeeInfo)) {\n        menu_collapse = menu_collapse ? false : true;\n        this.setState({\n          menu_collapse: menu_collapse\n        }, () => {\n          if (menu_collapse) {\n            document.body.classList.remove('menu_collapse');\n          } else {\n            document.body.classList.add('menu_collapse');\n          }\n        });\n      }\n    };\n\n    this.setLanguage = (e, iso_code) => {\n      let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n      let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n      var languages = employeeInfo.languages;\n\n      if (Libs.isArrayData(languages)) {\n        var findItemLang = Libs.find(languages, 'iso_code', iso_code);\n\n        if (!Libs.isObjectEmpty(employeeInfo)) {\n          employeeInfo.id_language = findItemLang.id;\n          employeeInfo.lang = findItemLang.iso_code;\n\n          for (var i = 0; i < languages.length; i++) {\n            if (employeeInfo.id_language === languages[i].id) {\n              languages[i].is_default = 1;\n            } else {\n              languages[i].is_default = 0;\n            }\n          }\n        }\n\n        let jsonUser = JSON.stringify(employeeInfo);\n        localStorage.setItem(Constants.COMMON.EMPLOYEE_INFO, Libs.base64Encrypt(jsonUser));\n        window.location.reload();\n      }\n    };\n\n    this.setMenuProfile = (e, index) => {\n      this.setState({\n        menuProfile: index\n      });\n    };\n\n    this.setClosedMenuDropdown = () => {\n      this.setState({\n        menuProfile: ''\n      });\n    };\n\n    this.handleClickOutside = event => {\n      const {\n        target\n      } = event;\n      var {\n        menuProfile\n      } = this.state,\n          self = this;\n\n      if (!this.wrapperRef.current.contains(target)) {\n        if (menuProfile) {\n          self.setState({\n            menuProfile: ''\n          });\n        }\n      }\n    };\n\n    this.jsxTemplate = HeaderJsx;\n    this.state = {\n      curItem: {},\n      menuProfile: \"\",\n      menu_collapse: true,\n      totalAlerts: 0\n    };\n    this.wrapperRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentWillMount() {\n    let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n    let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n    this.setState({\n      employee: employeeInfo\n    });\n  }\n\n  /**\n   * get list\n   * @author Long.Pham 2019-06-03\n   */\n  getNotifySize() {\n    let self = this;\n    let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n    let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n    let params = {\n      id_language: employeeInfo.id_language,\n      id_employee: employeeInfo.id_employee\n    };\n    ClientNotifyService.instance.getNotifySize(params, (data, total_row) => {\n      if (total_row > 0) {\n        self.setState({\n          totalAlerts: total_row\n        });\n      } else {\n        self.setState({\n          totalAlerts: 0\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.getNotifySize();\n    document.addEventListener('click', this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleClickOutside);\n  }\n\n  logout() {\n    localStorage.clear();\n    window.location.href = '/';\n  }\n\n  render() {\n    return this.jsxTemplate.call(this);\n  }\n\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Header);\nexport default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/common/Header/Header.js"],"names":["React","Component","HeaderJsx","withTranslation","Constants","ClientNotifyService","Libs","Header","constructor","props","context","menuCollapseSidebar","menu_collapse","state","info","localStorage","getItem","COMMON","EMPLOYEE_INFO","employeeInfo","JSON","parse","base64Decrypt","isObjectEmpty","setState","document","body","classList","remove","add","setLanguage","e","iso_code","languages","isArrayData","findItemLang","find","id_language","id","lang","i","length","is_default","jsonUser","stringify","setItem","base64Encrypt","window","location","reload","setMenuProfile","index","menuProfile","setClosedMenuDropdown","handleClickOutside","event","target","self","wrapperRef","current","contains","jsxTemplate","curItem","totalAlerts","createRef","componentWillMount","employee","getNotifySize","params","id_employee","instance","data","total_row","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","logout","clear","href","render","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import BaseComponent from '../../BaseComponent';\nimport HeaderJsx from './Header.jsx';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../utils/Constants';\nimport ClientNotifyService from '../../../services/ClientNotifyService';\nimport Libs from '../../../utils/Libs';\nimport './Header.scss';\n\nclass Header extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = HeaderJsx;\n        this.state = {\n            curItem: {},\n            menuProfile: \"\",\n            menu_collapse: true,\n            totalAlerts: 0\n        };\n        this.wrapperRef = React.createRef()\n    }\n\n    componentWillMount() {\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n        this.setState({\n            employee: employeeInfo\n        })\n\n    }\n\n    menuCollapseSidebar = () => {\n        var { menu_collapse } = this.state;\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n        if (!Libs.isObjectEmpty(employeeInfo)) {\n            menu_collapse = menu_collapse ? false : true;\n            this.setState({\n                menu_collapse: menu_collapse\n            }, () => {\n                if (menu_collapse) {\n                    document.body.classList.remove('menu_collapse');\n                } else {\n                    document.body.classList.add('menu_collapse')\n                }\n            })\n        }\n    }\n\n    setLanguage = (e, iso_code) => {\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n\n        var languages = employeeInfo.languages;\n        if (Libs.isArrayData(languages)) {\n            var findItemLang = Libs.find(languages, 'iso_code', iso_code);\n            if (!Libs.isObjectEmpty(employeeInfo)) {\n                employeeInfo.id_language = findItemLang.id;\n                employeeInfo.lang = findItemLang.iso_code;\n\n                for (var i = 0; i < languages.length; i++) {\n                    if (employeeInfo.id_language === languages[i].id) {\n                        languages[i].is_default = 1;\n                    } else {\n                        languages[i].is_default = 0;\n                    }\n                }\n            }\n\n            let jsonUser = JSON.stringify(employeeInfo);\n            localStorage.setItem(Constants.COMMON.EMPLOYEE_INFO, Libs.base64Encrypt(jsonUser));\n            window.location.reload();\n\n        }\n    }\n\n    setMenuProfile = (e, index) => {\n        this.setState({\n            menuProfile: index\n        })\n    }\n\n    setClosedMenuDropdown = () => {\n        this.setState({\n            menuProfile: ''\n        })\n    }\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getNotifySize() {\n        let self = this;\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n\n        let params = {\n            id_language: employeeInfo.id_language,\n            id_employee: employeeInfo.id_employee\n        };\n\n        ClientNotifyService.instance.getNotifySize(params, (data, total_row) => {\n            if (total_row > 0) {\n                self.setState({\n                    totalAlerts: total_row\n                });\n            } else {\n                self.setState({\n                    totalAlerts: 0\n                });\n            }\n\n        });\n    }\n\n\n    componentDidMount() {\n        this.getNotifySize();\n        document.addEventListener('click', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClickOutside);\n    }\n\n    handleClickOutside = (event) => {\n        const { target } = event;\n        var { menuProfile } = this.state, self = this;\n        if (!this.wrapperRef.current.contains(target)) {\n            if (menuProfile) {\n                self.setState({\n                    menuProfile: ''\n                })\n            }\n        }\n    }\n\n    logout() {\n        localStorage.clear();\n        window.location.href = '/';\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Header)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}