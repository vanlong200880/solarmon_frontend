{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import ProjectJsx from'./Project.jsx';import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../utils/Constants';import ProjectService from'../../../../../services/ProjectService';var Project=/*#__PURE__*/function(_BaseComponent){_inherits(Project,_BaseComponent);var _super=_createSuper(Project);function Project(props,context){var _this;_classCallCheck(this,Project);_this=_super.call(this,props,context);_this.onClickAddDevice=function(index){var dataList=_this.state.dataList;if(!Libs.isArrayData(dataList))return;var item=dataList[index];if(Libs.isObjectEmpty(item))return;item.screen_mode=Constants.SCREEN_MODE.ADD;_this.setState({curItem:item,addDevice:true});};_this.onClickCloseAddDevice=function(status){if(status){_this.getList();}_this.setState({addDevice:false});};_this.onClickAdd=function(){var curItem={};var data=[];var allLanguage=_this.state.allLanguage;curItem.screen_mode=Constants.SCREEN_MODE.ADD;curItem.tabActive='';allLanguage.map(function(language,index){if(language.is_default===1){curItem.tabActive=language.is_default===1?language.iso_code:'';}var item={is_default:language.is_default,iso_code:language.iso_code,id_language:language.id,name:\"\",site_name:\"\",description:\"\"};return data.push(item);});curItem.data=data;_this.setState({curItem:curItem,add:true});};_this.onClickCloseAdd=function(status){if(status){_this.getList();}_this.setState({add:false});};_this.onClickCloseDelete=function(status,data){if(status&&data){_this.getList();}_this.setState({delete:false});};_this.onItemClick=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index],self=_assertThisInitialized(_this);var params=_this.state.curItem;params.id=item.id;ProjectService.instance.getDetail(params,function(data){if(data){item.data=data.data;item.dataEmployees=data.dataEmployees;item.screen_mode=Constants.SCREEN_MODE.EDIT;var curTransItem=Libs.find(data.data,'is_default',1);if(Libs.isObjectEmpty(curTransItem)){return false;}item[\"name_\"+curTransItem.iso_code]=curTransItem.name;if(Libs.isArrayData(data.data)){var dataLang=data.data;dataLang.map(function(row,index){if(row.is_default===1){item.tabActive=row.iso_code;}return 1;});}self.setState({curItem:item,add:true});}},false);};_this.onItemClickSetup=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index],self=_assertThisInitialized(_this);if(Libs.isObjectEmpty(item))return;self.setState({curItem:item,setup:true});};_this.onItemClickCloseSetup=function(){_this.setState({setup:false});};_this.onStatusChange=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index],self=_assertThisInitialized(_this);item.screen_mode=Constants.SCREEN_MODE.EDIT;item.id_language=_this.employee.id_language;var isActiveUpdate=item.status;if(isActiveUpdate*1===1){isActiveUpdate=0;}else{isActiveUpdate=1;}item.status=isActiveUpdate;item.updated_by=_this.employee.first_name+' '+_this.employee.last_name;ProjectService.instance.updateStatus(item,function(status,msg){if(status){self.setState({dataList:self.state.dataList});}});};_this.onItemClickDelete=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index];_this.setState({curItem:item,delete:true});};_this.jsxTemplate=ProjectJsx;_this.state={curItem:{},dataList:[],searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1},add:false,addDevice:false,delete:false,formSearch:false,setup:false,allLanguage:Libs.isBlank(_this.employee)?[]:_this.employee.languages};_this.paging={total:0,current:1,currentInput:1};_this.inputChangedHandler=_this.inputChangedHandler.bind(_assertThisInitialized(_this));_this.inputChangedEnter=_this.inputChangedEnter.bind(_assertThisInitialized(_this));_this.inputChangedBlue=_this.inputChangedBlue.bind(_assertThisInitialized(_this));return _this;}_createClass(Project,[{key:\"componentDidMount\",value:function componentDidMount(){this.getList();}/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */},{key:\"getList\",value:function getList(){var self=this;var params=this.state.searchParam;params.id_language=this.employee.id_language;ProjectService.instance.getList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataList:data});var total=parseInt(total_row/self.state.searchParam.limit);if(total_row%self.state.searchParam.limit>0){total=total+1;}self.paging.total=total;self.paging.current=self.state.searchParam.index;self.paging.currentInput=self.state.searchParam.index;self.state.total_row=total_row;}else{self.setState({dataList:[],total_row:0});self.paging.total=0;self.paging.current=1;self.paging.currentInput=1;}self.forceUpdate();});}},{key:\"inputChangedHandler\",value:function inputChangedHandler(event){var self=this;var target=event.target;var name=target.name;var value=target.value;if(name==='current'){if(!Libs.isBlank(value)){var t=this.props.t;if(!Libs.isNumber(value)){self.toast(t('common.page_is_number'),\"error\");return;}}self.paging.currentInput=value;self.forceUpdate();}if(name==='limit'){var searchParam=this.state.searchParam;searchParam.limit=value;this.setState({searchParam:searchParam},function(){self.getList();});}}},{key:\"inputChangedEnter\",value:function inputChangedEnter(event){var self=this;if(event.key==='Enter'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}},{key:\"inputChangedBlue\",value:function inputChangedBlue(event){var self=this;var target=event.target;var name=target.name;if(name==='current'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}/**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onSelectPage\",value:function onSelectPage(index){var self=this;self.state.searchParam.index=index;if(index>0){self.state.searchParam.offset=(index-1)*self.state.searchParam.limit;}else{self.state.searchParam.offset=0;}self.getList();}/**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onClickReload\",value:function onClickReload(){var self=this;self.getList();}/**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */},{key:\"onSort\",value:function onSort(event,sortKey){this.state.searchParam.sort_column=sortKey;this.state.searchParam.order_by=this.state.searchParam.order_by===''||this.state.searchParam.order_by==='asc'?'desc':'asc';this.getList();}/**\n     * @description Call form search\n     * @author Long.Pham 12/05/2021\n     */},{key:\"onSearch\",value:function onSearch(){var formSearch=this.state.formSearch===false?true:false;this.setState({formSearch:formSearch});}},{key:\"onResetSearch\",value:function onResetSearch(){var self=this;var searchParam=this.state.searchParam;searchParam.keyword=null;searchParam.id=null;searchParam.index=1;searchParam.offset=0;self.paging.current=1;self.paging.currentInput=1;self.paging.total=1;self.setState({searchParam:searchParam},function(){self.getList();});}/**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */},{key:\"handleSearch\",value:function handleSearch(){this.getList();}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return Project;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(Project);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/views/desktop/ModuleSystem/Project/Project.js"],"names":["ProjectJsx","BaseComponent","Libs","withTranslation","Constants","ProjectService","Project","props","context","onClickAddDevice","index","dataList","state","isArrayData","item","isObjectEmpty","screen_mode","SCREEN_MODE","ADD","setState","curItem","addDevice","onClickCloseAddDevice","status","getList","onClickAdd","data","allLanguage","tabActive","map","language","is_default","iso_code","id_language","id","name","site_name","description","push","add","onClickCloseAdd","onClickCloseDelete","delete","onItemClick","self","params","instance","getDetail","dataEmployees","EDIT","curTransItem","find","dataLang","row","onItemClickSetup","setup","onItemClickCloseSetup","onStatusChange","employee","isActiveUpdate","updated_by","first_name","last_name","updateStatus","msg","onItemClickDelete","jsxTemplate","searchParam","limit","COMMON","LIMIT","offset","formSearch","isBlank","languages","paging","total","current","currentInput","inputChangedHandler","bind","inputChangedEnter","inputChangedBlue","total_row","parseInt","forceUpdate","event","target","value","t","isNumber","toast","key","onSelectPage","sortKey","sort_column","order_by","keyword","call","HighOrderComponentTranslated"],"mappings":"4wBAAA,MAAOA,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,2BAA1B,CACA,MAAOC,CAAAA,IAAP,KAAiB,2BAAjB,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,gCAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,wCAA3B,C,GAEMC,CAAAA,O,0GAEF,iBAAYC,KAAZ,CAAmBC,OAAnB,CAA4B,yCACxB,uBAAMD,KAAN,CAAaC,OAAb,EADwB,MAsE5BC,gBAtE4B,CAsET,SAACC,KAAD,CAAW,CAC1B,GAAKC,CAAAA,QAAL,CAAiB,MAAKC,KAAtB,CAAKD,QAAL,CACA,GAAG,CAACT,IAAI,CAACW,WAAL,CAAiBF,QAAjB,CAAJ,CAAgC,OAChC,GAAIG,CAAAA,IAAI,CAAGH,QAAQ,CAACD,KAAD,CAAnB,CACA,GAAGR,IAAI,CAACa,aAAL,CAAmBD,IAAnB,CAAH,CAA6B,OAC7BA,IAAI,CAACE,WAAL,CAAmBZ,SAAS,CAACa,WAAV,CAAsBC,GAAzC,CACA,MAAKC,QAAL,CAAc,CACVC,OAAO,CAAEN,IADC,CAEVO,SAAS,CAAE,IAFD,CAAd,EAIH,CAhF2B,OAkF5BC,qBAlF4B,CAkFJ,SAACC,MAAD,CAAY,CAChC,GAAIA,MAAJ,CAAY,CACR,MAAKC,OAAL,GACH,CACD,MAAKL,QAAL,CAAc,CACVE,SAAS,CAAE,KADD,CAAd,EAGH,CAzF2B,OA4F5BI,UA5F4B,CA4Ff,UAAM,CACf,GAAIL,CAAAA,OAAO,CAAG,EAAd,CACA,GAAIM,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,WAAW,CAAG,MAAKf,KAAL,CAAWe,WAA7B,CACAP,OAAO,CAACJ,WAAR,CAAsBZ,SAAS,CAACa,WAAV,CAAsBC,GAA5C,CACAE,OAAO,CAACQ,SAAR,CAAoB,EAApB,CACAD,WAAW,CAACE,GAAZ,CAAgB,SAACC,QAAD,CAAWpB,KAAX,CAAqB,CACjC,GAAIoB,QAAQ,CAACC,UAAT,GAAwB,CAA5B,CAA+B,CAAEX,OAAO,CAACQ,SAAR,CAAoBE,QAAQ,CAACC,UAAT,GAAwB,CAAxB,CAA4BD,QAAQ,CAACE,QAArC,CAAgD,EAApE,CAAyE,CAC1G,GAAIlB,CAAAA,IAAI,CAAG,CACPiB,UAAU,CAAED,QAAQ,CAACC,UADd,CAEPC,QAAQ,CAAEF,QAAQ,CAACE,QAFZ,CAGPC,WAAW,CAAEH,QAAQ,CAACI,EAHf,CAIPC,IAAI,CAAE,EAJC,CAKPC,SAAS,CAAE,EALJ,CAMPC,WAAW,CAAE,EANN,CAAX,CAQA,MAAOX,CAAAA,IAAI,CAACY,IAAL,CAAUxB,IAAV,CAAP,CACH,CAXD,EAaAM,OAAO,CAACM,IAAR,CAAeA,IAAf,CACA,MAAKP,QAAL,CAAc,CACVC,OAAO,CAAEA,OADC,CAEVmB,GAAG,CAAE,IAFK,CAAd,EAKH,CArH2B,OAuH5BC,eAvH4B,CAuHV,SAACjB,MAAD,CAAY,CAC1B,GAAIA,MAAJ,CAAY,CACR,MAAKC,OAAL,GACH,CACD,MAAKL,QAAL,CAAc,CACVoB,GAAG,CAAE,KADK,CAAd,EAGH,CA9H2B,OAgI5BE,kBAhI4B,CAgIP,SAAClB,MAAD,CAASG,IAAT,CAAkB,CACnC,GAAIH,MAAM,EAAIG,IAAd,CAAoB,CAChB,MAAKF,OAAL,GACH,CACD,MAAKL,QAAL,CAAc,CACVuB,MAAM,CAAE,KADE,CAAd,EAGH,CAvI2B,OA8I5BC,WA9I4B,CA8Id,SAACjC,KAAD,CAAW,CACrB,GAAI,CAACR,IAAI,CAACW,WAAL,CAAiB,MAAKD,KAAL,CAAWD,QAA5B,CAAL,CAA4C,OAC5C,GAAIG,CAAAA,IAAI,CAAG,MAAKF,KAAL,CAAWD,QAAX,CAAoBD,KAApB,CAAX,CAAuCkC,IAAI,8BAA3C,CAEA,GAAIC,CAAAA,MAAM,CAAG,MAAKjC,KAAL,CAAWQ,OAAxB,CACAyB,MAAM,CAACX,EAAP,CAAYpB,IAAI,CAACoB,EAAjB,CAEA7B,cAAc,CAACyC,QAAf,CAAwBC,SAAxB,CAAkCF,MAAlC,CAA0C,SAAAnB,IAAI,CAAI,CAC9C,GAAIA,IAAJ,CAAU,CACNZ,IAAI,CAACY,IAAL,CAAYA,IAAI,CAACA,IAAjB,CACAZ,IAAI,CAACkC,aAAL,CAAqBtB,IAAI,CAACsB,aAA1B,CACAlC,IAAI,CAACE,WAAL,CAAmBZ,SAAS,CAACa,WAAV,CAAsBgC,IAAzC,CACA,GAAIC,CAAAA,YAAY,CAAGhD,IAAI,CAACiD,IAAL,CAAUzB,IAAI,CAACA,IAAf,CAAoB,YAApB,CAAkC,CAAlC,CAAnB,CACA,GAAGxB,IAAI,CAACa,aAAL,CAAmBmC,YAAnB,CAAH,CAAoC,CAAE,MAAO,MAAP,CAAe,CACrDpC,IAAI,CAAC,QAAQoC,YAAY,CAAClB,QAAtB,CAAJ,CAAsCkB,YAAY,CAACf,IAAnD,CAEA,GAAGjC,IAAI,CAACW,WAAL,CAAiBa,IAAI,CAACA,IAAtB,CAAH,CAA+B,CAC3B,GAAI0B,CAAAA,QAAQ,CAAG1B,IAAI,CAACA,IAApB,CACA0B,QAAQ,CAACvB,GAAT,CAAa,SAACwB,GAAD,CAAM3C,KAAN,CAAgB,CACzB,GAAG2C,GAAG,CAACtB,UAAJ,GAAmB,CAAtB,CAAwB,CACpBjB,IAAI,CAACc,SAAL,CAAiByB,GAAG,CAACrB,QAArB,CACH,CACD,MAAO,EAAP,CACH,CALD,EAMH,CAEDY,IAAI,CAACzB,QAAL,CAAc,CACVC,OAAO,CAAEN,IADC,CAEVyB,GAAG,CAAE,IAFK,CAAd,EAIH,CACJ,CAxBD,CAwBG,KAxBH,EAyBH,CA9K2B,OAuL3Be,gBAvL2B,CAuLR,SAAC5C,KAAD,CAAW,CAC3B,GAAI,CAACR,IAAI,CAACW,WAAL,CAAiB,MAAKD,KAAL,CAAWD,QAA5B,CAAL,CAA4C,OAC5C,GAAIG,CAAAA,IAAI,CAAG,MAAKF,KAAL,CAAWD,QAAX,CAAoBD,KAApB,CAAX,CAAuCkC,IAAI,8BAA3C,CACA,GAAG1C,IAAI,CAACa,aAAL,CAAmBD,IAAnB,CAAH,CAA6B,OAC7B8B,IAAI,CAACzB,QAAL,CAAc,CACVC,OAAO,CAAEN,IADC,CAEVyC,KAAK,CAAE,IAFG,CAAd,EAKH,CAhM2B,OAwM3BC,qBAxM2B,CAwMH,UAAM,CAC3B,MAAKrC,QAAL,CAAc,CACVoC,KAAK,CAAE,KADG,CAAd,EAIH,CA7M2B,OAsN5BE,cAtN4B,CAsNX,SAAC/C,KAAD,CAAW,CACxB,GAAI,CAACR,IAAI,CAACW,WAAL,CAAiB,MAAKD,KAAL,CAAWD,QAA5B,CAAL,CAA4C,OAC5C,GAAIG,CAAAA,IAAI,CAAG,MAAKF,KAAL,CAAWD,QAAX,CAAoBD,KAApB,CAAX,CAAuCkC,IAAI,8BAA3C,CACA9B,IAAI,CAACE,WAAL,CAAmBZ,SAAS,CAACa,WAAV,CAAsBgC,IAAzC,CACAnC,IAAI,CAACmB,WAAL,CAAmB,MAAKyB,QAAL,CAAczB,WAAjC,CAEA,GAAI0B,CAAAA,cAAc,CAAG7C,IAAI,CAACS,MAA1B,CACA,GAAIoC,cAAc,CAAG,CAAjB,GAAuB,CAA3B,CAA8B,CAC1BA,cAAc,CAAG,CAAjB,CACH,CAFD,IAGK,CACDA,cAAc,CAAG,CAAjB,CACH,CAED7C,IAAI,CAACS,MAAL,CAAcoC,cAAd,CACA7C,IAAI,CAAC8C,UAAL,CAAkB,MAAKF,QAAL,CAAcG,UAAd,CAA2B,GAA3B,CAAiC,MAAKH,QAAL,CAAcI,SAAjE,CAEAzD,cAAc,CAACyC,QAAf,CAAwBiB,YAAxB,CAAqCjD,IAArC,CAA2C,SAAUS,MAAV,CAAkByC,GAAlB,CAAuB,CAC9D,GAAIzC,MAAJ,CAAY,CACRqB,IAAI,CAACzB,QAAL,CAAc,CACVR,QAAQ,CAAEiC,IAAI,CAAChC,KAAL,CAAWD,QADX,CAAd,EAGH,CACJ,CAND,EAOH,CA9O2B,OAqP5BsD,iBArP4B,CAqPR,SAACvD,KAAD,CAAW,CAC3B,GAAI,CAACR,IAAI,CAACW,WAAL,CAAiB,MAAKD,KAAL,CAAWD,QAA5B,CAAL,CAA4C,OAC5C,GAAIG,CAAAA,IAAI,CAAG,MAAKF,KAAL,CAAWD,QAAX,CAAoBD,KAApB,CAAX,CACA,MAAKS,QAAL,CAAc,CACVC,OAAO,CAAEN,IADC,CAEV4B,MAAM,CAAE,IAFE,CAAd,EAIH,CA5P2B,CAExB,MAAKwB,WAAL,CAAmBlE,UAAnB,CACA,MAAKY,KAAL,CAAa,CACTQ,OAAO,CAAE,EADA,CAETT,QAAQ,CAAE,EAFD,CAGTwD,WAAW,CAAE,CACTC,KAAK,CAAEhE,SAAS,CAACiE,MAAV,CAAiBC,KADf,CAETC,MAAM,CAAE,CAFC,CAGT7D,KAAK,CAAE,CAHE,CAHJ,CAQT6B,GAAG,CAAE,KARI,CASTlB,SAAS,CAAE,KATF,CAUTqB,MAAM,CAAE,KAVC,CAWT8B,UAAU,CAAE,KAXH,CAYTjB,KAAK,CAAE,KAZE,CAaT5B,WAAW,CAAEzB,IAAI,CAACuE,OAAL,CAAa,MAAKf,QAAlB,EAA8B,EAA9B,CAAmC,MAAKA,QAAL,CAAcgB,SAbrD,CAAb,CAgBA,MAAKC,MAAL,CAAc,CACVC,KAAK,CAAE,CADG,CAEVC,OAAO,CAAE,CAFC,CAGVC,YAAY,CAAE,CAHJ,CAAd,CAKA,MAAKC,mBAAL,CAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,+BAA3B,CACA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBD,IAAvB,+BAAzB,CACA,MAAKE,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBF,IAAtB,+BAAxB,CA1BwB,aA4B3B,C,qDAED,4BAAoB,CAChB,KAAKxD,OAAL,GACH,CACD;AACJ;AACA;AACA,O,uBACI,kBAAU,CACN,GAAIoB,CAAAA,IAAI,CAAG,IAAX,CACA,GAAIC,CAAAA,MAAM,CAAG,KAAKjC,KAAL,CAAWuD,WAAxB,CACAtB,MAAM,CAACZ,WAAP,CAAqB,KAAKyB,QAAL,CAAczB,WAAnC,CACA5B,cAAc,CAACyC,QAAf,CAAwBtB,OAAxB,CAAgCqB,MAAhC,CAAwC,SAACnB,IAAD,CAAOyD,SAAP,CAAqB,CACzD,GAAIjF,IAAI,CAACW,WAAL,CAAiBa,IAAjB,CAAJ,CAA4B,CACxBkB,IAAI,CAACzB,QAAL,CAAc,CACVR,QAAQ,CAAEe,IADA,CAAd,EAIA,GAAIkD,CAAAA,KAAK,CAAGQ,QAAQ,CAACD,SAAS,CAAGvC,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBC,KAApC,CAApB,CACA,GAAIe,SAAS,CAAGvC,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBC,KAAnC,CAA2C,CAA/C,CAAkD,CAC9CQ,KAAK,CAAGA,KAAK,CAAG,CAAhB,CACH,CACDhC,IAAI,CAAC+B,MAAL,CAAYC,KAAZ,CAAoBA,KAApB,CACAhC,IAAI,CAAC+B,MAAL,CAAYE,OAAZ,CAAsBjC,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBzD,KAA7C,CACAkC,IAAI,CAAC+B,MAAL,CAAYG,YAAZ,CAA2BlC,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBzD,KAAlD,CACAkC,IAAI,CAAChC,KAAL,CAAWuE,SAAX,CAAuBA,SAAvB,CAEH,CAdD,IAcO,CACHvC,IAAI,CAACzB,QAAL,CAAc,CACVR,QAAQ,CAAE,EADA,CAEVwE,SAAS,CAAE,CAFD,CAAd,EAIAvC,IAAI,CAAC+B,MAAL,CAAYC,KAAZ,CAAoB,CAApB,CACAhC,IAAI,CAAC+B,MAAL,CAAYE,OAAZ,CAAsB,CAAtB,CACAjC,IAAI,CAAC+B,MAAL,CAAYG,YAAZ,CAA2B,CAA3B,CACH,CACDlC,IAAI,CAACyC,WAAL,GACH,CAzBD,EA0BH,C,mCA4LD,6BAAoBC,KAApB,CAA2B,CACvB,GAAI1C,CAAAA,IAAI,CAAG,IAAX,CACA,GAAI2C,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAAnB,CACA,GAAIpD,CAAAA,IAAI,CAAGoD,MAAM,CAACpD,IAAlB,CACA,GAAIqD,CAAAA,KAAK,CAAGD,MAAM,CAACC,KAAnB,CACA,GAAIrD,IAAI,GAAK,SAAb,CAAwB,CACpB,GAAI,CAACjC,IAAI,CAACuE,OAAL,CAAae,KAAb,CAAL,CAA0B,CACtB,GAAMC,CAAAA,CAAN,CAAY,KAAKlF,KAAjB,CAAMkF,CAAN,CACA,GAAI,CAACvF,IAAI,CAACwF,QAAL,CAAcF,KAAd,CAAL,CAA2B,CACvB5C,IAAI,CAAC+C,KAAL,CAAWF,CAAC,CAAC,uBAAD,CAAZ,CAAuC,OAAvC,EACA,OACH,CACJ,CAED7C,IAAI,CAAC+B,MAAL,CAAYG,YAAZ,CAA2BU,KAA3B,CACA5C,IAAI,CAACyC,WAAL,GACH,CAED,GAAIlD,IAAI,GAAK,OAAb,CAAsB,CAClB,GAAMgC,CAAAA,WAAN,CAAsB,KAAKvD,KAA3B,CAAMuD,WAAN,CACAA,WAAW,CAACC,KAAZ,CAAoBoB,KAApB,CACA,KAAKrE,QAAL,CAAc,CACVgD,WAAW,CAAEA,WADH,CAAd,CAEG,UAAM,CACLvB,IAAI,CAACpB,OAAL,GACH,CAJD,EAKH,CACJ,C,iCAED,2BAAkB8D,KAAlB,CAAyB,CACrB,GAAI1C,CAAAA,IAAI,CAAG,IAAX,CACA,GAAI0C,KAAK,CAACM,GAAN,GAAc,OAAlB,CAA2B,CACvB,GAAId,CAAAA,YAAY,CAAG,KAAKH,MAAL,CAAYG,YAA/B,CACA,GAAI,CAAC5E,IAAI,CAACuE,OAAL,CAAaK,YAAb,CAAL,CAAiC,CAC7B,GAAMW,CAAAA,CAAN,CAAY,KAAKlF,KAAjB,CAAMkF,CAAN,CACA,GAAI,CAACvF,IAAI,CAACwF,QAAL,CAAcZ,YAAd,CAAL,CAAkC,CAC9BlC,IAAI,CAAC+C,KAAL,CAAWF,CAAC,CAAC,uBAAD,CAAZ,CAAuC,OAAvC,EACA,OACH,CACJ,CAED,GAAIvF,IAAI,CAACuE,OAAL,CAAaK,YAAb,GAA8B,CAAC5E,IAAI,CAACwF,QAAL,CAAcZ,YAAd,CAAnC,CAAgE,OAChE,GAAIM,QAAQ,CAACN,YAAD,CAAR,CAAyB,KAAKH,MAAL,CAAYC,KAAzC,CAAgD,CAC5CE,YAAY,CAAGlC,IAAI,CAAC+B,MAAL,CAAYC,KAA3B,CACH,CAED,GAAIE,YAAY,EAAI,CAApB,CAAuB,CACnBA,YAAY,CAAG,CAAf,CACH,CAEDlC,IAAI,CAAC+B,MAAL,CAAYE,OAAZ,CAAsBC,YAAtB,CACAlC,IAAI,CAAC+B,MAAL,CAAYG,YAAZ,CAA2BA,YAA3B,CACA,KAAKe,YAAL,CAAkBf,YAAlB,EACAlC,IAAI,CAACyC,WAAL,GACH,CACJ,C,gCAED,0BAAiBC,KAAjB,CAAwB,CACpB,GAAI1C,CAAAA,IAAI,CAAG,IAAX,CACA,GAAI2C,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAAnB,CACA,GAAIpD,CAAAA,IAAI,CAAGoD,MAAM,CAACpD,IAAlB,CACA,GAAIA,IAAI,GAAK,SAAb,CAAwB,CACpB,GAAI2C,CAAAA,YAAY,CAAG,KAAKH,MAAL,CAAYG,YAA/B,CACA,GAAI,CAAC5E,IAAI,CAACuE,OAAL,CAAaK,YAAb,CAAL,CAAiC,CAC7B,GAAMW,CAAAA,CAAN,CAAY,KAAKlF,KAAjB,CAAMkF,CAAN,CACA,GAAI,CAACvF,IAAI,CAACwF,QAAL,CAAcZ,YAAd,CAAL,CAAkC,CAC9BlC,IAAI,CAAC+C,KAAL,CAAWF,CAAC,CAAC,uBAAD,CAAZ,CAAuC,OAAvC,EACA,OACH,CACJ,CAED,GAAIvF,IAAI,CAACuE,OAAL,CAAaK,YAAb,GAA8B,CAAC5E,IAAI,CAACwF,QAAL,CAAcZ,YAAd,CAAnC,CAAgE,OAChE,GAAIM,QAAQ,CAACN,YAAD,CAAR,CAAyB,KAAKH,MAAL,CAAYC,KAAzC,CAAgD,CAC5CE,YAAY,CAAGlC,IAAI,CAAC+B,MAAL,CAAYC,KAA3B,CACH,CAED,GAAIE,YAAY,EAAI,CAApB,CAAuB,CACnBA,YAAY,CAAG,CAAf,CACH,CAEDlC,IAAI,CAAC+B,MAAL,CAAYE,OAAZ,CAAsBC,YAAtB,CACAlC,IAAI,CAAC+B,MAAL,CAAYG,YAAZ,CAA2BA,YAA3B,CACA,KAAKe,YAAL,CAAkBf,YAAlB,EACAlC,IAAI,CAACyC,WAAL,GACH,CACJ,CAGD;AACJ;AACA;AACA;AACA,O,4BACI,sBAAa3E,KAAb,CAAoB,CAChB,GAAIkC,CAAAA,IAAI,CAAG,IAAX,CACAA,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBzD,KAAvB,CAA+BA,KAA/B,CAEA,GAAIA,KAAK,CAAG,CAAZ,CAAe,CACXkC,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBI,MAAvB,CAAgC,CAAC7D,KAAK,CAAG,CAAT,EAAckC,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBC,KAArE,CACH,CAFD,IAEO,CACHxB,IAAI,CAAChC,KAAL,CAAWuD,WAAX,CAAuBI,MAAvB,CAAgC,CAAhC,CACH,CACD3B,IAAI,CAACpB,OAAL,GACH,CAGD;AACJ;AACA;AACA;AACA,O,6BACI,wBAAgB,CACZ,GAAIoB,CAAAA,IAAI,CAAG,IAAX,CACAA,IAAI,CAACpB,OAAL,GACH,CAGD;AACJ;AACA;AACA;AACA,M,sBAEI,gBAAO8D,KAAP,CAAcQ,OAAd,CAAuB,CACnB,KAAKlF,KAAL,CAAWuD,WAAX,CAAuB4B,WAAvB,CAAqCD,OAArC,CACA,KAAKlF,KAAL,CAAWuD,WAAX,CAAuB6B,QAAvB,CAAmC,KAAKpF,KAAL,CAAWuD,WAAX,CAAuB6B,QAAvB,GAAoC,EAApC,EAA0C,KAAKpF,KAAL,CAAWuD,WAAX,CAAuB6B,QAAvB,GAAoC,KAA/E,CAAwF,MAAxF,CAAiG,KAAnI,CACA,KAAKxE,OAAL,GACH,CAEF;AACH;AACA;AACA,O,wBACI,mBAAW,CACP,GAAIgD,CAAAA,UAAU,CAAI,KAAK5D,KAAL,CAAW4D,UAAX,GAA0B,KAA3B,CAAoC,IAApC,CAA2C,KAA5D,CACA,KAAKrD,QAAL,CAAc,CACVqD,UAAU,CAAEA,UADF,CAAd,EAGH,C,6BAED,wBAAgB,CACZ,GAAI5B,CAAAA,IAAI,CAAG,IAAX,CACA,GAAIuB,CAAAA,WAAW,CAAG,KAAKvD,KAAL,CAAWuD,WAA7B,CACAA,WAAW,CAAC8B,OAAZ,CAAsB,IAAtB,CACA9B,WAAW,CAACjC,EAAZ,CAAiB,IAAjB,CACAiC,WAAW,CAACzD,KAAZ,CAAoB,CAApB,CACAyD,WAAW,CAACI,MAAZ,CAAqB,CAArB,CACA3B,IAAI,CAAC+B,MAAL,CAAYE,OAAZ,CAAsB,CAAtB,CACAjC,IAAI,CAAC+B,MAAL,CAAYG,YAAZ,CAA2B,CAA3B,CACAlC,IAAI,CAAC+B,MAAL,CAAYC,KAAZ,CAAoB,CAApB,CACAhC,IAAI,CAACzB,QAAL,CAAc,CACVgD,WAAW,CAAEA,WADH,CAAd,CAEG,UAAM,CACLvB,IAAI,CAACpB,OAAL,GACH,CAJD,EAKH,CAED;AACJ;AACA;AACA;AACA,O,4BACI,uBAAe,CACX,KAAKA,OAAL,GACH,C,sBAED,iBAAS,CACL,MAAO,MAAK0C,WAAL,CAAiBgC,IAAjB,CAAsB,IAAtB,CAAP,CACH,C,qBAzaiBjG,a,EA4atB,GAAMkG,CAAAA,4BAA4B,CAAGhG,eAAe,CAAC,QAAD,CAAf,CAA0BG,OAA1B,CAArC,CACA,cAAe6F,CAAAA,4BAAf","sourcesContent":["import ProjectJsx from './Project.jsx';\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../utils/Constants';\nimport ProjectService from '../../../../../services/ProjectService';\n\nclass Project extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = ProjectJsx;\n        this.state = {\n            curItem: {},\n            dataList: [],\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n            },\n            add: false,\n            addDevice: false,\n            delete: false,\n            formSearch: false,\n            setup: false,\n            allLanguage: Libs.isBlank(this.employee) ? [] : this.employee.languages\n        };\n\n        this.paging = {\n            total: 0,\n            current: 1,\n            currentInput: 1\n        };\n        this.inputChangedHandler = this.inputChangedHandler.bind(this);\n        this.inputChangedEnter = this.inputChangedEnter.bind(this);\n        this.inputChangedBlue = this.inputChangedBlue.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.getList();\n    }\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getList() {\n        let self = this;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        ProjectService.instance.getList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataList: data\n                });\n\n                var total = parseInt(total_row / self.state.searchParam.limit);\n                if (total_row % self.state.searchParam.limit > 0) {\n                    total = total + 1;\n                }\n                self.paging.total = total;\n                self.paging.current = self.state.searchParam.index;\n                self.paging.currentInput = self.state.searchParam.index;\n                self.state.total_row = total_row;\n\n            } else {\n                self.setState({\n                    dataList: [],\n                    total_row: 0\n                });\n                self.paging.total = 0;\n                self.paging.current = 1;\n                self.paging.currentInput = 1;\n            }\n            self.forceUpdate();\n        });\n    }\n\n\n    onClickAddDevice = (index) => {\n        var {dataList} = this.state;\n        if(!Libs.isArrayData(dataList)) return;\n        var item = dataList[index];\n        if(Libs.isObjectEmpty(item)) return;\n        item.screen_mode = Constants.SCREEN_MODE.ADD;\n        this.setState({\n            curItem: item,\n            addDevice: true\n        });\n    };\n\n    onClickCloseAddDevice = (status) => {\n        if (status) {\n            this.getList();\n        }\n        this.setState({\n            addDevice: false\n        })\n    }\n\n\n    onClickAdd = () => {\n        let curItem = {};\n        let data = [];\n        var allLanguage = this.state.allLanguage;\n        curItem.screen_mode = Constants.SCREEN_MODE.ADD;\n        curItem.tabActive = '';\n        allLanguage.map((language, index) => {\n            if (language.is_default === 1) { curItem.tabActive = language.is_default === 1 ? language.iso_code : ''; }\n            let item = {\n                is_default: language.is_default,\n                iso_code: language.iso_code,\n                id_language: language.id,\n                name: \"\",\n                site_name: \"\",\n                description: \"\"\n            };\n            return data.push(item);\n        });\n\n        curItem.data = data;\n        this.setState({\n            curItem: curItem,\n            add: true\n        });\n\n    };\n\n    onClickCloseAdd = (status) => {\n        if (status) {\n            this.getList();\n        }\n        this.setState({\n            add: false\n        })\n    }\n\n    onClickCloseDelete = (status, data) => {\n        if (status && data) {\n            this.getList();\n        }\n        this.setState({\n            delete: false\n        })\n    }\n\n    /**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    onItemClick = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index], self = this;\n\n        var params = this.state.curItem;\n        params.id = item.id;\n\n        ProjectService.instance.getDetail(params, data => {\n            if (data) {\n                item.data = data.data;\n                item.dataEmployees = data.dataEmployees;\n                item.screen_mode = Constants.SCREEN_MODE.EDIT;\n                let curTransItem = Libs.find(data.data,'is_default', 1);\n                if(Libs.isObjectEmpty(curTransItem)){ return false; }\n                item[\"name_\"+curTransItem.iso_code] = curTransItem.name;\n\n                if(Libs.isArrayData(data.data)){\n                    var dataLang = data.data;\n                    dataLang.map((row, index) => {\n                        if(row.is_default === 1){\n                            item.tabActive = row.iso_code;\n                        }\n                        return 1;\n                    });\n                }\n\n                self.setState({\n                    curItem: item,\n                    add: true\n                });\n            }\n        }, false);\n    }\n\n\n\n    /**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n     onItemClickSetup = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index], self = this;\n        if(Libs.isObjectEmpty(item)) return;\n        self.setState({\n            curItem: item,\n            setup: true\n        });\n        \n    }\n\n\n    /**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n     onItemClickCloseSetup = () => {\n        this.setState({\n            setup: false\n        });\n        \n    }\n\n\n\n    /**\n     * @description Item click event change status\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    onStatusChange = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index], self = this;\n        item.screen_mode = Constants.SCREEN_MODE.EDIT;\n        item.id_language = this.employee.id_language;\n\n        var isActiveUpdate = item.status;\n        if (isActiveUpdate * 1 === 1) {\n            isActiveUpdate = 0;\n        }\n        else {\n            isActiveUpdate = 1;\n        }\n\n        item.status = isActiveUpdate;\n        item.updated_by = this.employee.first_name + ' ' + this.employee.last_name;\n\n        ProjectService.instance.updateStatus(item, function (status, msg) {\n            if (status) {\n                self.setState({\n                    dataList: self.state.dataList\n                });\n            }\n        });\n    }\n\n    /**\n   * @description Item click event delete\n   * @author Long.Pham 12-05-2021\n   * @param index Order element in the list\n   */\n    onItemClickDelete = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index];\n        this.setState({\n            curItem: item,\n            delete: true\n        });\n    }\n\n\n    inputChangedHandler(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name === 'current') {\n            if (!Libs.isBlank(value)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(value)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            self.paging.currentInput = value;\n            self.forceUpdate();\n        }\n\n        if (name === 'limit') {\n            var { searchParam } = this.state;\n            searchParam.limit = value;\n            this.setState({\n                searchParam: searchParam\n            }, () => {\n                self.getList();\n            })\n        }\n    }\n\n    inputChangedEnter(event) {\n        let self = this;\n        if (event.key === 'Enter') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n    inputChangedBlue(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        if (name === 'current') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n\n    /**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onSelectPage(index) {\n        let self = this;\n        self.state.searchParam.index = index;\n\n        if (index > 0) {\n            self.state.searchParam.offset = (index - 1) * self.state.searchParam.limit;\n        } else {\n            self.state.searchParam.offset = 0;\n        }\n        self.getList();\n    }\n\n\n    /**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onClickReload() {\n        let self = this;\n        self.getList();\n    }\n\n\n    /**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */\n\n    onSort(event, sortKey) {\n        this.state.searchParam.sort_column = sortKey;\n        this.state.searchParam.order_by = (this.state.searchParam.order_by === '' || this.state.searchParam.order_by === 'asc') ? 'desc' : 'asc';\n        this.getList();\n    }\n\n   /**\n     * @description Call form search\n     * @author Long.Pham 12/05/2021\n     */\n    onSearch() {\n        let formSearch = (this.state.formSearch === false) ? true : false;\n        this.setState({\n            formSearch: formSearch\n        });\n    }\n\n    onResetSearch() {\n        let self = this;\n        let searchParam = this.state.searchParam;\n        searchParam.keyword = null;\n        searchParam.id = null;\n        searchParam.index = 1;\n        searchParam.offset = 0;\n        self.paging.current = 1;\n        self.paging.currentInput = 1;\n        self.paging.total = 1;\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            self.getList();\n        });\n    }\n\n    /**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */\n    handleSearch() {\n        this.getList();\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Project)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}