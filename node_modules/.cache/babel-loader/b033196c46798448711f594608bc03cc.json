{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import Constants from'../../../../../utils/Constants';import AddPopupJsx from'./AddPopup.jsx';import ClientActivitiesService from'../../../../../services/ClientActivitiesService';import AlertStateService from'../../../../../services/AlertStateService';var AddPopup=/*#__PURE__*/function(_BaseComponent){_inherits(AddPopup,_BaseComponent);var _super=_createSuper(AddPopup);function AddPopup(props){var _this;_classCallCheck(this,AddPopup);_this=_super.call(this,props);_this.handleAlertStateInputChange=function(index){var _this$state=_this.state,dataAlertState=_this$state.dataAlertState,curItem=_this$state.curItem;if(!Libs.isArrayData(dataAlertState))return;var item=dataAlertState[index];if(Libs.isObjectEmpty(item))return;curItem.id_alert_state=item.id;_this.setState({curItem:curItem});};_this.handleDropdownChange=function(item,name){var self=_assertThisInitialized(_this);var curItem=self.state.curItem;if(Libs.isObjectEmpty(item)){curItem.status='';}else{var value=item.value;curItem[name]=value;}self.setState({curItem:curItem});};_this.state={curItem:_this.props.curItem,dataErrorType:_this.props.dataErrorType,dataErrorLevel:_this.props.dataErrorLevel,dataStatus:_this.props.dataStatus,dataAlertState:[]};_this.jsxTemplate=AddPopupJsx;_this.handleDropdownChange=_this.handleDropdownChange.bind(_assertThisInitialized(_this));return _this;}/**\n     * @description Called immediately after the component is mounted in the DOM. Called after the render function\n     * @author Long.Pham 12/05/2021\n     */_createClass(AddPopup,[{key:\"componentDidMount\",value:function componentDidMount(){this.getListAlertState();}},{key:\"getListAlertState\",value:/**\n    * ge list error state\n    * @author Long.Pham 2019-06-03\n    */function getListAlertState(){var self=this;var params={id_language:this.employee.id_language};AlertStateService.instance.getDropdownList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataAlertState:data});}else{self.setState({dataAlertState:[]});}});}},{key:\"onSave\",value:/**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var curItem,self,params;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:curItem=this.state.curItem,self=this;params=Object.assign({},curItem);params.screen_mode=Constants.SCREEN_MODE.EDIT;params.id_employee=this.employee.id_employee;params.id_language=this.employee.id_language;params.type='customer';ClientActivitiesService.instance.save(params,function(status,data,msg){if(status){self.toast(msg,\"info\");self.props.onClickCloseAdd(true);}else if(data){self.setValidateMessage(data);}else if(!Libs.isBlank(msg)){self.toast(msg,\"error\");}},true);case 7:case\"end\":return _context.stop();}}},_callee,this);}));function onSave(){return _onSave.apply(this,arguments);}return onSave;}()}]);return AddPopup;}(BaseComponent);export default AddPopup;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModuleProject/Activities/AddPopup.js"],"names":["BaseComponent","Libs","Constants","AddPopupJsx","ClientActivitiesService","AlertStateService","AddPopup","props","handleAlertStateInputChange","index","state","dataAlertState","curItem","isArrayData","item","isObjectEmpty","id_alert_state","id","setState","handleDropdownChange","name","self","status","value","dataErrorType","dataErrorLevel","dataStatus","jsxTemplate","bind","getListAlertState","params","id_language","employee","instance","getDropdownList","data","total_row","Object","assign","screen_mode","SCREEN_MODE","EDIT","id_employee","type","save","msg","toast","onClickCloseAdd","setValidateMessage","isBlank"],"mappings":"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","sourcesContent":["\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport Constants from '../../../../../utils/Constants';\nimport AddPopupJsx from './AddPopup.jsx';\nimport ClientActivitiesService from '../../../../../services/ClientActivitiesService';\nimport AlertStateService from '../../../../../services/AlertStateService';\n\nclass AddPopup extends BaseComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            curItem: this.props.curItem,\n            dataErrorType: this.props.dataErrorType,\n            dataErrorLevel: this.props.dataErrorLevel,\n            dataStatus: this.props.dataStatus,\n            dataAlertState: []\n        }\n        this.jsxTemplate = AddPopupJsx;\n        this.handleDropdownChange = this.handleDropdownChange.bind(this);\n    }\n    /**\n     * @description Called immediately after the component is mounted in the DOM. Called after the render function\n     * @author Long.Pham 12/05/2021\n     */\n    componentDidMount() {\n        this.getListAlertState();\n    }\n\n    handleAlertStateInputChange = (index) => {\n        var { dataAlertState, curItem } = this.state;\n        if(!Libs.isArrayData(dataAlertState)) return;\n        var item = dataAlertState[index];\n        if(Libs.isObjectEmpty(item)) return;\n        curItem.id_alert_state = item.id;\n        this.setState({\n            curItem: curItem\n        })\n    }\n    /**\n    * ge list error state\n    * @author Long.Pham 2019-06-03\n    */\n    getListAlertState() {\n        let self = this;\n        var params = { id_language: this.employee.id_language };\n\n        AlertStateService.instance.getDropdownList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataAlertState: data\n                });\n            } else {\n                self.setState({\n                    dataAlertState: []\n                });\n            }\n        })\n    }\n\n\n    handleDropdownChange = (item, name) => {\n        var self = this;\n        let curItem = self.state.curItem;\n\n        if (Libs.isObjectEmpty(item)) {\n            curItem.status = '';\n        } else {\n            var value = item.value;\n            curItem[name] = value;\n        }\n\n        self.setState({\n            curItem: curItem\n        });\n    }\n\n    \n\n    /**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */\n    async onSave() {\n        var curItem = this.state.curItem, self = this;\n        var params = Object.assign({}, curItem);\n        params.screen_mode = Constants.SCREEN_MODE.EDIT ;\n        params.id_employee = this.employee.id_employee;\n        params.id_language = this.employee.id_language;\n        params.type = 'customer';\n\n        ClientActivitiesService.instance.save(params, function (status, data, msg) {\n            if (status) {\n                self.toast(msg, \"info\");\n                self.props.onClickCloseAdd(true);\n            }\n            else if (data) {\n                self.setValidateMessage(data);\n            }\n\n            else if (!Libs.isBlank(msg)) {\n                self.toast(msg, \"error\");\n            }\n        }, true);\n    }\n}\nexport default AddPopup;"]},"metadata":{},"sourceType":"module"}