{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import DashBoardJsx from'./DashBoard.jsx';import MapViewJsx from'./MapView.jsx';import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import{withTranslation}from'react-i18next';import ClientProjectService from'../../../../../services/ClientProjectService';var DashBoard=/*#__PURE__*/function(_BaseComponent){_inherits(DashBoard,_BaseComponent);var _super=_createSuper(DashBoard);function DashBoard(props,context){var _this;_classCallCheck(this,DashBoard);_this=_super.call(this,props,context);_this.onClickChangeMode=function(mode){var self=_assertThisInitialized(_this);_this.setState({mode:mode},function(){self.jsxTemplate=self.getTemplate();self.forceUpdate();});};_this.handleMouseOver=function(marker,event){_this.setState({showInfoWindow:marker});};_this.handleMouseExit=function(marker,event){_this.setState({showInfoWindow:false});};_this.onMouseoverMarker=function(marker,event){_this.setState({showIconHover:marker});};_this.mouseMoveOutOfMarker=function(marker,event){_this.setState({showIconHover:false});};_this.state={curItem:{},showInfoWindow:false,showIconHover:false,mode:'grid',dataList:[],dataListSummary:[],searchParam:{limit:16,offset:0,index:1},formSearch:false};_this.paging={total:0,current:1,currentInput:1};_this.jsxTemplate=_this.getTemplate();_this.inputChangedHandler=_this.inputChangedHandler.bind(_assertThisInitialized(_this));_this.inputChangedEnter=_this.inputChangedEnter.bind(_assertThisInitialized(_this));_this.inputChangedBlue=_this.inputChangedBlue.bind(_assertThisInitialized(_this));return _this;}_createClass(DashBoard,[{key:\"componentDidMount\",value:function componentDidMount(){this.getList();}},{key:\"getTemplate\",value:function getTemplate(){var modView=this.state.mode;switch(modView){case'map':return MapViewJsx;default:return DashBoardJsx;}}/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */},{key:\"getList\",value:function getList(){var self=this;var params=this.state.searchParam;params.id_language=this.employee.id_language;params.id_employee=this.employee.id_employee;params.type='customer';ClientProjectService.instance.getListProjectByEmplpyee(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataList:data});var total=parseInt(total_row/self.state.searchParam.limit);if(total_row%self.state.searchParam.limit>0){total=total+1;}self.paging.total=total;self.paging.current=self.state.searchParam.index;self.paging.currentInput=self.state.searchParam.index;self.state.total_row=total_row;}else{self.setState({dataList:[],total_row:0});self.paging.total=0;self.paging.current=1;self.paging.currentInput=1;}self.forceUpdate();});}},{key:\"inputChangedHandler\",value:function inputChangedHandler(event){var self=this;var target=event.target;var name=target.name;var value=target.value;if(name==='current'){if(!Libs.isBlank(value)){var t=this.props.t;if(!Libs.isNumber(value)){self.toast(t('common.page_is_number'),\"error\");return;}}self.paging.currentInput=value;self.forceUpdate();}if(name==='limit'){var searchParam=this.state.searchParam;searchParam.limit=value;this.setState({searchParam:searchParam},function(){self.getList();});}}},{key:\"inputChangedEnter\",value:function inputChangedEnter(event){var self=this;if(event.key==='Enter'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}},{key:\"inputChangedBlue\",value:function inputChangedBlue(event){var self=this;var target=event.target;var name=target.name;if(name==='current'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}/**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onSelectPage\",value:function onSelectPage(index){var self=this;self.state.searchParam.index=index;if(index>0){self.state.searchParam.offset=(index-1)*self.state.searchParam.limit;}else{self.state.searchParam.offset=0;}self.getList();}/**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onClickReload\",value:function onClickReload(){var self=this;self.getList();}/**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */},{key:\"onSort\",value:function onSort(event,sortKey){this.state.searchParam.sort_column=sortKey;this.state.searchParam.order_by=this.state.searchParam.order_by===''||this.state.searchParam.order_by==='asc'?'desc':'asc';this.getList();}/**\n     * @description Call form search\n     * @author Long.Pham 12/05/2021\n     */},{key:\"onSearch\",value:function onSearch(){var formSearch=this.state.formSearch===false?true:false;this.setState({formSearch:formSearch});}},{key:\"onResetSearch\",value:function onResetSearch(){var self=this;var searchParam=this.state.searchParam;searchParam.name=null;searchParam.id=null;searchParam.index=1;searchParam.offset=0;self.paging.current=1;self.paging.currentInput=1;self.paging.total=1;self.setState({searchParam:searchParam},function(){self.getList();});}/**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */},{key:\"handleSearch\",value:function handleSearch(){this.getList();}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return DashBoard;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(DashBoard);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModuleProject/Dashboard/DashBoard.js"],"names":["DashBoardJsx","MapViewJsx","BaseComponent","Libs","withTranslation","ClientProjectService","DashBoard","props","context","onClickChangeMode","mode","self","setState","jsxTemplate","getTemplate","forceUpdate","handleMouseOver","marker","event","showInfoWindow","handleMouseExit","onMouseoverMarker","showIconHover","mouseMoveOutOfMarker","state","curItem","dataList","dataListSummary","searchParam","limit","offset","index","formSearch","paging","total","current","currentInput","inputChangedHandler","bind","inputChangedEnter","inputChangedBlue","getList","modView","params","id_language","employee","id_employee","type","instance","getListProjectByEmplpyee","data","total_row","isArrayData","parseInt","target","name","value","isBlank","t","isNumber","toast","key","onSelectPage","sortKey","sort_column","order_by","id","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import DashBoardJsx from './DashBoard.jsx';\nimport MapViewJsx from './MapView.jsx';\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport ClientProjectService from '../../../../../services/ClientProjectService';\n\nclass DashBoard extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        \n        this.state = {\n            curItem: {},\n            showInfoWindow: false,\n            showIconHover: false,\n            mode: 'grid',\n            dataList: [],\n            dataListSummary: [],\n            searchParam: {\n                limit: 16,\n                offset: 0,\n                index: 1,\n            },\n            formSearch: false\n        };\n\n        this.paging = {\n            total: 0,\n            current: 1,\n            currentInput: 1\n        };\n\n        this.jsxTemplate = this.getTemplate();\n\n        this.inputChangedHandler = this.inputChangedHandler.bind(this);\n        this.inputChangedEnter = this.inputChangedEnter.bind(this);\n        this.inputChangedBlue = this.inputChangedBlue.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.getList();\n    }\n\n    onClickChangeMode = (mode) => {\n        var self = this;\n        this.setState({\n            mode: mode\n        }, () => {\n            self.jsxTemplate = self.getTemplate();\n            self.forceUpdate();\n        });\n    }\n\n    handleMouseOver = (marker, event) => {\n        this.setState({\n          showInfoWindow: marker\n        });\n      };\n      handleMouseExit = (marker, event) => {\n        this.setState({\n          showInfoWindow: false\n        });\n      };\n    \n      onMouseoverMarker = (marker, event) => {\n        this.setState({\n          showIconHover: marker\n        });\n      };\n    \n      mouseMoveOutOfMarker = (marker, event) => {\n        this.setState({\n          showIconHover: false\n        });\n      };\n\n    getTemplate() {\n        let modView = this.state.mode;\n        switch (modView) {\n          case 'map':\n            return MapViewJsx;\n          default:\n            return DashBoardJsx;\n        }\n      }\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getList() {\n        let self = this;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        params.id_employee = this.employee.id_employee;\n        params.type = 'customer';\n\n        ClientProjectService.instance.getListProjectByEmplpyee(params, (data, total_row) => {\n\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataList: data\n                });\n\n                var total = parseInt(total_row / self.state.searchParam.limit);\n                if (total_row % self.state.searchParam.limit > 0) {\n                    total = total + 1;\n                }\n                self.paging.total = total;\n                self.paging.current = self.state.searchParam.index;\n                self.paging.currentInput = self.state.searchParam.index;\n                self.state.total_row = total_row;\n\n            } else {\n                self.setState({\n                    dataList: [],\n                    total_row: 0\n                });\n                self.paging.total = 0;\n                self.paging.current = 1;\n                self.paging.currentInput = 1;\n            }\n            self.forceUpdate();\n        });\n    }\n\n    inputChangedHandler(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name === 'current') {\n            if (!Libs.isBlank(value)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(value)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            self.paging.currentInput = value;\n            self.forceUpdate();\n        }\n\n        if (name === 'limit') {\n            var { searchParam } = this.state;\n            searchParam.limit = value;\n            this.setState({\n                searchParam: searchParam\n            }, () => {\n                self.getList();\n            })\n        }\n    }\n\n    inputChangedEnter(event) {\n        let self = this;\n        if (event.key === 'Enter') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n    inputChangedBlue(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        if (name === 'current') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n\n    /**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onSelectPage(index) {\n        let self = this;\n        self.state.searchParam.index = index;\n\n        if (index > 0) {\n            self.state.searchParam.offset = (index - 1) * self.state.searchParam.limit;\n        } else {\n            self.state.searchParam.offset = 0;\n        }\n        self.getList();\n    }\n\n\n    /**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onClickReload() {\n        let self = this;\n        self.getList();\n    }\n\n\n    /**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */\n\n    onSort(event, sortKey) {\n        this.state.searchParam.sort_column = sortKey;\n        this.state.searchParam.order_by = (this.state.searchParam.order_by === '' || this.state.searchParam.order_by === 'asc') ? 'desc' : 'asc';\n        this.getList();\n    }\n\n   /**\n     * @description Call form search\n     * @author Long.Pham 12/05/2021\n     */\n    onSearch() {\n        let formSearch = (this.state.formSearch === false) ? true : false;\n        this.setState({\n            formSearch: formSearch\n        });\n    }\n\n    onResetSearch() {\n        let self = this;\n        let searchParam = this.state.searchParam;\n        searchParam.name = null;\n        searchParam.id = null;\n        searchParam.index = 1;\n        searchParam.offset = 0;\n        self.paging.current = 1;\n        self.paging.currentInput = 1;\n        self.paging.total = 1;\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            self.getList();\n        });\n    }\n\n    /**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */\n    handleSearch() {\n        this.getList();\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(DashBoard)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}