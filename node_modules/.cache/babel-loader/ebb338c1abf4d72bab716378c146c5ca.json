{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import Constants from'../../../../../utils/Constants';import AddPopupJsx from'./AddPopup.jsx';import AddPopupValidate from'./AddPopupValidate';import DeviceParameterService from'../../../../../services/DeviceParameterService';import DeviceGroupService from'../../../../../services/DeviceGroupService';var AddPopup=/*#__PURE__*/function(_BaseComponent){_inherits(AddPopup,_BaseComponent);var _super=_createSuper(AddPopup);function AddPopup(props){var _this;_classCallCheck(this,AddPopup);_this=_super.call(this,props);_this.handleDropdownChange=function(item,name){var self=_assertThisInitialized(_this);var curItem=self.state.curItem;if(name==='id_device_group'){if(Libs.isObjectEmpty(item)){curItem.id_device_group='';}else{var value=item.value;curItem[name]=value;self.setValidateMessage({id_device_group:''},true);}}self.setState({curItem:curItem});};_this.state={curItem:Object.assign({},_this.props.curItem),dataDeviceGroup:[]};_this.jsxTemplate=AddPopupJsx;_this.handleDropdownChange=_this.handleDropdownChange.bind(_assertThisInitialized(_this));return _this;}/**\n     * @description Called immediately after the component is mounted in the DOM. Called after the render function\n     * @author Long.Pham 12/05/2021\n     */_createClass(AddPopup,[{key:\"componentDidMount\",value:function componentDidMount(){var curItem=this.state.curItem;if(Constants.SCREEN_MODE.ADD==curItem.screen_mode){curItem.status=1;}this.getListDeviceGroup();this.setState({curItem:curItem});}},{key:\"getListDeviceGroup\",value:/**\n    * ge list DeviceParameter state\n    * @author Long.Pham 2019-06-03\n    */function getListDeviceGroup(){var self=this;var params={id_language:this.employee.id_language};DeviceGroupService.instance.getDropdownList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataDeviceGroup:data});}else{self.setState({dataDeviceGroup:[]});}});}/**\n     * @description validate a field input\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */},{key:\"validateOne\",value:function(){var _validateOne=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,name,value,param,v,DeviceParameter;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:target=event.target;name=target.name;value=target.value;if(!name){_context.next=10;break;}param=_defineProperty({},name,value);v=new AddPopupValidate(this.props);_context.next=8;return v.validateOne(param,name);case 8:DeviceParameter=_context.sent;if(DeviceParameter!=null){this.setValidateMessage(DeviceParameter,true);}case 10:case\"end\":return _context.stop();}}},_callee,this);}));function validateOne(_x){return _validateOne.apply(this,arguments);}return validateOne;}()/**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */},{key:\"onSave\",value:function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var curItem,self,params,screenMode,v,DeviceParameters;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:curItem=this.state.curItem,self=this;params=Object.assign({},this.state.curItem);screenMode=!Libs.isBlank(curItem.id)?Constants.SCREEN_MODE.EDIT:!Libs.isBlank(this.props.curItem.screen_mode)?this.props.curItem.screen_mode:Constants.SCREEN_MODE.ADD;v=new AddPopupValidate(this.props);_context2.next=6;return v.FLValidationAll(curItem);case 6:DeviceParameters=_context2.sent;if(!DeviceParameters){_context2.next=10;break;}this.setValidateMessage(DeviceParameters);return _context2.abrupt(\"return\");case 10://remove message validation\nthis.removeAllValidateMessage();params.screen_mode=screenMode;params.iso_code_lang=this.employee.lang;params.id_language=this.employee.id_language;params.iso_code=this.employee.iso_code;DeviceParameterService.instance.save(params,function(status,data,msg){if(status){self.toast(msg,\"info\");self.props.onClickCloseAdd(true);}else if(data){self.setValidateMessage(data);}else if(!Libs.isBlank(msg)){self.toast(msg,\"error\");}},true);case 16:case\"end\":return _context2.stop();}}},_callee2,this);}));function onSave(){return _onSave.apply(this,arguments);}return onSave;}()}]);return AddPopup;}(BaseComponent);export default AddPopup;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/views/desktop/ModuleSystem/DeviceParameter/AddPopup.js"],"names":["BaseComponent","Libs","Constants","AddPopupJsx","AddPopupValidate","DeviceParameterService","DeviceGroupService","AddPopup","props","handleDropdownChange","item","name","self","curItem","state","isObjectEmpty","id_device_group","value","setValidateMessage","setState","Object","assign","dataDeviceGroup","jsxTemplate","bind","SCREEN_MODE","ADD","screen_mode","status","getListDeviceGroup","params","id_language","employee","instance","getDropdownList","data","total_row","isArrayData","event","target","param","v","validateOne","DeviceParameter","screenMode","isBlank","id","EDIT","FLValidationAll","DeviceParameters","removeAllValidateMessage","iso_code_lang","lang","iso_code","save","msg","toast","onClickCloseAdd"],"mappings":"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","sourcesContent":["\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport Constants from '../../../../../utils/Constants';\nimport AddPopupJsx from './AddPopup.jsx';\nimport AddPopupValidate from './AddPopupValidate';\nimport DeviceParameterService from '../../../../../services/DeviceParameterService';\nimport DeviceGroupService from '../../../../../services/DeviceGroupService';\n\nclass AddPopup extends BaseComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            curItem: Object.assign({}, this.props.curItem),\n            dataDeviceGroup: []\n        }\n\n        this.jsxTemplate = AddPopupJsx;\n        this.handleDropdownChange = this.handleDropdownChange.bind(this);\n    }\n    /**\n     * @description Called immediately after the component is mounted in the DOM. Called after the render function\n     * @author Long.Pham 12/05/2021\n     */\n    componentDidMount() {\n        var { curItem } = this.state;\n        if(Constants.SCREEN_MODE.ADD == curItem.screen_mode){\n            curItem.status = 1;\n        }\n        this.getListDeviceGroup();\n        this.setState({\n            curItem: curItem\n        })\n    }\n\n    handleDropdownChange = (item, name) => {\n        var self = this;\n        let curItem = self.state.curItem;\n\n        if (name === 'id_device_group') {\n            if (Libs.isObjectEmpty(item)) {\n                curItem.id_device_group = '';\n            } else {\n                var value = item.value;\n                curItem[name] = value;\n                self.setValidateMessage({ id_device_group: '' }, true);\n            }\n        }\n\n        self.setState({\n            curItem: curItem\n        });\n    }\n\n\n     /**\n    * ge list DeviceParameter state\n    * @author Long.Pham 2019-06-03\n    */\n      getListDeviceGroup() {\n        let self = this;\n        var params = { id_language: this.employee.id_language };\n\n        DeviceGroupService.instance.getDropdownList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataDeviceGroup: data\n                });\n            } else {\n                self.setState({\n                    dataDeviceGroup: []\n                });\n            }\n        })\n    }\n\n   \n    /**\n     * @description validate a field input\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */\n    async validateOne(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value\n        if (name) {\n            let param = {\n                [name]: value\n            }\n            let v = new AddPopupValidate(this.props);\n            let DeviceParameter = await v.validateOne(param, name);\n            if (DeviceParameter != null) {\n                this.setValidateMessage(DeviceParameter, true);\n            }\n        }\n    }\n\n    /**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */\n    async onSave() {\n        var {curItem} = this.state, self = this;\n        var params = Object.assign({}, this.state.curItem);\n        var screenMode = (!Libs.isBlank(curItem.id)) ? Constants.SCREEN_MODE.EDIT : ((!Libs.isBlank(this.props.curItem.screen_mode)) ? this.props.curItem.screen_mode : Constants.SCREEN_MODE.ADD);\n        let v = new AddPopupValidate(this.props);\n        let DeviceParameters = await v.FLValidationAll(curItem);\n        if (DeviceParameters) {\n            this.setValidateMessage(DeviceParameters);\n            return;\n        }\n        //remove message validation\n        this.removeAllValidateMessage();\n        params.screen_mode = screenMode;\n\n        params.iso_code_lang = this.employee.lang;\n        params.id_language = this.employee.id_language;\n        params.iso_code = this.employee.iso_code;\n\n        DeviceParameterService.instance.save(params, function (status, data, msg) {\n            if (status) {\n                self.toast(msg, \"info\");\n                self.props.onClickCloseAdd(true);\n            }\n            else if (data) {\n                self.setValidateMessage(data);\n            }\n\n            else if (!Libs.isBlank(msg)) {\n                self.toast(msg, \"error\");\n            }\n        }, true);\n    }\n}\nexport default AddPopup;"]},"metadata":{},"sourceType":"module"}