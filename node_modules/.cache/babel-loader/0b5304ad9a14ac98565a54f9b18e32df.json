{"ast":null,"code":"/**\n * 随机数\n * @author ydr.me\n * @create 2014-10-30 19:03\n */var number=require('./number.js');var string=require('./string.js');var allocation=require('./allocation.js');var regExist=/[aA0]/g;var dictionaryMap={a:'abcdefghijklmnopqrstuvwxyz',A:'ABCDEFGHIJKLMNOPQRSTUVWXYZ',0:'0123456789'};var guidIndex=0;var lastGuidTime=0;/**\n * 随机数字\n * @param [min=0] {Number} 最小值，默认0\n * @param [max=0] {Number} 最大值，默认0\n * @returns {Number}\n *\n * @example\n * random.number(1, 3);\n * // => 1 or 2 or 3\n */exports.number=function(min,max){var temp;min=number.parseInt(min,0);max=number.parseInt(max,0);if(min===max){return min;}if(min>max){temp=min;min=max;max=temp;}return Math.floor(Math.random()*(max-min+1)+min);};/**\n * 随机字符串\n * @param [length=6] {Number} 随机字符串长度\n * @param [dictionary='aA0'] {String} 字典\n *\n * @example\n * // 字典对应关系\n * // a => a-z\n * // A => A-Z\n * // 0 => 0-9\n * // 其他字符\n * random.string(6, 'a');\n * // => abcdef\n * random.string(6, '!@#$%^&*()_+');\n * // => @*)&(^\n */exports.string=function(length,dictionary){var ret='';var pool='';var max;length=Math.abs(number.parseInt(length,6));dictionary=String(dictionary||'a');if(dictionary.indexOf('a')>-1){pool+=dictionaryMap.a;}if(dictionary.indexOf('A')>-1){pool+=dictionaryMap.A;}if(dictionary.indexOf('0')>-1){pool+=dictionaryMap[0];}pool+=dictionary.replace(regExist,'');max=pool.length-1;while(length--){ret+=pool[exports.number(0,max)];}return ret;};/**\n * 最短 16 位长度的随机不重复字符串\n * @param [isTimeStamp=false] 是否时间戳形式\n * @param [maxLength=16] 最大长度\n * @returns {String}\n */exports.guid=function(isTimeStamp,maxLength){var a=[];var d=new Date();var ret='';var now=d.getTime();var args=allocation.args(arguments);var suffix='';var minLength=16;switch(args.length){case 0:isTimeStamp=false;maxLength=minLength;break;case 1:// guid(isTimeStamp);\nif(typeof args[0]==='boolean'){maxLength=minLength;}// guid(maxLength);\nelse{isTimeStamp=false;maxLength=args[0];}break;default:break;}maxLength=Math.max(maxLength,minLength);if(isTimeStamp){if(now!==lastGuidTime){lastGuidTime=now;guidIndex=0;}now=String(now);var timeStampLength=now.length;suffix=number.to62(guidIndex++);suffix=string.padLeft(suffix,maxLength-timeStampLength,'0');ret=now+suffix;}else{// 4\nvar Y=string.padLeft(d.getFullYear(),4,'0');// 2\nvar M=string.padLeft(d.getMonth()+1,2,'0');// 2\nvar D=string.padLeft(d.getDate(),2,'0');// 2\nvar H=string.padLeft(d.getHours(),2,'0');// 2\nvar I=string.padLeft(d.getMinutes(),2,'0');// 2\nvar S=string.padLeft(d.getSeconds(),2,'0');//// 3\n//var C = string.padLeft(d.getMilliseconds(), 3, '0');\n//// 9\n//var N = string.padLeft(process.hrtime()[1], 9, '0');\na.push(Y);a.push(M);a.push(D);a.push(H);a.push(I);a.push(S);var dateTime=a.join('');if(dateTime!==lastGuidTime){lastGuidTime=dateTime;guidIndex=0;}suffix=number.to62(guidIndex++);suffix=string.padLeft(suffix,maxLength-14,'0');a.push(suffix);ret=a.join('');}return ret;};","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/validator/libs/random.js"],"names":["number","require","string","allocation","regExist","dictionaryMap","a","A","guidIndex","lastGuidTime","exports","min","max","temp","parseInt","Math","floor","random","length","dictionary","ret","pool","abs","String","indexOf","replace","guid","isTimeStamp","maxLength","d","Date","now","getTime","args","arguments","suffix","minLength","timeStampLength","to62","padLeft","Y","getFullYear","M","getMonth","D","getDate","H","getHours","I","getMinutes","S","getSeconds","push","dateTime","join"],"mappings":"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","sourcesContent":["/**\n * 随机数\n * @author ydr.me\n * @create 2014-10-30 19:03\n */\n\nvar number = require('./number.js');\nvar string = require('./string.js');\nvar allocation = require('./allocation.js');\nvar regExist = /[aA0]/g;\nvar dictionaryMap = {\n    a: 'abcdefghijklmnopqrstuvwxyz',\n    A: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n    0: '0123456789'\n};\nvar guidIndex = 0;\nvar lastGuidTime = 0;\n\n\n/**\n * 随机数字\n * @param [min=0] {Number} 最小值，默认0\n * @param [max=0] {Number} 最大值，默认0\n * @returns {Number}\n *\n * @example\n * random.number(1, 3);\n * // => 1 or 2 or 3\n */\nexports.number = function (min, max) {\n    var temp;\n\n    min = number.parseInt(min, 0);\n    max = number.parseInt(max, 0);\n\n    if (min === max) {\n        return min;\n    }\n\n    if (min > max) {\n        temp = min;\n        min = max;\n        max = temp;\n    }\n\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\n\n/**\n * 随机字符串\n * @param [length=6] {Number} 随机字符串长度\n * @param [dictionary='aA0'] {String} 字典\n *\n * @example\n * // 字典对应关系\n * // a => a-z\n * // A => A-Z\n * // 0 => 0-9\n * // 其他字符\n * random.string(6, 'a');\n * // => abcdef\n * random.string(6, '!@#$%^&*()_+');\n * // => @*)&(^\n */\nexports.string = function (length, dictionary) {\n    var ret = '';\n    var pool = '';\n    var max;\n\n    length = Math.abs(number.parseInt(length, 6));\n    dictionary = String(dictionary || 'a');\n\n    if (dictionary.indexOf('a') > -1) {\n        pool += dictionaryMap.a;\n    }\n\n    if (dictionary.indexOf('A') > -1) {\n        pool += dictionaryMap.A;\n    }\n\n    if (dictionary.indexOf('0') > -1) {\n        pool += dictionaryMap[0];\n    }\n\n    pool += dictionary.replace(regExist, '');\n    max = pool.length - 1;\n\n    while (length--) {\n        ret += pool[exports.number(0, max)];\n    }\n\n    return ret;\n};\n\n\n/**\n * 最短 16 位长度的随机不重复字符串\n * @param [isTimeStamp=false] 是否时间戳形式\n * @param [maxLength=16] 最大长度\n * @returns {String}\n */\nexports.guid = function (isTimeStamp, maxLength) {\n    var a = [];\n    var d = new Date();\n    var ret = '';\n    var now = d.getTime();\n    var args = allocation.args(arguments);\n    var suffix = '';\n    var minLength = 16;\n\n    switch (args.length) {\n        case 0:\n            isTimeStamp = false;\n            maxLength = minLength;\n            break;\n\n        case 1:\n            // guid(isTimeStamp);\n            if (typeof args[0] === 'boolean') {\n                maxLength = minLength;\n            }\n            // guid(maxLength);\n            else {\n                isTimeStamp = false;\n                maxLength = args[0];\n            }\n            break;\n        default:\n            break;\n    }\n\n    maxLength = Math.max(maxLength, minLength);\n\n    if (isTimeStamp) {\n        if (now !== lastGuidTime) {\n            lastGuidTime = now;\n            guidIndex = 0;\n        }\n\n        now = String(now);\n        var timeStampLength = now.length;\n        suffix = number.to62(guidIndex++);\n        suffix = string.padLeft(suffix, maxLength - timeStampLength, '0');\n        ret = now + suffix;\n    } else {\n        // 4\n        var Y = string.padLeft(d.getFullYear(), 4, '0');\n        // 2\n        var M = string.padLeft(d.getMonth() + 1, 2, '0');\n        // 2\n        var D = string.padLeft(d.getDate(), 2, '0');\n        // 2\n        var H = string.padLeft(d.getHours(), 2, '0');\n        // 2\n        var I = string.padLeft(d.getMinutes(), 2, '0');\n        // 2\n        var S = string.padLeft(d.getSeconds(), 2, '0');\n        //// 3\n        //var C = string.padLeft(d.getMilliseconds(), 3, '0');\n        //// 9\n        //var N = string.padLeft(process.hrtime()[1], 9, '0');\n\n        a.push(Y);\n        a.push(M);\n        a.push(D);\n        a.push(H);\n        a.push(I);\n        a.push(S);\n\n        var dateTime = a.join('');\n\n        if (dateTime !== lastGuidTime) {\n            lastGuidTime = dateTime;\n            guidIndex = 0;\n        }\n\n        suffix = number.to62(guidIndex++);\n        suffix = string.padLeft(suffix, maxLength - 14, '0');\n        a.push(suffix);\n        ret = a.join('');\n    }\n\n    return ret;\n};\n\n"]},"metadata":{},"sourceType":"module"}