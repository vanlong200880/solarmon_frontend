{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import EmployeesSetupEmailJsx from'./EmployeesSetupEmail.jsx';import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../utils/Constants';import EmployeeService from'../../../../../services/EmployeeService';import'./EmployeesSetupEmail.scss';var EmployeesSetupEmail=/*#__PURE__*/function(_BaseComponent){_inherits(EmployeesSetupEmail,_BaseComponent);var _super=_createSuper(EmployeesSetupEmail);function EmployeesSetupEmail(props,context){var _this;_classCallCheck(this,EmployeesSetupEmail);_this=_super.call(this,props,context);_this.onStatusChange=function(index,type){var dataList=_this.state.dataList;if(!Libs.isArrayData(dataList))return;var item=dataList[index],self=_assertThisInitialized(_this);if(Libs.isObjectEmpty(item))return;switch(type){case'all':item.mail_now=item.mail_all==1?0:1;item.mail_day=item.mail_all==1?0:1;item.mail_month=item.mail_all==1?0:1;item.mail_year=item.mail_all==1?0:1;item.mail_all=item.mail_all==1?0:1;break;case'now':item.mail_now=item.mail_now==1?0:1;break;case'day':item.mail_day=item.mail_day==1?0:1;break;case'month':item.mail_month=item.mail_month==1?0:1;break;case'year':item.mail_year=item.mail_year==1?0:1;break;}if(item.mail_now==1&&item.mail_day==1&&item.mail_month==1&&item.mail_year==1){item.mail_all=1;}else{item.mail_all=0;}dataList[index]=item;EmployeeService.instance.updateStatusMailConfig(item,function(status,msg){if(status){self.setState({dataList:dataList});}});};_this.jsxTemplate=EmployeesSetupEmailJsx;_this.state={curItem:{},dataList:[],searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1},formSearch:false,allLanguage:Libs.isBlank(_this.employee)?[]:_this.employee.languages};_this.paging={total:0,current:1,currentInput:1};_this.inputChangedHandler=_this.inputChangedHandler.bind(_assertThisInitialized(_this));_this.inputChangedEnter=_this.inputChangedEnter.bind(_assertThisInitialized(_this));_this.inputChangedBlue=_this.inputChangedBlue.bind(_assertThisInitialized(_this));return _this;}_createClass(EmployeesSetupEmail,[{key:\"componentDidMount\",value:function componentDidMount(){this.getListProjectConfigMail();}/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */},{key:\"getListProjectConfigMail\",value:function getListProjectConfigMail(){var self=this;var params=this.state.searchParam;params.id_language=this.employee.id_language;params.id_employee=this.employee.id_employee;EmployeeService.instance.getListProjectConfigMail(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataList:data});var total=parseInt(total_row/self.state.searchParam.limit);if(total_row%self.state.searchParam.limit>0){total=total+1;}self.paging.total=total;self.paging.current=self.state.searchParam.index;self.paging.currentInput=self.state.searchParam.index;self.state.total_row=total_row;}else{self.setState({dataList:[],total_row:0});self.paging.total=0;self.paging.current=1;self.paging.currentInput=1;}self.forceUpdate();});}/**\n     * @description Item click event change status\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */},{key:\"inputChangedHandler\",value:function inputChangedHandler(event){var self=this;var target=event.target;var name=target.name;var value=target.value;if(name==='current'){if(!Libs.isBlank(value)){var t=this.props.t;if(!Libs.isNumber(value)){self.toast(t('common.page_is_number'),\"error\");return;}}self.paging.currentInput=value;self.forceUpdate();}if(name==='limit'){var searchParam=this.state.searchParam;searchParam.limit=value;this.setState({searchParam:searchParam},function(){self.getListProjectConfigMail();});}}},{key:\"inputChangedEnter\",value:function inputChangedEnter(event){var self=this;if(event.key==='Enter'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}},{key:\"inputChangedBlue\",value:function inputChangedBlue(event){var self=this;var target=event.target;var name=target.name;if(name==='current'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}/**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onSelectPage\",value:function onSelectPage(index){var self=this;self.state.searchParam.index=index;if(index>0){self.state.searchParam.offset=(index-1)*self.state.searchParam.limit;}else{self.state.searchParam.offset=0;}self.getListProjectConfigMail();}/**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onClickReload\",value:function onClickReload(){var self=this;self.getListProjectConfigMail();}/**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */},{key:\"onSort\",value:function onSort(event,sortKey){this.state.searchParam.sort_column=sortKey;this.state.searchParam.order_by=this.state.searchParam.order_by===''||this.state.searchParam.order_by==='asc'?'desc':'asc';this.getListProjectConfigMail();}/**\n     * @description Call form search\n     * @author Long.Pham 12/05/2021\n     */},{key:\"onSearch\",value:function onSearch(){var self=this;var formSearch=this.state.formSearch===false?true:false;this.setState({formSearch:formSearch});}},{key:\"onResetSearch\",value:function onResetSearch(){var self=this;var searchParam=this.state.searchParam;searchParam.name=null;searchParam.index=1;searchParam.offset=0;self.paging.current=1;self.paging.currentInput=1;self.paging.total=1;self.setState({searchParam:searchParam},function(){self.getListProjectConfigMail();});}/**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */},{key:\"handleSearch\",value:function handleSearch(){this.getListProjectConfigMail();}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return EmployeesSetupEmail;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(EmployeesSetupEmail);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/views/desktop/ModuleSystem/EmployeesSetupEmail/EmployeesSetupEmail.js"],"names":["EmployeesSetupEmailJsx","BaseComponent","Libs","withTranslation","Constants","EmployeeService","EmployeesSetupEmail","props","context","onStatusChange","index","type","dataList","state","isArrayData","item","self","isObjectEmpty","mail_now","mail_all","mail_day","mail_month","mail_year","instance","updateStatusMailConfig","status","msg","setState","jsxTemplate","curItem","searchParam","limit","COMMON","LIMIT","offset","formSearch","allLanguage","isBlank","employee","languages","paging","total","current","currentInput","inputChangedHandler","bind","inputChangedEnter","inputChangedBlue","getListProjectConfigMail","params","id_language","id_employee","data","total_row","parseInt","forceUpdate","event","target","name","value","t","isNumber","toast","key","onSelectPage","sortKey","sort_column","order_by","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import EmployeesSetupEmailJsx from './EmployeesSetupEmail.jsx';\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../utils/Constants';\nimport EmployeeService from '../../../../../services/EmployeeService';\nimport './EmployeesSetupEmail.scss';\n\nclass EmployeesSetupEmail extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = EmployeesSetupEmailJsx;\n        this.state = {\n            curItem: {},\n            dataList: [],\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n            },\n            formSearch: false,\n            allLanguage: Libs.isBlank(this.employee) ? [] : this.employee.languages\n        };\n\n        this.paging = {\n            total: 0,\n            current: 1,\n            currentInput: 1\n        };\n        this.inputChangedHandler = this.inputChangedHandler.bind(this);\n        this.inputChangedEnter = this.inputChangedEnter.bind(this);\n        this.inputChangedBlue = this.inputChangedBlue.bind(this);\n    }\n\n\n    componentDidMount() {\n        this.getListProjectConfigMail();\n    }\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getListProjectConfigMail() {\n        let self = this;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        params.id_employee = this.employee.id_employee;\n        EmployeeService.instance.getListProjectConfigMail(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataList: data\n                });\n\n                var total = parseInt(total_row / self.state.searchParam.limit);\n                if (total_row % self.state.searchParam.limit > 0) {\n                    total = total + 1;\n                }\n                self.paging.total = total;\n                self.paging.current = self.state.searchParam.index;\n                self.paging.currentInput = self.state.searchParam.index;\n                self.state.total_row = total_row;\n\n            } else {\n                self.setState({\n                    dataList: [],\n                    total_row: 0\n                });\n                self.paging.total = 0;\n                self.paging.current = 1;\n                self.paging.currentInput = 1;\n            }\n            self.forceUpdate();\n        });\n    }\n\n\n    /**\n     * @description Item click event change status\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    onStatusChange = (index, type) => {\n        var {dataList} = this.state;\n        if (!Libs.isArrayData(dataList)) return;\n        var item = dataList[index], self = this;\n        if (Libs.isObjectEmpty(item)) return;\n        switch (type) {\n            case 'all':\n                item.mail_now = item.mail_all == 1 ? 0 : 1;\n                item.mail_day = item.mail_all == 1 ? 0 : 1;\n                item.mail_month = item.mail_all == 1 ? 0 : 1;\n                item.mail_year = item.mail_all == 1 ? 0 : 1;\n                item.mail_all = item.mail_all == 1 ? 0 : 1;\n                break;\n            case 'now':\n                item.mail_now = item.mail_now == 1 ? 0 : 1;\n                break;\n            case 'day':\n                item.mail_day = item.mail_day == 1 ? 0 : 1;\n                break;\n            case 'month':\n                item.mail_month = item.mail_month == 1 ? 0 : 1;\n                break;\n            case 'year':\n                item.mail_year = item.mail_year == 1 ? 0 : 1;\n                break;\n        }\n\n        if(item.mail_now == 1 && item.mail_day == 1 && item.mail_month == 1 && item.mail_year == 1){\n            item.mail_all = 1;\n        } else {\n            item.mail_all = 0;\n        }\n\n        dataList[index] = item;\n        EmployeeService.instance.updateStatusMailConfig(item, function (status, msg) {\n            if (status) {\n                self.setState({\n                    dataList: dataList\n                });\n            }\n        });\n    }\n\n    inputChangedHandler(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name === 'current') {\n            if (!Libs.isBlank(value)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(value)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            self.paging.currentInput = value;\n            self.forceUpdate();\n        }\n\n        if (name === 'limit') {\n            var { searchParam } = this.state;\n            searchParam.limit = value;\n            this.setState({\n                searchParam: searchParam\n            }, () => {\n                self.getListProjectConfigMail();\n            })\n        }\n    }\n\n    inputChangedEnter(event) {\n        let self = this;\n        if (event.key === 'Enter') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n    inputChangedBlue(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        if (name === 'current') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n\n    /**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onSelectPage(index) {\n        let self = this;\n        self.state.searchParam.index = index;\n        if (index > 0) {\n            self.state.searchParam.offset = (index - 1) * self.state.searchParam.limit;\n        } else {\n            self.state.searchParam.offset = 0;\n        }\n        self.getListProjectConfigMail();\n    }\n\n\n    /**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onClickReload() {\n        let self = this;\n        self.getListProjectConfigMail();\n    }\n\n\n    /**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */\n\n    onSort(event, sortKey) {\n        this.state.searchParam.sort_column = sortKey;\n        this.state.searchParam.order_by = (this.state.searchParam.order_by === '' || this.state.searchParam.order_by === 'asc') ? 'desc' : 'asc';\n        this.getListProjectConfigMail();\n    }\n\n    /**\n     * @description Call form search\n     * @author Long.Pham 12/05/2021\n     */\n    onSearch() {\n        let self = this;\n        let formSearch = (this.state.formSearch === false) ? true : false;\n        this.setState({\n            formSearch: formSearch\n        });\n    }\n\n    onResetSearch() {\n        let self = this;\n        let searchParam = this.state.searchParam;\n        searchParam.name = null;\n        searchParam.index = 1;\n        searchParam.offset = 0;\n        self.paging.current = 1;\n        self.paging.currentInput = 1;\n        self.paging.total = 1;\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            self.getListProjectConfigMail();\n        });\n    }\n\n    /**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */\n    handleSearch() {\n        this.getListProjectConfigMail();\n    }\n\n\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(EmployeesSetupEmail)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}