{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import Constants from\"./Constants\";import Libs from\"./Libs\";import qs from'qs';import axios from'axios';import Auth from'./Auth';import $ from'jquery';// import { useTranslation } from \"react-i18next\";\n// import { Translation } from 'react-i18next';\n// import { Trans } from 'react-i18next';\n// import { Trans, useTranslation, Translation } from 'react-i18next';\n// import i18n from 'i18next';\n// import download from 'js-file-download';\n//import envConfig from 'EnvConfig.js'\nvar CMSHttp=/*#__PURE__*/function(){function CMSHttp(showProcess){_classCallCheck(this,CMSHttp);this.showProcess=showProcess||false;// this.showProcess = true;\n// this.printObject;\n}_createClass(CMSHttp,[{key:\"initialize\",value:function initialize(url,data,method,contentType){var self=this;// Setting URL and headers for request\nvar json=null;if(method===Constants.METHOD.get){if(typeof data!==undefined&&data!==null){json=qs.stringify(data);}}else{if(typeof data!==undefined&&data!==null){json=JSON.stringify(data);}}// const protocol = window.location.protocol;\n// const API_HOST = process.api_host || Constants.API_HOST;\n// const API_HTTP_PORT = process.api_http_port || Constants.API_HTTP_PORT;\n// const API_HTTPS_PORT = process.api_https_port || Constants.API_HTTPS_PORT ;\n// const API_CONTEXT = process.api_context || Constants.API_CONTEXT;\nvar baseUrl=Constants.API_HOST+url;// if (protocol == 'https:') {\n//     baseUrl = protocol + \"//\" + API_HOST + \":\" + API_HTTPS_PORT\n// } else {\n//     baseUrl = protocol + \"//\" + API_HOST + \":\" + API_HTTP_PORT\n// }\n// if(!Libs.isBlank(API_CONTEXT)){\n//     baseUrl = baseUrl+ \"/\"+ API_CONTEXT;\n// }\n// baseUrl = baseUrl + \"/\" + url\n// set header\nvar header=this.setHeader(method,contentType);var idShowProcess=0;if(this.showProcess==true){idShowProcess=this.showProcessLoading();}// Return new promise \nreturn new Promise(function(resolve,reject){if(!Auth.checkIsLogin()){var public_url=Constants.SITE_URL.PUBLIC_URL;if(public_url.indexOf(window.location.pathname)===-1){self.hideProcessLoading(idShowProcess);window.location.href=Constants.SITE_URL.LOGIN;}// if (window.location.pathname != Constants.SITE_URL.LOGIN) {\n// }\n}// Do async job\naxios.post(baseUrl,json,header).then(function(response){self.hideProcessLoading(idShowProcess);resolve(response);}).catch(function(error){self.hideProcessLoading(idShowProcess);if(error.response&&error.response.status==401){// if (window.location.pathname == Constants.FRONT_SITE_URL.LOGIN) {\n//     resolve(error.response);\n// }\n// else\n// {\n//     window.location.href = Constants.FRONT_SITE_URL.LOGIN;\n// }\n// return;\n}else if(error.response&&error.response.status==400){resolve(error.response);return;}reject(error);});});}// initializeGet(url, data, method, contentType) {\n//     var self = this;\n//     // Setting URL and headers for request\n//     var json = null;\n//     if (method === Constants.METHOD.get) {\n//         if (typeof data !== undefined && data !== null) {\n//             json = qs.stringify(data);\n//         }\n//     } else {\n//         if (typeof data !== undefined && data !== null) {\n//             json = JSON.stringify(data);\n//         }\n//     }\n//     const protocol = window.location.protocol;\n//     const API_HOST = process.api_host || Constants.API_HOST;\n//     const API_HTTP_PORT = process.api_http_port || Constants.API_HTTP_PORT;\n//     const API_HTTPS_PORT = process.api_https_port || Constants.API_HTTPS_PORT;\n//     if (protocol == 'https:') {\n//         url = protocol + \"//\" + API_HOST + \":\" + API_HTTPS_PORT +\"/\" + Constants.CONTEXT_PATH + \"/\" + url\n//     } else {\n//         url = protocol + \"//\" + API_HOST + \":\" + API_HTTP_PORT +\"/\" + Constants.CONTEXT_PATH + \"/\" + url\n//     }\n//     let isGetToken = false;\n//     if(url.indexOf('oauth/token')>=0){\n//         isGetToken = true;\n//     }\n//     // set header\n//     let header = this.setHeader(method, contentType, isGetToken, 'password', 'backoffice');\n//     let idShowProcess = 0;\n//     if (this.showProcess == true) {\n//         idShowProcess = this.showProcessLoading();\n//     }\n//     // Return new promise \n//     return new Promise(function (resolve, reject) {\n//         if (!Auth.checkIsLogin()) {\n//             if (window.location.pathname != Constants.FRONT_SITE_URL.LOGIN) {\n//                 self.hideProcessLoading(idShowProcess);\n//                 window.location.href = Constants.FRONT_SITE_URL.LOGIN;\n//             }\n//         }\n//         // Do async job\n//         axios.get(url, json, header)\n//             .then(function (response) {\n//                 self.hideProcessLoading(idShowProcess);\n//                 resolve(response);\n//             })\n//             .catch(function (error) {\n//                 self.hideProcessLoading(idShowProcess);\n//                 if (error.response && error.response.status == 401) {\n//                     if (window.location.pathname == Constants.FRONT_SITE_URL.LOGIN) {\n//                         resolve(error.response);\n//                     }\n//                     else\n//                     {\n//                         window.location.href = Constants.FRONT_SITE_URL.LOGIN;\n//                     }\n//                     return;\n//                 }else if (error.response && error.response.status == 400) \n//                 {\n//                     resolve(error.response);\n//                     return;\n//                 }\n//                 console.log(error);\n//                 reject(error);\n//             });\n//     })\n// }\n},{key:\"post\",value:function post(url,params,callBack){var self=this;// self.showError(true);\n// \nvar initializePromise=this.initialize(url,params,Constants.METHOD.POST,Constants.CONTENT_TYPE.json);// console.log(\"initializePromise: \", initializePromise);\ninitializePromise.then(function(result){if(result.status!=200&&result.status!=400){if(result.status!=401){self.showError(result.status);}callBack(false,{});return;}var data=result.data;if(data!=null){callBack(true,data);return;}else{self.showError(Constants.ERROR_CODE.CODE_01);callBack(false,{});}},function(status,err){self.showError(status);callBack(false,err);});}/**\n     * Method of exporting to excel file\n     * @author khanh.le\n     * @param {string} url \n     * @param {json object} params \n     * @param {string} filename : file name\n     */ // postExcel(url, params, filename = \"report\") {\n//     let self = this;\n//     var initializePromise = this.initialize(url, params, Constants.METHOD.POSTEXCEL, Constants.CONTENT_TYPE.json);\n//     initializePromise.then(function (result) {\n//         if (result.status != 200) {\n//             self.showError(result.status);\n//             return;\n//         }\n//         filename = filename + '.xlsx';\n//         download(result.data, filename);\n//     }, function (status, err) {\n//         self.showError(err);\n//     });\n// }\n/**\n     * Method of exporting to csv file\n     * @param {*} url \n     * @param {*} params \n     * @param {*} filename \n     */ // postCsv(url, params, filename = \"report\") {\n//     let self = this;\n//     var initializePromise = this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.json);\n//     initializePromise.then(function (result) {\n//         if (result.status != 200) {\n//             self.showError(result.status);\n//             return;\n//         }\n//         filename = filename + '.csv';\n//         download(result.data, filename);\n//     }, function (status, err) {\n//         self.showError(err);\n//     });\n// }\n/**\n    * Method of exporting to pdf file\n    * @author khanh.le\n    * @param {string} url \n    * @param {json object} params \n    * @param {string} filename : fine name\n    */ // postPdf(url, params, filename = \"report\") {\n//     let self = this;\n//     var initializePromise = this.initialize(url, params, Constants.METHOD.POSTPDF, Constants.CONTENT_TYPE.json);\n//     initializePromise.then(function (result) {\n//         if (result.status != 200) {\n//             self.showError(result.status);\n//             return;\n//         }\n//         filename = filename + '.pdf';\n//         download(result.data, filename);\n//     }, function (status, err) {\n//         self.showError(err);\n//     });\n// }\n},{key:\"postPrint\",value:function postPrint(url,params){var self=this;var initializePromise=this.initialize(url,params,Constants.METHOD.POSTPDF,Constants.CONTENT_TYPE.json);initializePromise.then(function(result){if(result.status!=200){self.showError(result.status);return;}//callBack(result.status, result.data);\nvar blobURL=window.URL.createObjectURL(result.data,{type:'application/pdf'});// console.log(blobURL);\nself.print_pdf(blobURL);},function(status,err){self.showError(err);});}// postMultipart(url, params, callBack) {\n//     let self = this;\n//     var initializePromise = this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.multipart);\n//     initializePromise.then(function (result) {\n//         if (result.status != 200) {\n//             self.showError(result.status);\n//             callBack(false, {});\n//             return;\n//         }\n//         let data = result.data;\n//         if (data != null) {\n//             callBack(true, data);\n//             return;\n//         } else {\n//             self.showError(Constants.ERROR_CODE.CODE_01);\n//             callBack(false, {});\n//         }\n//     }, function (status, err) {\n//         //self.showError(status);\n//         callBack(false, err);\n//     });\n// }\n// async postSynch(url, params) {\n//     var initializePromise = await this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.json);\n//     return initializePromise.data;\n// }\n// get(url, params, callBack) {\n//     var initializePromise = this.initializeGet(url, params, Constants.METHOD.GET, Constants.CONTENT_TYPE.json);\n//     initializePromise.then(function (result) {\n//         callBack(result.status, result.data);\n//     }, function (status, err) {\n//         callBack(false, err);\n//     });\n// }\n// async getSynch(url, params) {\n//     var initializePromise = await this.initializeGet(url, params, Constants.METHOD.GET, Constants.CONTENT_TYPE.json);\n//     return initializePromise.data;\n// }\n},{key:\"setHeader\",value:function setHeader(method,contentType){var lang=\"vi\";var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);if(!Libs.isBlank(info)){try{var userInfo=JSON.parse(Libs.base64Decrypt(info));lang=userInfo.lang;}catch(e){lang=\"vi\";}}var headers={'Content-Type':contentType,'req-path':Libs.isBlank(window.location.pathname)?'/':window.location.pathname,'x-access-token':localStorage.getItem('cms-access-token'),'lang':lang};var header={headers:headers,timeout:180000};if(method==Constants.METHOD.POSTEXCEL){header['responseType']='blob';headers['Accept']='application/vnd.ms-excel';header.headers=headers;}if(method==Constants.METHOD.POSTPDF){header['responseType']='blob';headers['Accept']='application/pdf';header.headers=headers;}return header;}/**\n     * show process loading\n     */},{key:\"showProcessLoading\",value:function showProcessLoading(){var globalIdProgress=0;var progress_id=\"disabled_div\"+ ++globalIdProgress;var div=document.createElement(\"div\");div.className='disabled_div';div.id=progress_id;div.style.position='fixed';div.style.width='100%';div.style.height='100%';div.style.zIndex=2000;div.style.left='0px';div.style.top='0px';var divInner=document.createElement(\"div\");divInner.style.width='66px';divInner.style.height='66px';divInner.style.display='block';divInner.style.position='fixed';divInner.style.top='50%';divInner.style.left='50%';divInner.style.marginLeft='-33px';divInner.style.marginTop='-33px';divInner.style.zIndex=1500;var img=document.createElement(\"img\");img.src=\"/loading.gif\";divInner.appendChild(img);div.appendChild(divInner);var body=document.getElementById(\"root\");body.appendChild(div);return globalIdProgress;}},{key:\"hideProcessLoading\",value:/**\n     * hide process loading\n     * @param {string} id \n     */function hideProcessLoading(id){if(id!=null){$('#'+\"disabled_div\"+id).remove();}else{$('.'+\"disabled_div\").remove();}}},{key:\"checkIsLogin\",value:function checkIsLogin(){// This code is not active\n// var token = localStorage.getItem(Constants.TOKEN) || null;\n// if (!token) {\n// \twindow.location.href = Constants.FRONT_SITE_URL.LOGIN;\n// \treturn false;\n// }\nreturn true;}/**\n     * show error popup with style modal bootstrap\n     */},{key:\"showError\",value:function showError(message_code){var message=this.getErrorMessage(message_code);this.showErrorMessage(message);}},{key:\"getErrorMessage\",value:function getErrorMessage(code){var msg=\"\";switch(code){case 201:msg=\"Request được chấp nhận cho xử lý, nhưng việc xử lý chưa hoàn thành\";break;case 203:msg=\"Non-authoritative Information\";break;case 204:msg=\"No Content: Server đã xử lý thành công request nhưng không trả về bất cứ content nào.\";break;case 205:msg=\"Reset Content: Server đã xử lý thành công request nhưng không trả về bất cứ content nào. Không giống với 204 No Content Response này yêu cầu phía Client phải thiết lập lại document view.\";break;case 206:msg=\"Partial Content: Server chỉ trả về một phần của resouce(dạng byte) do một range header được gửi bởi phía Client. Các Range Header được sửa dụng bởi Client để cho phép nối lại các phần của file download bị dán đoạn hoặc chia thành nhiều luồng download.\";break;case 500:msg=\"Internal Server Error\";break;case 501:msg=\"Not Implemented\";break;case 502:msg=\"Bad Gateway\";break;case 503:msg=\"Service Unavailable\";break;case 504:msg=\"Gateway Timeout\";break;case 505:msg=\"HTTP Version Not Supported\";break;default:msg=code;break;}return msg;}},{key:\"printPreview\",value:function printPreview(url){// var urlPrintPreview = \"printPreview.htm?url=\" + URLEncoder.encode(url);\nvar urlPrintPreview=\"printPreview.htm?url=\"+encodeURIComponent(url);var iframe=\"<html><head><style>body{margin:0;padding:0;}</style></head><body><iframe id=\\\"framePrintId\\\" name=\\\"framePrintId\\\" onload=\\\"this.contentWindow.focus();\\\" \"+\"frameborder=\\\"0\\\"  style=\\\"width: 100%; height: 100%;  margin: 0px 0px 0px 0px;\\\" src=\\\"\"+urlPrintPreview+\"\\\"></iframe></body></html>\";return iframe;}},{key:\"print_pdf\",value:function print_pdf(url){/*In PDF*/var popError=document.querySelector('#showPrint');if(popError!=null&&popError!='undefined'){return;}var close=function close(){popError=document.querySelector('#showPrint');popError.remove();};var div=document.createElement(\"div\");div.id=\"showPrint\";div.className=\"modal fade show\";div.role=\"dialog\";div.ariaHidden=\"false\";div.tabIndex=\"-1\";div.ariaLabelledby=\"contained-modal-title\";div.style.cssText=\"display: block;\";var modalDialog=document.createElement(\"div\");modalDialog.className=\"modal-dialog  modal-xl modal-dialog-scrollable modal-printf\";modalDialog.role=\"document\";var modalContent=document.createElement(\"div\");modalContent.className=\"modal-content\";var modalHeader=document.createElement(\"div\");modalHeader.className=\"modal-header\";var printBtn=document.createElement(\"button\");printBtn.type=\"button\";printBtn.className=\"btn btn-main-color\";printBtn.dataDismiss=\"modal\";printBtn.ariaHidden=\"true\";printBtn.innerHTML=\"<i class='fa fa-print'>In</i>\";// closeBt.style.cssText = \"margin-top: -10px;\";\n// closeBt.innerText = \"x\";\nprintBtn.onclick=function(){this.callPrint();};modalHeader.append(printBtn);// modalContent.append(modalHeader);\n// var pdf = '<object\tdata=\"' + url + '#toolbar=1&amp;navpanes=0&amp;scrollbar=1&amp;page=1&amp;view=FitH\" type=\"application/pdf\" width=\"100%\" height=\"100%\">'\n// var pdf = '<embed src=\"' + url + '\" type=\"application/pdf\" class=\"pdf-view\"/>'\nvar pdf_url=document.location.origin;pdf_url+='/libs/pdfjs/web/viewer.html?file=';pdf_url=pdf_url+url;var pdf='<iframe src=\"'+pdf_url+'\" style=\"width: 100%;position: absolute;height: 100%;box-sizing: border-box;left: 0;top: 0;\" frameborder=\"0\" scrolling=\"no\"></iframe>';var modalBody=document.createElement(\"div\");modalBody.className=\"modal-body\";modalBody.innerHTML=pdf;// modalBody.append();\nmodalContent.append(modalBody);modalDialog.append(modalContent);div.append(modalDialog);var body=document.getElementById(\"root\");body.append(div);}/**\n     * @description Add text error message when not calling server or api error\n     * @author Long.Pham 13/06/2021\n     */},{key:\"showErrorMessage\",value:function showErrorMessage(msg){document.body.classList.add('system-error');var html='<div class=\"notification-error\">';html+='<p>';html+=msg;html+='<a class=\"close-notification-error icon-cancel-music\"></a>';html+='</p>';html+='</div>';if(!$('.notification-error').length){$('#root').prepend(html);}if($('.close-notification-error').length){$('.close-notification-error').on('click',function(){if($('.system-error').length){$('body').removeClass('system-error');}if($('.notification-error').length){$('.notification-error').remove();}});}setTimeout(function(){if($('.system-error').length){$('body').removeClass('system-error');}if($('.notification-error').length){$('.notification-error').remove();}},Constants.ERROR_MSG_TIMEOUT);}}]);return CMSHttp;}();export{CMSHttp as default};","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/utils/CMSHttp.js"],"names":["Constants","Libs","qs","axios","Auth","$","CMSHttp","showProcess","url","data","method","contentType","self","json","METHOD","get","undefined","stringify","JSON","baseUrl","API_HOST","header","setHeader","idShowProcess","showProcessLoading","Promise","resolve","reject","checkIsLogin","public_url","SITE_URL","PUBLIC_URL","indexOf","window","location","pathname","hideProcessLoading","href","LOGIN","post","then","response","catch","error","status","params","callBack","initializePromise","initialize","POST","CONTENT_TYPE","result","showError","ERROR_CODE","CODE_01","err","POSTPDF","blobURL","URL","createObjectURL","type","print_pdf","lang","info","localStorage","getItem","COMMON","EMPLOYEE_INFO","isBlank","userInfo","parse","base64Decrypt","e","headers","timeout","POSTEXCEL","globalIdProgress","progress_id","div","document","createElement","className","id","style","position","width","height","zIndex","left","top","divInner","display","marginLeft","marginTop","img","src","appendChild","body","getElementById","remove","message_code","message","getErrorMessage","showErrorMessage","code","msg","urlPrintPreview","encodeURIComponent","iframe","popError","querySelector","close","role","ariaHidden","tabIndex","ariaLabelledby","cssText","modalDialog","modalContent","modalHeader","printBtn","dataDismiss","innerHTML","onclick","callPrint","append","pdf_url","origin","pdf","modalBody","classList","add","html","length","prepend","on","removeClass","setTimeout","ERROR_MSG_TIMEOUT"],"mappings":"kWAAA,MAAOA,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,EAAP,KAAe,IAAf,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA;AACA;AACA;AACA;AAEA;AACA;AACA;GACqBC,CAAAA,O,yBAEjB,iBAAYC,WAAZ,CAAyB,+BACrB,KAAKA,WAAL,CAAmBA,WAAW,EAAI,KAAlC,CACA;AACA;AAEH,C,8CAED,oBAAWC,GAAX,CAAgBC,IAAhB,CAAsBC,MAAtB,CAA8BC,WAA9B,CAA2C,CACvC,GAAIC,CAAAA,IAAI,CAAG,IAAX,CACA;AACA,GAAIC,CAAAA,IAAI,CAAG,IAAX,CACA,GAAIH,MAAM,GAAKV,SAAS,CAACc,MAAV,CAAiBC,GAAhC,CAAqC,CACjC,GAAI,MAAON,CAAAA,IAAP,GAAgBO,SAAhB,EAA6BP,IAAI,GAAK,IAA1C,CAAgD,CAC5CI,IAAI,CAAGX,EAAE,CAACe,SAAH,CAAaR,IAAb,CAAP,CACH,CACJ,CAJD,IAIO,CACH,GAAI,MAAOA,CAAAA,IAAP,GAAgBO,SAAhB,EAA6BP,IAAI,GAAK,IAA1C,CAAgD,CAC5CI,IAAI,CAAGK,IAAI,CAACD,SAAL,CAAeR,IAAf,CAAP,CACH,CACJ,CAED;AACA;AACA;AACA;AACA;AACA,GAAIU,CAAAA,OAAO,CAAGnB,SAAS,CAACoB,QAAV,CAAqBZ,GAAnC,CACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA,GAAIa,CAAAA,MAAM,CAAG,KAAKC,SAAL,CAAeZ,MAAf,CAAuBC,WAAvB,CAAb,CAEA,GAAIY,CAAAA,aAAa,CAAG,CAApB,CACA,GAAI,KAAKhB,WAAL,EAAoB,IAAxB,CAA8B,CAC1BgB,aAAa,CAAG,KAAKC,kBAAL,EAAhB,CACH,CACD;AACA,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC1C,GAAI,CAACvB,IAAI,CAACwB,YAAL,EAAL,CAA0B,CACtB,GAAIC,CAAAA,UAAU,CAAG7B,SAAS,CAAC8B,QAAV,CAAmBC,UAApC,CACA,GAAGF,UAAU,CAACG,OAAX,CAAmBC,MAAM,CAACC,QAAP,CAAgBC,QAAnC,IAAiD,CAAC,CAArD,CAAuD,CACnDvB,IAAI,CAACwB,kBAAL,CAAwBb,aAAxB,EACAU,MAAM,CAACC,QAAP,CAAgBG,IAAhB,CAAuBrC,SAAS,CAAC8B,QAAV,CAAmBQ,KAA1C,CACH,CACD;AAEA;AACH,CAED;AACAnC,KAAK,CAACoC,IAAN,CAAWpB,OAAX,CAAoBN,IAApB,CAA0BQ,MAA1B,EACKmB,IADL,CACU,SAAUC,QAAV,CAAoB,CACtB7B,IAAI,CAACwB,kBAAL,CAAwBb,aAAxB,EACAG,OAAO,CAACe,QAAD,CAAP,CACH,CAJL,EAKKC,KALL,CAKW,SAAUC,KAAV,CAAiB,CACpB/B,IAAI,CAACwB,kBAAL,CAAwBb,aAAxB,EACA,GAAIoB,KAAK,CAACF,QAAN,EAAkBE,KAAK,CAACF,QAAN,CAAeG,MAAf,EAAyB,GAA/C,CAAoD,CAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CATD,IASM,IAAID,KAAK,CAACF,QAAN,EAAkBE,KAAK,CAACF,QAAN,CAAeG,MAAf,EAAyB,GAA/C,CACN,CACIlB,OAAO,CAACiB,KAAK,CAACF,QAAP,CAAP,CACA,OACH,CACDd,MAAM,CAACgB,KAAD,CAAN,CACH,CAtBL,EAuBH,CApCM,CAAP,CAqCH,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","sourcesContent":["import Constants from \"./Constants\";\nimport Libs from \"./Libs\";\nimport qs from 'qs';\nimport axios from 'axios';\nimport Auth from './Auth';\nimport $ from 'jquery';\n// import { useTranslation } from \"react-i18next\";\n// import { Translation } from 'react-i18next';\n// import { Trans } from 'react-i18next';\n// import { Trans, useTranslation, Translation } from 'react-i18next';\n\n// import i18n from 'i18next';\n// import download from 'js-file-download';\n//import envConfig from 'EnvConfig.js'\nexport default class CMSHttp {\n    \n    constructor(showProcess) {\n        this.showProcess = showProcess || false;\n        // this.showProcess = true;\n        // this.printObject;\n        \n    }\n\n    initialize(url, data, method, contentType) {\n        var self = this;\n        // Setting URL and headers for request\n        var json = null;\n        if (method === Constants.METHOD.get) {\n            if (typeof data !== undefined && data !== null) {\n                json = qs.stringify(data);\n            }\n        } else {\n            if (typeof data !== undefined && data !== null) {\n                json = JSON.stringify(data);\n            }\n        }\n        \n        // const protocol = window.location.protocol;\n        // const API_HOST = process.api_host || Constants.API_HOST;\n        // const API_HTTP_PORT = process.api_http_port || Constants.API_HTTP_PORT;\n        // const API_HTTPS_PORT = process.api_https_port || Constants.API_HTTPS_PORT ;\n        // const API_CONTEXT = process.api_context || Constants.API_CONTEXT;\n        let baseUrl = Constants.API_HOST + url;\n        // if (protocol == 'https:') {\n        //     baseUrl = protocol + \"//\" + API_HOST + \":\" + API_HTTPS_PORT\n        // } else {\n        //     baseUrl = protocol + \"//\" + API_HOST + \":\" + API_HTTP_PORT\n        // }\n\n        // if(!Libs.isBlank(API_CONTEXT)){\n        //     baseUrl = baseUrl+ \"/\"+ API_CONTEXT;\n        // }\n        // baseUrl = baseUrl + \"/\" + url\n\n        // set header\n        let header = this.setHeader(method, contentType);\n\n        let idShowProcess = 0;\n        if (this.showProcess == true) {\n            idShowProcess = this.showProcessLoading();\n        }\n        // Return new promise \n        return new Promise(function (resolve, reject) {\n            if (!Auth.checkIsLogin()) {\n                var public_url = Constants.SITE_URL.PUBLIC_URL;\n                if(public_url.indexOf(window.location.pathname) === -1){\n                    self.hideProcessLoading(idShowProcess);\n                    window.location.href = Constants.SITE_URL.LOGIN;\n                }\n                // if (window.location.pathname != Constants.SITE_URL.LOGIN) {\n                    \n                // }\n            }\n\n            // Do async job\n            axios.post(baseUrl, json, header)\n                .then(function (response) {\n                    self.hideProcessLoading(idShowProcess);\n                    resolve(response);\n                })\n                .catch(function (error) {\n                    self.hideProcessLoading(idShowProcess);\n                    if (error.response && error.response.status == 401) {\n                        // if (window.location.pathname == Constants.FRONT_SITE_URL.LOGIN) {\n                        //     resolve(error.response);\n                        // }\n                        // else\n                        // {\n                        //     window.location.href = Constants.FRONT_SITE_URL.LOGIN;\n                        // }\n                        // return;\n                    }else if (error.response && error.response.status == 400) \n                    {\n                        resolve(error.response);\n                        return;\n                    }\n                    reject(error);\n                });\n        })\n    }\n\n    // initializeGet(url, data, method, contentType) {\n    //     var self = this;\n    //     // Setting URL and headers for request\n    //     var json = null;\n    //     if (method === Constants.METHOD.get) {\n    //         if (typeof data !== undefined && data !== null) {\n    //             json = qs.stringify(data);\n    //         }\n    //     } else {\n    //         if (typeof data !== undefined && data !== null) {\n    //             json = JSON.stringify(data);\n    //         }\n    //     }\n    //     const protocol = window.location.protocol;\n    //     const API_HOST = process.api_host || Constants.API_HOST;\n    //     const API_HTTP_PORT = process.api_http_port || Constants.API_HTTP_PORT;\n    //     const API_HTTPS_PORT = process.api_https_port || Constants.API_HTTPS_PORT;\n    //     if (protocol == 'https:') {\n    //         url = protocol + \"//\" + API_HOST + \":\" + API_HTTPS_PORT +\"/\" + Constants.CONTEXT_PATH + \"/\" + url\n    //     } else {\n    //         url = protocol + \"//\" + API_HOST + \":\" + API_HTTP_PORT +\"/\" + Constants.CONTEXT_PATH + \"/\" + url\n    //     }\n    //     let isGetToken = false;\n    //     if(url.indexOf('oauth/token')>=0){\n    //         isGetToken = true;\n    //     }\n    //     // set header\n    //     let header = this.setHeader(method, contentType, isGetToken, 'password', 'backoffice');\n\n    //     let idShowProcess = 0;\n    //     if (this.showProcess == true) {\n    //         idShowProcess = this.showProcessLoading();\n    //     }\n    //     // Return new promise \n    //     return new Promise(function (resolve, reject) {\n    //         if (!Auth.checkIsLogin()) {\n    //             if (window.location.pathname != Constants.FRONT_SITE_URL.LOGIN) {\n    //                 self.hideProcessLoading(idShowProcess);\n    //                 window.location.href = Constants.FRONT_SITE_URL.LOGIN;\n    //             }\n    //         }\n    //         // Do async job\n    //         axios.get(url, json, header)\n    //             .then(function (response) {\n    //                 self.hideProcessLoading(idShowProcess);\n    //                 resolve(response);\n    //             })\n    //             .catch(function (error) {\n    //                 self.hideProcessLoading(idShowProcess);\n    //                 if (error.response && error.response.status == 401) {\n    //                     if (window.location.pathname == Constants.FRONT_SITE_URL.LOGIN) {\n    //                         resolve(error.response);\n    //                     }\n    //                     else\n    //                     {\n    //                         window.location.href = Constants.FRONT_SITE_URL.LOGIN;\n    //                     }\n    //                     return;\n    //                 }else if (error.response && error.response.status == 400) \n    //                 {\n    //                     resolve(error.response);\n    //                     return;\n    //                 }\n    //                 console.log(error);\n    //                 reject(error);\n    //             });\n    //     })\n    // }\n\n    post(url, params, callBack) {\n        let self = this;\n        // self.showError(true);\n        // \n        var initializePromise = this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.json);\n\n        // console.log(\"initializePromise: \", initializePromise);\n        initializePromise.then(function (result) {\n            if (result.status != 200 && result.status != 400) {\n                if(result.status != 401)\n                {\n                    self.showError(result.status);\n                }\n                callBack(false, {});\n                return;\n            }\n            let data = result.data;\n            if (data != null) {\n                callBack(true, data);\n                return;\n            } else {\n                self.showError(Constants.ERROR_CODE.CODE_01);\n                callBack(false, {});\n            }\n        }, function (status, err) {\n            self.showError(status);\n            callBack(false, err);\n        });\n    }\n    /**\n     * Method of exporting to excel file\n     * @author khanh.le\n     * @param {string} url \n     * @param {json object} params \n     * @param {string} filename : file name\n     */\n    // postExcel(url, params, filename = \"report\") {\n    //     let self = this;\n    //     var initializePromise = this.initialize(url, params, Constants.METHOD.POSTEXCEL, Constants.CONTENT_TYPE.json);\n    //     initializePromise.then(function (result) {\n    //         if (result.status != 200) {\n    //             self.showError(result.status);\n    //             return;\n    //         }\n    //         filename = filename + '.xlsx';\n    //         download(result.data, filename);\n    //     }, function (status, err) {\n    //         self.showError(err);\n    //     });\n    // }\n    /**\n     * Method of exporting to csv file\n     * @param {*} url \n     * @param {*} params \n     * @param {*} filename \n     */\n    // postCsv(url, params, filename = \"report\") {\n    //     let self = this;\n    //     var initializePromise = this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.json);\n    //     initializePromise.then(function (result) {\n    //         if (result.status != 200) {\n    //             self.showError(result.status);\n    //             return;\n    //         }\n    //         filename = filename + '.csv';\n    //         download(result.data, filename);\n    //     }, function (status, err) {\n    //         self.showError(err);\n    //     });\n    // }\n    \n    /**\n    * Method of exporting to pdf file\n    * @author khanh.le\n    * @param {string} url \n    * @param {json object} params \n    * @param {string} filename : fine name\n    */\n    // postPdf(url, params, filename = \"report\") {\n    //     let self = this;\n    //     var initializePromise = this.initialize(url, params, Constants.METHOD.POSTPDF, Constants.CONTENT_TYPE.json);\n    //     initializePromise.then(function (result) {\n    //         if (result.status != 200) {\n    //             self.showError(result.status);\n    //             return;\n    //         }\n    //         filename = filename + '.pdf';\n    //         download(result.data, filename);\n    //     }, function (status, err) {\n    //         self.showError(err);\n    //     });\n    // }\n\n    postPrint(url, params) {\n        let self = this;\n        var initializePromise = this.initialize(url, params, Constants.METHOD.POSTPDF, Constants.CONTENT_TYPE.json);\n        initializePromise.then(function (result) {\n            if (result.status != 200) {\n                self.showError(result.status);\n                return;\n            }\n            //callBack(result.status, result.data);\n            let blobURL = window.URL.createObjectURL(result.data, { type: 'application/pdf' });\n            // console.log(blobURL);\n            self.print_pdf(blobURL)\n        }, function (status, err) {\n            self.showError(err);\n        });\n    }\n\n    // postMultipart(url, params, callBack) {\n    //     let self = this;\n    //     var initializePromise = this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.multipart);\n    //     initializePromise.then(function (result) {\n    //         if (result.status != 200) {\n    //             self.showError(result.status);\n    //             callBack(false, {});\n    //             return;\n    //         }\n    //         let data = result.data;\n    //         if (data != null) {\n    //             callBack(true, data);\n    //             return;\n    //         } else {\n    //             self.showError(Constants.ERROR_CODE.CODE_01);\n    //             callBack(false, {});\n    //         }\n    //     }, function (status, err) {\n    //         //self.showError(status);\n    //         callBack(false, err);\n    //     });\n    // }\n\n    // async postSynch(url, params) {\n    //     var initializePromise = await this.initialize(url, params, Constants.METHOD.POST, Constants.CONTENT_TYPE.json);\n    //     return initializePromise.data;\n    // }\n\n    // get(url, params, callBack) {\n        \n    //     var initializePromise = this.initializeGet(url, params, Constants.METHOD.GET, Constants.CONTENT_TYPE.json);\n    //     initializePromise.then(function (result) {\n    //         callBack(result.status, result.data);\n    //     }, function (status, err) {\n    //         callBack(false, err);\n    //     });\n    // }\n    // async getSynch(url, params) {\n        \n    //     var initializePromise = await this.initializeGet(url, params, Constants.METHOD.GET, Constants.CONTENT_TYPE.json);\n    //     return initializePromise.data;\n    // }\n    setHeader(method, contentType) {\n        let lang = \"vi\";\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        if (!Libs.isBlank(info)) {\n            try {\n                let userInfo = JSON.parse(Libs.base64Decrypt(info));\n                lang = userInfo.lang;\n            } catch (e) {\n                lang = \"vi\";\n            }\n        }\n        let headers = {\n            'Content-Type': contentType,\n            'req-path': Libs.isBlank(window.location.pathname) ? '/': window.location.pathname,\n            'x-access-token': localStorage.getItem('cms-access-token'),\n            'lang': lang\n        }\n        let header = { headers: headers,timeout:180000 };\n        if (method == Constants.METHOD.POSTEXCEL) {\n            header['responseType'] = 'blob';\n            headers['Accept'] = 'application/vnd.ms-excel';\n            header.headers = headers;\n        }\n        if (method == Constants.METHOD.POSTPDF) {\n            header['responseType'] = 'blob';\n            headers['Accept'] = 'application/pdf';\n            header.headers = headers;\n        }\n        \n        return header;\n    }\n    /**\n     * show process loading\n     */\n    showProcessLoading() {\n        var globalIdProgress = 0;\n        var progress_id = \"disabled_div\" + ++globalIdProgress;\n        var div = document.createElement(\"div\");\n        div.className = 'disabled_div';\n        div.id = progress_id;\n        div.style.position = 'fixed';\n        div.style.width = '100%';\n        div.style.height = '100%';\n        div.style.zIndex = 2000;\n        div.style.left = '0px';\n        div.style.top = '0px';\n        var divInner = document.createElement(\"div\");\n        divInner.style.width = '66px';\n        divInner.style.height = '66px';\n        divInner.style.display = 'block';\n        divInner.style.position = 'fixed';\n        divInner.style.top = '50%';\n        divInner.style.left = '50%';\n        divInner.style.marginLeft = '-33px';\n        divInner.style.marginTop = '-33px';\n        divInner.style.zIndex = 1500;\n        var img = document.createElement(\"img\");\n        img.src = \"/loading.gif\";\n        divInner.appendChild(img);\n        div.appendChild(divInner);\n        var body = document.getElementById(\"root\");\n        body.appendChild(div);\n        return globalIdProgress;\n    };\n    /**\n     * hide process loading\n     * @param {string} id \n     */\n    hideProcessLoading(id) {\n        if (id != null) {\n            $('#' + \"disabled_div\" + id).remove();\n        } else {\n            $('.' + \"disabled_div\").remove();\n        }\n    };\n    checkIsLogin() {\n        // This code is not active\n        // var token = localStorage.getItem(Constants.TOKEN) || null;\n        // if (!token) {\n        // \twindow.location.href = Constants.FRONT_SITE_URL.LOGIN;\n        // \treturn false;\n        // }\n        return true;\n    }\n\n    /**\n     * show error popup with style modal bootstrap\n     */\n    showError(message_code) {\n        var message = this.getErrorMessage(message_code);\n        this.showErrorMessage( message );\n    };\n    getErrorMessage(code) {\n        var msg = \"\";\n        switch (code) {\n            case 201:\n                msg = \"Request được chấp nhận cho xử lý, nhưng việc xử lý chưa hoàn thành\";\n                break;\n            case 203:\n                msg = \"Non-authoritative Information\";\n                break;\n            case 204:\n                msg = \"No Content: Server đã xử lý thành công request nhưng không trả về bất cứ content nào.\";\n                break;\n            case 205:\n                msg = \"Reset Content: Server đã xử lý thành công request nhưng không trả về bất cứ content nào. Không giống với 204 No Content Response này yêu cầu phía Client phải thiết lập lại document view.\";\n                break;\n            case 206:\n                msg = \"Partial Content: Server chỉ trả về một phần của resouce(dạng byte) do một range header được gửi bởi phía Client. Các Range Header được sửa dụng bởi Client để cho phép nối lại các phần của file download bị dán đoạn hoặc chia thành nhiều luồng download.\";\n                break;\n            case 500:\n                msg = \"Internal Server Error\";\n                break;\n            case 501:\n                msg = \"Not Implemented\";\n                break;\n            case 502:\n                msg = \"Bad Gateway\";\n                break;\n            case 503:\n                msg = \"Service Unavailable\";\n                break;\n            case 504:\n                msg = \"Gateway Timeout\";\n                break;\n            case 505:\n                msg = \"HTTP Version Not Supported\";\n                break;\n            default: msg = code;\n                break;\n        }\n\n        return msg;\n    }\n\n    printPreview(url) {\n        // var urlPrintPreview = \"printPreview.htm?url=\" + URLEncoder.encode(url);\n        var urlPrintPreview = \"printPreview.htm?url=\" + encodeURIComponent(url);\n        \n        var iframe = \"<html><head><style>body{margin:0;padding:0;}</style></head><body><iframe id=\\\"framePrintId\\\" name=\\\"framePrintId\\\" onload=\\\"this.contentWindow.focus();\\\" \" +\n            \"frameborder=\\\"0\\\"  style=\\\"width: 100%; height: 100%;  margin: 0px 0px 0px 0px;\\\" src=\\\"\" + urlPrintPreview + \"\\\"></iframe></body></html>\";\n        return iframe;\n    }\n\n    print_pdf(url) {\n\n        /*In PDF*/\n        var popError = document.querySelector('#showPrint');\n        if (popError != null && popError != 'undefined') {\n            return;\n        }\n\n        var close = () => {\n            popError = document.querySelector('#showPrint');\n            popError.remove();\n\n        }\n        var div = document.createElement(\"div\");\n        div.id = \"showPrint\";\n        div.className = \"modal fade show\";\n        div.role = \"dialog\"\n        div.ariaHidden = \"false\"\n        div.tabIndex = \"-1\"\n        div.ariaLabelledby = \"contained-modal-title\"\n        div.style.cssText = \"display: block;\"\n        var modalDialog = document.createElement(\"div\");\n        modalDialog.className = \"modal-dialog  modal-xl modal-dialog-scrollable modal-printf\";\n        modalDialog.role = \"document\";\n        var modalContent = document.createElement(\"div\");\n        modalContent.className = \"modal-content\";\n\n        var modalHeader = document.createElement(\"div\");\n        modalHeader.className = \"modal-header\";\n\n        var printBtn = document.createElement(\"button\");\n        printBtn.type = \"button\";\n        printBtn.className = \"btn btn-main-color\";\n        printBtn.dataDismiss = \"modal\";\n        printBtn.ariaHidden = \"true\";\n        printBtn.innerHTML = \"<i class='fa fa-print'>In</i>\";\n        // closeBt.style.cssText = \"margin-top: -10px;\";\n        // closeBt.innerText = \"x\";\n        printBtn.onclick = function () { this.callPrint() };\n        modalHeader.append(printBtn);\n        // modalContent.append(modalHeader);\n        // var pdf = '<object\tdata=\"' + url + '#toolbar=1&amp;navpanes=0&amp;scrollbar=1&amp;page=1&amp;view=FitH\" type=\"application/pdf\" width=\"100%\" height=\"100%\">'\n        // var pdf = '<embed src=\"' + url + '\" type=\"application/pdf\" class=\"pdf-view\"/>'\n       \n        var pdf_url = document.location.origin;\n        pdf_url += '/libs/pdfjs/web/viewer.html?file=';\n        pdf_url = pdf_url + url;\n        var pdf = '<iframe src=\"' + pdf_url + '\" style=\"width: 100%;position: absolute;height: 100%;box-sizing: border-box;left: 0;top: 0;\" frameborder=\"0\" scrolling=\"no\"></iframe>'\n        var modalBody = document.createElement(\"div\");\n        modalBody.className = \"modal-body\";\n        modalBody.innerHTML = pdf;\n        // modalBody.append();\n        modalContent.append(modalBody);\n        modalDialog.append(modalContent);\n        div.append(modalDialog);\n        var body = document.getElementById(\"root\");\n        body.append(div);\n    }\n\n    /**\n     * @description Add text error message when not calling server or api error\n     * @author Long.Pham 13/06/2021\n     */\n    showErrorMessage(msg) {\n        document.body.classList.add('system-error');\n        var html = '<div class=\"notification-error\">';\n        html += '<p>';\n        html += msg;\n        html += '<a class=\"close-notification-error icon-cancel-music\"></a>';\n        html += '</p>'\n        html += '</div>';\n\n        if (!$('.notification-error').length) {\n            $('#root').prepend(html);\n        }\n\n        if ($('.close-notification-error').length) {\n            $('.close-notification-error').on('click', function () {\n                if ($('.system-error').length) {\n                    $('body').removeClass('system-error');\n                }\n                if ($('.notification-error').length) {\n                    $('.notification-error').remove();\n                }\n            });\n        }\n        setTimeout(function () {\n            if ($('.system-error').length) {\n                $('body').removeClass('system-error');\n            }\n            if ($('.notification-error').length) {\n                $('.notification-error').remove();\n            }\n        }, Constants.ERROR_MSG_TIMEOUT);\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}