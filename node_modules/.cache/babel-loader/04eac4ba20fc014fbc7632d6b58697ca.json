{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import DeviceJsx from'./Device.jsx';import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../utils/Constants';import ClientDeviceService from'../../../../../services/ClientDeviceService';import*as FileSaver from'file-saver';import*as XLSX from'xlsx';import moment from'moment';var Device=/*#__PURE__*/function(_BaseComponent){_inherits(Device,_BaseComponent);var _super=_createSuper(Device);function Device(props,context){var _this;_classCallCheck(this,Device);_this=_super.call(this,props,context);_this.downloadData=function(){var dataList=_this.state.dataList;var t=_this.props.t;if(!Libs.isArrayData(dataList))return;var dataExport=[];for(var i=0,len=dataList.length;i<len;i++){var itemLevel=dataList[i].alerts;var error=0,warning=0,info=0,fatal=0,debug=0;if(Libs.isArrayData(itemLevel)){for(var j=0,leng=itemLevel.length;j<leng;j++){switch(parseInt(itemLevel[j].id)){case 1:error=itemLevel[j].total_alert;break;case 2:warning=itemLevel[j].total_alert;break;case 3:info=itemLevel[j].total_alert;break;case 4:fatal=itemLevel[j].total_alert;break;case 5:debug=itemLevel[j].total_alert;break;}}}dataExport.push({'ID':dataList[i].id,'Device name':dataList[i].name,'Model':dataList[i].model,'Serial number':dataList[i].serial_number,'Device type':dataList[i].device_type_name,'Power now':Libs.formatNum(dataList[i].power_now,'#,###.##')+\" kW\",'Energy today':Libs.formatNum(dataList[i].today_energy,'#,###.##')+\" kWh\",'Lifetime':Libs.formatElectricalUnit(dataList[i].lifetime,'h'),'Error':error,'Warning':warning,'Info':info,'Fatal':fatal,'Debug':debug});}var fileType='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';var fileExtension='.xlsx';var ws=XLSX.utils.json_to_sheet(dataExport,{skipHeader:false});var wb={SheetNames:['Alerts'],Sheets:{'Alerts':ws}};var excelBuffer=XLSX.write(wb,{bookType:'xlsx',type:'array'});var data=new Blob([excelBuffer],{type:fileType});FileSaver.saveAs(data,\"Export-alerts-\"+moment().format('YYYY-MM-DD_hh:mm:ss')+fileExtension);};_this.onClickViewDevice=function(index){var dataList=_this.state.dataList;if(!Libs.isArrayData(dataList))return;var item=dataList[index];if(Libs.isObjectEmpty(item))return;item.screen_mode=Constants.SCREEN_MODE.ADD;_this.setState({show_tab:1,curItem:item,viewDevice:true});};_this.onClickChartDevice=function(index){var dataList=_this.state.dataList;if(!Libs.isArrayData(dataList))return;var item=dataList[index];if(Libs.isObjectEmpty(item))return;item.screen_mode=Constants.SCREEN_MODE.ADD;_this.setState({show_tab:3,curItem:item,viewDevice:true});// let curItem = this.state.curItem;\n// curItem.data_send_time = 1;\n// curItem.type = 1;\n// curItem.screen_mode = Constants.SCREEN_MODE.ADD;\n// this.setState({\n//     curItem: curItem,\n//     show_tab: 3,\n//     viewDevice: true\n// });\n};_this.viewAlertDevice=function(index){var _this$state=_this.state,dataList=_this$state.dataList,curItem=_this$state.curItem;if(!Libs.isArrayData(dataList))return;var item=dataList[index];if(Libs.isObjectEmpty(item))return;curItem.screen_mode=Constants.SCREEN_MODE.ADD;_this.setState({curItem:Object.assign(curItem,item),show_tab:2,viewDevice:true});};_this.onClickCloseViewDevice=function(status){if(status){// this.getList();\n}_this.setState({viewDevice:false});};_this.jsxTemplate=DeviceJsx;_this.state={hash_id:!Libs.isObjectEmpty(_this.params)?_this.params.id:null,curItem:{},dataList:[],show_tab:1,searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1,max_date:Libs.getCurrentDDMMYYYY(),current_date:Libs.getCurrentDDMMYYYY()},viewDevice:false,formSearch:false};_this.paging={total:0,current:1,currentInput:1};_this.inputChangedHandler=_this.inputChangedHandler.bind(_assertThisInitialized(_this));_this.inputChangedEnter=_this.inputChangedEnter.bind(_assertThisInitialized(_this));_this.inputChangedBlue=_this.inputChangedBlue.bind(_assertThisInitialized(_this));return _this;}_createClass(Device,[{key:\"componentDidMount\",value:function componentDidMount(){this.getList();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var self=this;if(nextProps.match.params.id!==this.props.match.params.id){this.setState({hash_id:nextProps.match.params.id},function(){self.getList();});}}/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */},{key:\"handleInputDateChange\",value:function handleInputDateChange(event){var target=event.target;var name=target.name;var self=this;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var searchParam=this.state.searchParam;searchParam[name]=value;this.setState({searchParam:searchParam},function(){self.getList();});}}},{key:\"getList\",value:/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */function getList(){var self=this;var params=this.state.searchParam;params.id_language=this.employee.id_language;params.id_employee=this.employee.id_employee;params.hash_id=this.state.hash_id;params.type='customer';ClientDeviceService.instance.getListDeviceByHashId(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataList:data});var total=parseInt(total_row/self.state.searchParam.limit);if(total_row%self.state.searchParam.limit>0){total=total+1;}self.paging.total=total;self.paging.current=self.state.searchParam.index;self.paging.currentInput=self.state.searchParam.index;self.state.total_row=total_row;}else{self.setState({dataList:[],total_row:0});self.paging.total=0;self.paging.current=1;self.paging.currentInput=1;}self.forceUpdate();});}},{key:\"inputChangedHandler\",value:function inputChangedHandler(event){var self=this;var target=event.target;var name=target.name;var value=target.value;if(name==='current'){if(!Libs.isBlank(value)){var t=this.props.t;if(!Libs.isNumber(value)){self.toast(t('common.page_is_number'),\"error\");return;}}self.paging.currentInput=value;self.forceUpdate();}if(name==='limit'){var searchParam=this.state.searchParam;searchParam.limit=value;this.setState({searchParam:searchParam},function(){self.getList();});}}},{key:\"inputChangedEnter\",value:function inputChangedEnter(event){var self=this;if(event.key==='Enter'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}},{key:\"inputChangedBlue\",value:function inputChangedBlue(event){var self=this;var target=event.target;var name=target.name;if(name==='current'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}/**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onSelectPage\",value:function onSelectPage(index){var self=this;self.state.searchParam.index=index;if(index>0){self.state.searchParam.offset=(index-1)*self.state.searchParam.limit;}else{self.state.searchParam.offset=0;}self.getList();}/**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onClickReload\",value:function onClickReload(){var self=this;self.getList();}/**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */},{key:\"onSort\",value:function onSort(event,sortKey){this.state.searchParam.sort_column=sortKey;this.state.searchParam.order_by=this.state.searchParam.order_by===''||this.state.searchParam.order_by==='asc'?'desc':'asc';this.getList();}/**\n      * @description Call form search\n      * @author Long.Pham 12/05/2021\n      */},{key:\"onSearch\",value:function onSearch(){var formSearch=this.state.formSearch===false?true:false;this.setState({formSearch:formSearch});}},{key:\"onResetSearch\",value:function onResetSearch(){var self=this;var searchParam=this.state.searchParam;searchParam.name=null;searchParam.id=null;searchParam.index=1;searchParam.offset=0;self.paging.current=1;self.paging.currentInput=1;self.paging.total=1;self.setState({searchParam:searchParam},function(){self.getList();});}/**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */},{key:\"handleSearch\",value:function handleSearch(){this.getList();}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return Device;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(Device);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModuleProject/Device/Device.js"],"names":["DeviceJsx","BaseComponent","Libs","withTranslation","Constants","ClientDeviceService","FileSaver","XLSX","moment","Device","props","context","downloadData","dataList","state","t","isArrayData","dataExport","i","len","length","itemLevel","alerts","error","warning","info","fatal","debug","j","leng","parseInt","id","total_alert","push","name","model","serial_number","device_type_name","formatNum","power_now","today_energy","formatElectricalUnit","lifetime","fileType","fileExtension","ws","utils","json_to_sheet","skipHeader","wb","SheetNames","Sheets","excelBuffer","write","bookType","type","data","Blob","saveAs","format","onClickViewDevice","index","item","isObjectEmpty","screen_mode","SCREEN_MODE","ADD","setState","show_tab","curItem","viewDevice","onClickChartDevice","viewAlertDevice","Object","assign","onClickCloseViewDevice","status","jsxTemplate","hash_id","params","searchParam","limit","COMMON","LIMIT","offset","max_date","getCurrentDDMMYYYY","current_date","formSearch","paging","total","current","currentInput","inputChangedHandler","bind","inputChangedEnter","inputChangedBlue","getList","nextProps","self","match","event","target","value","checked","id_language","employee","id_employee","instance","getListDeviceByHashId","total_row","forceUpdate","isBlank","isNumber","toast","key","onSelectPage","sortKey","sort_column","order_by","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import DeviceJsx from './Device.jsx';\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../utils/Constants';\nimport ClientDeviceService from '../../../../../services/ClientDeviceService';\nimport * as FileSaver from 'file-saver';\nimport * as XLSX from 'xlsx';\nimport moment from 'moment';\n\nclass Device extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = DeviceJsx;\n        this.state = {\n            hash_id: !Libs.isObjectEmpty(this.params) ? this.params.id : null,\n            curItem: {},\n            dataList: [],\n            show_tab: 1,\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n                max_date: Libs.getCurrentDDMMYYYY(),\n                current_date: Libs.getCurrentDDMMYYYY()\n            },\n            viewDevice: false,\n            formSearch: false\n        };\n\n        this.paging = {\n            total: 0,\n            current: 1,\n            currentInput: 1\n        };\n        this.inputChangedHandler = this.inputChangedHandler.bind(this);\n        this.inputChangedEnter = this.inputChangedEnter.bind(this);\n        this.inputChangedBlue = this.inputChangedBlue.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.getList();\n    }\n    componentWillReceiveProps(nextProps) {\n        let self = this;\n        if (nextProps.match.params.id !== this.props.match.params.id) {\n            this.setState({\n                hash_id: nextProps.match.params.id\n            }, () => {\n                self.getList();\n            });\n        }\n    }\n\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputDateChange(event) {\n        let target = event.target;\n        let name = target.name;\n        var self = this;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { searchParam } = this.state;\n            searchParam[name] = value;\n            this.setState({ searchParam }, () => {\n                self.getList();\n            });\n        }\n    }\n\n\n    downloadData = () => {\n        var { dataList } = this.state;\n        var { t } = this.props;\n        if (!Libs.isArrayData(dataList)) return;\n\n        var dataExport = [];\n        for (var i = 0, len = dataList.length; i < len; i++) {\n            var itemLevel = dataList[i].alerts;\n            var error = 0, warning = 0, info = 0, fatal = 0, debug = 0;\n            if (Libs.isArrayData(itemLevel)) {\n                for (var j = 0, leng = itemLevel.length; j < leng; j++) {\n                    switch (parseInt(itemLevel[j].id)) {\n                        case 1:\n                            error = itemLevel[j].total_alert;\n                            break;\n                        case 2:\n                            warning = itemLevel[j].total_alert;\n                            break;\n                        case 3:\n                            info = itemLevel[j].total_alert;\n                            break;\n                        case 4:\n                            fatal = itemLevel[j].total_alert;\n                            break;\n                        case 5:\n                            debug = itemLevel[j].total_alert;\n                            break;\n                    }\n                }\n            }\n            dataExport.push({\n                'ID': dataList[i].id,\n                'Device name': dataList[i].name,\n                'Model': dataList[i].model,\n                'Serial number': dataList[i].serial_number,\n                'Device type': dataList[i].device_type_name,\n                'Power now': Libs.formatNum(dataList[i].power_now, '#,###.##') + \" kW\",\n                'Energy today': Libs.formatNum(dataList[i].today_energy, '#,###.##') + \" kWh\",\n                'Lifetime': Libs.formatElectricalUnit(dataList[i].lifetime, 'h'),\n                'Error': error,\n                'Warning': warning,\n                'Info': info,\n                'Fatal': fatal,\n                'Debug': debug\n            });\n        }\n\n        const fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\n        const fileExtension = '.xlsx';\n        const ws = XLSX.utils.json_to_sheet(dataExport, { skipHeader: false });\n        const wb = {\n            SheetNames: ['Alerts'],\n            Sheets: { 'Alerts': ws }\n        };\n        const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\n        const data = new Blob([excelBuffer], { type: fileType });\n        FileSaver.saveAs(data, \"Export-alerts-\" + moment().format('YYYY-MM-DD_hh:mm:ss') + fileExtension);\n    }\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getList() {\n        let self = this;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        params.id_employee = this.employee.id_employee;\n        params.hash_id = this.state.hash_id;\n        params.type = 'customer';\n        \n        ClientDeviceService.instance.getListDeviceByHashId(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataList: data\n                });\n\n                var total = parseInt(total_row / self.state.searchParam.limit);\n                if (total_row % self.state.searchParam.limit > 0) {\n                    total = total + 1;\n                }\n                self.paging.total = total;\n                self.paging.current = self.state.searchParam.index;\n                self.paging.currentInput = self.state.searchParam.index;\n                self.state.total_row = total_row;\n\n            } else {\n                self.setState({\n                    dataList: [],\n                    total_row: 0\n                });\n                self.paging.total = 0;\n                self.paging.current = 1;\n                self.paging.currentInput = 1;\n            }\n            self.forceUpdate();\n        });\n    }\n\n\n    onClickViewDevice = (index) => {\n        let { dataList } = this.state;\n        if (!Libs.isArrayData(dataList)) return;\n        var item = dataList[index];\n        if (Libs.isObjectEmpty(item)) return;\n\n        item.screen_mode = Constants.SCREEN_MODE.ADD;\n        this.setState({\n            show_tab: 1,\n            curItem: item,\n            viewDevice: true\n        });\n    };\n\n\n    onClickChartDevice = (index) => {\n        let { dataList } = this.state;\n        if (!Libs.isArrayData(dataList)) return;\n        var item = dataList[index];\n        if (Libs.isObjectEmpty(item)) return;\n\n        item.screen_mode = Constants.SCREEN_MODE.ADD;\n        this.setState({\n            show_tab: 3,\n            curItem: item,\n            viewDevice: true\n        });\n\n        // let curItem = this.state.curItem;\n        // curItem.data_send_time = 1;\n        // curItem.type = 1;\n\n        // curItem.screen_mode = Constants.SCREEN_MODE.ADD;\n        // this.setState({\n        //     curItem: curItem,\n        //     show_tab: 3,\n        //     viewDevice: true\n        // });\n    };\n\n    viewAlertDevice = (index) => {\n        var { dataList, curItem } = this.state;\n        if (!Libs.isArrayData(dataList)) return;\n        var item = dataList[index];\n        if (Libs.isObjectEmpty(item)) return;\n        curItem.screen_mode = Constants.SCREEN_MODE.ADD;\n        this.setState({\n            curItem: Object.assign(curItem, item),\n            show_tab: 2,\n            viewDevice: true\n        })\n    }\n\n    onClickCloseViewDevice = (status) => {\n        if (status) {\n            // this.getList();\n        }\n        this.setState({\n            viewDevice: false\n        })\n    }\n\n\n\n\n    inputChangedHandler(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name === 'current') {\n            if (!Libs.isBlank(value)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(value)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            self.paging.currentInput = value;\n            self.forceUpdate();\n        }\n\n        if (name === 'limit') {\n            var { searchParam } = this.state;\n            searchParam.limit = value;\n            this.setState({\n                searchParam: searchParam\n            }, () => {\n                self.getList();\n            })\n        }\n    }\n\n    inputChangedEnter(event) {\n        let self = this;\n        if (event.key === 'Enter') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n    inputChangedBlue(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        if (name === 'current') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n\n    /**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onSelectPage(index) {\n        let self = this;\n        self.state.searchParam.index = index;\n\n        if (index > 0) {\n            self.state.searchParam.offset = (index - 1) * self.state.searchParam.limit;\n        } else {\n            self.state.searchParam.offset = 0;\n        }\n        self.getList();\n    }\n\n\n    /**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onClickReload() {\n        let self = this;\n        self.getList();\n    }\n\n\n    /**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */\n\n    onSort(event, sortKey) {\n        this.state.searchParam.sort_column = sortKey;\n        this.state.searchParam.order_by = (this.state.searchParam.order_by === '' || this.state.searchParam.order_by === 'asc') ? 'desc' : 'asc';\n        this.getList();\n    }\n\n    /**\n      * @description Call form search\n      * @author Long.Pham 12/05/2021\n      */\n    onSearch() {\n        let formSearch = (this.state.formSearch === false) ? true : false;\n        this.setState({\n            formSearch: formSearch\n        });\n    }\n\n    onResetSearch() {\n        let self = this;\n        let searchParam = this.state.searchParam;\n        searchParam.name = null;\n        searchParam.id = null;\n        searchParam.index = 1;\n        searchParam.offset = 0;\n        self.paging.current = 1;\n        self.paging.currentInput = 1;\n        self.paging.total = 1;\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            self.getList();\n        });\n    }\n\n    /**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */\n    handleSearch() {\n        this.getList();\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Device)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}