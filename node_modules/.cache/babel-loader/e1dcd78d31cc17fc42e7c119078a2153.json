{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import ReportsJsx from'./Reports.jsx';import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import{withTranslation}from'react-i18next';import MainReportService from'../../../../../services/MainReportService';import moment from'moment';var Reports=/*#__PURE__*/function(_BaseComponent){_inherits(Reports,_BaseComponent);var _super=_createSuper(Reports);function Reports(props,context){var _this;_classCallCheck(this,Reports);_this=_super.call(this,props,context);_this.onBeforePrint=function(){_this.setState({statusPrint:true});};_this.onAfterPrint=function(){_this.setState({statusPrint:false});};_this.handleDropdownChange=function(item,name){var self=_assertThisInitialized(_this);var searchParam=self.state.searchParam;if(Libs.isObjectEmpty(item)){searchParam.type='';}else{var value=item.value;searchParam[name]=value;}self.setState({searchParam:searchParam},function(){if(searchParam.type==1){self.getDataReportYear();}else{self.getDataReportMonth();}});};_this.jsxTemplate=ReportsJsx;_this.state={hash_id:!Libs.isObjectEmpty(_this.params)?_this.params.id:null,curItem:{},dataList:[],statusPrint:false,dataType:[{id:1,value:1,label:\"Year Report\"},{id:2,value:2,label:\"Month Report\"},{id:3,value:3,label:\"Alarm Report\"}],searchParam:{type:2,max_date:moment().format('MM/YYYY'),start_date:moment().add(-11,'M').format('MM/YYYY'),end_date:moment().format('MM/YYYY')},chartMonthOption:{},chartOptionAlarm:{},chartOption1:{},chartOption2:{}};_this.handleInputDateChange=_this.handleInputDateChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Reports,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$state=this.state,searchParam=_this$state.searchParam,view=_this$state.view;if(searchParam.type==2){this.getDataReportMonth();}else if(searchParam.type==1){this.getDataReportYear();}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var self=this,searchParam=this.state.searchParam;if(nextProps.match.params.id!==this.props.match.params.id){this.setState({hash_id:nextProps.match.params.id},function(){if(searchParam.type==2){self.getDataReportMonth();}else if(searchParam.type==1){self.getDataReportYear();}});}}},{key:\"handleInputDateChange\",value:/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */function handleInputDateChange(event){var target=event.target,self=this;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var searchParam=this.state.searchParam;if(searchParam.type===1){if(name==='start_date'){var startDate=value.split(\"/\");var endDate=null;if(startDate.length>0){endDate=startDate[0]+\"/01/\"+startDate[1];}if(Libs.isBlank(endDate)){return;}var dateIsAfter=moment(Libs.addMonths(endDate,11)).isAfter(moment());if(dateIsAfter){searchParam.end_date=moment().format('MM/YYYY');}else{searchParam.end_date=moment(Libs.addMonths(endDate,11)).format('MM/YYYY');}}}searchParam[name]=value;this.setState({searchParam:searchParam},function(){if(searchParam.type===1){self.getDataReportYear();}else{self.getDataReportMonth();}});}}},{key:\"getDataReportMonth\",value:function getDataReportMonth(){var _this2=this;var _this$state2=this.state,hash_id=_this$state2.hash_id,searchParam=_this$state2.searchParam,self=this;if(Libs.isBlank(hash_id))return;var params=Object.assign({},searchParam);params.start_date='01/'+searchParam.start_date;params.end_date='01/'+searchParam.end_date;params.hash_id=hash_id;params.id_employee=this.employee.id_employee;params.id_language=this.employee.id_language;params.type='private';MainReportService.instance.getDataReportMonth(params,function(data){if(data){var chartMonthOption={credits:{enabled:false},exporting:{enabled:false},chart:{zoomType:'xy',height:360},title:{text:null},colors:['#78c1f5','#e2a76c'],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:'{value}',enabled:true},title:{text:'kWh',enabled:true}}],tooltip:{shared:true},legend:{layout:'horizontal',align:'center',verticalAlign:'bottom',borderWidth:0,showInLegend:false,enabled:false},plotOptions:{column:{dataLabels:{enabled:true},enableMouseTracking:false}},series:[]};var dataEnergyMonth=data.dataEnergyMonth;if(Libs.isArrayData(dataEnergyMonth)){var categories=[],seriesData=[],series=[],xAxis=[];dataEnergyMonth.map(function(item,index){categories.push(parseInt(item.day));seriesData.push(item.activeEnergy);});xAxis.push({categories:categories,crosshair:true});series.push({name:'',type:'column',data:seriesData,tooltip:{valueSuffix:' kWh'}});chartMonthOption.xAxis=xAxis;chartMonthOption.series=series;}_this2.setState({curItem:data,chartMonthOption:chartMonthOption},function(){self.forceUpdate();});}},false);}},{key:\"getDataReportYear\",value:function getDataReportYear(){var _this3=this;var _this$state3=this.state,hash_id=_this$state3.hash_id,searchParam=_this$state3.searchParam,chartOptionAlarm=_this$state3.chartOptionAlarm,self=this;if(Libs.isBlank(hash_id))return;var t=this.props.t;var params=Object.assign({},searchParam);// if (searchParam.type == 1) {\n//     params.start_date = searchParam.start_date;\n//     params.end_date = searchParam.end_date;\n// }\nparams.start_date='01/'+searchParam.start_date;params.end_date='01/'+searchParam.end_date;// params.start_date = '01/07/2021';\n// params.end_date = '30/10/2021';\nparams.hash_id=hash_id;params.id_employee=this.employee.id_employee;params.id_language=this.employee.id_language;MainReportService.instance.getDataReportYear(params,function(data){if(data){var dataAlarms=data.dataAlarms;var chartOptionAlarm={credits:{enabled:false},exporting:{enabled:false},chart:{zoomType:'xy',height:360},title:{text:null},colors:['#f5893b','#66bc51','#004ec3'],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:'{value}',enabled:true},title:{text:'kWh',enabled:false}}],tooltip:{shared:true},legend:{layout:'horizontal',align:'center',verticalAlign:'bottom',borderWidth:0,showInLegend:false},plotOptions:{stacking:'normal',spline:{dataLabels:{enabled:true},enableMouseTracking:false}},series:[]};var chartOption1={credits:{enabled:false},exporting:{enabled:false},chart:{zoomType:'xy',height:360},title:{text:null},colors:['#78c1f5','#f58634'],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:'{value}',enabled:true},title:{text:t('report.energy_yield'),enabled:false}},{// Secondary yAxis\ntitle:{text:t('report.PVSyst_energy_yield'),enabled:false},labels:{format:'{value}'},opposite:true}],tooltip:{// shared: true\n},legend:{layout:'horizontal',align:'center',verticalAlign:'bottom',borderWidth:0,showInLegend:false},plotOptions:{stacking:'normal',line:{dataLabels:{enabled:true},enableMouseTracking:false},column:{dataLabels:{enabled:true,rotation:270,x:0,y:100,style:{fontSize:\"8px\"}},enableMouseTracking:false}},series:[]};var chartOption2={credits:{enabled:false},exporting:{enabled:false},chart:{zoomType:'xy',height:360},title:{text:null},colors:['#78c1f5','#f58634'],xAxis:[{categories:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],crosshair:true}],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:'{value}',enabled:true},title:{text:t('report.energy_yield'),enabled:false}},{// Secondary yAxis\ntitle:{text:t('report.PVSyst_energy_yield'),enabled:false},labels:{format:'{value}'},opposite:true}],tooltip:{shared:true},legend:{layout:'horizontal',align:'center',verticalAlign:'bottom',borderWidth:0,showInLegend:false},series:[]};if(Libs.isArrayData(dataAlarms)){var dataItem=[],categories=[],series=[],xAxis=[];for(var i=0,len=dataAlarms.length;i<len;i++){categories.push(dataAlarms[i].time_full);dataItem.push([dataAlarms[i].time_full,dataAlarms[i].total_alarm]);}xAxis.push({categories:categories,crosshair:true});series.push({name:'Alarms',type:'spline',data:dataItem,tooltip:{valueSuffix:''}});chartOptionAlarm.xAxis=xAxis;chartOptionAlarm.series=series;}else{chartOptionAlarm.xAxis=[];chartOptionAlarm.series=[];data.dataAlarms=[];}var dataEnergyMonth=data.dataEnergyMonth;var seriesRowET1=[],seriesRow1=[],series1=[],categories1=[],xAxis1=[];var seriesRowET2=[],seriesRow2=[],series2=[],categories2=[],xAxis2=[];if(Libs.isArrayData(dataEnergyMonth)){for(var i=0,len=dataEnergyMonth.length;i<len;i++){categories1.push(dataEnergyMonth[i].time_full);seriesRowET1.push([dataEnergyMonth[i].time_full,dataEnergyMonth[i].estimate_energy]);seriesRow1.push([dataEnergyMonth[i].time_full,dataEnergyMonth[i].activeEnergy]);categories2.push(dataEnergyMonth[i].time_full);seriesRowET2.push([dataEnergyMonth[i].time_full,dataEnergyMonth[i].sum_estimate_energy==0?null:dataEnergyMonth[i].sum_estimate_energy]);seriesRow2.push([dataEnergyMonth[i].time_full,dataEnergyMonth[i].sum_activeEnergy==0?null:dataEnergyMonth[i].sum_activeEnergy]);}xAxis1.push({categories:categories1,crosshair:true});series1.push({name:t('report.PVSyst_energy_yield')+' kWh',type:'column',zIndex:1,data:seriesRowET1,tooltip:{valueSuffix:'kWh'},dataLabels:{enabled:true,rotation:-90,color:'#000',align:'center',format:'{point.y}',y:20,style:{fontSize:'8px',fontFamily:'Verdana, sans-serif'}}});series1.push({name:t('report.energy_yield')+' (kWh)',type:'column',yAxis:0,zIndex:2,data:seriesRow1,tooltip:{valueSuffix:' kWh'},dataLabels:{enabled:true,rotation:-90,color:'#000',align:'center',format:'{point.y}',y:20,style:{fontSize:'8px',fontFamily:'Verdana, sans-serif'}}});chartOption1.series=series1;chartOption1.xAxis=xAxis1;xAxis2.push({categories:categories2,crosshair:true});series2.push({name:t('report.PVSyst_energy_yield')+' kWh',type:'column',zIndex:2,data:seriesRowET2,tooltip:{valueSuffix:'kWh'},dataLabels:{enabled:true,rotation:-90,color:'#000',align:'center',format:'{point.y}',y:20,style:{fontSize:'8px',fontFamily:'Verdana, sans-serif'}}});series2.push({name:t('report.energy_yield')+' (kWh)',type:'column',yAxis:0,zIndex:1,data:seriesRow2,tooltip:{valueSuffix:' kWh'},dataLabels:{enabled:true,rotation:-90,color:'#000',align:'center',format:'{point.y}',y:20,style:{fontSize:'8px',fontFamily:'Verdana, sans-serif'}}});chartOption2.series=series2;chartOption2.xAxis=xAxis2;}else{data.dataEnergyMonth=[];}_this3.setState({curItem:data,chartOptionAlarm:chartOptionAlarm,chartOption1:chartOption1,chartOption2:chartOption2},function(){});}},false);}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return Reports;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(Reports);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModulePrivate/Reports/Reports.js"],"names":["ReportsJsx","BaseComponent","Libs","withTranslation","MainReportService","moment","Reports","props","context","onBeforePrint","setState","statusPrint","onAfterPrint","handleDropdownChange","item","name","self","searchParam","state","isObjectEmpty","type","value","getDataReportYear","getDataReportMonth","jsxTemplate","hash_id","params","id","curItem","dataList","dataType","label","max_date","format","start_date","add","end_date","chartMonthOption","chartOptionAlarm","chartOption1","chartOption2","handleInputDateChange","bind","view","nextProps","match","event","target","checked","startDate","split","endDate","length","isBlank","dateIsAfter","addMonths","isAfter","Object","assign","id_employee","employee","id_language","instance","data","credits","enabled","exporting","chart","zoomType","height","title","text","colors","xAxis","yAxis","min","lineWidth","gridLineWidth","labels","tooltip","shared","legend","layout","align","verticalAlign","borderWidth","showInLegend","plotOptions","column","dataLabels","enableMouseTracking","series","dataEnergyMonth","isArrayData","categories","seriesData","map","index","push","parseInt","day","activeEnergy","crosshair","valueSuffix","forceUpdate","t","dataAlarms","stacking","spline","opposite","line","rotation","x","y","style","fontSize","dataItem","i","len","time_full","total_alarm","seriesRowET1","seriesRow1","series1","categories1","xAxis1","seriesRowET2","seriesRow2","series2","categories2","xAxis2","estimate_energy","sum_estimate_energy","sum_activeEnergy","zIndex","color","fontFamily","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import ReportsJsx from './Reports.jsx';\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport MainReportService from '../../../../../services/MainReportService';\nimport moment from 'moment';\n\nclass Reports extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = ReportsJsx;\n        this.state = {\n            hash_id: !Libs.isObjectEmpty(this.params) ? this.params.id : null,\n            curItem: {},\n            dataList: [],\n            statusPrint: false,\n            dataType: [\n                {\n                    id: 1,\n                    value: 1,\n                    label: \"Year Report\"\n                },\n                {\n                    id: 2,\n                    value: 2,\n                    label: \"Month Report\"\n                },\n                {\n                    id: 3,\n                    value: 3,\n                    label: \"Alarm Report\"\n                }\n            ],\n\n            searchParam: {\n                type: 2,\n                max_date: moment().format('MM/YYYY'),\n                start_date: moment().add(-11, 'M').format('MM/YYYY'),\n                end_date: moment().format('MM/YYYY')\n            },\n            chartMonthOption: {},\n            chartOptionAlarm: {},\n            chartOption1: {},\n            chartOption2: {}\n        };\n\n        this.handleInputDateChange = this.handleInputDateChange.bind(this);\n\n    }\n\n    componentDidMount() {\n        var { searchParam, view } = this.state;\n        if (searchParam.type == 2) {\n            this.getDataReportMonth();\n        } else if (searchParam.type == 1) {\n            this.getDataReportYear();\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        let self = this, searchParam = this.state.searchParam;\n        if (nextProps.match.params.id !== this.props.match.params.id) {\n            this.setState({\n                hash_id: nextProps.match.params.id\n            }, () => {\n                if (searchParam.type == 2) {\n                    self.getDataReportMonth();\n                } else if(searchParam.type == 1) {\n                    self.getDataReportYear();\n                }\n            });\n        }\n    }\n\n    onBeforePrint = () => {\n        this.setState({\n            statusPrint: true\n        });\n    }\n\n    onAfterPrint = () => {\n        this.setState({\n            statusPrint: false\n        });\n    }\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputDateChange(event) {\n        let target = event.target, self = this;\n        let name = target.name;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { searchParam } = this.state;\n            if (searchParam.type === 1) {\n                if (name === 'start_date') {\n                    var startDate = value.split(\"/\");\n                    var endDate = null;\n                    if (startDate.length > 0) {\n                        endDate = startDate[0] + \"/01/\" + startDate[1];\n                    }\n                    if (Libs.isBlank(endDate)) { return }\n\n                    const dateIsAfter = moment(Libs.addMonths(endDate, 11)).isAfter(moment());\n                    if (dateIsAfter) {\n                        searchParam.end_date = moment().format('MM/YYYY');\n                    } else {\n                        searchParam.end_date = moment(Libs.addMonths(endDate, 11)).format('MM/YYYY');\n                    }\n                }\n            }\n\n            searchParam[name] = value;\n            this.setState({ searchParam }, () => {\n                if (searchParam.type === 1) {\n                    self.getDataReportYear();\n                } else {\n                    self.getDataReportMonth();\n                }\n\n            });\n        }\n    }\n\n    getDataReportMonth() {\n        var { hash_id, searchParam } = this.state, self = this;\n        if (Libs.isBlank(hash_id)) return;\n        var params = Object.assign({}, searchParam);\n        params.start_date = '01/' + searchParam.start_date;\n        params.end_date = '01/' + searchParam.end_date;\n\n        params.hash_id = hash_id;\n        params.id_employee = this.employee.id_employee;\n        params.id_language = this.employee.id_language;\n        params.type = 'private';\n\n        MainReportService.instance.getDataReportMonth(params, data => {\n            if (data) {\n                var chartMonthOption = {\n                    credits: { enabled: false },\n                    exporting: { enabled: false },\n                    chart: {\n                        zoomType: 'xy',\n                        height: 360\n                    },\n                    title: {\n                        text: null,\n\n                    },\n                    colors: ['#78c1f5', '#e2a76c'],\n                    xAxis: [],\n                    yAxis: [{\n                        min: 0,\n                        lineWidth: 1,\n                        gridLineWidth: 1,\n                        labels: {\n                            format: '{value}',\n                            enabled: true\n                        },\n                        title: {\n                            text: 'kWh',\n                            enabled: true\n                        }\n                    }],\n                    tooltip: {\n                        shared: true\n                    },\n                    legend: {\n\n                        layout: 'horizontal',\n                        align: 'center',\n                        verticalAlign: 'bottom',\n                        borderWidth: 0,\n                        showInLegend: false,\n                        enabled: false\n\n                    },\n                    plotOptions: {\n                        column: {\n                            dataLabels: {\n                                enabled: true\n                            },\n                            enableMouseTracking: false\n                        },\n                    },\n\n                    series: []\n                };\n\n                var dataEnergyMonth = data.dataEnergyMonth;\n                if (Libs.isArrayData(dataEnergyMonth)) {\n                    var categories = [], seriesData = [], series = [], xAxis = [];\n                    dataEnergyMonth.map((item, index) => {\n                        categories.push(parseInt(item.day));\n                        seriesData.push(item.activeEnergy);\n                    });\n\n                    xAxis.push(\n                        {\n                            categories: categories,\n                            crosshair: true\n                        }\n                    );\n\n                    series.push(\n                        {\n                            name: '',\n                            type: 'column',\n                            data: seriesData,\n                            tooltip: {\n                                valueSuffix: ' kWh'\n                            }\n                        }\n                    );\n\n                    chartMonthOption.xAxis = xAxis;\n                    chartMonthOption.series = series;\n                }\n\n                this.setState({\n                    curItem: data,\n                    chartMonthOption: chartMonthOption\n                }, () => {\n                    self.forceUpdate();\n                });\n            }\n        }, false);\n\n    }\n\n\n    getDataReportYear() {\n        var { hash_id, searchParam, chartOptionAlarm } = this.state, self = this;\n        if (Libs.isBlank(hash_id)) return;\n        var {t} = this.props;\n        var params = Object.assign({}, searchParam);\n        // if (searchParam.type == 1) {\n        //     params.start_date = searchParam.start_date;\n        //     params.end_date = searchParam.end_date;\n        // }\n\n        params.start_date = '01/' + searchParam.start_date;\n        params.end_date = '01/' + searchParam.end_date;\n\n        // params.start_date = '01/07/2021';\n        // params.end_date = '30/10/2021';\n\n        params.hash_id = hash_id;\n        params.id_employee = this.employee.id_employee;\n        params.id_language = this.employee.id_language;\n\n        MainReportService.instance.getDataReportYear(params, data => {\n            if (data) {\n                var dataAlarms = data.dataAlarms;\n                var chartOptionAlarm = {\n                    credits: { enabled: false },\n                    exporting: { enabled: false },\n                    chart: {\n                        zoomType: 'xy',\n                        height: 360\n                    },\n                    title: {\n                        text: null,\n\n                    },\n                    colors: ['#f5893b', '#66bc51', '#004ec3'],\n                    xAxis: [],\n                    yAxis: [{\n                        min: 0,\n                        lineWidth: 1,\n                        gridLineWidth: 1,\n                        labels: {\n                            format: '{value}',\n                            enabled: true\n                        },\n                        title: {\n                            text: 'kWh',\n                            enabled: false\n                        }\n                    }],\n                    tooltip: {\n                        shared: true\n                    },\n                    legend: {\n\n                        layout: 'horizontal',\n                        align: 'center',\n                        verticalAlign: 'bottom',\n                        borderWidth: 0,\n                        showInLegend: false\n\n                    },\n\n                    plotOptions: {\n                        stacking: 'normal',\n                        spline: {\n                            dataLabels: {\n                                enabled: true\n                            },\n                            enableMouseTracking: false\n                        },\n                    },\n\n                    series: []\n                };\n\n                var chartOption1 = {\n                    credits: { enabled: false },\n                    exporting: { enabled: false },\n                    chart: {\n                        zoomType: 'xy',\n                        height: 360\n                    },\n                    title: {\n                        text: null,\n\n                    },\n                    colors: ['#78c1f5', '#f58634'],\n                    xAxis: [],\n                    yAxis: [{\n                        min: 0,\n                        lineWidth: 1,\n                        gridLineWidth: 1,\n                        labels: {\n                            format: '{value}',\n                            enabled: true\n                        },\n                        title: {\n                            text: t('report.energy_yield'),\n                            enabled: false\n                        }\n                    }, { // Secondary yAxis\n\n                        title: {\n                            text: t('report.PVSyst_energy_yield'),\n                            enabled: false\n                        },\n                        labels: {\n                            format: '{value}',\n                        },\n                        opposite: true\n                    }],\n                    tooltip: {\n                        // shared: true\n                    },\n                    legend: {\n\n                        layout: 'horizontal',\n                        align: 'center',\n                        verticalAlign: 'bottom',\n                        borderWidth: 0,\n                        showInLegend: false\n\n                    },\n                    plotOptions: {\n                        stacking: 'normal',\n                        line: {\n                            dataLabels: {\n                                enabled: true\n                            },\n                            enableMouseTracking: false\n                        },\n\n                        column: {\n                            dataLabels: {\n                                enabled: true,\n                                rotation: 270,\n                                x: 0,\n                                y: 100,\n                                style: {\n                                    fontSize: \"8px\"\n                                }\n                            },\n                            enableMouseTracking: false\n                        },\n                    },\n\n                    series: []\n                };\n\n                var chartOption2 = {\n                    credits: { enabled: false },\n                    exporting: { enabled: false },\n                    chart: {\n                        zoomType: 'xy',\n                        height: 360\n                    },\n                    title: {\n                        text: null,\n\n                    },\n                    colors: ['#78c1f5', '#f58634'],\n                    xAxis: [{\n                        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n                            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n                        crosshair: true\n                    }],\n                    yAxis: [{\n                        min: 0,\n                        lineWidth: 1,\n                        gridLineWidth: 1,\n                        labels: {\n                            format: '{value}',\n                            enabled: true\n                        },\n                        title: {\n                            text: t('report.energy_yield'),\n                            enabled: false\n                        }\n                    }, { // Secondary yAxis\n\n                        title: {\n                            text: t('report.PVSyst_energy_yield'),\n                            enabled: false\n                        },\n                        labels: {\n                            format: '{value}',\n                        },\n                        opposite: true\n                    }],\n                    tooltip: {\n                        shared: true\n                    },\n                    legend: {\n\n                        layout: 'horizontal',\n                        align: 'center',\n                        verticalAlign: 'bottom',\n                        borderWidth: 0,\n                        showInLegend: false\n\n                    },\n\n                    series: []\n                };\n\n                if (Libs.isArrayData(dataAlarms)) {\n                    var dataItem = [], categories = [], series = [], xAxis = [];\n                    for (var i = 0, len = dataAlarms.length; i < len; i++) {\n                        categories.push(dataAlarms[i].time_full);\n                        dataItem.push([dataAlarms[i].time_full, dataAlarms[i].total_alarm]);\n                    }\n\n                    xAxis.push(\n                        {\n                            categories: categories,\n                            crosshair: true\n                        }\n                    );\n\n                    series.push({\n                        name: 'Alarms',\n                        type: 'spline',\n                        data: dataItem,\n                        tooltip: {\n                            valueSuffix: ''\n                        }\n                    });\n\n                    chartOptionAlarm.xAxis = xAxis;\n                    chartOptionAlarm.series = series;\n                } else {\n                    chartOptionAlarm.xAxis = [];\n                    chartOptionAlarm.series = [];\n                    data.dataAlarms = [];\n                }\n\n\n                var dataEnergyMonth = data.dataEnergyMonth;\n                var seriesRowET1 = [], seriesRow1 = [], series1 = [], categories1 = [], xAxis1 = [];\n                var seriesRowET2 = [], seriesRow2 = [], series2 = [], categories2 = [], xAxis2 = [];\n                if (Libs.isArrayData(dataEnergyMonth)) {\n\n                    for (var i = 0, len = dataEnergyMonth.length; i < len; i++) {\n                        categories1.push(dataEnergyMonth[i].time_full);\n                        seriesRowET1.push([dataEnergyMonth[i].time_full, dataEnergyMonth[i].estimate_energy]);\n                        seriesRow1.push([dataEnergyMonth[i].time_full, dataEnergyMonth[i].activeEnergy]);\n\n                        categories2.push(dataEnergyMonth[i].time_full);\n                        seriesRowET2.push([dataEnergyMonth[i].time_full, dataEnergyMonth[i].sum_estimate_energy == 0 ? null : dataEnergyMonth[i].sum_estimate_energy]);\n                        seriesRow2.push([dataEnergyMonth[i].time_full, dataEnergyMonth[i].sum_activeEnergy == 0 ? null : dataEnergyMonth[i].sum_activeEnergy]);\n                    }\n\n                    xAxis1.push({\n                        categories: categories1,\n                        crosshair: true\n                    });\n\n                    series1.push({\n                        name: t('report.PVSyst_energy_yield') + ' kWh',\n                        type: 'column',\n                        zIndex: 1,\n                        data: seriesRowET1,\n                        tooltip: {\n                            valueSuffix: 'kWh'\n                        },\n                        dataLabels: {\n                            enabled: true,\n                            rotation: -90,\n                            color: '#000',\n                            align: 'center',\n                            format: '{point.y}',\n                            y: 20,\n                            style: {\n                                fontSize: '8px',\n                                fontFamily: 'Verdana, sans-serif'\n                            }\n                        }\n                    });\n\n                    series1.push({\n                        name: t('report.energy_yield') +' (kWh)',\n                        type: 'column',\n                        yAxis: 0,\n                        zIndex: 2,\n                        data: seriesRow1,\n                        tooltip: {\n                            valueSuffix: ' kWh'\n                        },\n                        dataLabels: {\n                            enabled: true,\n                            rotation: -90,\n                            color: '#000',\n                            align: 'center',\n                            format: '{point.y}',\n                            y: 20,\n                            style: {\n                                fontSize: '8px',\n                                fontFamily: 'Verdana, sans-serif'\n                            }\n                        }\n                    });\n                    chartOption1.series = series1;\n                    chartOption1.xAxis = xAxis1;\n\n                    xAxis2.push({\n                        categories: categories2,\n                        crosshair: true\n                    });\n\n                    series2.push({\n                        name: t('report.PVSyst_energy_yield') + ' kWh',\n                        type: 'column',\n                        zIndex: 2,\n                        data: seriesRowET2,\n                        tooltip: {\n                            valueSuffix: 'kWh'\n                        },\n                        dataLabels: {\n                            enabled: true,\n                            rotation: -90,\n                            color: '#000',\n                            align: 'center',\n                            format: '{point.y}',\n                            y: 20,\n                            style: {\n                                fontSize: '8px',\n                                fontFamily: 'Verdana, sans-serif'\n                            }\n                        }\n                    });\n\n                    series2.push({\n                        name: t('report.energy_yield') +' (kWh)',\n                        type: 'column',\n                        yAxis: 0,\n                        zIndex: 1,\n                        data: seriesRow2,\n                        tooltip: {\n                            valueSuffix: ' kWh'\n                        },\n                        dataLabels: {\n                            enabled: true,\n                            rotation: -90,\n                            color: '#000',\n                            align: 'center',\n                            format: '{point.y}',\n                            y: 20,\n                            style: {\n                                fontSize: '8px',\n                                fontFamily: 'Verdana, sans-serif'\n                            }\n                        }\n                    });\n\n                    chartOption2.series = series2;\n                    chartOption2.xAxis = xAxis2;\n\n                } else {\n                    data.dataEnergyMonth = [];\n                }\n                this.setState({\n                    curItem: data,\n                    chartOptionAlarm: chartOptionAlarm,\n                    chartOption1: chartOption1,\n                    chartOption2: chartOption2\n                }, () => {\n\n                });\n            }\n        }, false);\n    }\n\n\n\n\n    handleDropdownChange = (item, name) => {\n        var self = this;\n        let searchParam = self.state.searchParam;\n\n        if (Libs.isObjectEmpty(item)) {\n            searchParam.type = '';\n        } else {\n            var value = item.value;\n            searchParam[name] = value;\n        }\n\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            if (searchParam.type == 1) {\n                self.getDataReportYear();\n            } else {\n                self.getDataReportMonth();\n            }\n\n        });\n    }\n\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Reports)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}