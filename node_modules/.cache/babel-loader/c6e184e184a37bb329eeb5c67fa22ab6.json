{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import MoveDevicePopupJsx from'./MoveDevicePopup.jsx';import ProjectService from'../../../../../services/ProjectService';import DeviceService from'../../../../../services/DeviceService';import Constants from'../../../../../utils/Constants';var MoveDevicePopup=/*#__PURE__*/function(_BaseComponent){_inherits(MoveDevicePopup,_BaseComponent);var _super=_createSuper(MoveDevicePopup);function MoveDevicePopup(props){var _this;_classCallCheck(this,MoveDevicePopup);_this=_super.call(this,props);_this.handleDropdownChange=function(item,name,index){if(Libs.isObjectEmpty(item))return;var dataList=_this.state.dataList;if(!Libs.isArrayData(dataList))return;var dataItem=dataList[index];if(Libs.isObjectEmpty(dataItem))return;dataList[index].id_project=item.id;_this.setState({dataList:dataList});};_this.state={curItemProject:_this.props.curItem,curItem:{},dataList:[],dataListProject:[],searchParam:{}};_this.jsxTemplate=MoveDevicePopupJsx;_this.handleDropdownChange=_this.handleDropdownChange.bind(_assertThisInitialized(_this));return _this;}_createClass(MoveDevicePopup,[{key:\"componentDidMount\",value:function componentDidMount(){this.getListDeviceByProject();this.getDataListProject();}},{key:\"getDataListProject\",value:/**\n     * ge list project\n     * @author Long.Pham 2019-06-03\n     */function getDataListProject(){var self=this;var params={id_language:this.employee.id_language,id_project:null};ProjectService.instance.getDropdownList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataListProject:data});}else{self.setState({dataListProject:[]});}});}/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */},{key:\"getListDeviceByProject\",value:function getListDeviceByProject(){var self=this;var _this$state=this.state,curItemProject=_this$state.curItemProject,searchParam=_this$state.searchParam;searchParam.id_project=curItemProject.id;searchParam.id_language=this.employee.id_language;DeviceService.instance.getListDeviceByProject(searchParam,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataList:data});}else{self.setState({dataList:[]});}self.forceUpdate();});}/**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */},{key:\"onSave\",value:function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state2,curItem,dataList,curItemProject,self,params;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state2=this.state,curItem=_this$state2.curItem,dataList=_this$state2.dataList,curItemProject=_this$state2.curItemProject,self=this;params=Object.assign({},curItem);params.screen_mode=Constants.SCREEN_MODE.EDIT;params.dataList=dataList;ProjectService.instance.saveMoveDevice(params,function(status,data,msg){if(status){self.toast(msg,\"info\");self.props.onItemClickCloseMove(false);}},true);case 5:case\"end\":return _context.stop();}}},_callee,this);}));function onSave(){return _onSave.apply(this,arguments);}return onSave;}()}]);return MoveDevicePopup;}(BaseComponent);export default MoveDevicePopup;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/views/desktop/ModuleSystem/Project/MoveDevicePopup.js"],"names":["BaseComponent","Libs","MoveDevicePopupJsx","ProjectService","DeviceService","Constants","MoveDevicePopup","props","handleDropdownChange","item","name","index","isObjectEmpty","dataList","state","isArrayData","dataItem","id_project","id","setState","curItemProject","curItem","dataListProject","searchParam","jsxTemplate","bind","getListDeviceByProject","getDataListProject","self","params","id_language","employee","instance","getDropdownList","data","total_row","forceUpdate","Object","assign","screen_mode","SCREEN_MODE","EDIT","saveMoveDevice","status","msg","toast","onItemClickCloseMove"],"mappings":"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","sourcesContent":["\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport MoveDevicePopupJsx from './MoveDevicePopup.jsx';\nimport ProjectService from '../../../../../services/ProjectService';\nimport DeviceService from '../../../../../services/DeviceService';\nimport Constants from '../../../../../utils/Constants';\n\nclass MoveDevicePopup extends BaseComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            curItemProject: this.props.curItem,\n            curItem: {},\n            dataList: [],\n            dataListProject: [],\n            searchParam: {}\n        }\n\n        this.jsxTemplate = MoveDevicePopupJsx;\n        this.handleDropdownChange = this.handleDropdownChange.bind(this);\n    }\n\n    componentDidMount(){\n        this.getListDeviceByProject();\n        this.getDataListProject();\n    }\n\n\n\n    handleDropdownChange = (item, name, index) => {\n        if(Libs.isObjectEmpty(item)) return;\n        var {dataList} = this.state;\n        if(!Libs.isArrayData(dataList)) return;\n        var dataItem = dataList[index];\n        if(Libs.isObjectEmpty(dataItem)) return;\n\n        dataList[index].id_project = item.id;\n\n        this.setState({\n            dataList: dataList\n        });\n    }\n\n\n    /**\n     * ge list project\n     * @author Long.Pham 2019-06-03\n     */\n     getDataListProject() {\n        let self = this;\n        var params = {\n            id_language: this.employee.id_language,\n            id_project:  null\n        };\n\n        ProjectService.instance.getDropdownList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataListProject: data\n                });\n            } else {\n                self.setState({\n                    dataListProject: []\n                });\n            }\n        })\n    }\n\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n     getListDeviceByProject() {\n        let self = this;\n        var { curItemProject, searchParam } = this.state;\n        searchParam.id_project = curItemProject.id;\n        searchParam.id_language = this.employee.id_language;\n        DeviceService.instance.getListDeviceByProject(searchParam, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataList: data\n                });\n\n            } else {\n                self.setState({\n                    dataList: []\n                });\n            }\n            self.forceUpdate();\n        });\n    }\n\n\n    /**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */\n    async onSave() {\n        var { curItem, dataList, curItemProject } = this.state, self = this;\n\n        var params = Object.assign({}, curItem);\n        params.screen_mode = Constants.SCREEN_MODE.EDIT;\n        params.dataList = dataList;\n        ProjectService.instance.saveMoveDevice(params, function (status, data, msg) {\n            if (status) {\n                self.toast(msg, \"info\");\n                self.props.onItemClickCloseMove(false);\n            }\n        }, true);\n    }\n}\nexport default MoveDevicePopup;"]},"metadata":{},"sourceType":"module"}