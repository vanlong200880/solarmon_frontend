{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import ManualJsx from'./Manual.jsx';import BaseComponent from'../../../../../BaseComponent';import Libs from'../../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../../utils/Constants';import MainDeviceService from'../../../../../../services/MainDeviceService';import ControlValidate from'./ControlValidate';import'./Manual.scss';var Manual=/*#__PURE__*/function(_BaseComponent){_inherits(Manual,_BaseComponent);var _super=_createSuper(Manual);function Manual(props,context){var _this;_classCallCheck(this,Manual);_this=_super.call(this,props,context);_this.calbackChangeMode=function(searchParam){var self=_assertThisInitialized(_this);var params={export_limitation_control_mode:searchParam.scheduled_mode,hash_id:_this.state.hash_id,type:'export_control'};MainDeviceService.instance.updateControlMode(params,function(status,msg){if(status){self.setState({searchParam:searchParam,changeMode:false});}else if(!Libs.isBlank(msg)){self.toast(msg,\"error\");}},true);};_this.onClickCloseChangeMode=function(){_this.setState({changeMode:false});};_this.onClickControlCalender=function(index){var dataListInverter=_this.state.dataListInverter;if(!Libs.isArrayData(dataListInverter))return;var item=dataListInverter[index];if(Libs.isObjectEmpty(item))return;_this.setState({showControlCalendar:true,curItem:item});};_this.onCloseControlCalender=function(){_this.setState({showControlCalendar:false});};_this.onClickCloseOnOff=function(status){if(status){_this.getListInverter();}_this.setState({showOnOffPopup:false});};_this.onClickOnOff=function(index){var dataListInverter=_this.state.dataListInverter;if(!Libs.isArrayData(dataListInverter))return;var item=dataListInverter[index];if(Libs.isObjectEmpty(item))return;_this.setState({showOnOffPopup:true,curItem:item});};_this.jsxTemplate=ManualJsx;_this.state={hash_id:_this.props.hash_id,curItem:{},curProject:{},dataListInverter:[],showOnOffPopup:false,changeMode:false,searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1,max_date:Libs.getCurrentDDMMYYYY(),current_date:Libs.getCurrentDDMMYYYY(),scheduled_mode:1,limit_power_status:1,limit_energy_status:1}};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Manual,[{key:\"componentDidMount\",value:function componentDidMount(){this.getListInverter();this.getProjectDetail();}/**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */},{key:\"getProjectDetail\",value:function getProjectDetail(){var searchParam=this.state.searchParam;var self=this;var params={hash_id:this.state.hash_id};MainDeviceService.instance.getProjectDetail(params,function(data){if(data){searchParam.scheduled_mode=data.export_limitation_control_mode;searchParam.limit_energy_status=data.limit_energy_status;searchParam.limit_power_status=data.limit_power_status;searchParam.limit_power=data.limit_power;searchParam.limit_energy=data.limit_energy;self.setState({curProject:data,searchParam:searchParam});}},false);}},{key:\"handleInputChange\",value:/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */function handleInputChange(event){var target=event.target,self=this;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var searchParam=this.state.searchParam;if(name=='scheduled_manual_mode'){if(searchParam.scheduled_mode==1){return;}self.setState({changeMode:true});}if(name=='scheduled_auto_mode'){if(searchParam.scheduled_mode==2){return;}self.setState({changeMode:true});}if(name=='limit_energy_status'){searchParam[name]=searchParam.limit_energy_status==1?0:1;}if(name=='limit_power_status'){searchParam[name]=searchParam.limit_power_status==1?0:1;}if(name=='limit_energy'||name=='limit_power'){searchParam[name]=event.target.validity.valid?value:searchParam[name];self.setState({searchParam:searchParam});}}}/**\n     * @description validate a field input\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */},{key:\"validateOne\",value:function(){var _validateOne=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,name,value,param,v,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:target=event.target;name=target.name;value=target.value;if(!name){_context.next=10;break;}param=_defineProperty({},name,value);v=new ControlValidate(this.props);_context.next=8;return v.validateOne(param,name);case 8:error=_context.sent;if(error!=null){this.setValidateMessage(error,true);}case 10:case\"end\":return _context.stop();}}},_callee,this);}));function validateOne(_x){return _validateOne.apply(this,arguments);}return validateOne;}()},{key:\"getListInverter\",value:/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */function getListInverter(){var self=this;var params=this.state.searchParam;params.id_language=this.employee.id_language;params.id_employee=this.employee.id_employee;params.hash_id=this.state.hash_id;params.type='private';MainDeviceService.instance.getListInverter(params,function(data,total_row){console.log(\"aaa: \",params,data);if(Libs.isArrayData(data)){self.setState({dataListInverter:data});}else{self.setState({dataListInverter:[]});}self.forceUpdate();});}},{key:\"onClickSaveExportLimitationAction\",value:function onClickSaveExportLimitationAction(){var searchParam=this.state.searchParam,self=this;var params={limit_energy:searchParam.limit_energy?searchParam.limit_energy:null,limit_power:searchParam.limit_power?searchParam.limit_power:null,hash_id:this.state.hash_id,type:'save'};MainDeviceService.instance.updateModePowerAndEnergy(params,function(status,msg){if(status){self.setState({searchParam:searchParam});}else if(!Libs.isBlank(msg)){self.toast(msg,\"error\");}},true);}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return Manual;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(Manual);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModulePrivate/Control/Manual/Manual.js"],"names":["ManualJsx","BaseComponent","Libs","withTranslation","Constants","MainDeviceService","ControlValidate","Manual","props","context","calbackChangeMode","searchParam","self","params","export_limitation_control_mode","scheduled_mode","hash_id","state","type","instance","updateControlMode","status","msg","setState","changeMode","isBlank","toast","onClickCloseChangeMode","onClickControlCalender","index","dataListInverter","isArrayData","item","isObjectEmpty","showControlCalendar","curItem","onCloseControlCalender","onClickCloseOnOff","getListInverter","showOnOffPopup","onClickOnOff","jsxTemplate","curProject","limit","COMMON","LIMIT","offset","max_date","getCurrentDDMMYYYY","current_date","limit_power_status","limit_energy_status","handleInputChange","bind","getProjectDetail","data","limit_power","limit_energy","event","target","name","value","checked","validity","valid","param","v","validateOne","error","setValidateMessage","id_language","employee","id_employee","total_row","console","log","forceUpdate","updateModePowerAndEnergy","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import ManualJsx from './Manual.jsx';\nimport BaseComponent from '../../../../../BaseComponent';\nimport Libs from '../../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../../utils/Constants';\nimport MainDeviceService from '../../../../../../services/MainDeviceService';\nimport ControlValidate from './ControlValidate';\nimport './Manual.scss';\n\nclass Manual extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = ManualJsx;\n        this.state = {\n            hash_id: this.props.hash_id,\n            curItem: {},\n            curProject: {},\n            dataListInverter: [],\n            showOnOffPopup: false,\n            changeMode: false,\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n                max_date: Libs.getCurrentDDMMYYYY(),\n                current_date: Libs.getCurrentDDMMYYYY(),\n                scheduled_mode: 1,\n                limit_power_status: 1,\n                limit_energy_status: 1\n            }\n        };\n        this.handleInputChange = this.handleInputChange.bind(this);\n\n\n    }\n\n    componentDidMount() {\n        this.getListInverter();\n        this.getProjectDetail();\n    }\n\n\n    /**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    getProjectDetail() {\n        var { searchParam } = this.state;\n        var self = this;\n        var params = {\n            hash_id: this.state.hash_id\n        };\n        MainDeviceService.instance.getProjectDetail(params, data => {\n            if (data) {\n                searchParam.scheduled_mode = data.export_limitation_control_mode;\n                searchParam.limit_energy_status = data.limit_energy_status;\n                searchParam.limit_power_status = data.limit_power_status;\n                searchParam.limit_power = data.limit_power;\n                searchParam.limit_energy = data.limit_energy;\n                self.setState({\n                    curProject: data,\n                    searchParam: searchParam\n                });\n            }\n        }, false);\n    }\n\n    calbackChangeMode = (searchParam) => {\n        var self = this;\n        let params = {\n            export_limitation_control_mode: searchParam.scheduled_mode,\n            hash_id: this.state.hash_id,\n            type: 'export_control'\n        };\n\n        MainDeviceService.instance.updateControlMode(params, function (status, msg) {\n            if (status) {\n                self.setState({ searchParam: searchParam, changeMode: false });\n            }\n            else if (!Libs.isBlank(msg)) {\n                self.toast(msg, \"error\");\n            }\n        }, true);\n\n    }\n\n    onClickCloseChangeMode = () => {\n        this.setState({\n            changeMode: false\n        });\n    }\n\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputChange(event) {\n        let target = event.target, self = this;\n        let name = target.name;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { searchParam } = this.state;\n            if (name == 'scheduled_manual_mode') {\n                if (searchParam.scheduled_mode == 1) { return; }\n                self.setState({ changeMode: true });\n            }\n            if (name == 'scheduled_auto_mode') {\n                if (searchParam.scheduled_mode == 2) { return; }\n                self.setState({ changeMode: true });\n            }\n\n            if (name == 'limit_energy_status') {\n                searchParam[name] = searchParam.limit_energy_status == 1 ? 0 : 1\n            }\n            if (name == 'limit_power_status') {\n                searchParam[name] = searchParam.limit_power_status == 1 ? 0 : 1\n            }\n\n            if (name == 'limit_energy' || name == 'limit_power') {\n                searchParam[name] = (event.target.validity.valid) ? value : searchParam[name];\n                self.setState({ searchParam: searchParam });\n            }\n\n        }\n    }\n\n\n    /**\n     * @description validate a field input\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */\n    async validateOne(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name) {\n            let param = {\n                [name]: value\n            }\n            let v = new ControlValidate(this.props);\n            let error = await v.validateOne(param, name);\n            if (error != null) {\n                this.setValidateMessage(error, true);\n            }\n        }\n    }\n\n\n    onClickControlCalender = (index) => {\n        var { dataListInverter } = this.state;\n        if (!Libs.isArrayData(dataListInverter)) return;\n        var item = dataListInverter[index];\n        if (Libs.isObjectEmpty(item)) return;\n        this.setState({\n            showControlCalendar: true,\n            curItem: item\n        })\n\n    }\n\n    onCloseControlCalender = () => {\n        this.setState({\n            showControlCalendar: false\n        })\n\n    }\n\n\n    onClickCloseOnOff = (status) => {\n        if (status) {\n            this.getListInverter();\n        }\n        this.setState({\n            showOnOffPopup: false\n        })\n    }\n\n\n    onClickOnOff = (index) => {\n        var { dataListInverter } = this.state;\n        if (!Libs.isArrayData(dataListInverter)) return;\n        var item = dataListInverter[index];\n        if (Libs.isObjectEmpty(item)) return;\n        this.setState({\n            showOnOffPopup: true,\n            curItem: item\n        })\n\n    }\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getListInverter() {\n        let self = this;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        params.id_employee = this.employee.id_employee;\n        params.hash_id = this.state.hash_id;\n        params.type = 'private';\n        MainDeviceService.instance.getListInverter(params, (data, total_row) => {\n            console.log(\"aaa: \", params, data);\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataListInverter: data\n                });\n            } else {\n                self.setState({\n                    dataListInverter: []\n                });\n            }\n            self.forceUpdate();\n        });\n    }\n\n    onClickSaveExportLimitationAction() {\n        var { searchParam } = this.state, self = this;\n\n        let params = {\n            limit_energy: searchParam.limit_energy ? searchParam.limit_energy : null,\n            limit_power: searchParam.limit_power ? searchParam.limit_power : null,\n            hash_id: this.state.hash_id,\n            type: 'save'\n        };\n\n        MainDeviceService.instance.updateModePowerAndEnergy(params, function (status, msg) {\n            if (status) {\n                self.setState({ searchParam: searchParam });\n            }\n            else if (!Libs.isBlank(msg)) {\n                self.toast(msg, \"error\");\n            }\n        }, true);\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Manual)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}