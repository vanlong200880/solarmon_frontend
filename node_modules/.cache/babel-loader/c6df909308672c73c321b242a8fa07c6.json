{"ast":null,"code":"import Constants from\"./Constants\";import Libs from\"./Libs\";var Auth={};Auth.checkIsLogin=function(){try{var ar=window.location.pathname.split(\"/\");var path=ar.length>1?ar[1]:\"\";var isCheck=true;if(path!==''){isCheck=Constants.SITE_URL.PUBLIC_URL.indexOf(path)<0;}if(!isCheck){return true;}var token=localStorage.getItem(Constants.COMMON.TOKEN);if(null===token||typeof token==='undefined'){return false;}var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);var userInfo=JSON.parse(Libs.base64Decrypt(info));if(null===userInfo||typeof userInfo==='undefined'){return false;}if(null===userInfo.email||typeof userInfo.email==='undefined'){return false;}var expired=userInfo.timeout*1;var now=new Date().getTime();if(now>expired*1000){localStorage.removeItem(Constants.COMMON.TOKEN);return false;}return true;}catch(e){return false;}};/**\n * check the action permission\n * @param {int} actions: permissions\n * @param {int} bitIdx: action index to check\n */Auth.getPermisson=function(actions,bitIdx){return Libs.checkBitOnOff(actions,bitIdx);};export default Auth;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/utils/Auth.js"],"names":["Constants","Libs","Auth","checkIsLogin","ar","window","location","pathname","split","path","length","isCheck","SITE_URL","PUBLIC_URL","indexOf","token","localStorage","getItem","COMMON","TOKEN","info","EMPLOYEE_INFO","userInfo","JSON","parse","base64Decrypt","email","expired","timeout","now","Date","getTime","removeItem","e","getPermisson","actions","bitIdx","checkBitOnOff"],"mappings":"AAAA,MAAOA,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACAA,IAAI,CAACC,YAAL,CAAoB,UAAY,CAC/B,GAAI,CACH,GAAIC,CAAAA,EAAE,CAAGC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,GAA/B,CAAT,CACA,GAAIC,CAAAA,IAAI,CAAGL,EAAE,CAACM,MAAH,CAAU,CAAV,CAAYN,EAAE,CAAC,CAAD,CAAd,CAAkB,EAA7B,CACA,GAAIO,CAAAA,OAAO,CAAG,IAAd,CACA,GAAGF,IAAI,GAAG,EAAV,CAAa,CACZE,OAAO,CAAGX,SAAS,CAACY,QAAV,CAAmBC,UAAnB,CAA8BC,OAA9B,CAAsCL,IAAtC,EAA4C,CAAtD,CACA,CACD,GAAG,CAACE,OAAJ,CAAY,CACX,MAAO,KAAP,CACA,CACD,GAAII,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqBjB,SAAS,CAACkB,MAAV,CAAiBC,KAAtC,CAAZ,CACA,GAAI,OAASJ,KAAT,EAAkB,MAAOA,CAAAA,KAAP,GAAiB,WAAvC,CAAoD,CACnD,MAAO,MAAP,CACA,CACD,GAAIK,CAAAA,IAAI,CAAGJ,YAAY,CAACC,OAAb,CAAqBjB,SAAS,CAACkB,MAAV,CAAiBG,aAAtC,CAAX,CACA,GAAIC,CAAAA,QAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWvB,IAAI,CAACwB,aAAL,CAAmBL,IAAnB,CAAX,CAAf,CACA,GAAI,OAASE,QAAT,EAAqB,MAAOA,CAAAA,QAAP,GAAoB,WAA7C,CAA0D,CACzD,MAAO,MAAP,CACA,CACD,GAAI,OAASA,QAAQ,CAACI,KAAlB,EAA2B,MAAOJ,CAAAA,QAAQ,CAACI,KAAhB,GAA0B,WAAzD,CAAsE,CACrE,MAAO,MAAP,CACA,CACD,GAAIC,CAAAA,OAAO,CAAGL,QAAQ,CAACM,OAAT,CAAmB,CAAjC,CACA,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAAV,CACA,GAAIF,GAAG,CAAGF,OAAO,CAAC,IAAlB,CAAwB,CACvBX,YAAY,CAACgB,UAAb,CAAwBhC,SAAS,CAACkB,MAAV,CAAiBC,KAAzC,EACA,MAAO,MAAP,CACA,CACD,MAAO,KAAP,CACA,CAAC,MAAOc,CAAP,CAAU,CACX,MAAO,MAAP,CACA,CACD,CAjCD,CAmCA;AACA;AACA;AACA;AACA,GACA/B,IAAI,CAACgC,YAAL,CAAoB,SAAUC,OAAV,CAAmBC,MAAnB,CAA2B,CAC9C,MAAOnC,CAAAA,IAAI,CAACoC,aAAL,CAAmBF,OAAnB,CAA4BC,MAA5B,CAAP,CACA,CAFD,CAIA,cAAelC,CAAAA,IAAf","sourcesContent":["import Constants from \"./Constants\";\nimport Libs from \"./Libs\";\nvar Auth = {};\nAuth.checkIsLogin = function () {\n\ttry {\n\t\tlet ar = window.location.pathname.split(\"/\");\n\t\tlet path = ar.length>1?ar[1]:\"\";\n\t\tlet isCheck = true;\n\t\tif(path!==''){\n\t\t\tisCheck = Constants.SITE_URL.PUBLIC_URL.indexOf(path)<0\n\t\t}\n\t\tif(!isCheck){\n\t\t\treturn true;\n\t\t}\n\t\tlet token = localStorage.getItem(Constants.COMMON.TOKEN);\n\t\tif (null === token || typeof token === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\t\tlet info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n\t\tlet userInfo = JSON.parse(Libs.base64Decrypt(info));\n\t\tif (null === userInfo || typeof userInfo === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\t\tif (null === userInfo.email || typeof userInfo.email === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\t\tlet expired = userInfo.timeout * 1;\n\t\tlet now = new Date().getTime();\n\t\tif (now > expired*1000) {\n\t\t\tlocalStorage.removeItem(Constants.COMMON.TOKEN)\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n\n/**\n * check the action permission\n * @param {int} actions: permissions\n * @param {int} bitIdx: action index to check\n */\nAuth.getPermisson = function (actions, bitIdx) {\n\treturn Libs.checkBitOnOff(actions, bitIdx);\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}