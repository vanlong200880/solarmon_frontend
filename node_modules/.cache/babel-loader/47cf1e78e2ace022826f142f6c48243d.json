{"ast":null,"code":"import _regeneratorRuntime from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import Constants from'../../../../../utils/Constants';import AddPopupJsx from'./AddPopup.jsx';import AddPopupValidate from'./AddPopupValidate';import ErrorTypeService from'../../../../../services/ErrorTypeService';var AddPopup=/*#__PURE__*/function(_BaseComponent){_inherits(AddPopup,_BaseComponent);var _super=_createSuper(AddPopup);function AddPopup(props){var _this;_classCallCheck(this,AddPopup);_this=_super.call(this,props);_this.onFileAvatarChange=function(event){var t=_this.props.t;var target=event.target;var file=target.files[0];if(!file||file===undefined||file===null)return;var fileName=file.name,fileSize=file.size;var checkExtFile=Libs.checkExtensionFile(fileName,1);var msgAvatarError=null;if(!checkExtFile){msgAvatarError=t('message.msg_err_ext_image_file');}else if(fileSize<=0){msgAvatarError=t('message.msg_err_file_size');}else if(fileSize>Constants.COMMON.MAX_IMAGE_SIZE){msgAvatarError=t('message.msg_err_max_size_upload');}var self=_assertThisInitialized(_this);var curItem=_this.state.curItem;if(!Libs.isBlank(msgAvatarError)){curItem.upload_thumbnail='';curItem.thumbnail_message=msgAvatarError;_this.setState({curItem:curItem});return;}else{curItem.thumbnail_message='';_this.setState({curItem:curItem});}//Read file upload\nvar reader=new FileReader();reader.onload=function(e){curItem.upload_thumbnail=e.target.result;curItem.upload_thumbnail_name=fileName;self.setState({curItem:curItem});};reader.readAsDataURL(file);};_this.onClickDeleteAvatar=function(event){var curItem=_this.state.curItem;curItem.thumbnail_message='';curItem.thumbnail_upload='';curItem.thumbnail=null;_this.setState({curItem:curItem});};_this.onClickShowTab=function(e,tabActive){var curItem=_this.state.curItem;if(Libs.isBlank(tabActive))return;curItem.tabActive=tabActive;_this.setState({curItem:curItem});};_this.handleInputTranslateChange=function(event){var target=event.target;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var item=_this.state.curItem;var allLanguage=_this.state.allLanguage;var isoCode=name.substr(-2,2),dataName=name.substr(0,4),dataDescription=name.substr(0,11);allLanguage.map(function(language,index){if(isoCode===language.iso_code&&dataName==='name'){item.data[index].name=event.target.validity.valid?value:_this.state.curItem.data[index].name;}if(isoCode===language.iso_code&&dataDescription==='description'){item.data[index].description=event.target.validity.valid?value:_this.state.curItem.data[index].description;}return 1;});item[name]=event.target.validity.valid?value:_this.state.curItem[name];_this.setState({curItem:item});}};_this.state={curItem:_this.props.curItem,allLanguage:_this.props.allLanguage};_this.jsxTemplate=AddPopupJsx;return _this;}/**\n     * @description Called immediately after the component is mounted in the DOM. Called after the render function\n     * @author Long.Pham 12/05/2021\n     */_createClass(AddPopup,[{key:\"componentDidMount\",value:function componentDidMount(){var curItem=this.state.curItem;if(Constants.SCREEN_MODE.ADD==curItem.screen_mode){curItem.status=1;}this.setState({curItem:curItem});}/**\n     * @description Upload icon  \n     * @author Long.Pham 12/05/2021\n     */},{key:\"validateOne\",value:/**\n     * @description validate a field input\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */function(){var _validateOne=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,name,value,param,v,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:target=event.target;name=target.name;value=target.value;if(!name){_context.next=10;break;}param=_defineProperty({},name,value);v=new AddPopupValidate(this.props);_context.next=8;return v.validateOne(param,name);case 8:error=_context.sent;if(error!=null){this.setValidateMessage(error,true);}case 10:case\"end\":return _context.stop();}}},_callee,this);}));function validateOne(_x){return _validateOne.apply(this,arguments);}return validateOne;}()/**\n     * @description select change\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */},{key:\"onSave\",value:/**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */function(){var _onSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var curItem,self,params,screenMode,v,errors,itemLanguageDefault;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:curItem=this.state.curItem,self=this;params=Object.assign({},this.state.curItem);screenMode=!Libs.isBlank(curItem.id)?Constants.SCREEN_MODE.EDIT:!Libs.isBlank(this.props.curItem.screen_mode)?this.props.curItem.screen_mode:Constants.SCREEN_MODE.ADD;v=new AddPopupValidate(this.props);_context2.next=6;return v.FLValidationAll(curItem);case 6:errors=_context2.sent;if(!errors){_context2.next=10;break;}this.setValidateMessage(errors);return _context2.abrupt(\"return\");case 10://remove message validation\nthis.removeAllValidateMessage();params.screen_mode=screenMode;params.iso_code_lang=this.employee.lang;params.id_language=this.employee.id_language;params.iso_code=this.employee.iso_code;if(!Libs.isArrayData(params.data)){_context2.next=22;break;}itemLanguageDefault=Libs.find(params.data,'is_default',1);if(itemLanguageDefault){_context2.next=19;break;}return _context2.abrupt(\"return\");case 19:params.data.map(function(item,index){params.data[index].name=item.name===''?itemLanguageDefault.name:item.name;params.data[index].description=item.description===''?itemLanguageDefault.description:item.description;return params;});_context2.next=23;break;case 22:return _context2.abrupt(\"return\",false);case 23:ErrorTypeService.instance.save(params,function(status,data,msg){if(status){self.toast(msg,\"info\");self.props.onClickCloseAdd(true);}else if(data){self.setValidateMessage(data);}else if(!Libs.isBlank(msg)){self.toast(msg,\"error\");}},true);case 24:case\"end\":return _context2.stop();}}},_callee2,this);}));function onSave(){return _onSave.apply(this,arguments);}return onSave;}()}]);return AddPopup;}(BaseComponent);export default AddPopup;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModuleSystem/ErrorType/AddPopup.js"],"names":["BaseComponent","Libs","Constants","AddPopupJsx","AddPopupValidate","ErrorTypeService","AddPopup","props","onFileAvatarChange","event","t","target","file","files","undefined","fileName","name","fileSize","size","checkExtFile","checkExtensionFile","msgAvatarError","COMMON","MAX_IMAGE_SIZE","self","curItem","state","isBlank","upload_thumbnail","thumbnail_message","setState","reader","FileReader","onload","e","result","upload_thumbnail_name","readAsDataURL","onClickDeleteAvatar","thumbnail_upload","thumbnail","onClickShowTab","tabActive","handleInputTranslateChange","value","type","checked","item","allLanguage","isoCode","substr","dataName","dataDescription","map","language","index","iso_code","data","validity","valid","description","jsxTemplate","SCREEN_MODE","ADD","screen_mode","status","param","v","validateOne","error","setValidateMessage","params","Object","assign","screenMode","id","EDIT","FLValidationAll","errors","removeAllValidateMessage","iso_code_lang","employee","lang","id_language","isArrayData","itemLanguageDefault","find","instance","save","msg","toast","onClickCloseAdd"],"mappings":"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","sourcesContent":["\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport Constants from '../../../../../utils/Constants';\nimport AddPopupJsx from './AddPopup.jsx';\nimport AddPopupValidate from './AddPopupValidate';\nimport ErrorTypeService from '../../../../../services/ErrorTypeService';\n\nclass AddPopup extends BaseComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            curItem: this.props.curItem,\n            allLanguage: this.props.allLanguage\n        }\n\n        this.jsxTemplate = AddPopupJsx;\n    }\n    /**\n     * @description Called immediately after the component is mounted in the DOM. Called after the render function\n     * @author Long.Pham 12/05/2021\n     */\n    componentDidMount() {\n        var { curItem } = this.state;\n        if(Constants.SCREEN_MODE.ADD == curItem.screen_mode){\n            curItem.status = 1;\n        }\n        this.setState({\n            curItem: curItem\n        })\n    }\n    \n\n    /**\n     * @description Upload icon  \n     * @author Long.Pham 12/05/2021\n     */\n    onFileAvatarChange = (event) => {\n        var { t } = this.props;\n        var target = event.target;\n        var file = target.files[0];\n        if (!file || file === undefined || file === null) return;\n        var fileName = file.name, fileSize = file.size;\n        var checkExtFile = Libs.checkExtensionFile(fileName, 1);\n        var msgAvatarError = null;\n        if (!checkExtFile) {\n            msgAvatarError = t('message.msg_err_ext_image_file')\n        }\n        else if (fileSize <= 0) {\n            msgAvatarError = t('message.msg_err_file_size');\n        }\n        else if (fileSize > Constants.COMMON.MAX_IMAGE_SIZE) {\n            msgAvatarError = t('message.msg_err_max_size_upload');\n        }\n\n        var self = this;\n        var { curItem } = this.state;\n        if (!Libs.isBlank(msgAvatarError)) {\n            curItem.upload_thumbnail = '';\n            curItem.thumbnail_message = msgAvatarError;\n            this.setState({\n                curItem: curItem\n            });\n\n            return;\n        } else {\n            curItem.thumbnail_message = '';\n            this.setState({\n                curItem: curItem\n            });\n        }\n\n        //Read file upload\n        var reader = new FileReader();\n        reader.onload = function (e) {\n            curItem.upload_thumbnail = e.target.result;\n            curItem.upload_thumbnail_name = fileName;\n            self.setState({\n                curItem: curItem\n            });\n        };\n        reader.readAsDataURL(file);\n    }\n\n\n    /**\n     * @description Delete icon upload \n     * @author Long.Pham 12/05/2021\n     */\n    onClickDeleteAvatar = (event) => {\n        var { curItem } = this.state;\n        curItem.thumbnail_message = '';\n        curItem.thumbnail_upload = '';\n        curItem.thumbnail = null;\n\n        this.setState({\n            curItem: curItem\n        });\n    }\n\n    onClickShowTab = (e, tabActive) => {\n        var curItem = this.state.curItem;\n        if (Libs.isBlank(tabActive)) return;\n        curItem.tabActive = tabActive;\n\n        this.setState({\n            curItem: curItem\n        });\n    }\n\n\n    /**\n     * @description validate a field input\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */\n    async validateOne(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value\n        if (name) {\n            let param = {\n                [name]: value\n            }\n            let v = new AddPopupValidate(this.props);\n            let error = await v.validateOne(param, name);\n            if (error != null) {\n                this.setValidateMessage(error, true);\n            }\n        }\n    }\n\n    /**\n     * @description select change\n     * @author Long.Pham 12/05/2021\n     * @param {*} event \n     */\n\n    handleInputTranslateChange = (event) => {\n        var target = event.target;\n        var name = target.name;\n        var value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n        if (name) {\n            let item = this.state.curItem;\n            let allLanguage = this.state.allLanguage;\n            let isoCode = name.substr(-2, 2),\n                dataName = name.substr(0, 4),\n                dataDescription = name.substr(0, 11);\n\n            allLanguage.map((language, index) => {\n                if (isoCode === language.iso_code && dataName === 'name') {\n                    item.data[index].name = (event.target.validity.valid) ? value : this.state.curItem.data[index].name;\n                }\n\n                if (isoCode === language.iso_code && dataDescription === 'description') {\n                    item.data[index].description = (event.target.validity.valid) ? value : this.state.curItem.data[index].description;\n                }\n                return 1;\n            });\n\n            item[name] = (event.target.validity.valid) ? value : this.state.curItem[name];\n\n            this.setState({ curItem: item });\n        }\n    }\n\n\n\n    /**\n     * @description save data\n     * @author long.pham 12/05/2021\n     */\n    async onSave() {\n        var {curItem} = this.state, self = this;\n        var params = Object.assign({}, this.state.curItem);\n        var screenMode = (!Libs.isBlank(curItem.id)) ? Constants.SCREEN_MODE.EDIT : ((!Libs.isBlank(this.props.curItem.screen_mode)) ? this.props.curItem.screen_mode : Constants.SCREEN_MODE.ADD);\n        let v = new AddPopupValidate(this.props);\n        let errors = await v.FLValidationAll(curItem);\n        if (errors) {\n            this.setValidateMessage(errors);\n            return;\n        }\n        //remove message validation\n        this.removeAllValidateMessage();\n        params.screen_mode = screenMode;\n\n        params.iso_code_lang = this.employee.lang;\n        params.id_language = this.employee.id_language;\n        params.iso_code = this.employee.iso_code;\n\n        if (Libs.isArrayData(params.data)) {\n            let itemLanguageDefault = Libs.find(params.data, 'is_default', 1);\n            if (!itemLanguageDefault) return;\n\n            params.data.map((item, index) => {\n                params.data[index].name = (item.name === '') ? itemLanguageDefault.name : item.name;\n                params.data[index].description = (item.description === '') ? itemLanguageDefault.description : item.description;\n                return params;\n\n            });\n        } else { return false; }\n\n        ErrorTypeService.instance.save(params, function (status, data, msg) {\n            if (status) {\n                self.toast(msg, \"info\");\n                self.props.onClickCloseAdd(true);\n            }\n            else if (data) {\n                self.setValidateMessage(data);\n            }\n\n            else if (!Libs.isBlank(msg)) {\n                self.toast(msg, \"error\");\n            }\n        }, true);\n    }\n}\nexport default AddPopup;"]},"metadata":{},"sourceType":"module"}