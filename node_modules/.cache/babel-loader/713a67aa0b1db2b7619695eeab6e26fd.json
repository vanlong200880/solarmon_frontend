{"ast":null,"code":"import _toConsumableArray from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ChartDeviceDiagnosticsJsx from'./ChartDeviceDiagnostics.jsx';import BaseComponent from'../../../../../BaseComponent';import Libs from'../../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../../utils/Constants';import MainAnalyticsService from'../../../../../../services/MainAnalyticsService';import moment from'moment';var ChartDeviceDiagnostics=/*#__PURE__*/function(_BaseComponent){_inherits(ChartDeviceDiagnostics,_BaseComponent);var _super=_createSuper(ChartDeviceDiagnostics);function ChartDeviceDiagnostics(props,context){var _this;_classCallCheck(this,ChartDeviceDiagnostics);_this=_super.call(this,props,context);_this.handleClickOutside=function(event){var target=event.target;var chartParams=_this.state.chartParams,self=_assertThisInitialized(_this);if(!_this.wrapperRef.current.contains(target)){if(chartParams.show_filter){chartParams.show_filter=false;self.setState({chartParams:chartParams});}}};_this.onClickShowFilter=function(){var chartParams=_this.state.chartParams;chartParams.show_filter=true;_this.setState({chartParams:chartParams});};_this.changeViewMinute=function(value){var chartParams=_this.state.chartParams,self=_assertThisInitialized(_this);if(Libs.isBlank(value))return;chartParams.data_send_time=value;_this.setState({chartParams:chartParams},function(){self.loadDataChart();});};_this.onClickFilter=function(value){var _this$state=_this.state,chartParams=_this$state.chartParams,dataFilter=_this$state.dataFilter,curItem=_this$state.curItem;var self=_assertThisInitialized(_this);if(!Libs.isArrayData(dataFilter))return;var item=Libs.find(dataFilter,'id',value);if(Libs.isObjectEmpty(item))return;chartParams.id_filter=item.id;chartParams.text_filter=item.text;chartParams.show_filter=false;chartParams.showNextBtn=false;switch(value){case'today':chartParams.end_date=Libs.getCurrentMMDDYYYYHI();chartParams.max_date=Libs.getCurrentMMDDYYYYHI();break;case'3_day':chartParams.end_date=Libs.getCurrentDDMMYYYY();chartParams.start_date=moment(Libs.addDays(Libs.getCurrentMMDDYYYYHI(),-2)).format('DD/MM/YYYY');chartParams.start_max_date=moment(Libs.addDays(Libs.getCurrentMMDDYYYYHI(),-2)).format('DD/MM/YYYY');chartParams.max_date=Libs.getCurrentDDMMYYYY();break;case'this_month':chartParams.max_date=moment().format('MM/YYYY');chartParams.end_date=moment().format('MM/YYYY');break;case'last_month':chartParams.max_date=moment().format('MM/YYYY');var tlast=new Date(Libs.getCurrentMMDDYYYYHI());var ylast=tlast.getFullYear(),mlast=tlast.getMonth();chartParams.end_date=moment(Libs.addMonths(new Date(ylast,mlast,1),-1)).endOf('month').format('MM/YYYY');chartParams.start_date=moment(Libs.addMonths(new Date(ylast,mlast,1),-1)).format('MM/YYYY');break;case'lifetime':case'12_month':chartParams.max_date=moment().format('MM/YYYY');chartParams.end_date=moment().format('MM/YYYY');chartParams.start_date=moment(Libs.addMonths(Libs.getCurrentMMDDYYYYHI(),-12)).format('MM/YYYY');break;// case 'lifetime':\n//     chartParams.start_date = moment(curItem.commissioning).format('MM/DD/YYYY HH:mm:ss');\n//     chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n//     break;\n}_this.setState({chartParams:chartParams},function(){self.loadDataChart();});};_this.handleDeviceInputChange=function(e,index){var dataListDevice=_this.state.dataListDevice;var self=_assertThisInitialized(_this);if(!Libs.isArrayData(dataListDevice))return;var item=dataListDevice[index];if(Libs.isObjectEmpty(item))return;dataListDevice[index].is_checked=dataListDevice[index].is_checked?0:1;_this.setState({dataListDevice:dataListDevice},function(){self.loadDataChart();});};_this.handleDropdownChange=function(item,name){var self=_assertThisInitialized(_this);var curItem=self.state.curItem;if(Libs.isObjectEmpty(item)&&name=='type_diagnostics'){curItem.type_diagnostics='';}else if(Libs.isObjectEmpty(item)&&name=='type_string_index'){curItem.type_string_index='';}else{var value=item.value;curItem[name]=value;}var dataStringIndex=[];if(name=='type_diagnostics'){if(value==1){dataStringIndex=[{id:1,value:1,label:\"Power\"},{id:2,value:2,label:\"Voltage\"},{id:3,value:3,label:\"Current\"},{id:4,value:4,label:\"Energy\"}];curItem.type_string_index=1;}else if(value==2){dataStringIndex=[{id:1,value:1,label:\"Power\"},{id:2,value:2,label:\"Voltage\"}];curItem.type_string_index=1;}else if(value==3){dataStringIndex=[{id:1,value:1,label:\"Power\"},{id:2,value:2,label:\"Voltage\"},{id:3,value:3,label:\"Current\"}];curItem.type_string_index=1;}self.setState({curItem:curItem,dataStringIndex:dataStringIndex},function(){self.loadDataChart();});}else{self.setState({curItem:curItem},function(){self.loadDataChart();});}};_this.state={hash_id:_this.props.hash_id,curItem:{data_send_time:1,type:2,type_diagnostics:1,type_string_index:1},dataParameter:[],chartToolOption:{},dataFilter:[{id:\"today\",text:\"Today\"},{id:\"3_day\",text:\"3 days\"},{id:\"this_month\",text:\"This month\"},{id:\"last_month\",text:\"Last month\"},{id:\"12_month\",text:\"Last 12 months\"},{id:\"lifetime\",text:\"Lifetime\"}],dataListDevice:[],dataDiagnostics:[{id:1,value:1,label:\"AC Output\"},{id:2,value:2,label:\"DC Input\"},{id:3,value:3,label:\"DC Input Channel\"}],dataStringIndex:[{id:1,value:1,label:\"Power\"},{id:2,value:2,label:\"Voltage\"},{id:3,value:3,label:\"Current\"},{id:4,value:4,label:\"Energy\"}],dataList:[],searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1},allLanguage:Libs.isBlank(_this.employee)?[]:_this.employee.languages,chartParams:{id_site:null,id_filter:'today',text_filter:'Today',show_filter:false,showNextBtn:false,current_time:Libs.getCurrentMMDDYYYYHI(),end_date:Libs.getCurrentMMDDYYYYHI(),start_date:Libs.getCurrentMMDDYYYYHI(),data_send_time:2}};_this.jsxTemplate=ChartDeviceDiagnosticsJsx;_this.wrapperRef=/*#__PURE__*/React.createRef();_this.myRef=/*#__PURE__*/React.createRef();return _this;}_createClass(ChartDeviceDiagnostics,[{key:\"componentDidMount\",value:function componentDidMount(){this.getListDeviceByProject();document.addEventListener('click',this.handleClickOutside);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('click',this.handleClickOutside);}},{key:\"getListDeviceByProject\",value:/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */function getListDeviceByProject(){var _this2=this;var self=this;var params={hash_id:this.state.hash_id,id_employee:this.employee.id_employee,id_language:this.employee.id_language,type:'private'};MainAnalyticsService.instance.getListDeviceByProject(params,function(data,total_row){if(Libs.isArrayData(data)){for(var i in data){data[i].is_checked=1;}self.setState({dataListDevice:data.filter(function(item){return item.id_device_type==1;})});}else{self.setState({dataListDevice:[]});}self.forceUpdate();_this2.loadDataChart();});}},{key:\"loadDataChart\",value:function loadDataChart(){var _this3=this;var _this$state2=this.state,chartParams=_this$state2.chartParams,dataListDevice=_this$state2.dataListDevice,curItem=_this$state2.curItem,self=this;var dataParameter=[];if(!Libs.isArrayData(dataListDevice))return;var dataDeviceChecked=dataListDevice.filter(function(item){return item.is_checked==1;});switch(parseInt(curItem.type_diagnostics)){case 1:for(var i=0;i<dataDeviceChecked.length;i++){var listParameter=dataDeviceChecked[i].dataParameter;if(Libs.isArrayData(listParameter)){for(var _j=0;_j<listParameter.length;_j++){listParameter[_j].is_checked=0;if(curItem.type_string_index==1&&listParameter[_j].slug==\"activePower\"){listParameter[_j].is_checked=1;}if(curItem.type_string_index==2&&listParameter[_j].slug==\"dcVoltage\"){listParameter[_j].is_checked=1;}if(curItem.type_string_index==3&&listParameter[_j].slug==\"acCurrent\"){listParameter[_j].is_checked=1;}if(curItem.type_string_index==4&&listParameter[_j].slug==\"activeEnergy\"){listParameter[_j].is_checked=1;}}}dataDeviceChecked[i].dataParameter=listParameter;var findItem=Libs.find(dataParameter,'id_device_group',dataDeviceChecked[i].id_device_group);if(Libs.isObjectEmpty(findItem)){dataParameter.push(dataDeviceChecked[i]);}}break;case 2:for(var _i=0;_i<dataDeviceChecked.length;_i++){var listParameter=dataDeviceChecked[_i].dataParameter;if(Libs.isArrayData(listParameter)){for(var _j2=0;_j2<listParameter.length;_j2++){listParameter[_j2].is_checked=0;if(curItem.type_string_index==1&&listParameter[_j2].slug==\"dcPower\"){listParameter[_j2].is_checked=1;}if(curItem.type_string_index==2&&listParameter[_j2].slug==\"dcVoltage\"){listParameter[_j2].is_checked=1;}if(curItem.type_string_index==3&&listParameter[_j2].slug==\"dcCurrent\"){listParameter[_j2].is_checked=1;}}}dataDeviceChecked[_i].dataParameter=listParameter;var _findItem=Libs.find(dataParameter,'id_device_group',dataDeviceChecked[_i].id_device_group);if(Libs.isObjectEmpty(_findItem)){dataParameter.push(dataDeviceChecked[_i]);}}break;case 3:for(var _i2=0;_i2<dataDeviceChecked.length;_i2++){var listParameter=dataDeviceChecked[_i2].dataParameter;if(Libs.isArrayData(listParameter)){for(var _j3=0;_j3<listParameter.length;_j3++){listParameter[_j3].is_checked=0;if(curItem.type_string_index==1&&listParameter[_j3].slug==\"activePower\"){listParameter[_j3].is_checked=1;}if(curItem.type_string_index==2&&listParameter[_j3].slug==\"dcVoltage\"){listParameter[_j3].is_checked=1;}if(curItem.type_string_index==3&&listParameter[_j3].slug==\"acCurrent\"){listParameter[_j3].is_checked=1;}}}dataDeviceChecked[_i2].dataParameter=listParameter;var _findItem2=Libs.find(dataParameter,'id_device_group',dataDeviceChecked[_i2].id_device_group);if(Libs.isObjectEmpty(_findItem2)){dataParameter.push(dataDeviceChecked[_i2]);}}break;}if(!Libs.isArrayData(dataParameter))return;var chartToolOption={};var params={};switch(chartParams.id_filter){case'today':params.start_date=Libs.convertAllFormatDate(Libs.dateFormat(chartParams.start_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")+\" 00:00:00\");params.end_date=Libs.convertAllFormatDate(Libs.dateFormat(chartParams.end_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")+\" 19:00:00\");break;case'3_day':params.start_date=Libs.dateFormat(chartParams.start_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")+\" 00:00:00\";params.end_date=Libs.dateFormat(chartParams.end_date,\"MM/DD/YYYY\",\"MM/DD/YYYY\")+\" 19:00:00\";break;case'last_month':case'this_month':params.start_date=Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(),\"DD\",\"MM/DD/YYYY\")+\"/\"+chartParams.start_date+\" 00:00:00\";params.end_date=Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(),\"DD\",\"MM/DD/YYYY\")+\"/\"+chartParams.end_date+\" 19:00:00\";break;case'lifetime':case'12_month':params.start_date=Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(),\"DD\",\"MM/DD/YYYY\")+\"/\"+chartParams.start_date+\" 00:00:00\";params.end_date=Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(),\"DD\",\"MM/DD/YYYY\")+\"/\"+chartParams.end_date+\" 19:00:00\";break;}params.id_language=this.employee.id_language;params.id_employee=this.employee.id_employee;params.dataDevice=dataDeviceChecked;params.filterBy=chartParams.id_filter;params.data_send_time=chartParams.data_send_time;var elHeight=document.getElementById('main-chart-view').clientHeight-60;chartToolOption.chart={zoomType:'xy',height:elHeight?elHeight:null};chartToolOption.credits={enabled:false};chartToolOption.exporting={enabled:true};chartToolOption.title={text:null,align:'left'};chartToolOption.xAxis=[];chartToolOption.yAxis=[];chartToolOption.tooltip={shared:true,crosshairs:true};chartToolOption.plotOptions={series:{turboThreshold:5000},column:{stacking:'normal'}};chartToolOption.series=[];var tickInterval=24;switch(chartParams.id_filter){case'today':if(chartParams.data_send_time==1){tickInterval=24;}else if(chartParams.data_send_time==2){tickInterval=12;}else if(chartParams.data_send_time==3){tickInterval=2;}break;case'3_day':if(chartParams.data_send_time==1){tickInterval=168;}else if(chartParams.data_send_time==2){tickInterval=57;}else if(chartParams.data_send_time==3){tickInterval=15;}break;case'last_month':case'this_month':tickInterval=4;break;case'lifetime':case'12_month':tickInterval=1;break;}var paramerter=[];for(var j=0,leng=dataParameter.length;j<leng;j++){var childs=dataParameter[j].dataParameter;if(!Libs.isArrayData(childs))return;var dataChildTmp=childs.filter(function(item){return item.is_checked==1;});if(Libs.isArrayData(dataChildTmp)){paramerter.push.apply(paramerter,_toConsumableArray(dataChildTmp));}}if(!Libs.isArrayData(paramerter))return;params.type='private';MainAnalyticsService.instance.getChartByListDevice(params,function(data,total_row){if(Libs.isArrayData(data)){var categories=[],series=[],yAxis=[];var yAxisUnit=[];for(var i=0;i<paramerter.length;i++){if(i===0){yAxisUnit.push(paramerter[i]);yAxis.push({gridLineWidth:1,lineWidth:1,labels:{enabled:true},title:{text:!Libs.isBlank(paramerter[i].unit)?paramerter[i].unit:'',enabled:true},opposite:false});}else{var findyAxisUnit=Libs.find(yAxisUnit,'unit',paramerter[i].unit);if(Libs.isObjectEmpty(findyAxisUnit)){yAxisUnit.push(paramerter[i]);yAxis.push({gridLineWidth:1,lineWidth:1,labels:{enabled:true},title:{text:!Libs.isBlank(paramerter[i].unit)?paramerter[i].unit:'',enabled:true},opposite:true});}}var idyAxis=0;if(Libs.isArrayData(yAxisUnit)){yAxisUnit.map(function(h,index){if(paramerter[i].unit==h.unit){idyAxis=index;}});}for(var k=0,lenk=data.length;k<lenk;k++){var findSeries=Libs.find(series,'id',data[k].id);if(Libs.isObjectEmpty(findSeries)){var seriesItem={id:data[k].id,name:data[k].device_name+\" - \"+paramerter[i].name,type:'spline',yAxis:idyAxis,tooltip:{valueSuffix:' '+(!Libs.isBlank(paramerter[i].unit)?paramerter[i].unit:'')},data:[],gridLineWidth:1,lineWidth:1,marker:{radius:1.5,enabled:false}};var dataRow=data[k].data;var itemData=[];for(var _j4=0;_j4<dataRow.length;_j4++){// generate series\nvar value=!Libs.isBlank(dataRow[_j4][paramerter[i].slug])&&dataRow[_j4][paramerter[i].slug]>0?dataRow[_j4][paramerter[i].slug]:null;itemData.push([dataRow[_j4].time_full,value]);categories.push(dataRow[_j4].categories_time);}seriesItem.data=itemData;series.push(seriesItem);}}}if(Libs.isArrayData(categories)&&Libs.isArrayData(series)&&Libs.isArrayData(yAxis)){chartToolOption.xAxis=[{categories:categories,alignTicks:true,tickInterval:tickInterval}];chartToolOption.series=series;chartToolOption.yAxis=yAxis;_this3.setState({chartToolOption:chartToolOption,dataChartDevice:data,dataExport:data});}}else{self.setState({chartToolOption:{},dataChartDevice:[],dataExport:[]});}});}/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */},{key:\"handleInputDateChange\",value:function handleInputDateChange(event){var target=event.target;var name=target.name;var self=this;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var chartParams=this.state.chartParams;switch(chartParams.id_filter){case'today':case'last_month':case'this_month':chartParams.start_date=value;chartParams[name]=value;break;case'3_day':if(name=='start_date'){chartParams.start_date=value;var arrDate=value.split('/');if(arrDate){var currentDate=arrDate[2]+'/'+arrDate[1]+\"/\"+arrDate[0];chartParams.end_date=moment(Libs.addDays(currentDate,2)).format('DD/MM/YYYY');}}if(name=='end_date'){chartParams.end_date=value;var _arrDate=value.split('/');if(_arrDate){var _currentDate=_arrDate[2]+'/'+_arrDate[1]+\"/\"+_arrDate[0];chartParams.start_date=moment(Libs.addDays(_currentDate,-2)).format('DD/MM/YYYY');}}break;case'12_month':if(name=='start_date'){chartParams.start_date=value;var _arrDate2=value.split('/');if(_arrDate2){var _currentDate2=_arrDate2[1]+'/'+_arrDate2[0]+'/01';var startOfMonth=moment(_currentDate2).startOf('month').format('YYYY-MM-DD');chartParams.end_date=moment(Libs.addMonths(startOfMonth,12)).format('MM/YYYY');}}if(name=='end_date'){chartParams.end_date=value;var _arrDate3=value.split('/');if(_arrDate3){var _currentDate3=_arrDate3[1]+'/'+_arrDate3[0]+'/01';var _startOfMonth=moment(_currentDate3).startOf('month').format('YYYY-MM-DD');chartParams.start_date=moment(Libs.addMonths(_startOfMonth,-12)).format('MM/YYYY');}}break;}self.setState({chartParams:chartParams});self.loadDataChart();}}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return ChartDeviceDiagnostics;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(ChartDeviceDiagnostics);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModulePrivate/Analytics/ChartDeviceDiagnostics/ChartDeviceDiagnostics.js"],"names":["React","ChartDeviceDiagnosticsJsx","BaseComponent","Libs","withTranslation","Constants","MainAnalyticsService","moment","ChartDeviceDiagnostics","props","context","handleClickOutside","event","target","chartParams","state","self","wrapperRef","current","contains","show_filter","setState","onClickShowFilter","changeViewMinute","value","isBlank","data_send_time","loadDataChart","onClickFilter","dataFilter","curItem","isArrayData","item","find","isObjectEmpty","id_filter","id","text_filter","text","showNextBtn","end_date","getCurrentMMDDYYYYHI","max_date","getCurrentDDMMYYYY","start_date","addDays","format","start_max_date","tlast","Date","ylast","getFullYear","mlast","getMonth","addMonths","endOf","handleDeviceInputChange","e","index","dataListDevice","is_checked","handleDropdownChange","name","type_diagnostics","type_string_index","dataStringIndex","label","hash_id","type","dataParameter","chartToolOption","dataDiagnostics","dataList","searchParam","limit","COMMON","LIMIT","offset","allLanguage","employee","languages","id_site","current_time","jsxTemplate","createRef","myRef","getListDeviceByProject","document","addEventListener","removeEventListener","params","id_employee","id_language","instance","data","total_row","i","filter","id_device_type","forceUpdate","dataDeviceChecked","parseInt","length","listParameter","j","slug","findItem","id_device_group","push","convertAllFormatDate","dateFormat","dataDevice","filterBy","elHeight","getElementById","clientHeight","chart","zoomType","height","credits","enabled","exporting","title","align","xAxis","yAxis","tooltip","shared","crosshairs","plotOptions","series","turboThreshold","column","stacking","tickInterval","paramerter","leng","childs","dataChildTmp","getChartByListDevice","categories","yAxisUnit","gridLineWidth","lineWidth","labels","unit","opposite","findyAxisUnit","idyAxis","map","h","k","lenk","findSeries","seriesItem","device_name","valueSuffix","marker","radius","dataRow","itemData","time_full","categories_time","alignTicks","dataChartDevice","dataExport","checked","arrDate","split","currentDate","startOfMonth","startOf","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ChartDeviceDiagnosticsJsx from './ChartDeviceDiagnostics.jsx';\nimport BaseComponent from '../../../../../BaseComponent';\nimport Libs from '../../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../../utils/Constants';\nimport MainAnalyticsService from '../../../../../../services/MainAnalyticsService';\n\nimport moment from 'moment';\nclass ChartDeviceDiagnostics extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n\n        this.state = {\n            hash_id: this.props.hash_id,\n            curItem: {\n                data_send_time: 1,\n                type: 2,\n                type_diagnostics: 1,\n                type_string_index: 1\n            },\n            dataParameter: [],\n            chartToolOption: {},\n            dataFilter: [\n                { id: \"today\", text: \"Today\" },\n                { id: \"3_day\", text: \"3 days\" },\n                { id: \"this_month\", text: \"This month\" },\n                { id: \"last_month\", text: \"Last month\" },\n                { id: \"12_month\", text: \"Last 12 months\" },\n                { id: \"lifetime\", text: \"Lifetime\" }\n            ],\n\n\n            dataListDevice: [],\n            dataDiagnostics: [\n                {\n                    id: 1,\n                    value: 1,\n                    label: \"AC Output\"\n                },\n                {\n                    id: 2,\n                    value: 2,\n                    label: \"DC Input\"\n                },\n                {\n                    id: 3,\n                    value: 3,\n                    label: \"DC Input Channel\"\n                }\n            ],\n\n            dataStringIndex: [\n                {\n                    id: 1,\n                    value: 1,\n                    label: \"Power\"\n                },\n                {\n                    id: 2,\n                    value: 2,\n                    label: \"Voltage\"\n                },\n                {\n                    id: 3,\n                    value: 3,\n                    label: \"Current\"\n                },\n                {\n                    id: 4,\n                    value: 4,\n                    label: \"Energy\"\n                }\n            ],\n\n            dataList: [],\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n            },\n            allLanguage: Libs.isBlank(this.employee) ? [] : this.employee.languages,\n\n            chartParams: {\n                id_site: null,\n                id_filter: 'today',\n                text_filter: 'Today',\n                show_filter: false,\n                showNextBtn: false,\n                current_time: Libs.getCurrentMMDDYYYYHI(),\n                end_date: Libs.getCurrentMMDDYYYYHI(),\n                start_date: Libs.getCurrentMMDDYYYYHI(),\n                data_send_time: 2\n            },\n        };\n\n        this.jsxTemplate = ChartDeviceDiagnosticsJsx;\n        this.wrapperRef = React.createRef();\n        this.myRef = React.createRef();\n\n    }\n\n    componentDidMount() {\n        this.getListDeviceByProject();\n        document.addEventListener('click', this.handleClickOutside);\n    }\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClickOutside)\n    }\n\n    handleClickOutside = (event) => {\n        const { target } = event;\n        var { chartParams } = this.state, self = this;\n        if (!this.wrapperRef.current.contains(target)) {\n            if (chartParams.show_filter) {\n                chartParams.show_filter = false;\n                self.setState({\n                    chartParams: chartParams\n                })\n            }\n        }\n    }\n\n    onClickShowFilter = () => {\n        var { chartParams } = this.state;\n        chartParams.show_filter = true;\n        this.setState({\n            chartParams: chartParams\n        });\n    }\n\n\n    changeViewMinute = (value) => {\n        var chartParams = this.state.chartParams, self = this;\n        if (Libs.isBlank(value)) return;\n        chartParams.data_send_time = value;\n        this.setState({ chartParams: chartParams }, () => {\n            self.loadDataChart();\n        });\n    }\n\n\n    onClickFilter = (value) => {\n        var { chartParams, dataFilter, curItem } = this.state;\n        var self = this;\n        if (!Libs.isArrayData(dataFilter)) return;\n        var item = Libs.find(dataFilter, 'id', value);\n        if (Libs.isObjectEmpty(item)) return;\n\n        chartParams.id_filter = item.id;\n        chartParams.text_filter = item.text;\n        chartParams.show_filter = false;\n        chartParams.showNextBtn = false;\n\n        switch (value) {\n            case 'today':\n                chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n                chartParams.max_date = Libs.getCurrentMMDDYYYYHI();\n                break;\n            case '3_day':\n                chartParams.end_date = Libs.getCurrentDDMMYYYY();\n                chartParams.start_date = moment(Libs.addDays(Libs.getCurrentMMDDYYYYHI(), -2)).format('DD/MM/YYYY');\n                chartParams.start_max_date = moment(Libs.addDays(Libs.getCurrentMMDDYYYYHI(), -2)).format('DD/MM/YYYY');\n                chartParams.max_date = Libs.getCurrentDDMMYYYY();\n                break;\n\n            case 'this_month':\n                chartParams.max_date = moment().format('MM/YYYY');\n                chartParams.end_date = moment().format('MM/YYYY');\n                break;\n            case 'last_month':\n                chartParams.max_date = moment().format('MM/YYYY');\n                var tlast = new Date(Libs.getCurrentMMDDYYYYHI());\n                var ylast = tlast.getFullYear(), mlast = tlast.getMonth();\n                chartParams.end_date = moment(Libs.addMonths(new Date(ylast, mlast, 1), -1)).endOf('month').format('MM/YYYY');\n                chartParams.start_date = moment(Libs.addMonths(new Date(ylast, mlast, 1), -1)).format('MM/YYYY');\n                break;\n\n            case 'lifetime':\n            case '12_month':\n                chartParams.max_date = moment().format('MM/YYYY');\n                chartParams.end_date = moment().format('MM/YYYY');\n                chartParams.start_date = moment(Libs.addMonths(Libs.getCurrentMMDDYYYYHI(), -12)).format('MM/YYYY');\n\n                break;\n            // case 'lifetime':\n            //     chartParams.start_date = moment(curItem.commissioning).format('MM/DD/YYYY HH:mm:ss');\n            //     chartParams.end_date = Libs.getCurrentMMDDYYYYHI();\n            //     break;\n        }\n\n        this.setState({\n            chartParams: chartParams\n        }, () => {\n            self.loadDataChart();\n        });\n    }\n\n\n    handleDeviceInputChange = (e, index) => {\n        var { dataListDevice } = this.state;\n        var self = this;\n        if (!Libs.isArrayData(dataListDevice)) return;\n        var item = dataListDevice[index];\n        if (Libs.isObjectEmpty(item)) return;\n        dataListDevice[index].is_checked = dataListDevice[index].is_checked ? 0 : 1;\n        this.setState({\n            dataListDevice: dataListDevice\n        }, () => {\n            self.loadDataChart();\n        });\n    }\n\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getListDeviceByProject() {\n        let self = this;\n        let params = {\n            hash_id: this.state.hash_id,\n            id_employee: this.employee.id_employee,\n            id_language: this.employee.id_language,\n            type: 'private'\n        };\n\n        MainAnalyticsService.instance.getListDeviceByProject(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                for (var i in data) { data[i].is_checked = 1; }\n                self.setState({\n                    dataListDevice: data.filter((item) => item.id_device_type == 1)\n                });\n            } else {\n                self.setState({\n                    dataListDevice: []\n                });\n            }\n            self.forceUpdate();\n            this.loadDataChart();\n        });\n    }\n\n\n\n    handleDropdownChange = (item, name) => {\n        var self = this;\n        let { curItem } = self.state;\n        if (Libs.isObjectEmpty(item) && name == 'type_diagnostics') {\n            curItem.type_diagnostics = '';\n        } else if (Libs.isObjectEmpty(item) && name == 'type_string_index') {\n            curItem.type_string_index = '';\n        } else {\n            var value = item.value;\n            curItem[name] = value;\n        }\n\n        var dataStringIndex = [];\n\n        if (name == 'type_diagnostics') {\n            if (value == 1) {\n                dataStringIndex = [\n                    { id: 1, value: 1, label: \"Power\" },\n                    { id: 2, value: 2, label: \"Voltage\" },\n                    { id: 3, value: 3, label: \"Current\" },\n                    { id: 4, value: 4, label: \"Energy\" }\n                ];\n                curItem.type_string_index = 1;\n            } else if (value == 2) {\n                dataStringIndex = [\n                    { id: 1, value: 1, label: \"Power\" },\n                    { id: 2, value: 2, label: \"Voltage\" }\n                ];\n                curItem.type_string_index = 1;\n            } else if (value == 3) {\n                dataStringIndex = [\n                    { id: 1, value: 1, label: \"Power\" },\n                    { id: 2, value: 2, label: \"Voltage\" },\n                    { id: 3, value: 3, label: \"Current\" }\n                ];\n                curItem.type_string_index = 1;\n            }\n\n            self.setState({\n                curItem: curItem,\n                dataStringIndex: dataStringIndex\n            }, () => {\n                self.loadDataChart();\n            });\n        } else {\n            self.setState({\n                curItem: curItem\n            }, () => {\n                self.loadDataChart();\n            });\n        }\n\n    }\n\n\n    loadDataChart() {\n        var { chartParams, dataListDevice, curItem } = this.state, self = this;\n        var dataParameter = [];\n        if (!Libs.isArrayData(dataListDevice)) return;\n        var dataDeviceChecked = dataListDevice.filter((item) => item.is_checked == 1);\n\n\n        switch (parseInt(curItem.type_diagnostics)) {\n            case 1:\n                for (let i = 0; i < dataDeviceChecked.length; i++) {\n                    var listParameter = dataDeviceChecked[i].dataParameter;\n                    if (Libs.isArrayData(listParameter)) {\n                        for (let j = 0; j < listParameter.length; j++) {\n                            listParameter[j].is_checked = 0;\n                            if (curItem.type_string_index == 1 && listParameter[j].slug == \"activePower\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 2 && listParameter[j].slug == \"dcVoltage\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 3 && listParameter[j].slug == \"acCurrent\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 4 && listParameter[j].slug == \"activeEnergy\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n\n                        }\n                    }\n                    dataDeviceChecked[i].dataParameter = listParameter;\n                    let findItem = Libs.find(dataParameter, 'id_device_group', dataDeviceChecked[i].id_device_group);\n                    if (Libs.isObjectEmpty(findItem)) {\n                        dataParameter.push(dataDeviceChecked[i]);\n                    }\n                }\n\n\n                break;\n            case 2:\n                for (let i = 0; i < dataDeviceChecked.length; i++) {\n                    var listParameter = dataDeviceChecked[i].dataParameter;\n                    if (Libs.isArrayData(listParameter)) {\n                        for (let j = 0; j < listParameter.length; j++) {\n                            listParameter[j].is_checked = 0;\n                            if (curItem.type_string_index == 1 && listParameter[j].slug == \"dcPower\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 2 && listParameter[j].slug == \"dcVoltage\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 3 && listParameter[j].slug == \"dcCurrent\") {\n                                listParameter[j].is_checked = 1;\n                            }\n                        }\n                    }\n                    dataDeviceChecked[i].dataParameter = listParameter;\n                    let findItem = Libs.find(dataParameter, 'id_device_group', dataDeviceChecked[i].id_device_group);\n                    if (Libs.isObjectEmpty(findItem)) {\n                        dataParameter.push(dataDeviceChecked[i]);\n                    }\n                }\n                break;\n            case 3:\n\n                for (let i = 0; i < dataDeviceChecked.length; i++) {\n                    var listParameter = dataDeviceChecked[i].dataParameter;\n                    if (Libs.isArrayData(listParameter)) {\n                        for (let j = 0; j < listParameter.length; j++) {\n                            listParameter[j].is_checked = 0;\n                            if (curItem.type_string_index == 1 && listParameter[j].slug == \"activePower\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 2 && listParameter[j].slug == \"dcVoltage\") {\n                                listParameter[j].is_checked = 1;\n                            }\n\n                            if (curItem.type_string_index == 3 && listParameter[j].slug == \"acCurrent\") {\n                                listParameter[j].is_checked = 1;\n                            }\n                        }\n                    }\n                    dataDeviceChecked[i].dataParameter = listParameter;\n                    let findItem = Libs.find(dataParameter, 'id_device_group', dataDeviceChecked[i].id_device_group);\n                    if (Libs.isObjectEmpty(findItem)) {\n                        dataParameter.push(dataDeviceChecked[i]);\n                    }\n                }\n                break;\n        }\n\n        if (!Libs.isArrayData(dataParameter)) return;\n        var chartToolOption = {};\n        var params = {};\n        switch (chartParams.id_filter) {\n            case 'today':\n                params.start_date = Libs.convertAllFormatDate(Libs.dateFormat(chartParams.start_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\") + \" 00:00:00\");\n                params.end_date = Libs.convertAllFormatDate(Libs.dateFormat(chartParams.end_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\") + \" 19:00:00\");\n                break;\n            case '3_day':\n                params.start_date = Libs.dateFormat(chartParams.start_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\") + \" 00:00:00\";\n                params.end_date = Libs.dateFormat(chartParams.end_date, \"MM/DD/YYYY\", \"MM/DD/YYYY\") + \" 19:00:00\";\n                break;\n            case 'last_month':\n            case 'this_month':\n                params.start_date = Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(), \"DD\", \"MM/DD/YYYY\") + \"/\" + chartParams.start_date + \" 00:00:00\";\n                params.end_date = Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(), \"DD\", \"MM/DD/YYYY\") + \"/\" + chartParams.end_date + \" 19:00:00\";\n                break;\n            case 'lifetime':\n            case '12_month':\n                params.start_date = Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(), \"DD\", \"MM/DD/YYYY\") + \"/\" + chartParams.start_date + \" 00:00:00\";\n                params.end_date = Libs.dateFormat(Libs.getCurrentMMDDYYYYHI(), \"DD\", \"MM/DD/YYYY\") + \"/\" + chartParams.end_date + \" 19:00:00\";\n                break;\n        }\n\n\n\n        params.id_language = this.employee.id_language;\n        params.id_employee = this.employee.id_employee;\n        params.dataDevice = dataDeviceChecked;\n        params.filterBy = chartParams.id_filter;\n        params.data_send_time = chartParams.data_send_time;\n\n        let elHeight = (document.getElementById('main-chart-view').clientHeight) - 60;\n\n        chartToolOption.chart = { zoomType: 'xy', height: elHeight ? elHeight : null };\n        chartToolOption.credits = { enabled: false };\n        chartToolOption.exporting = { enabled: true };\n        chartToolOption.title = {\n            text: null,\n            align: 'left'\n        };\n        chartToolOption.xAxis = [];\n        chartToolOption.yAxis = [];\n        chartToolOption.tooltip = {\n            shared: true,\n            crosshairs: true\n        };\n        chartToolOption.plotOptions = {\n            series: {\n                turboThreshold: 5000\n            },\n            column: {\n                stacking: 'normal'\n            }\n        };\n        chartToolOption.series = [];\n        var tickInterval = 24;\n        switch (chartParams.id_filter) {\n            case 'today':\n                if (chartParams.data_send_time == 1) {\n                    tickInterval = 24;\n                } else if (chartParams.data_send_time == 2) {\n                    tickInterval = 12;\n                } else if (chartParams.data_send_time == 3) {\n                    tickInterval = 2;\n                }\n\n                break;\n            case '3_day':\n                if (chartParams.data_send_time == 1) {\n                    tickInterval = 168;\n                } else if (chartParams.data_send_time == 2) {\n                    tickInterval = 57;\n                } else if (chartParams.data_send_time == 3) {\n                    tickInterval = 15;\n                }\n                break;\n            case 'last_month':\n            case 'this_month':\n                tickInterval = 4;\n                break;\n            case 'lifetime':\n            case '12_month':\n                tickInterval = 1;\n                break;\n        }\n\n        var paramerter = [];\n        for (var j = 0, leng = dataParameter.length; j < leng; j++) {\n            var childs = dataParameter[j].dataParameter;\n            if (!Libs.isArrayData(childs)) return;\n            var dataChildTmp = childs.filter((item) => item.is_checked == 1);\n            if (Libs.isArrayData(dataChildTmp)) {\n                paramerter.push(...dataChildTmp);\n            }\n        }\n\n        if (!Libs.isArrayData(paramerter)) return;\n        params.type = 'private';\n        MainAnalyticsService.instance.getChartByListDevice(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                var categories = [], series = [], yAxis = [];\n                var yAxisUnit = [];\n                for (var i = 0; i < paramerter.length; i++) {\n                    if (i === 0) {\n                        yAxisUnit.push(paramerter[i]);\n                        yAxis.push({\n                            gridLineWidth: 1,\n                            lineWidth: 1,\n                            labels: {\n                                enabled: true\n                            },\n                            title: {\n                                text: (!Libs.isBlank(paramerter[i].unit) ? paramerter[i].unit : ''),\n                                enabled: true\n                            },\n                            opposite: false\n                        });\n                    } else {\n                        var findyAxisUnit = Libs.find(yAxisUnit, 'unit', paramerter[i].unit);\n                        if (Libs.isObjectEmpty(findyAxisUnit)) {\n                            yAxisUnit.push(paramerter[i]);\n                            yAxis.push({\n                                gridLineWidth: 1,\n                                lineWidth: 1,\n                                labels: {\n                                    enabled: true\n                                },\n                                title: {\n                                    text: (!Libs.isBlank(paramerter[i].unit) ? paramerter[i].unit : ''),\n                                    enabled: true\n                                },\n                                opposite: true\n                            });\n                        }\n                    }\n\n                    var idyAxis = 0;\n\n                    if (Libs.isArrayData(yAxisUnit)) {\n                        yAxisUnit.map((h, index) => {\n                            if (paramerter[i].unit == h.unit) {\n                                idyAxis = index;\n                            }\n                        })\n                    }\n\n                    for (let k = 0, lenk = data.length; k < lenk; k++) {\n                        var findSeries = Libs.find(series, 'id', data[k].id);\n                        if (Libs.isObjectEmpty(findSeries)) {\n                            var seriesItem = {\n                                id: data[k].id,\n                                name: data[k].device_name + \" - \" + paramerter[i].name,\n                                type: 'spline',\n                                yAxis: idyAxis,\n                                tooltip: {\n                                    valueSuffix: ' ' + (!Libs.isBlank(paramerter[i].unit) ? paramerter[i].unit : '')\n                                },\n                                data: [],\n                                gridLineWidth: 1,\n                                lineWidth: 1,\n                                marker: {\n                                    radius: 1.5,\n                                    enabled: false\n                                }\n                            };\n\n                            var dataRow = data[k].data;\n                            var itemData = [];\n                            for (let j = 0; j < dataRow.length; j++) {\n                                // generate series\n                                var value = (!Libs.isBlank(dataRow[j][paramerter[i].slug]) && dataRow[j][paramerter[i].slug] > 0) ? dataRow[j][paramerter[i].slug] : null;\n                                itemData.push([dataRow[j].time_full, value]);\n                                categories.push(dataRow[j].categories_time);\n                            }\n\n                            seriesItem.data = itemData;\n                            series.push(seriesItem);\n                        }\n\n                    }\n                }\n\n                if (Libs.isArrayData(categories) && Libs.isArrayData(series) && Libs.isArrayData(yAxis)) {\n                    chartToolOption.xAxis = [\n                        {\n                            categories: categories,\n                            alignTicks: true,\n                            tickInterval: tickInterval\n                        }\n                    ];\n                    chartToolOption.series = series;\n                    chartToolOption.yAxis = yAxis;\n\n                    this.setState({\n                        chartToolOption: chartToolOption,\n                        dataChartDevice: data,\n                        dataExport: data\n                    })\n                }\n            } else {\n                self.setState({\n                    chartToolOption: {},\n                    dataChartDevice: [],\n                    dataExport: []\n                });\n            }\n        });\n    }\n\n\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputDateChange(event) {\n        let target = event.target;\n        let name = target.name;\n        var self = this;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { chartParams } = this.state;\n            switch (chartParams.id_filter) {\n                case 'today':\n                case 'last_month':\n                case 'this_month':\n                    chartParams.start_date = value;\n                    chartParams[name] = value;\n                    break;\n                case '3_day':\n                    if (name == 'start_date') {\n                        chartParams.start_date = value;\n                        let arrDate = value.split('/');\n                        if (arrDate) {\n                            let currentDate = arrDate[2] + '/' + arrDate[1] + \"/\" + arrDate[0];\n                            chartParams.end_date = moment(Libs.addDays(currentDate, 2)).format('DD/MM/YYYY');\n                        }\n                    }\n\n                    if (name == 'end_date') {\n                        chartParams.end_date = value;\n                        let arrDate = value.split('/');\n                        if (arrDate) {\n                            let currentDate = arrDate[2] + '/' + arrDate[1] + \"/\" + arrDate[0];\n                            chartParams.start_date = moment(Libs.addDays(currentDate, -2)).format('DD/MM/YYYY');\n                        }\n                    }\n\n                    break;\n                case '12_month':\n                    if (name == 'start_date') {\n                        chartParams.start_date = value;\n                        let arrDate = value.split('/');\n                        if (arrDate) {\n                            let currentDate = arrDate[1] + '/' + arrDate[0] + '/01';\n                            const startOfMonth = moment(currentDate).startOf('month').format('YYYY-MM-DD');\n                            chartParams.end_date = moment(Libs.addMonths(startOfMonth, 12)).format('MM/YYYY');\n                        }\n                    }\n\n                    if (name == 'end_date') {\n                        chartParams.end_date = value;\n                        let arrDate = value.split('/');\n                        if (arrDate) {\n                            let currentDate = arrDate[1] + '/' + arrDate[0] + '/01';\n                            const startOfMonth = moment(currentDate).startOf('month').format('YYYY-MM-DD');\n                            chartParams.start_date = moment(Libs.addMonths(startOfMonth, -12)).format('MM/YYYY');\n                        }\n                    }\n                    break;\n            }\n\n            self.setState({\n                chartParams: chartParams\n            });\n            self.loadDataChart();\n        }\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(ChartDeviceDiagnostics)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}