{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import ActivitiesJsx from'./Activities.jsx';import BaseComponent from'../../../../BaseComponent';import Libs from'../../../../../utils/Libs';import{withTranslation}from'react-i18next';import Constants from'../../../../../utils/Constants';import MainActivitiesService from'../../../../../services/MainActivitiesService';import ErrorLevelService from'../../../../../services/ErrorLevelService';import ErrorTypeService from'../../../../../services/ErrorTypeService';import*as FileSaver from'file-saver';import*as XLSX from'xlsx';import moment from'moment';var Activities=/*#__PURE__*/function(_BaseComponent){_inherits(Activities,_BaseComponent);var _super=_createSuper(Activities);function Activities(props,context){var _this;_classCallCheck(this,Activities);_this=_super.call(this,props,context);_this.handleCheckStatusInputChange=function(event,index){var dataStatus=_this.state.dataStatus;if(!Libs.isArrayData(dataStatus))return;dataStatus[index].is_checked=dataStatus[index].is_checked?0:1;_this.setState({dataStatus:dataStatus});};_this.handleCheckTypeInputChange=function(event,index){var dataErrorType=_this.state.dataErrorType;if(!Libs.isArrayData(dataErrorType))return;dataErrorType[index].is_checked=dataErrorType[index].is_checked?0:1;_this.setState({dataErrorType:dataErrorType});};_this.handleCheckLevelInputChange=function(event,index){var dataErrorLevel=_this.state.dataErrorLevel;if(!Libs.isArrayData(dataErrorLevel))return;dataErrorLevel[index].is_checked=dataErrorLevel[index].is_checked?0:1;_this.setState({dataErrorLevel:dataErrorLevel});};_this.downloadData=function(){var dataList=_this.state.dataList;var t=_this.props.t;if(!Libs.isArrayData(dataList))return;var dataExport=[];for(var i=0,len=dataList.length;i<len;i++){var timeAgo=dataList[i].times_ago+\" \"+t(\"common.\"+dataList[i].times_ago_unit)+(dataList[i].times_ago>1&&\"s\");dataExport.push({'ID':dataList[i].id,'Device Name':dataList[i].name,'Type':dataList[i].error_type_name,'Level':dataList[i].error_level_name,'Opened':dataList[i].start_date_format,'Open period':timeAgo,'Message':dataList[i].message,'Description':dataList[i].description,'Solutions':dataList[i].solutions,'Note':dataList[i].note,'Review status':dataList[i].alert_state_name});}var fileType='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';var fileExtension='.xlsx';var ws=XLSX.utils.json_to_sheet(dataExport,{skipHeader:false});var wb={SheetNames:['Alerts'],Sheets:{'Alerts':ws}};var excelBuffer=XLSX.write(wb,{bookType:'xlsx',type:'array'});var data=new Blob([excelBuffer],{type:fileType});FileSaver.saveAs(data,\"Export-alerts-\"+moment().format('YYYY-MM-DD_hh:mm:ss')+fileExtension);};_this.handleCheckItemInputChange=function(index){var dataList=_this.state.dataList;if(!Libs.isArrayData(dataList))return;var item=dataList[index];if(Libs.isObjectEmpty(item))return;dataList[index].is_checked=dataList[index].is_checked?0:1;_this.setState({dataList:dataList});};_this.handleCheckAllInputChange=function(){var _this$state=_this.state,dataList=_this$state.dataList,checked_all=_this$state.checked_all;if(!Libs.isArrayData(dataList))return;for(var i=0,len=dataList.length;i<len;i++){dataList[i].is_checked=checked_all?0:1;}_this.setState({dataList:dataList,checked_all:checked_all?0:1});};_this.handleDropdownChange=function(item,name){if(Libs.isObjectEmpty(item))return;var self=_assertThisInitialized(_this),value=item.value;var searchParam=self.state.searchParam;if(name==='id_error_level'){if(Libs.isObjectEmpty(item)){searchParam.id_error_level='';}}if(name==='id_error_type'){if(Libs.isObjectEmpty(item)){searchParam.id_error_type='';}}if(name==='status'){if(Libs.isObjectEmpty(item)){searchParam.status='';}}searchParam[name]=value;self.setState({searchParam:searchParam});};_this.onClickCloseDeleteAll=function(status,data){if(status&&data){_this.getList();}_this.setState({deleteAll:false});};_this.onItemClickDeleteAll=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index];_this.setState({curItem:item,deleteAll:true});};_this.onClickCloseDelete=function(status,data){if(status&&data){_this.getList();}_this.setState({delete:false});};_this.onClickCloseAdd=function(status){if(status){_this.getList();}_this.setState({add:false});};_this.onItemClickDelete=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index];_this.setState({curItem:item,delete:true});};_this.onItemClick=function(index){if(!Libs.isArrayData(_this.state.dataList))return;var item=_this.state.dataList[index];if(Libs.isObjectEmpty(item))return;var params=_this.state.curItem;params.id=item.id;item.screen_mode=Constants.SCREEN_MODE.EDIT;_this.setState({curItem:item,add:true});};_this.jsxTemplate=ActivitiesJsx;_this.state={hash_id:!Libs.isObjectEmpty(_this.params)?_this.params.id:null,checked_all:0,curItem:{},dataList:[],dataErrorType:[],dataErrorLevel:[],dataStatus:[{id:1,value:1,label:\"Opened\",is_checked:0},{id:0,value:0,label:\"Closed\",is_checked:0}],searchParam:{limit:Constants.COMMON.LIMIT,offset:0,index:1},viewActivities:false,formSearch:false,delete:false,deleteAll:false,add:false};_this.paging={total:0,current:1,currentInput:1};_this.inputChangedHandler=_this.inputChangedHandler.bind(_assertThisInitialized(_this));_this.inputChangedEnter=_this.inputChangedEnter.bind(_assertThisInitialized(_this));_this.inputChangedBlue=_this.inputChangedBlue.bind(_assertThisInitialized(_this));_this.handleInputDateChange=_this.handleInputDateChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Activities,[{key:\"componentDidMount\",value:function componentDidMount(){this.getListErrorLevel();this.getListErrorType();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var self=this;if(nextProps.match.params.id!==this.props.match.params.id){this.setState({hash_id:nextProps.match.params.id},function(){self.getListErrorLevel();self.getListErrorType();});}}},{key:\"handleInputDateChange\",value:/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */function handleInputDateChange(event){var target=event.target;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var searchParam=this.state.searchParam;searchParam[name]=value;this.setState({searchParam:searchParam});}}/**\n    * ge list error state\n    * @author Long.Pham 2019-06-03\n    */},{key:\"getListErrorType\",value:function getListErrorType(){var self=this;var params={id_language:this.employee.id_language};ErrorTypeService.instance.getDropdownList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataErrorType:data});}else{self.setState({dataErrorType:[]});}});}/**\n   * ge list error level\n   * @author Long.Pham 2019-06-03\n   */},{key:\"getListErrorLevel\",value:function getListErrorLevel(){var self=this;var params={id_language:this.employee.id_language};ErrorLevelService.instance.getDropdownList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataErrorLevel:data},function(){self.getList();});}else{self.setState({dataErrorLevel:[]});}});}},{key:\"getList\",value:/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */function getList(){var self=this;var _this$state2=this.state,dataErrorLevel=_this$state2.dataErrorLevel,dataErrorType=_this$state2.dataErrorType,dataStatus=_this$state2.dataStatus;var params=this.state.searchParam;params.id_language=this.employee.id_language;params.id_employee=this.employee.id_employee;params.hash_id=this.state.hash_id;params.errorLevel=dataErrorLevel.filter(function(item){return item.is_checked==1;});params.errorType=dataErrorType.filter(function(item){return item.is_checked==1;});params.dataStatus=dataStatus.filter(function(item){return item.is_checked==1;});params.type='private';MainActivitiesService.instance.getList(params,function(data,total_row){if(Libs.isArrayData(data)){self.setState({dataList:data});var total=parseInt(total_row/self.state.searchParam.limit);if(total_row%self.state.searchParam.limit>0){total=total+1;}self.paging.total=total;self.paging.current=self.state.searchParam.index;self.paging.currentInput=self.state.searchParam.index;self.state.total_row=total_row;}else{self.setState({dataList:[],total_row:0});self.paging.total=0;self.paging.current=1;self.paging.currentInput=1;}self.forceUpdate();});}/**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */},{key:\"inputChangedHandler\",value:function inputChangedHandler(event){var self=this;var target=event.target;var name=target.name;var value=target.value;if(name==='current'){if(!Libs.isBlank(value)){var t=this.props.t;if(!Libs.isNumber(value)){self.toast(t('common.page_is_number'),\"error\");return;}}self.paging.currentInput=value;self.forceUpdate();}if(name==='limit'){var searchParam=this.state.searchParam;searchParam.limit=value;this.setState({searchParam:searchParam},function(){self.getList();});}}},{key:\"inputChangedEnter\",value:function inputChangedEnter(event){var self=this;if(event.key==='Enter'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}},{key:\"inputChangedBlue\",value:function inputChangedBlue(event){var self=this;var target=event.target;var name=target.name;if(name==='current'){var currentInput=this.paging.currentInput;if(!Libs.isBlank(currentInput)){var t=this.props.t;if(!Libs.isNumber(currentInput)){self.toast(t('common.page_is_number'),\"error\");return;}}if(Libs.isBlank(currentInput)&&!Libs.isNumber(currentInput))return;if(parseInt(currentInput)>this.paging.total){currentInput=self.paging.total;}if(currentInput<=0){currentInput=1;}self.paging.current=currentInput;self.paging.currentInput=currentInput;this.onSelectPage(currentInput);self.forceUpdate();}}/**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onSelectPage\",value:function onSelectPage(index){var self=this;self.state.searchParam.index=index;if(index>0){self.state.searchParam.offset=(index-1)*self.state.searchParam.limit;}else{self.state.searchParam.offset=0;}self.getList();}/**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */},{key:\"onClickReload\",value:function onClickReload(){var self=this;self.getList();}/**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */},{key:\"onSort\",value:function onSort(event,sortKey){this.state.searchParam.sort_column=sortKey;this.state.searchParam.order_by=this.state.searchParam.order_by===''||this.state.searchParam.order_by==='asc'?'desc':'asc';this.getList();}/**\n      * @description Call form search\n      * @author Long.Pham 12/05/2021\n      */},{key:\"onSearch\",value:function onSearch(){var formSearch=this.state.formSearch===false?true:false;this.setState({formSearch:formSearch});}},{key:\"onResetSearch\",value:function onResetSearch(){var self=this;var searchParam=this.state.searchParam;searchParam.date_from=null;searchParam.date_to=null;searchParam.id_error_level=null;searchParam.id_error_type=null;searchParam.status=null;searchParam.is_follow=null;searchParam.index=1;searchParam.offset=0;self.paging.current=1;self.paging.currentInput=1;self.paging.total=1;self.setState({searchParam:searchParam},function(){self.getList();});}/**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */},{key:\"handleSearch\",value:function handleSearch(){this.getList();}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return Activities;}(BaseComponent);var HighOrderComponentTranslated=withTranslation('common')(Activities);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModulePrivate/Activities/Activities.js"],"names":["ActivitiesJsx","BaseComponent","Libs","withTranslation","Constants","MainActivitiesService","ErrorLevelService","ErrorTypeService","FileSaver","XLSX","moment","Activities","props","context","handleCheckStatusInputChange","event","index","dataStatus","state","isArrayData","is_checked","setState","handleCheckTypeInputChange","dataErrorType","handleCheckLevelInputChange","dataErrorLevel","downloadData","dataList","t","dataExport","i","len","length","timeAgo","times_ago","times_ago_unit","push","id","name","error_type_name","error_level_name","start_date_format","message","description","solutions","note","alert_state_name","fileType","fileExtension","ws","utils","json_to_sheet","skipHeader","wb","SheetNames","Sheets","excelBuffer","write","bookType","type","data","Blob","saveAs","format","handleCheckItemInputChange","item","isObjectEmpty","handleCheckAllInputChange","checked_all","handleDropdownChange","self","value","searchParam","id_error_level","id_error_type","status","onClickCloseDeleteAll","getList","deleteAll","onItemClickDeleteAll","curItem","onClickCloseDelete","delete","onClickCloseAdd","add","onItemClickDelete","onItemClick","params","screen_mode","SCREEN_MODE","EDIT","jsxTemplate","hash_id","label","limit","COMMON","LIMIT","offset","viewActivities","formSearch","paging","total","current","currentInput","inputChangedHandler","bind","inputChangedEnter","inputChangedBlue","handleInputDateChange","getListErrorLevel","getListErrorType","nextProps","match","target","checked","id_language","employee","instance","getDropdownList","total_row","id_employee","errorLevel","filter","errorType","parseInt","forceUpdate","isBlank","isNumber","toast","key","onSelectPage","sortKey","sort_column","order_by","date_from","date_to","is_follow","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import ActivitiesJsx from './Activities.jsx';\nimport BaseComponent from '../../../../BaseComponent';\nimport Libs from '../../../../../utils/Libs';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../../../utils/Constants';\nimport MainActivitiesService from '../../../../../services/MainActivitiesService';\nimport ErrorLevelService from '../../../../../services/ErrorLevelService';\nimport ErrorTypeService from '../../../../../services/ErrorTypeService';\nimport * as FileSaver from 'file-saver';\nimport * as XLSX from 'xlsx';\nimport moment from 'moment';\n\nclass Activities extends BaseComponent {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = ActivitiesJsx;\n        this.state = {\n            hash_id: !Libs.isObjectEmpty(this.params) ? this.params.id : null,\n            checked_all: 0,\n            curItem: {},\n            dataList: [],\n            dataErrorType: [],\n            dataErrorLevel: [],\n            dataStatus: [\n                {\n                    id: 1,\n                    value: 1,\n                    label: \"Opened\",\n                    is_checked: 0\n                },\n                {\n                    id: 0,\n                    value: 0,\n                    label: \"Closed\",\n                    is_checked: 0\n                }\n            ],\n            searchParam: {\n                limit: Constants.COMMON.LIMIT,\n                offset: 0,\n                index: 1,\n            },\n            viewActivities: false,\n            formSearch: false,\n            delete: false,\n            deleteAll: false,\n            add: false\n        };\n\n        this.paging = {\n            total: 0,\n            current: 1,\n            currentInput: 1\n        };\n        this.inputChangedHandler = this.inputChangedHandler.bind(this);\n        this.inputChangedEnter = this.inputChangedEnter.bind(this);\n        this.inputChangedBlue = this.inputChangedBlue.bind(this);\n        this.handleInputDateChange = this.handleInputDateChange.bind(this);\n    }\n\n    componentDidMount() {\n        this.getListErrorLevel();\n        this.getListErrorType();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        let self = this;\n        if (nextProps.match.params.id !== this.props.match.params.id) {\n            this.setState({\n                hash_id: nextProps.match.params.id\n            }, () => {\n                self.getListErrorLevel();\n                self.getListErrorType();\n            });\n        }\n    }\n\n\n    handleCheckStatusInputChange = (event, index) => {\n        var { dataStatus } = this.state;\n        if (!Libs.isArrayData(dataStatus)) return;\n        dataStatus[index].is_checked = dataStatus[index].is_checked ? 0 : 1\n\n        this.setState({\n            dataStatus: dataStatus\n        })\n    }\n\n\n    handleCheckTypeInputChange = (event, index) => {\n        var { dataErrorType } = this.state;\n        if (!Libs.isArrayData(dataErrorType)) return;\n        dataErrorType[index].is_checked = dataErrorType[index].is_checked ? 0 : 1\n\n        this.setState({\n            dataErrorType: dataErrorType\n        })\n    }\n\n    handleCheckLevelInputChange = (event, index) => {\n        var { dataErrorLevel } = this.state;\n        if (!Libs.isArrayData(dataErrorLevel)) return;\n        dataErrorLevel[index].is_checked = dataErrorLevel[index].is_checked ? 0 : 1\n\n        this.setState({\n            dataErrorLevel: dataErrorLevel\n        })\n    }\n\n    downloadData = () => {\n        var { dataList } = this.state;\n        var { t } = this.props;\n        if (!Libs.isArrayData(dataList)) return;\n\n        var dataExport = [];\n        for (var i = 0, len = dataList.length; i < len; i++) {\n            var timeAgo = dataList[i].times_ago + \" \" + t(\"common.\" + dataList[i].times_ago_unit) + (dataList[i].times_ago > 1 && \"s\");\n            dataExport.push({\n                'ID': dataList[i].id,\n                'Device Name': dataList[i].name,\n                'Type': dataList[i].error_type_name,\n                'Level': dataList[i].error_level_name,\n                'Opened': dataList[i].start_date_format,\n                'Open period': timeAgo,\n                'Message': dataList[i].message,\n                'Description': dataList[i].description,\n                'Solutions': dataList[i].solutions,\n                'Note': dataList[i].note,\n                'Review status': dataList[i].alert_state_name\n            });\n        }\n\n        const fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\n        const fileExtension = '.xlsx';\n        const ws = XLSX.utils.json_to_sheet(dataExport, { skipHeader: false });\n        const wb = {\n            SheetNames: ['Alerts'],\n            Sheets: { 'Alerts': ws }\n        };\n        const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\n        const data = new Blob([excelBuffer], { type: fileType });\n        FileSaver.saveAs(data, \"Export-alerts-\" + moment().format('YYYY-MM-DD_hh:mm:ss') + fileExtension);\n    }\n\n    handleCheckItemInputChange = (index) => {\n        var { dataList } = this.state;\n        if (!Libs.isArrayData(dataList)) return;\n        var item = dataList[index];\n        if (Libs.isObjectEmpty(item)) return;\n        dataList[index].is_checked = dataList[index].is_checked ? 0 : 1;\n        this.setState({\n            dataList: dataList\n        })\n    }\n\n    handleCheckAllInputChange = () => {\n        var { dataList, checked_all } = this.state;\n        if (!Libs.isArrayData(dataList)) return;\n        for (var i = 0, len = dataList.length; i < len; i++) {\n            dataList[i].is_checked = checked_all ? 0 : 1;\n        }\n\n        this.setState({\n            dataList: dataList,\n            checked_all: checked_all ? 0 : 1\n        })\n    }\n\n    handleDropdownChange = (item, name) => {\n        if (Libs.isObjectEmpty(item)) return;\n        var self = this, value = item.value;\n        let { searchParam } = self.state;\n        if (name === 'id_error_level') {\n            if (Libs.isObjectEmpty(item)) {\n                searchParam.id_error_level = '';\n            }\n        }\n\n        if (name === 'id_error_type') {\n            if (Libs.isObjectEmpty(item)) {\n                searchParam.id_error_type = '';\n            }\n        }\n\n        if (name === 'status') {\n            if (Libs.isObjectEmpty(item)) {\n                searchParam.status = '';\n            }\n        }\n\n        searchParam[name] = value;\n        self.setState({\n            searchParam: searchParam\n        });\n    }\n\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputDateChange(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { searchParam } = this.state;\n            searchParam[name] = value;\n            this.setState({ searchParam: searchParam });\n        }\n    }\n\n    /**\n    * ge list error state\n    * @author Long.Pham 2019-06-03\n    */\n    getListErrorType() {\n        let self = this;\n        var params = { id_language: this.employee.id_language };\n\n        ErrorTypeService.instance.getDropdownList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataErrorType: data\n                });\n            } else {\n                self.setState({\n                    dataErrorType: []\n                });\n            }\n        })\n    }\n\n    /**\n   * ge list error level\n   * @author Long.Pham 2019-06-03\n   */\n    getListErrorLevel() {\n        let self = this;\n        var params = { id_language: this.employee.id_language };\n\n        ErrorLevelService.instance.getDropdownList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataErrorLevel: data\n                }, () => {\n                    self.getList();\n                });\n            } else {\n                self.setState({\n                    dataErrorLevel: []\n                });\n            }\n        })\n    }\n\n    onClickCloseDeleteAll = (status, data) => {\n        if (status && data) {\n            this.getList();\n        }\n        this.setState({\n            deleteAll: false\n        })\n    }\n\n    /**\n * @description Item click event delete all\n * @author Long.Pham 12-05-2021\n * @param index Order element in the list\n */\n    onItemClickDeleteAll = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index];\n        this.setState({\n            curItem: item,\n            deleteAll: true\n        });\n    }\n\n\n    onClickCloseDelete = (status, data) => {\n        if (status && data) {\n            this.getList();\n        }\n        this.setState({\n            delete: false\n        })\n    }\n\n    onClickCloseAdd = (status) => {\n        if (status) {\n            this.getList();\n        }\n        this.setState({\n            add: false\n        })\n    }\n\n    /**\n  * @description Item click event delete\n  * @author Long.Pham 12-05-2021\n  * @param index Order element in the list\n  */\n    onItemClickDelete = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index];\n        this.setState({\n            curItem: item,\n            delete: true\n        });\n    }\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getList() {\n        let self = this;\n        var { dataErrorLevel, dataErrorType, dataStatus } = this.state;\n        let params = this.state.searchParam;\n        params.id_language = this.employee.id_language;\n        params.id_employee = this.employee.id_employee;\n        params.hash_id = this.state.hash_id;\n        params.errorLevel = dataErrorLevel.filter((item) => item.is_checked == 1);\n        params.errorType = dataErrorType.filter((item) => item.is_checked == 1);\n        params.dataStatus = dataStatus.filter((item) => item.is_checked == 1);\n        params.type = 'private';\n\n        MainActivitiesService.instance.getList(params, (data, total_row) => {\n            if (Libs.isArrayData(data)) {\n                self.setState({\n                    dataList: data\n                });\n\n                var total = parseInt(total_row / self.state.searchParam.limit);\n                if (total_row % self.state.searchParam.limit > 0) {\n                    total = total + 1;\n                }\n                self.paging.total = total;\n                self.paging.current = self.state.searchParam.index;\n                self.paging.currentInput = self.state.searchParam.index;\n                self.state.total_row = total_row;\n\n            } else {\n                self.setState({\n                    dataList: [],\n                    total_row: 0\n                });\n                self.paging.total = 0;\n                self.paging.current = 1;\n                self.paging.currentInput = 1;\n            }\n            self.forceUpdate();\n        });\n    }\n\n\n    /**\n     * @description Item click event\n     * @author Long.Pham 12-05-2021\n     * @param index element in the list\n     */\n    onItemClick = (index) => {\n        if (!Libs.isArrayData(this.state.dataList)) return;\n        var item = this.state.dataList[index];\n        if (Libs.isObjectEmpty(item)) return;\n        var params = this.state.curItem;\n        params.id = item.id;\n        item.screen_mode = Constants.SCREEN_MODE.EDIT;\n        this.setState({\n            curItem: item,\n            add: true\n        })\n    }\n\n    inputChangedHandler(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (name === 'current') {\n            if (!Libs.isBlank(value)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(value)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            self.paging.currentInput = value;\n            self.forceUpdate();\n        }\n\n        if (name === 'limit') {\n            var { searchParam } = this.state;\n            searchParam.limit = value;\n            this.setState({\n                searchParam: searchParam\n            }, () => {\n                self.getList();\n            })\n        }\n    }\n\n    inputChangedEnter(event) {\n        let self = this;\n        if (event.key === 'Enter') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n    inputChangedBlue(event) {\n        let self = this;\n        let target = event.target;\n        let name = target.name;\n        if (name === 'current') {\n            var currentInput = this.paging.currentInput;\n            if (!Libs.isBlank(currentInput)) {\n                var { t } = this.props;\n                if (!Libs.isNumber(currentInput)) {\n                    self.toast(t('common.page_is_number'), \"error\");\n                    return;\n                }\n            }\n\n            if (Libs.isBlank(currentInput) && !Libs.isNumber(currentInput)) return;\n            if (parseInt(currentInput) > this.paging.total) {\n                currentInput = self.paging.total;\n            }\n\n            if (currentInput <= 0) {\n                currentInput = 1;\n            }\n\n            self.paging.current = currentInput;\n            self.paging.currentInput = currentInput;\n            this.onSelectPage(currentInput);\n            self.forceUpdate();\n        }\n    }\n\n\n    /**\n     * @description Select page in pagging\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onSelectPage(index) {\n        let self = this;\n        self.state.searchParam.index = index;\n\n        if (index > 0) {\n            self.state.searchParam.offset = (index - 1) * self.state.searchParam.limit;\n        } else {\n            self.state.searchParam.offset = 0;\n        }\n        self.getList();\n    }\n\n\n    /**\n     * @description reload data\n     * @author long.pham 09/05/2021\n     * @param {int} index\n     */\n    onClickReload() {\n        let self = this;\n        self.getList();\n    }\n\n\n    /**\n    * Func filter table\n    * @author Long.Pham 12-05-2021\n    * @param  {Object} e\n    */\n\n    onSort(event, sortKey) {\n        this.state.searchParam.sort_column = sortKey;\n        this.state.searchParam.order_by = (this.state.searchParam.order_by === '' || this.state.searchParam.order_by === 'asc') ? 'desc' : 'asc';\n        this.getList();\n    }\n\n    /**\n      * @description Call form search\n      * @author Long.Pham 12/05/2021\n      */\n    onSearch() {\n        let formSearch = (this.state.formSearch === false) ? true : false;\n        this.setState({\n            formSearch: formSearch\n        });\n    }\n\n    onResetSearch() {\n        let self = this;\n        let searchParam = this.state.searchParam;\n        searchParam.date_from = null;\n        searchParam.date_to = null;\n        searchParam.id_error_level = null;\n        searchParam.id_error_type = null;\n        searchParam.status = null;\n        searchParam.is_follow = null;\n        searchParam.index = 1;\n        searchParam.offset = 0;\n        self.paging.current = 1;\n        self.paging.currentInput = 1;\n        self.paging.total = 1;\n        self.setState({\n            searchParam: searchParam\n        }, () => {\n            self.getList();\n        });\n    }\n\n    /**\n     * Func search\n     * @author Long.Pham 12/05/2021\n     * @param  {Object} e\n     */\n    handleSearch() {\n        this.getList();\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Activities)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}