{"ast":null,"code":"import React from'react';import RowItem from'./RowItem';import{Paging}from'../../../../../components/Paging';import{RText}from'../../../../../components/Controls';import Libs from'../../../../../utils/Libs';import ViewDevicePopup from'./ViewDevicePopup';import OnOffPopup from'./OnOffPopup';import ControlCalendar from'./ControlCalendar';import RowItemOnOff from'./RowItemOnOff';import MenuPrivateProject from'../../../../common/MenuPrivateProject/MenuPrivateProject';import CMSDatePicker from'../../../../../components/CMSDatePicker/CMSDatePicker';import'./Device.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Device(){var _this=this;var t=this.props.t;var _this$state=this.state,curItem=_this$state.curItem,dataList=_this$state.dataList,allLanguage=_this$state.allLanguage,searchParam=_this$state.searchParam,show_tab=_this$state.show_tab,tab_on_off=_this$state.tab_on_off,dataListInverter=_this$state.dataListInverter;var RowItems=null;RowItems=dataList.map(function(item,index){return/*#__PURE__*/_jsx(RowItem,{index:index,dataItem:item,actions:_this.actions,onClickViewDevice:_this.onClickViewDevice,onClickChartDevice:_this.onClickChartDevice,viewAlertDevice:_this.viewAlertDevice,t:t},'row_item_'+index);});var ViewDevicePopupLayout=this.state.viewDevice?/*#__PURE__*/_jsx(ViewDevicePopup,{t:t,allLanguage:allLanguage,curItem:curItem,onClickCloseViewDevice:this.onClickCloseViewDevice,auth:this.props.auth,actions:this.actions,show_tab:show_tab,iso_code_language:this.employee.lang}):'';var OnOffPopupLayout=this.state.showOnOffPopup?/*#__PURE__*/_jsx(OnOffPopup,{t:t,curItem:curItem,onClickCloseOnOff:this.onClickCloseOnOff,auth:this.props.auth,actions:this.actions}):'';var ControlCalendarLayout=this.state.showControlCalendar?/*#__PURE__*/_jsx(ControlCalendar,{t:t,curItem:curItem,onCloseControlCalender:this.onCloseControlCalender,auth:this.props.auth,actions:this.actions}):'';return/*#__PURE__*/_jsxs(\"div\",{className:\"devices\",children:[/*#__PURE__*/_jsx(MenuPrivateProject,{hash_id:this.state.hash_id},Math.random()),ViewDevicePopupLayout,OnOffPopupLayout,ControlCalendarLayout,/*#__PURE__*/_jsx(\"div\",{className:\"page-breadcrumb\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"device-tab-scada\",children:/*#__PURE__*/_jsx(\"ol\",{children:/*#__PURE__*/_jsx(\"li\",{onClick:this.setTabOnOff.bind(this,1),className:tab_on_off==1?\"active\":\"\",children:t('device.title')})})})}),tab_on_off==1?/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 text-end\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{onClick:this.downloadData.bind(this),className:\"btn-download\",children:/*#__PURE__*/_jsx(\"span\",{className:\"icon-download\"})})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"search\",onClick:this.onSearch.bind(this),children:/*#__PURE__*/_jsx(\"span\",{className:\"icon icon-search\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:/*#__PURE__*/_jsx(CMSDatePicker,{value:searchParam.current_date,inputId:\"current_date\",format:\"DD/MM/YYYY\",dateFormat:\"dd/MM/yyyy\",inputClass:\"form-control\",inputName:\"current_date\",maxDate:searchParam.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:true})})]}):\"\"]})}),tab_on_off==2?/*#__PURE__*/_jsx(\"div\",{className:\"tab-control\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"row\",children:Libs.isArrayData(dataListInverter)?dataListInverter.map(function(item,index){return/*#__PURE__*/_jsx(RowItemOnOff,{index:index,dataItem:item,actions:_this.actions,onClickOnOff:_this.onClickOnOff,onClickControlCalender:_this.onClickControlCalender// onClickChartDevice={this.onClickChartDevice}\n// viewAlertDevice={this.viewAlertDevice}\n,t:t},'row_item_'+index)// <li key={index} className=\"col-md-3\">\n//     <div className=\"inverter-item\">\n//         <div className=\"title\">{item.name}</div>\n//         <div className=\"iv-title\">\n//             <div className=\"row\">\n//                 <div className=\"col-md-6\">\n//                     <img src=\"/inverter.png\" className={item.status == 1 ? \"on\" : \"off\"} />\n//                 </div>\n//                 <div className=\"col-md-6\">\n//                     <div className=\"mccb\">MCCB</div>\n//                     <div onClick={this.onClickOnOff.bind(this, index)} className={item.status == 1 ? \"action-on-off on\" : \"action-on-off off\"}>\n//                         {item.status == 1 ? \"ON\" : \"OFF\"}\n//                     </div>\n//                 </div>\n//             </div>\n//         </div>\n//         <div className=\"iv-content\">\n//             <div className=\"row\">\n//                 <div className=\"col-md-4\"><span>Power</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>{item.activePower}</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>kW</span></div>\n//             </div>\n//             <div className=\"row\">\n//                 <div className=\"col-md-4\"><span>PF</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>{item.powerFactor}</span></div>\n//                 <div className=\"col-md-4 text-center\"><span></span></div>\n//             </div>\n//             <div className=\"row\">\n//                 <div className=\"col-md-4\"><span>Temp</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>{item.internalTemperature}</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>℃</span></div>\n//             </div>\n//             <div className=\"row\">\n//                 <div className=\"col-md-4\"><span>Efficiency</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>90</span></div>\n//                 <div className=\"col-md-4 text-center\"><span>%</span></div>\n//             </div>\n//         </div>\n//     </div>\n// </li>\n;}):\"\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"main-device-tab\",children:[this.state.formSearch?/*#__PURE__*/_jsx(\"div\",{className:\"form-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xs-12 col-sm-3 col-md-3 col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(RText,{label:t('common.id'),inputClass:\"form-control\",inputId:\"id\",inputName:\"id\",value:searchParam.id,onChange:function onChange(e){_this.handleSearchInputChange(e);},maxLength:100})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xs-12 col-sm-3 col-md-3 col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(RText,{label:t('device.name'),inputClass:\"form-control\",inputId:\"name\",inputName:\"name\",value:searchParam.name,onChange:function onChange(e){_this.handleSearchInputChange(e);},maxLength:100})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xs-12 col-sm-3 col-md-3 col-lg-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-search\",onClick:this.handleSearch.bind(this),children:[\" \",t('common.search'),\" \"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-reset\",onClick:this.onResetSearch.bind(this),children:[\" \",t('common.reset'),\" \"]})]})})]})}):\"\",/*#__PURE__*/_jsx(\"div\",{className:\"data-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-device-scroll\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-row\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"100px\"},className:\"header-col width5\",children:/*#__PURE__*/_jsx(\"p\",{})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},onClick:function onClick(e){return _this.onSort(e,'name');},className:searchParam.sort_column===\"name\"?\"header-col width10 sorting \"+searchParam.order_by:\"header-col width10 sorting\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.device_name')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},onClick:function onClick(e){return _this.onSort(e,'model');},className:searchParam.sort_column===\"model\"?\"header-col width10 sorting \"+searchParam.order_by:\"header-col width10 sorting\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.model')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"250px\"},onClick:function onClick(e){return _this.onSort(e,'serial_number');},className:searchParam.sort_column===\"serial_number\"?\"header-col width15 sorting \"+searchParam.order_by:\"header-col width15 sorting\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.serial_number')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.id_device_type')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.power')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.energy')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.last_month')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.lifetime')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10\",children:/*#__PURE__*/_jsx(\"p\",{children:t('device.last_updated')})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"150px\"},className:\"header-col width10 text-end\",children:/*#__PURE__*/_jsx(\"strong\",{children:t('common.action')})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"main-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"body\",children:!Libs.isBlank(RowItems)?RowItems:/*#__PURE__*/_jsx(\"div\",{className:\"data-empty\",children:t('common.data_empty')})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"main-paging\",children:/*#__PURE__*/_jsx(Paging,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function onClickReload(e){return _this.onClickReload.bind(_this);},onSelectPage:function onSelectPage(index){return _this.onSelectPage.bind(_this,index);}})})]})]});};","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/views/desktop/ModulePrivate/Device/Device.jsx"],"names":["React","RowItem","Paging","RText","Libs","ViewDevicePopup","OnOffPopup","ControlCalendar","RowItemOnOff","MenuPrivateProject","CMSDatePicker","Device","t","props","state","curItem","dataList","allLanguage","searchParam","show_tab","tab_on_off","dataListInverter","RowItems","map","item","index","actions","onClickViewDevice","onClickChartDevice","viewAlertDevice","ViewDevicePopupLayout","viewDevice","onClickCloseViewDevice","auth","employee","lang","OnOffPopupLayout","showOnOffPopup","onClickCloseOnOff","ControlCalendarLayout","showControlCalendar","onCloseControlCalender","hash_id","Math","random","setTabOnOff","bind","downloadData","onSearch","current_date","max_date","handleInputDateChange","isArrayData","onClickOnOff","onClickControlCalender","formSearch","id","e","handleSearchInputChange","name","handleSearch","onResetSearch","width","onSort","sort_column","order_by","isBlank","parseInt","paging","total","current","currentInput","inputChangedHandler","inputChangedEnter","inputChangedBlue","onClickReload","onSelectPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport RowItem from './RowItem';\nimport { Paging } from '../../../../../components/Paging';\nimport { RText } from '../../../../../components/Controls';\nimport Libs from '../../../../../utils/Libs';\nimport ViewDevicePopup from './ViewDevicePopup';\nimport OnOffPopup from './OnOffPopup';\n\nimport ControlCalendar from './ControlCalendar';\n\nimport RowItemOnOff from './RowItemOnOff';\nimport MenuPrivateProject from '../../../../common/MenuPrivateProject/MenuPrivateProject';\nimport CMSDatePicker from '../../../../../components/CMSDatePicker/CMSDatePicker';\nimport './Device.scss';\n\nexport default function Device() {\n    const { t } = this.props;\n    var { curItem, dataList, allLanguage, searchParam, show_tab, tab_on_off, dataListInverter } = this.state;\n    var RowItems = null;\n    RowItems = dataList.map((item, index) => {\n        return <RowItem\n            key={'row_item_' + index}\n            index={index}\n            dataItem={item}\n            actions={this.actions}\n            onClickViewDevice={this.onClickViewDevice}\n            onClickChartDevice={this.onClickChartDevice}\n            viewAlertDevice={this.viewAlertDevice}\n            t={t}\n        />\n    });\n\n\n    var ViewDevicePopupLayout = this.state.viewDevice\n        ? <ViewDevicePopup\n            t={t}\n            allLanguage={allLanguage}\n            curItem={curItem}\n            onClickCloseViewDevice={this.onClickCloseViewDevice}\n            auth={this.props.auth}\n            actions={this.actions}\n            show_tab={show_tab}\n            iso_code_language={this.employee.lang}\n        /> : '';\n\n\n        \n        var OnOffPopupLayout = this.state.showOnOffPopup\n        ? <OnOffPopup\n            t={t}\n            curItem={curItem}\n            onClickCloseOnOff={this.onClickCloseOnOff}\n            auth={this.props.auth}\n            actions={this.actions}\n        /> : '';\n\n\n        var ControlCalendarLayout = this.state.showControlCalendar\n        ? <ControlCalendar\n            t={t}\n            curItem={curItem}\n            onCloseControlCalender={this.onCloseControlCalender}\n            auth={this.props.auth}\n            actions={this.actions}\n        /> : '';\n\n    return (\n        <div className=\"devices\">\n            <MenuPrivateProject hash_id={this.state.hash_id} key={Math.random()} />\n            {ViewDevicePopupLayout}\n            {OnOffPopupLayout}\n            {ControlCalendarLayout}\n\n            <div className=\"page-breadcrumb\">\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        <div className=\"device-tab-scada\">\n                            <ol>\n                                <li onClick={this.setTabOnOff.bind(this, 1)} className={tab_on_off == 1 ? \"active\" : \"\"}>{t('device.title')}</li>\n                                {/* <li onClick={this.setTabOnOff.bind(this, 2)} className={tab_on_off == 2 ? \"active\" : \"\"}>{t('device.control')}</li> */}\n                            </ol>\n                        </div>\n                    </div>\n                    {tab_on_off == 1 ?\n                        <div className=\"col-md-6 text-end\">\n                            <ul>\n                                <li><div onClick={this.downloadData.bind(this)} className=\"btn-download\"><span className=\"icon-download\"></span></div></li>\n                                <li><div className=\"search\" onClick={this.onSearch.bind(this)}><span className=\"icon icon-search\"></span></div></li>\n                            </ul>\n                            <div className=\"date\">\n                                <CMSDatePicker\n                                    value={searchParam.current_date}\n                                    inputId=\"current_date\"\n                                    format=\"DD/MM/YYYY\"\n                                    dateFormat=\"dd/MM/yyyy\"\n                                    inputClass=\"form-control\"\n                                    inputName=\"current_date\"\n                                    maxDate={searchParam.max_date}\n                                    handleChange={this.handleInputDateChange.bind(this)}\n                                    maxLength={20}\n                                    showIconCalendar={true}\n                                />\n                            </div>\n                        </div>\n                        : \"\"}\n\n                </div>\n            </div>\n\n            {tab_on_off == 2 ?\n                <div className=\"tab-control\">\n                    <ul className=\"row\">\n                        {Libs.isArrayData(dataListInverter) ?\n                            dataListInverter.map((item, index) => {\n                                return (\n                                    <RowItemOnOff\n                                        key={'row_item_' + index}\n                                        index={index}\n                                        dataItem={item}\n                                        actions={this.actions}\n                                        onClickOnOff={this.onClickOnOff}\n                                        onClickControlCalender = {this.onClickControlCalender}\n                                        // onClickChartDevice={this.onClickChartDevice}\n                                        // viewAlertDevice={this.viewAlertDevice}\n                                        t={t}\n                                    />\n\n                                    // <li key={index} className=\"col-md-3\">\n                                    //     <div className=\"inverter-item\">\n                                    //         <div className=\"title\">{item.name}</div>\n                                    //         <div className=\"iv-title\">\n                                    //             <div className=\"row\">\n                                    //                 <div className=\"col-md-6\">\n                                    //                     <img src=\"/inverter.png\" className={item.status == 1 ? \"on\" : \"off\"} />\n                                    //                 </div>\n                                    //                 <div className=\"col-md-6\">\n                                    //                     <div className=\"mccb\">MCCB</div>\n                                    //                     <div onClick={this.onClickOnOff.bind(this, index)} className={item.status == 1 ? \"action-on-off on\" : \"action-on-off off\"}>\n                                    //                         {item.status == 1 ? \"ON\" : \"OFF\"}\n                                    //                     </div>\n                                    //                 </div>\n                                    //             </div>\n                                    //         </div>\n\n                                    //         <div className=\"iv-content\">\n                                    //             <div className=\"row\">\n                                    //                 <div className=\"col-md-4\"><span>Power</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>{item.activePower}</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>kW</span></div>\n                                    //             </div>\n\n                                    //             <div className=\"row\">\n                                    //                 <div className=\"col-md-4\"><span>PF</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>{item.powerFactor}</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span></span></div>\n                                    //             </div>\n\n                                    //             <div className=\"row\">\n                                    //                 <div className=\"col-md-4\"><span>Temp</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>{item.internalTemperature}</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>℃</span></div>\n                                    //             </div>\n\n\n                                    //             <div className=\"row\">\n                                    //                 <div className=\"col-md-4\"><span>Efficiency</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>90</span></div>\n                                    //                 <div className=\"col-md-4 text-center\"><span>%</span></div>\n                                    //             </div>\n                                    //         </div>\n                                    //     </div>\n                                    // </li>\n                                );\n                            })\n                            : \"\"}\n                    </ul>\n                </div> :\n                <div className=\"main-device-tab\">\n                    {this.state.formSearch ?\n                        <div className=\"form-search\">\n                            <div className=\"row\">\n                                <div className=\"col-xs-12 col-sm-3 col-md-3 col-lg-3\">\n                                    <div className=\"mb-3\">\n                                        <RText label={t('common.id')}\n                                            inputClass=\"form-control\"\n                                            inputId=\"id\"\n                                            inputName=\"id\"\n                                            value={searchParam.id}\n                                            onChange={(e) => { this.handleSearchInputChange(e); }}\n                                            maxLength={100} />\n                                    </div>\n                                </div>\n\n                                <div className=\"col-xs-12 col-sm-3 col-md-3 col-lg-3\">\n                                    <div className=\"mb-3\">\n                                        <RText label={t('device.name')}\n                                            inputClass=\"form-control\"\n                                            inputId=\"name\"\n                                            inputName=\"name\"\n                                            value={searchParam.name}\n                                            onChange={(e) => { this.handleSearchInputChange(e); }}\n                                            maxLength={100} />\n                                    </div>\n                                </div>\n\n                                <div className=\"col-xs-12 col-sm-3 col-md-3 col-lg-3\">\n                                    <div className=\"mb-3\">\n                                        <button type=\"button\" className=\"btn btn-search\" onClick={this.handleSearch.bind(this)}> {t('common.search')} </button>\n                                        <button type=\"button\" className=\"btn btn-reset\" onClick={this.onResetSearch.bind(this)}> {t('common.reset')} </button>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        : \"\"}\n\n                    <div className=\"data-view\">\n                        <div className=\"main-device-scroll\">\n                            <div className=\"main-header\">\n                                <div className=\"header-row\">\n                                    <div style={{ width: \"100px\" }} className=\"header-col width5\"><p></p></div>\n                                    <div style={{ width: \"150px\" }} onClick={e => this.onSort(e, 'name')} className={searchParam.sort_column === \"name\" ? \"header-col width10 sorting \" + searchParam.order_by : \"header-col width10 sorting\"}><p>{t('device.device_name')}</p></div>\n                                    <div style={{ width: \"150px\" }} onClick={e => this.onSort(e, 'model')} className={searchParam.sort_column === \"model\" ? \"header-col width10 sorting \" + searchParam.order_by : \"header-col width10 sorting\"}><p>{t('device.model')}</p></div>\n                                    <div style={{ width: \"250px\" }} onClick={e => this.onSort(e, 'serial_number')} className={searchParam.sort_column === \"serial_number\" ? \"header-col width15 sorting \" + searchParam.order_by : \"header-col width15 sorting\"}><p>{t('device.serial_number')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10\"><p>{t('device.id_device_type')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10\"><p>{t('device.power')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10\"><p>{t('device.energy')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10\"><p>{t('device.last_month')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10\"><p>{t('device.lifetime')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10\"><p>{t('device.last_updated')}</p></div>\n                                    <div style={{ width: \"150px\" }} className=\"header-col width10 text-end\"><strong>{t('common.action')}</strong></div>\n                                </div>\n                            </div>\n                            <div className=\"main-body\">\n                                <div className=\"body\">\n                                    {!Libs.isBlank(RowItems) ? RowItems : <div className=\"data-empty\">{t('common.data_empty')}</div>}\n                                </div>\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div className=\"main-paging\">\n                        <Paging\n                            total={parseInt(this.paging.total)}\n                            current={(this.paging.current)}\n                            currentInput={this.paging.currentInput}\n                            inputChangedHandler={this.inputChangedHandler}\n                            inputChangedEnter={this.inputChangedEnter}\n                            inputChangedBlue={this.inputChangedBlue}\n                            onClickReload={(e) => this.onClickReload.bind(this)}\n                            onSelectPage={(index) => this.onSelectPage.bind(this, index)}>\n                        </Paging>\n                    </div>\n                </div>\n            }\n\n\n\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}