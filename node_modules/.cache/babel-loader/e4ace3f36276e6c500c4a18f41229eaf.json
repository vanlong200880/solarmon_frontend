{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _inherits from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solarmon_production/solarmon_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Constants from'../utils/Constants';import $ from'jquery';import{toast as _toast}from'react-toastify';import Libs from'../utils/Libs';var BaseComponent=/*#__PURE__*/function(_React$Component){_inherits(BaseComponent,_React$Component);var _super=_createSuper(BaseComponent);function BaseComponent(props){var _this;_classCallCheck(this,BaseComponent);_this=_super.call(this,props);_this.setValidateMessage=function(errors,validateOne,wrapEleId){var wrapEle=$('#'+wrapEleId);function isEmpty(el){return!$.trim(el.html());}if(typeof errors==='undefined'||errors===null||Object.keys(errors).length===0)return;validateOne=typeof validateOne==='boolean'?validateOne:false;var validateMessageClass=\".validate-message\",formGroupClass=\".mb-3\",inputErrorClass=\".input-error\",parentErrorClass='.input-error';var createParagraph=function createParagraph(text){var p=document.createElement(\"p\");p.classList.add(validateMessageClass.replace(\".\",\"\"));p.innerText=text;return p;};var removeOldParagraph=function removeOldParagraph(input,parent){var oldParagraph=parent.find(validateMessageClass);if(oldParagraph.length>0){oldParagraph.remove();}};/**\n         * @description find elements to set message\n         * @param  {} errors\n         */var find=function find(errors){if(!validateOne){// remove all validate message\n_this.removeAllValidateMessage();}for(var key in errors){var message=errors[key];var input=$('[name=\"'+key+'\"]');if(!isEmpty(wrapEle)){input=wrapEle.find('[name=\"'+key+'\"]');}if(input.length>0){var parent=input.parents(formGroupClass);if(parent.length>0){setMessage(message,input,parent);}else{// case input isn't wrap by class form-group\nvar _parent=input.parent();setMessage(message,input,_parent);}}}};/**\n         * Create element new paragraph message validate\n         * @param  {} message\n         * @param  {} input\n         * @param  {} parent\n         */var setMessage=function setMessage(message,input,parent){if(typeof message==='string'&&message.length>0){var paragraph=createParagraph(message);removeOldParagraph(input,parent);input[0].classList.add(inputErrorClass.replace(\".\",\"\"));var nextElement=input[0].nextElementSibling;var nodeName=input[0].nodeName;if(nodeName===\"SELECT\"){nextElement.classList.add(inputErrorClass.replace(\".\",\"\"));}parent[0].appendChild(paragraph);parent[0].classList.add(parentErrorClass.replace(\".\",\"\"));}else{removeOldParagraph(input,parent);input[0].classList.remove(inputErrorClass.replace(\".\",\"\"));parent[0].classList.remove(parentErrorClass.replace(\".\",\"\"));var _nextElement=input[0].nextElementSibling;var _nodeName=input[0].nodeName;if(_nodeName===\"SELECT\"){_nextElement.classList.remove(inputErrorClass.replace(\".\",\"\"));}}};find(errors);};_this.removeAllValidateMessage=function(){if($('.validate-message').length){$('.validate-message').remove();}if($('.input-error').length){$('.input-error').removeClass('input-error');}if($('.select2-error').length){$('.select2-error').removeClass('select2-error');}};_this.state={currentMode:Constants.SCREEN_MODE.VIEW// mode cập nhật hoặc edit\n};_this.jsxTemplate=function(){};_this.searchParam={};if(props.baseParam&&props.baseParam.match){_this.params=props.baseParam.match.params;_this.path=props.baseParam.match.path;}var public_url=Constants.SITE_URL.PUBLIC_URL;if(public_url.indexOf(window.location.pathname)===-1){_this.setEmployeeInfo();if(Libs.isObjectEmpty(props.auth)){window.location.href=Constants.SITE_URL.LOGIN;return _possibleConstructorReturn(_this);}var path=null;if(props.baseParam&&props.baseParam.match){_this.params=props.baseParam.match.params;path=props.baseParam.match.path;}var param=props.auth[path];_this.permission=props.auth;if(!Libs.isBlank(_this.path)){if(param){_this.actions=param.auth;if(param.auth<=0){window.location.href=Constants.SITE_URL.ERROR_PAGE;return _possibleConstructorReturn(_this);}}else{window.location.href=Constants.SITE_URL.ERROR_PAGE;return _possibleConstructorReturn(_this);}}}if(_this.constructor===BaseComponent){// Error Type 1. Abstract class can not be constructed.\nthrow new TypeError(\"Can not construct abstract class.\");}return _this;}/**\n     * set user info param and set user permission\n     */_createClass(BaseComponent,[{key:\"setEmployeeInfo\",value:function setEmployeeInfo(){var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);var employeeInfo=JSON.parse(Libs.base64Decrypt(info));if(Libs.isObjectEmpty(employeeInfo)){localStorage.clear();window.location.href=Constants.SITE_URL.LOGIN;}var expired=employeeInfo.timeout*1;var currentDate=new Date();if(currentDate.getTime()>expired){localStorage.clear();window.location.href=Constants.SITE_URL.LOGIN;return false;}this.employee=employeeInfo;}/**\n     * @description default function reactJS\n     */},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}/**\n     * @description Set validate message\n     * @author Long.Pham\n     * @since 12/05/2021\n     * @param {*} errors\n     ******** IMPORTANT surround input field must have class form-group\n    */},{key:\"setValidationError\",value:/**\n    * @description Display error messages for validation fields\n    * @param object errors: Error field values\n    * @param string wrapperElement: Tag the fields, otherwise it will take all the files with names from errors and assignments and error messages\n    * @author long.pham 2018-11-24\n    */function setValidationError(errors,wrapperElement){if(typeof errors==='undefined'||errors===null||Object.keys(errors).length<=0)return;$.each(errors,function(key,val){// var ele = $('[name=\\\"' + key + '\\\"]');\nvar ele=$('[name=\"'+key+'\"]');if(wrapperElement!=='undefined'&&wrapperElement!==null&&wrapperElement!==''){var wrapEle=$('.'+wrapperElement);if(!wrapEle||wrapEle.length<=0){wrapEle=$('#'+wrapperElement);}// ele = wrapEle.find('[name=\\\"' + key + '\\\"]');\nele=wrapEle.find('[name=\"'+key+'\"]');}if(ele.length){if(val&&val!==null){ele.removeClass('input-error');ele.addClass('input-error');ele.next('.validate-message').remove();ele.after('<p class=\"validate-message\">'+val+'</p>');}else{ele.removeClass('input-error');ele.next('.validate-message').remove();}}});}},{key:\"toast\",value:function toast(message,type){var pos=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"top-right\";var posistion=\"top-right\";if(typeof pos!=='undefined'){posistion=pos;}switch(type){case\"error\":_toast.error(message,{position:posistion,autoClose:true,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,draggablePercent:10,limit:1});break;case\"warn\":_toast.warn(message,{position:posistion,autoClose:true,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true,draggablePercent:10});break;default:_toast.info(message,{position:posistion,autoClose:true,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,draggablePercent:10});break;}_toast.clearWaitingQueue();}/**\n     * handle Search Input Change Value\n     * @author Long.Pham\n     * @param {*} values \n     * @param {*} props \n     */},{key:\"handleSearchInputChange\",value:function handleSearchInputChange(event){var target=event.target;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var item=this.state.searchParam;item.index=1;item.offset=0;/* check is number and not start with \"0\" charactor = 0(Phone number) => convert to number*/ /*Fix lỗi auto convert to string => sql query wrong*/if(target.type!=='checkbox'){if(!isNaN(value)&&!value.startsWith('0')&&!Libs.isBlank(value)){value=value*1;}}item[name]=value;this.setState({searchParam:item});}}/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */},{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var curItem=this.state.curItem;curItem[name]=event.target.validity.valid?value:curItem[name];this.setState({curItem:curItem});}}/**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */},{key:\"handleInputDateChange\",value:function handleInputDateChange(event){var target=event.target;var name=target.name;var value=target.value;if(target.type==='checkbox'){value=target.checked?1:0;}if(name){var curItem=this.state.curItem;curItem[name]=value;this.setState({curItem:curItem});}}// /**\n//  * set state for numeric number input\n//  * @param {Object} event \n//  */\n// handleNumberInputChange(event) {\n//     let target = event.target;\n//     let name = target.name;\n//     let value = target.value\n//     if (name) {\n//         var numericExpression = /^[0-9\\b]+$/;\n//         if (value == \"\" || numericExpression.test(value)) {\n//             let item = this.state.curItem;\n//             item[name] = value;\n//             this.setState({ curItem: item });\n//         }\n//     }\n// }\n}]);return BaseComponent;}(React.Component);export{BaseComponent as default};","map":{"version":3,"sources":["/Volumes/Data/sources/solarmon_production/solarmon_frontend/src/containers/BaseComponent.js"],"names":["React","Constants","$","toast","Libs","BaseComponent","props","setValidateMessage","errors","validateOne","wrapEleId","wrapEle","isEmpty","el","trim","html","Object","keys","length","validateMessageClass","formGroupClass","inputErrorClass","parentErrorClass","createParagraph","text","p","document","createElement","classList","add","replace","innerText","removeOldParagraph","input","parent","oldParagraph","find","remove","removeAllValidateMessage","key","message","parents","setMessage","paragraph","nextElement","nextElementSibling","nodeName","appendChild","removeClass","state","currentMode","SCREEN_MODE","VIEW","jsxTemplate","searchParam","baseParam","match","params","path","public_url","SITE_URL","PUBLIC_URL","indexOf","window","location","pathname","setEmployeeInfo","isObjectEmpty","auth","href","LOGIN","param","permission","isBlank","actions","ERROR_PAGE","constructor","TypeError","info","localStorage","getItem","COMMON","EMPLOYEE_INFO","employeeInfo","JSON","parse","base64Decrypt","clear","expired","timeout","currentDate","Date","getTime","employee","call","wrapperElement","each","val","ele","addClass","next","after","type","pos","posistion","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","draggablePercent","limit","warn","clearWaitingQueue","event","target","name","value","checked","item","index","offset","isNaN","startsWith","setState","curItem","validity","valid","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Constants from '../utils/Constants';\nimport $ from 'jquery';\nimport { toast } from 'react-toastify';\nimport Libs from '../utils/Libs';\n\nexport default class BaseComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentMode: Constants.SCREEN_MODE.VIEW, // mode cập nhật hoặc edit\n        }\n        this.jsxTemplate = function () { };\n\n        this.searchParam = {};\n        if (props.baseParam && props.baseParam.match) {\n            this.params = props.baseParam.match.params;\n            this.path = props.baseParam.match.path;\n        }\n\n\n        var public_url = Constants.SITE_URL.PUBLIC_URL;\n\n        if (public_url.indexOf(window.location.pathname) === -1) {\n            this.setEmployeeInfo();\n            if (Libs.isObjectEmpty(props.auth)) {\n                window.location.href = Constants.SITE_URL.LOGIN;\n                return;\n            }\n            var path = null;\n            if (props.baseParam && props.baseParam.match) {\n                this.params = props.baseParam.match.params;\n                path = props.baseParam.match.path;\n            }\n\n            let param = props.auth[path];\n            this.permission = props.auth;\n            if (!Libs.isBlank(this.path)) {\n                if (param) {\n                    this.actions = param.auth;\n                    \n                    if (param.auth <= 0) {\n                        window.location.href = Constants.SITE_URL.ERROR_PAGE;\n                        return;\n                    }\n                } else {\n                    window.location.href = Constants.SITE_URL.ERROR_PAGE;\n                    return;\n                }\n            }\n\n        }\n\n\n        if (this.constructor === BaseComponent) {\n            // Error Type 1. Abstract class can not be constructed.\n            throw new TypeError(\"Can not construct abstract class.\");\n        }\n    }\n\n\n\n    /**\n     * set user info param and set user permission\n     */\n    setEmployeeInfo() {\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n        if (Libs.isObjectEmpty(employeeInfo)) {\n            localStorage.clear();\n            window.location.href = Constants.SITE_URL.LOGIN;\n        }\n\n        var expired = employeeInfo.timeout * 1;\n        var currentDate = new Date();\n        if (currentDate.getTime() > expired) {\n            localStorage.clear();\n            window.location.href = Constants.SITE_URL.LOGIN;\n            return false;\n        }\n        this.employee = employeeInfo;\n    }\n\n\n    /**\n     * @description default function reactJS\n     */\n    render() {\n        return this.jsxTemplate.call(this);\n    }\n\n    /**\n     * @description Set validate message\n     * @author Long.Pham\n     * @since 12/05/2021\n     * @param {*} errors\n     ******** IMPORTANT surround input field must have class form-group\n    */\n    setValidateMessage = (errors, validateOne, wrapEleId) => {\n        var wrapEle = $('#' + wrapEleId);\n        function isEmpty(el) {\n            return !$.trim(el.html())\n        }\n        if (typeof errors === 'undefined' || errors === null || Object.keys(errors).length === 0) return;\n        validateOne = (typeof validateOne === 'boolean') ? validateOne : false;\n        var validateMessageClass = \".validate-message\",\n            formGroupClass = \".mb-3\",\n            inputErrorClass = \".input-error\", parentErrorClass = '.input-error';\n        var createParagraph = (text) => {\n            var p = document.createElement(\"p\");\n            p.classList.add(validateMessageClass.replace(\".\", \"\"));\n            p.innerText = text;\n            return p;\n        }\n\n        var removeOldParagraph = (input, parent) => {\n            let oldParagraph = parent.find(validateMessageClass);\n            if (oldParagraph.length > 0) {\n                oldParagraph.remove();\n            }\n        }\n\n        /**\n         * @description find elements to set message\n         * @param  {} errors\n         */\n        var find = (errors) => {\n            if (!validateOne) {\n                // remove all validate message\n                this.removeAllValidateMessage();\n            }\n            for (let key in errors) {\n                let message = errors[key];\n                var input = $('[name=\"' + key + '\"]');\n                if (!isEmpty(wrapEle)) {\n                    input = wrapEle.find('[name=\"' + key + '\"]');\n                }\n                if (input.length > 0) {\n                    let parent = input.parents(formGroupClass);\n                    if (parent.length > 0) {\n                        setMessage(message, input, parent);\n                    } else { // case input isn't wrap by class form-group\n                        let parent = input.parent();\n                        setMessage(message, input, parent);\n                    }\n                }\n            }\n        }\n\n        /**\n         * Create element new paragraph message validate\n         * @param  {} message\n         * @param  {} input\n         * @param  {} parent\n         */\n        var setMessage = (message, input, parent) => {\n            if (typeof message === 'string' && message.length > 0) {\n                let paragraph = createParagraph(message);\n                removeOldParagraph(input, parent);\n                input[0].classList.add(inputErrorClass.replace(\".\", \"\"));\n                let nextElement = input[0].nextElementSibling;\n                let nodeName = input[0].nodeName;\n                if (nodeName === \"SELECT\") {\n                    nextElement.classList.add(inputErrorClass.replace(\".\", \"\"));\n                }\n                parent[0].appendChild(paragraph);\n                parent[0].classList.add(parentErrorClass.replace(\".\", \"\"));\n            } else {\n                removeOldParagraph(input, parent);\n                input[0].classList.remove(inputErrorClass.replace(\".\", \"\"));\n                parent[0].classList.remove(parentErrorClass.replace(\".\", \"\"));\n                let nextElement = input[0].nextElementSibling;\n                let nodeName = input[0].nodeName;\n                if (nodeName === \"SELECT\") {\n                    nextElement.classList.remove(inputErrorClass.replace(\".\", \"\"));\n                }\n            }\n        }\n        find(errors);\n    }\n\n    /**\n    * @description Remove validation\n    * @author long.pham 2018-11-27\n    */\n    removeAllValidateMessage = () => {\n        if ($('.validate-message').length) {\n            $('.validate-message').remove();\n        }\n        if ($('.input-error').length) {\n            $('.input-error').removeClass('input-error');\n        }\n        if ($('.select2-error').length) {\n            $('.select2-error').removeClass('select2-error');\n        }\n    }\n\n    /**\n    * @description Display error messages for validation fields\n    * @param object errors: Error field values\n    * @param string wrapperElement: Tag the fields, otherwise it will take all the files with names from errors and assignments and error messages\n    * @author long.pham 2018-11-24\n    */\n    setValidationError(errors, wrapperElement) {\n        if (typeof errors === 'undefined' || errors === null || Object.keys(errors).length <= 0) return;\n        $.each(errors, function (key, val) {\n            // var ele = $('[name=\\\"' + key + '\\\"]');\n            var ele = $('[name=\"' + key + '\"]');\n            if (wrapperElement !== 'undefined' && wrapperElement !== null && wrapperElement !== '') {\n                var wrapEle = $('.' + wrapperElement);\n                if (!wrapEle || wrapEle.length <= 0) {\n                    wrapEle = $('#' + wrapperElement);\n                }\n                // ele = wrapEle.find('[name=\\\"' + key + '\\\"]');\n                ele = wrapEle.find('[name=\"' + key + '\"]');\n            }\n            if (ele.length) {\n                if (val && val !== null) {\n                    ele.removeClass('input-error');\n                    ele.addClass('input-error');\n                    ele.next('.validate-message').remove();\n                    ele.after('<p class=\"validate-message\">' + val + '</p>');\n                }\n                else {\n                    ele.removeClass('input-error');\n                    ele.next('.validate-message').remove();\n                }\n            }\n        });\n    }\n\n\n    toast(message, type, pos = \"top-right\") {\n        let posistion = \"top-right\";\n        if (typeof pos !== 'undefined') {\n            posistion = pos;\n        }\n        switch (type) {\n            case \"error\":\n                toast.error(message, {\n                    position: posistion,\n                    autoClose: true,\n                    hideProgressBar: true,\n                    closeOnClick: true,\n                    pauseOnHover: true,\n                    draggable: true,\n                    draggablePercent: 10,\n                    limit: 1\n                });\n                break;\n            case \"warn\":\n                toast.warn(message, {\n                    position: posistion,\n                    autoClose: true,\n                    hideProgressBar: true,\n                    closeOnClick: true,\n                    pauseOnHover: true,\n                    draggable: true,\n                    draggablePercent: 10\n                });\n                break;\n            default:\n                toast.info(message, {\n                    position: posistion,\n                    autoClose: true,\n                    hideProgressBar: false,\n                    closeOnClick: true,\n                    pauseOnHover: true,\n                    draggable: true,\n                    draggablePercent: 10\n                });\n                break;\n        }\n\n        toast.clearWaitingQueue();\n    }\n\n\n    /**\n     * handle Search Input Change Value\n     * @author Long.Pham\n     * @param {*} values \n     * @param {*} props \n     */\n    handleSearchInputChange(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let item = this.state.searchParam;\n            item.index = 1;\n            item.offset = 0;\n            /* check is number and not start with \"0\" charactor = 0(Phone number) => convert to number*/\n            /*Fix lỗi auto convert to string => sql query wrong*/\n            if (target.type !== 'checkbox') {\n                if (!isNaN(value) && !value.startsWith('0') && !Libs.isBlank(value)) {\n                    value = value * 1;\n                }\n            }\n            item[name] = value;\n            this.setState({ searchParam: item });\n        }\n    }\n\n\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputChange(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { curItem } = this.state;\n            curItem[name] = (event.target.validity.valid) ? value : curItem[name];\n            this.setState({ curItem });\n        }\n    }\n\n\n\n    /**\n     * setValue method to Input\n     * @author Long.Pham 20/05/2021\n     */\n    handleInputDateChange(event) {\n        let target = event.target;\n        let name = target.name;\n        let value = target.value;\n        if (target.type === 'checkbox') {\n            value = target.checked ? 1 : 0;\n        }\n\n        if (name) {\n            let { curItem } = this.state;\n            curItem[name] = value;\n            this.setState({ curItem });\n        }\n    }\n\n\n    // /**\n    //  * set state for numeric number input\n    //  * @param {Object} event \n    //  */\n    // handleNumberInputChange(event) {\n    //     let target = event.target;\n    //     let name = target.name;\n    //     let value = target.value\n\n    //     if (name) {\n    //         var numericExpression = /^[0-9\\b]+$/;\n    //         if (value == \"\" || numericExpression.test(value)) {\n    //             let item = this.state.curItem;\n    //             item[name] = value;\n    //             this.setState({ curItem: item });\n    //         }\n    //     }\n    // }\n}"]},"metadata":{},"sourceType":"module"}