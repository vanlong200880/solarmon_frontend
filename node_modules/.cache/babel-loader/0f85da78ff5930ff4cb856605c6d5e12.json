{"ast":null,"code":"import _classCallCheck from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Data/sources/solars/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';// import BaseComponent from '../../BaseComponent';\nimport HeaderJsx from'./Header.jsx';import{withTranslation}from'react-i18next';import Constants from'../../../utils/Constants';import ClientNotifyService from'../../../services/ClientNotifyService';import Libs from'../../../utils/Libs';import'./Header.scss';var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);var _super=_createSuper(Header);function Header(props,context){var _this;_classCallCheck(this,Header);_this=_super.call(this,props,context);_this.menuCollapseSidebar=function(){var menu_collapse=_this.state.menu_collapse;var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);var employeeInfo=JSON.parse(Libs.base64Decrypt(info));if(!Libs.isObjectEmpty(employeeInfo)){menu_collapse=menu_collapse?false:true;_this.setState({menu_collapse:menu_collapse},function(){if(menu_collapse){document.body.classList.remove('menu_collapse');}else{document.body.classList.add('menu_collapse');}});}};_this.setLanguage=function(e,iso_code){var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);var employeeInfo=JSON.parse(Libs.base64Decrypt(info));var languages=employeeInfo.languages;if(Libs.isArrayData(languages)){var findItemLang=Libs.find(languages,'iso_code',iso_code);if(!Libs.isObjectEmpty(employeeInfo)){employeeInfo.id_language=findItemLang.id;employeeInfo.lang=findItemLang.iso_code;for(var i=0;i<languages.length;i++){if(employeeInfo.id_language===languages[i].id){languages[i].is_default=1;}else{languages[i].is_default=0;}}}var jsonUser=JSON.stringify(employeeInfo);localStorage.setItem(Constants.COMMON.EMPLOYEE_INFO,Libs.base64Encrypt(jsonUser));window.location.reload();}};_this.setMenuProfile=function(e,index){_this.setState({menuProfile:index});};_this.setClosedMenuDropdown=function(){_this.setState({menuProfile:''});};_this.handleClickOutside=function(event){var target=event.target;var menuProfile=_this.state.menuProfile,self=_assertThisInitialized(_this);if(!_this.wrapperRef.current.contains(target)){if(menuProfile){self.setState({menuProfile:''});}}};_this.jsxTemplate=HeaderJsx;_this.state={curItem:{},menuProfile:\"\",menu_collapse:true,totalAlerts:0};_this.wrapperRef=/*#__PURE__*/React.createRef();return _this;}_createClass(Header,[{key:\"componentWillMount\",value:function componentWillMount(){var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);var employeeInfo=JSON.parse(Libs.base64Decrypt(info));this.setState({employee:employeeInfo});}},{key:\"getNotifySize\",value:/**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */function getNotifySize(){var self=this;var info=localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);var employeeInfo=JSON.parse(Libs.base64Decrypt(info));var params={id_language:employeeInfo.id_language,id_employee:employeeInfo.id_employee};ClientNotifyService.instance.getNotifySize(params,function(data,total_row){if(total_row>0){self.setState({totalAlerts:total_row});}else{self.setState({totalAlerts:0});}});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getNotifySize();document.addEventListener('click',this.handleClickOutside);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('click',this.handleClickOutside);}},{key:\"logout\",value:function logout(){localStorage.clear();window.location.href='/';}},{key:\"render\",value:function render(){return this.jsxTemplate.call(this);}}]);return Header;}(Component);var HighOrderComponentTranslated=withTranslation('common')(Header);export default HighOrderComponentTranslated;","map":{"version":3,"sources":["/Volumes/Data/sources/solars/frontend/src/containers/common/Header/Header.js"],"names":["React","Component","HeaderJsx","withTranslation","Constants","ClientNotifyService","Libs","Header","props","context","menuCollapseSidebar","menu_collapse","state","info","localStorage","getItem","COMMON","EMPLOYEE_INFO","employeeInfo","JSON","parse","base64Decrypt","isObjectEmpty","setState","document","body","classList","remove","add","setLanguage","e","iso_code","languages","isArrayData","findItemLang","find","id_language","id","lang","i","length","is_default","jsonUser","stringify","setItem","base64Encrypt","window","location","reload","setMenuProfile","index","menuProfile","setClosedMenuDropdown","handleClickOutside","event","target","self","wrapperRef","current","contains","jsxTemplate","curItem","totalAlerts","createRef","employee","params","id_employee","instance","getNotifySize","data","total_row","addEventListener","removeEventListener","clear","href","call","HighOrderComponentTranslated"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import BaseComponent from '../../BaseComponent';\nimport HeaderJsx from './Header.jsx';\nimport { withTranslation } from 'react-i18next';\nimport Constants from '../../../utils/Constants';\nimport ClientNotifyService from '../../../services/ClientNotifyService';\nimport Libs from '../../../utils/Libs';\nimport './Header.scss';\n\nclass Header extends Component {\n\n    constructor(props, context) {\n        super(props, context);\n        this.jsxTemplate = HeaderJsx;\n        this.state = {\n            curItem: {},\n            menuProfile: \"\",\n            menu_collapse: true,\n            totalAlerts: 0\n        };\n        this.wrapperRef = React.createRef()\n    }\n\n    componentWillMount() {\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n        this.setState({\n            employee: employeeInfo\n        })\n\n    }\n\n    menuCollapseSidebar = () => {\n        var { menu_collapse } = this.state;\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n        if (!Libs.isObjectEmpty(employeeInfo)) {\n            menu_collapse = menu_collapse ? false : true;\n            this.setState({\n                menu_collapse: menu_collapse\n            }, () => {\n                if (menu_collapse) {\n                    document.body.classList.remove('menu_collapse');\n                } else {\n                    document.body.classList.add('menu_collapse')\n                }\n            })\n        }\n    }\n\n    setLanguage = (e, iso_code) => {\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n\n        var languages = employeeInfo.languages;\n        if (Libs.isArrayData(languages)) {\n            var findItemLang = Libs.find(languages, 'iso_code', iso_code);\n            if (!Libs.isObjectEmpty(employeeInfo)) {\n                employeeInfo.id_language = findItemLang.id;\n                employeeInfo.lang = findItemLang.iso_code;\n\n                for (var i = 0; i < languages.length; i++) {\n                    if (employeeInfo.id_language === languages[i].id) {\n                        languages[i].is_default = 1;\n                    } else {\n                        languages[i].is_default = 0;\n                    }\n                }\n            }\n\n            let jsonUser = JSON.stringify(employeeInfo);\n            localStorage.setItem(Constants.COMMON.EMPLOYEE_INFO, Libs.base64Encrypt(jsonUser));\n            window.location.reload();\n\n        }\n    }\n\n    setMenuProfile = (e, index) => {\n        this.setState({\n            menuProfile: index\n        })\n    }\n\n    setClosedMenuDropdown = () => {\n        this.setState({\n            menuProfile: ''\n        })\n    }\n\n    /**\n     * get list\n     * @author Long.Pham 2019-06-03\n     */\n    getNotifySize() {\n        let self = this;\n        let info = localStorage.getItem(Constants.COMMON.EMPLOYEE_INFO);\n        let employeeInfo = JSON.parse(Libs.base64Decrypt(info));\n\n        let params = {\n            id_language: employeeInfo.id_language,\n            id_employee: employeeInfo.id_employee\n        };\n\n        ClientNotifyService.instance.getNotifySize(params, (data, total_row) => {\n            if (total_row > 0) {\n                self.setState({\n                    totalAlerts: total_row\n                });\n            } else {\n                self.setState({\n                    totalAlerts: 0\n                });\n            }\n\n        });\n    }\n\n\n    componentDidMount() {\n        this.getNotifySize();\n        document.addEventListener('click', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClickOutside);\n    }\n\n    handleClickOutside = (event) => {\n        const { target } = event;\n        var { menuProfile } = this.state, self = this;\n        if (!this.wrapperRef.current.contains(target)) {\n            if (menuProfile) {\n                self.setState({\n                    menuProfile: ''\n                })\n            }\n        }\n    }\n\n    logout() {\n        localStorage.clear();\n        window.location.href = '/';\n    }\n\n    render() {\n        return this.jsxTemplate.call(this)\n    }\n}\n\nconst HighOrderComponentTranslated = withTranslation('common')(Header)\nexport default HighOrderComponentTranslated;"]},"metadata":{},"sourceType":"module"}