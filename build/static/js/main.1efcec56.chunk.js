(this.webpackJsonpsolarmon=this.webpackJsonpsolarmon||[]).push([[0],{1:function(e,t,a){"use strict";var i=a(356),s=a(357),n=a(8),c={safeTrim:function(e){try{return"string"===typeof e?e.trim():e.toString()}catch(t){return""}},isBlank:function(e){return void 0===typeof e||null===e||""===c.safeTrim(e)},isObjectEmpty:function(e){var t=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==typeof e)return!0;for(var a in e)if(t.call(e,a))return!1;return!0},find:function(e,t,a){if(!e)return null;for(var i=0;i<e.length;i++)if(a===e[i][t])return e[i];return null},isArrayData:function(e){return!c.isBlank(e)&&!(!Array.isArray(e)||e.length<=0)},isNumber:function(e){try{var t=e;return"undefined"!==typeof t&&null!==t&&("number"===typeof t&&(t=t.toString()),t=t.replace(/^-/,""),/^[0-9\b]+$/.test(t))}catch(a){return!1}},checkExtensionFile:function(e,t){if("undefined"!==e&&null!==e){var a=["png","PNG","jpg","JPG","jpeg","JPEG","gif","GIF"],i=["xlsx","xls","XLSX","XLS","doc","DOC","docs","DOCS","pdf","PDF"],s=["png","PNG","jpg","JPG","jpeg","JPEG","gif","GIF","doc","DOC","docs","DOCS","docx","DOCX","pdf","PDF","mp4","MP4","avi","AVI"],n=["mp4","MP4","avi","AVI"],c=e.substr(e.lastIndexOf(".")+1);if("undefined"===t||null===t){for(var r=0;r<s.length;r++)if(c===s[r])return!0}else if(1===t){for(var l=0;l<a.length;l++)if(c===a[l])return!0}else if(2===t){for(var o=0;o<i.length;o++)if(c===i[o])return!0}else if(3===t)for(var d=0;d<n.length;d++)if(c===n[d])return!0;return!1}},convertStringToNumber:function(e){try{var t=e;return"undefined"===typeof t||null==t?null:("number"===typeof t&&(t=t.toString()),Number(t.replace(/[^0-9]+/g,"")))}catch(a){return null}},formatNum:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#,###.##",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(c.isBlank(e)||isNaN(e))return"";e*=1;var n=",",r=".",l=0;c.isBlank(t)&&(t="#,###.##");for(var o,d=new RegExp("[,.]+","ig"),h=0,m="";null!==(o=d.exec(t));)0===h?n=o[0]:n!==o[0]&&(m=o[0]),h++;""!==m&&(r=m,l=t.length-(t.lastIndexOf(r)+1));var u={negativeType:"left",prefix:"",suffix:"",integerSeparator:n,decimalsSeparator:"",decimal:r,padLeft:-1,round:l};return e=1===a?s.up(e,l):0===a?s(e,l):s.down(e,l),i(u)(e)},stringAssign:function(e,t,a){return c.isBlank(a)&&(a=/\$\<([^{}]*?)\>/g),e.replace(a,(function(e,a){return String(t[a])}))},convertStrtoDate:function(e,t){if(null===e||"undefined"===typeof e||""===e)return"";var a=e;if("undefined"!==typeof t&&!c.isBlank(t))return(a="utc"===t.toLowerCase()?n(e):n(e,t))._isValid?a._d:e;for(var i=["YYYY/MM/DD HH:mm:ss","YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss","DD-MM-YYYY HH:mm:ss","MM/DD/YYYY HH:mm:ss","MM-DD-YYYY HH:mm:ss"],s=0;s<i.length;s++)if((a=n(e,i[s]))._isValid)return a._d;return e},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY HH:mm:ss",a=arguments.length>2?arguments[2]:void 0;if(null===e||"undefined"===typeof e||""===e)return"";var i=e;if("undefined"!==typeof a&&!c.isBlank(a))return(i="utc"===a.toLowerCase()?n(e):n(e,a))._isValid?i.format(t):e;for(var s=["YYYY/MM/DD HH:mm:ss","YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss","DD-MM-YYYY HH:mm:ss","MM/DD/YYYY HH:mm:ss","MM-DD-YYYY HH:mm:ss"],r=0;r<s.length;r++)if((i=n(e,s[r]))._isValid)return i.format(t);return e},checkBitOnOff:function(e,t){return 0!=(e&parseInt(Math.pow(2,t)))},getCurrentDDMMYYYY:function(){var e=new Date,t=e.getFullYear().toString(),a=(e.getMonth()+1).toString().padStart(2,"0");return e.getDate().toString().padStart(2,"0")+"/"+a+"/"+t},SHA3:function(e){return"undefined"===typeof e?e:a(129).SHA3(e)},base64Encrypt:function(e){return c.isBlank(e)?e:a(129).base64Encrypt(e)},base64Decrypt:function(e){return c.isBlank(e)?e:a(129).base64Decrypt(e)},generateSKU:function(e,t){for(var a=Math.round((new Date).getTime()+100*Math.random()),i=((new Date).getTime(),""),s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<t;n++){var r=Math.floor(Math.random()*s.length);i+=s.substring(r,r+1)}return c.isBlank(e)?i+a:e+i+a},generateStrRandom:function(e,t,a,i){for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="abcdefghijklmnopqrstuvwxyz",c="!@#$%^&*(){}<>?",r="0123456789",l="",o=0;o<e;o++){var d=Math.floor(Math.random()*s.length);l+=s.substring(d,d+1)}for(var h=0;h<t;h++){var m=Math.floor(Math.random()*n.length);l+=n.substring(m,m+1)}for(var u=0;u<a;u++){var p=Math.floor(Math.random()*c.length);l+=c.substring(p,p+1)}for(var j=0;j<i;j++){var b=Math.floor(Math.random()*r.length);l+=r.substring(b,b+1)}return l.split("").sort((function(){return.5-Math.random()})).join("")},compareDate:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e=n(e,t.toUpperCase()),a=null==a?n(new Date).startOf("day"):n(a,t),e.isAfter(a)?1:e.isBefore(a)?-1:0},checkIfImageExists:function(e,t){var a=new Image;a.src=e,a.complete?t(!0):(a.onload=function(){t(!0)},a.onerror=function(){t(!1)})},checkImageExists:function(e){this.checkIfImageExists(e,(function(e){return!!e}))},getCurrentMMDDYYYYHI:function(){var e=new Date,t=e.getFullYear().toString();return(e.getMonth()+1).toString().padStart(2,"0")+"/"+e.getDate().toString().padStart(2,"0")+"/"+t+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")},addMinutes:function(e,t){var a=new Date(e);return a.setMinutes(a.getMinutes()+t),a},addDays:function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a},addMonths:function(e,t){var a=new Date(e);return a.setMonth(a.getMonth()+t),a},addYears:function(e,t){var a=new Date(e);return a.setFullYear(a.getFullYear()+t),a},convertAllFormatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM/DD/YYYY HH:mm:ss",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD HH:mm:ss";if(null==e||"undefined"===typeof e||""==e)return"";var i=n(e,t);return i._isValid?i.format(a):e},formatElectricalUnit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c.isBlank(e)||e<=0?"0 kW"+t:e<1e3?Number.parseFloat(e).toFixed(2)+" w"+t:e>=1e3&&e<1e6?Number.parseFloat(e/1e3).toFixed(2)+" kW"+t:e>=1e6&&e<1e9?Number.parseFloat(e/1e6).toFixed(2)+" MW"+t:e>=1e9&&e<1e12?Number.parseFloat(e/1e9).toFixed(2)+" GW"+t:e>=1e12&&e<1e15?Number.parseFloat(e/1e12).toFixed(2)+" TW"+t:void 0},getStringMonthNumber:function(e){if(e<=0||e>12)return null;return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1]},getUnique:function(e,t){return e.map((function(e){return e[t]})).map((function(e,t,a){return a.indexOf(e)===t&&t})).filter((function(t){return e[t]})).map((function(t){return e[t]}))},getFileUrl:function(e,t){if(!c.isBlank(e))return t+"/"+e}};t.a=c},106:function(e,t,a){(function(e){var i,s=a(87),n="array object nodelist htmlcollection arguments namednodemap".split(" "),c=/^0+/,r=e;t.hasStatic=function(e,t){try{return Object.prototype.hasOwnProperty.call(e,t)}catch(a){return!1}},t.each=function(e,a,n){var c,l;if(e&&s.number(e.length))if(n)for(c=e.length-1,l=0;c>=0&&!1!==a.call(r,c,e[c]);c--);else for(c=0,l=e.length;c<l&&!1!==a.call(r,c,e[c]);c++);else if(null!==e&&e!==i)for(c in e)if(t.hasStatic(e,c)&&!1===a.call(r,c,e[c]))break},t.repeat=function(e,t){for(var a=-1;++a<e&&!1!==t(a,e););},t.extend=function(e,a,i){var n,c,r,l,o=arguments,d="boolean"===typeof o[0],h=d?1:0,m=o.length;for(e=d&&!0===o[0],a=o[h++];h<m;h++)for(n in c=o[h])t.hasStatic(c,n)&&void 0!==c[n]&&(r=s(a[n]),"object"===(l=s(c[n]))&&e?(a[n]=r!==l?{}:a[n],t.extend.call(this,e,a[n],c[n])):"array"===l&&e?(a[n]=r!==l?[]:a[n],t.extend.call(this,e,a[n],c[n])):a[n]=c[n]);return a},t.select=function(e,t,a){var s={};return e=e||{},a=a||function(e){return e!==i},t.forEach((function(t){a(e[t])&&(s[t]=e[t])})),s},t.toArray=function(e,t){var a,i=[],c=0,r=s(e);if(n.indexOf(r)>-1&&"number"===s(e.length)&&e.length>=0)for(a=e.length;c<a;c++)i.push(e[c]);else e&&t&&i.push(e);return i},t.compare=function(e,a){var i=s(e),n=s(a),c=[],r=[],l=[];return i!==n?null:"object"===i||"array"===i?(t.each(e,(function(e,t){a[e]!==t?c.push(e):l.push(e)})),t.each(a,(function(t,a){e[t]!==a&&r.push(t)})),{same:l,only:[c,r],different:c.concat(r)}):null},t.than=function(e,a,i){if(i=i||">",e=String(e).replace(c,""),a=String(a).replace(c,""),e.length>a.length)return">"===i;if(e.length<a.length)return"<"===i;var s=t.humanize(e,",",15).split(","),n=t.humanize(a,",",15).split(",");if(s.length>n.length)return">"===i;if(s.length<n.length)return"<"===i;var r=!1;return t.each(s,(function(e,t){var a=n[e];return t>a?(r=">"===i,!1):t<a?(r="<"===i,!1):void 0})),r};var l=a(745),o=a(129);t.gravatar=function(e,t){t=t||{},e=e.toLowerCase(),t.origin||(t.origin="http://cn.gravatar.com/avatar/"),t.origin+=o.md5(e)+"?",t.size||(t.size=100),t.default||(t.default="retro"),t.forcedefault?t.forcedefault="y":t.forcedefault=!1;var a={s:t.size};return t.default&&(a.d=t.default),t.forcedefault&&(a.f=t.forcedefault),t.rating&&(a.r=t.rating),t.origin+l.stringify(a)}}).call(this,a(46))},11:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a(4),s=a(5),n=a(3),c=a(1),r=a(325),l=a.n(r),o=a(326),d=a.n(o),h=a(15),m=a(42),u=a.n(m),p=function(){function e(t){Object(i.a)(this,e),this.showProcess=t||!1}return Object(s.a)(e,[{key:"initialize",value:function(e,t,a,i){var s=this,c=null;a===n.a.METHOD.get?void 0!==typeof t&&null!==t&&(c=l.a.stringify(t)):void 0!==typeof t&&null!==t&&(c=JSON.stringify(t));var r=n.a.API_HOST+e,o=this.setHeader(a,i),m=0;return 1==this.showProcess&&(m=this.showProcessLoading()),new Promise((function(e,t){h.a.checkIsLogin()||-1===n.a.SITE_URL.PUBLIC_URL.indexOf(window.location.pathname)&&(s.hideProcessLoading(m),window.location.href=n.a.SITE_URL.LOGIN);d.a.post(r,c,o).then((function(t){s.hideProcessLoading(m),e(t)})).catch((function(a){if(s.hideProcessLoading(m),a.response&&401==a.response.status);else if(a.response&&400==a.response.status)return void e(a.response);t(a)}))}))}},{key:"post",value:function(e,t,a){var i=this;this.initialize(e,t,n.a.METHOD.POST,n.a.CONTENT_TYPE.json).then((function(e){if(200!=e.status&&400!=e.status)return 401!=e.status&&i.showError(e.status),void a(!1,{});var t=e.data;null==t?(i.showError(n.a.ERROR_CODE.CODE_01),a(!1,{})):a(!0,t)}),(function(e,t){i.showError(e),a(!1,t)}))}},{key:"postPrint",value:function(e,t){var a=this;this.initialize(e,t,n.a.METHOD.POSTPDF,n.a.CONTENT_TYPE.json).then((function(e){if(200==e.status){var t=window.URL.createObjectURL(e.data,{type:"application/pdf"});a.print_pdf(t)}else a.showError(e.status)}),(function(e,t){a.showError(t)}))}},{key:"setHeader",value:function(e,t){var a="vi",i=localStorage.getItem(n.a.COMMON.EMPLOYEE_INFO);if(!c.a.isBlank(i))try{a=JSON.parse(c.a.base64Decrypt(i)).lang}catch(l){a="vi"}var s={"Content-Type":t,"req-path":c.a.isBlank(window.location.pathname)?"/":window.location.pathname,"x-access-token":localStorage.getItem("cms-access-token"),lang:a},r={headers:s,timeout:18e4};return e==n.a.METHOD.POSTEXCEL&&(r.responseType="blob",s.Accept="application/vnd.ms-excel",r.headers=s),e==n.a.METHOD.POSTPDF&&(r.responseType="blob",s.Accept="application/pdf",r.headers=s),r}},{key:"showProcessLoading",value:function(){var e=0,t="disabled_div"+ ++e,a=document.createElement("div");a.className="disabled_div",a.id=t,a.style.position="fixed",a.style.width="100%",a.style.height="100%",a.style.zIndex=2e3,a.style.left="0px",a.style.top="0px";var i=document.createElement("div");i.style.width="66px",i.style.height="66px",i.style.display="block",i.style.position="fixed",i.style.top="50%",i.style.left="50%",i.style.marginLeft="-33px",i.style.marginTop="-33px",i.style.zIndex=1500;var s=document.createElement("img");return s.src="/loading.gif",i.appendChild(s),a.appendChild(i),document.getElementById("root").appendChild(a),1}},{key:"hideProcessLoading",value:function(e){null!=e?u()("#disabled_div"+e).remove():u()(".disabled_div").remove()}},{key:"checkIsLogin",value:function(){return!0}},{key:"showError",value:function(e){var t=this.getErrorMessage(e);this.showErrorMessage(t)}},{key:"getErrorMessage",value:function(e){var t="";switch(e){case 201:t="Request \u0111\u01b0\u1ee3c ch\u1ea5p nh\u1eadn cho x\u1eed l\xfd, nh\u01b0ng vi\u1ec7c x\u1eed l\xfd ch\u01b0a ho\xe0n th\xe0nh";break;case 203:t="Non-authoritative Information";break;case 204:t="No Content: Server \u0111\xe3 x\u1eed l\xfd th\xe0nh c\xf4ng request nh\u01b0ng kh\xf4ng tr\u1ea3 v\u1ec1 b\u1ea5t c\u1ee9 content n\xe0o.";break;case 205:t="Reset Content: Server \u0111\xe3 x\u1eed l\xfd th\xe0nh c\xf4ng request nh\u01b0ng kh\xf4ng tr\u1ea3 v\u1ec1 b\u1ea5t c\u1ee9 content n\xe0o. Kh\xf4ng gi\u1ed1ng v\u1edbi 204 No Content Response n\xe0y y\xeau c\u1ea7u ph\xeda Client ph\u1ea3i thi\u1ebft l\u1eadp l\u1ea1i document view.";break;case 206:t="Partial Content: Server ch\u1ec9 tr\u1ea3 v\u1ec1 m\u1ed9t ph\u1ea7n c\u1ee7a resouce(d\u1ea1ng byte) do m\u1ed9t range header \u0111\u01b0\u1ee3c g\u1eedi b\u1edfi ph\xeda Client. C\xe1c Range Header \u0111\u01b0\u1ee3c s\u1eeda d\u1ee5ng b\u1edfi Client \u0111\u1ec3 cho ph\xe9p n\u1ed1i l\u1ea1i c\xe1c ph\u1ea7n c\u1ee7a file download b\u1ecb d\xe1n \u0111o\u1ea1n ho\u1eb7c chia th\xe0nh nhi\u1ec1u lu\u1ed3ng download.";break;case 500:t="Internal Server Error";break;case 501:t="Not Implemented";break;case 502:t="Bad Gateway";break;case 503:t="Service Unavailable";break;case 504:t="Gateway Timeout";break;case 505:t="HTTP Version Not Supported";break;default:t=e}return t}},{key:"printPreview",value:function(e){return'<html><head><style>body{margin:0;padding:0;}</style></head><body><iframe id="framePrintId" name="framePrintId" onload="this.contentWindow.focus();" frameborder="0"  style="width: 100%; height: 100%;  margin: 0px 0px 0px 0px;" src="'+("printPreview.htm?url="+encodeURIComponent(e))+'"></iframe></body></html>'}},{key:"print_pdf",value:function(e){var t=document.querySelector("#showPrint");if(null==t||"undefined"==t){var a=document.createElement("div");a.id="showPrint",a.className="modal fade show",a.role="dialog",a.ariaHidden="false",a.tabIndex="-1",a.ariaLabelledby="contained-modal-title",a.style.cssText="display: block;";var i=document.createElement("div");i.className="modal-dialog  modal-xl modal-dialog-scrollable modal-printf",i.role="document";var s=document.createElement("div");s.className="modal-content";var n=document.createElement("div");n.className="modal-header";var c=document.createElement("button");c.type="button",c.className="btn btn-main-color",c.dataDismiss="modal",c.ariaHidden="true",c.innerHTML="<i class='fa fa-print'>In</i>",c.onclick=function(){this.callPrint()},n.append(c);var r=document.location.origin;r+="/libs/pdfjs/web/viewer.html?file=";var l='<iframe src="'+(r+=e)+'" style="width: 100%;position: absolute;height: 100%;box-sizing: border-box;left: 0;top: 0;" frameborder="0" scrolling="no"></iframe>',o=document.createElement("div");o.className="modal-body",o.innerHTML=l,s.append(o),i.append(s),a.append(i),document.getElementById("root").append(a)}}},{key:"showErrorMessage",value:function(e){document.body.classList.add("system-error");var t='<div class="notification-error">';t+="<p>",t+=e,t+='<a class="close-notification-error icon-cancel-music"></a>',t+="</p>",t+="</div>",u()(".notification-error").length||u()("#root").prepend(t),u()(".close-notification-error").length&&u()(".close-notification-error").on("click",(function(){u()(".system-error").length&&u()("body").removeClass("system-error"),u()(".notification-error").length&&u()(".notification-error").remove()})),setTimeout((function(){u()(".system-error").length&&u()("body").removeClass("system-error"),u()(".notification-error").length&&u()(".notification-error").remove()}),n.a.ERROR_MSG_TIMEOUT)}}]),e}()},129:function(e,t,a){(function(t){var i=a(360),s=function(){};e.exports=s,s.SHA3=function(e){return i.SHA3(e,{outputLength:512}).toString(i.enc.Hex)},s.base64Encrypt=function(e){return t.from(e).toString("base64")},s.base64Decrypt=function(e){return t.from(e,"base64").toString("utf-8")}}).call(this,a(54).Buffer)},15:function(e,t,a){"use strict";var i=a(3),s=a(1),n={checkIsLogin:function(){try{var e=window.location.pathname.split("/"),t=e.length>1?e[1]:"",a=!0;if(""!==t&&(a=i.a.SITE_URL.PUBLIC_URL.indexOf(t)<0),!a)return!0;var n=localStorage.getItem(i.a.COMMON.TOKEN);if(null===n||"undefined"===typeof n)return!1;var c=localStorage.getItem(i.a.COMMON.EMPLOYEE_INFO),r=JSON.parse(s.a.base64Decrypt(c));if(null===r||"undefined"===typeof r)return!1;if(null===r.email||"undefined"===typeof r.email)return!1;var l=1*r.timeout;return!((new Date).getTime()>1e3*l)||(localStorage.removeItem(i.a.COMMON.TOKEN),!1)}catch(o){return!1}},getPermisson:function(e,t){return s.a.checkBitOnOff(e,t)}};t.a=n},196:function(e,t,a){var i=a(87),s=a(106),n=function(){};t.getset=function(e,t,a){a=a||2;for(var c=t.length,r={},l=c;l--;)void 0===t[l]&&c--;if(e.onset=i.function(e.onset)?e.onset:n,0===c&&1===a)return e.get();if(1===c&&1===a)e.set(t[0]),e.onset(t[0]);else if(1===c&&2===a){if(!i.object(t[0]))return i.array(t[0])?(s.each(t[0],(function(t,a){r[a]=e.get(a)})),r):e.get(t[0]);s.each(t[0],(function(t,a){e.set(t,a)})),e.onset()}else 2===c&&2===a&&(e.set(t[0],t[1]),e.onset())},t.args=function(e){for(var t=e.length;t>=0&&i.undefined(e[t-1]);)t-=1;return s.toArray(e).splice(0,t)}},197:function(e,t,a){(function(e){var i=a(106),s=a(87),n="undefined"!==typeof e?e:window,c={"&amp;":/&/g,"&lt;":/</g,"&gt;":/>/g,"&quot;":/"/g,"&apos;":/'/g,"&#x2f;":/\//g},r=/&#(x)?([\w\d]{0,5});/i,l={"&":/&amp;/g,"<":/&lt;/g,">":/&gt;/g,'"':/&quot;/g,"'":/&apos;/g,"/":/&#x2f;/g},o=/[.*+?^=!:${}()|[\]\/\\-]/g,d=/\$\<([^{}]*?)\>/g,h=/[-_ ]([a-z])/g,m=/[A-Z]/g,u=/\\\*/g,p=/[^\x00-\xff]{2}/g;t.escapeHTML=function(e){return i.each(c,(function(t,a){e=String(e).replace(a,t)})),e},t.unescapeHTML=function(e){return e=String(e).replace(r,(function(e,t,a){return String.fromCharCode(parseInt(a,t?16:10))})),i.each(l,(function(t,a){e=e.replace(a,t)})),e},t.escapeRegExp=function(e){return e.replace(o,"\\$&")},t.assign=function(e){var t=arguments,a={};return s.object(t[1])?a=t[1]:i.each([].slice.call(t,1),(function(e,t){a[e+1]=t})),e.replace(d,(function(e,t){return String(a[t])}))},t.humprize=function(e,t){return e.length?(t&&(e=e[0].toUpperCase()+e.substr(1)),e.replace(h,(function(e,t){return t.toUpperCase()}))):e},t.separatorize=function(e,t){return e.length?(t=t||"-",(e=e[0].toLowerCase()+e.substr(1)).replace(m,(function(e){return t+e.toLowerCase()}))):e},t.base64=function(e){return s.undefined(n.Buffer)?btoa(encodeURIComponent(e)):new n.Buffer(e,"utf8").toString("base64")},t.debase64=function(e){return s.undefined(n.Buffer)?decodeURIComponent(atob(e)):new n.Buffer(e,"base64").toString("utf8")};var j=function(e,t,a,i){var s=t.length;if(i=i||" ",(a=a||s)<=s)return t;for(;++s<=a;)t=e?i+t:t+i;return t};t.padLeft=function(e,t,a){return j(!0,String(e),t,a)},t.padRight=function(e,t,a){return j(!1,String(e),t,a)},t.glob=function(e,a,i){return new RegExp(t.escapeRegExp(a).replace(u,"[^.]+?"),i?"i":"").test(e)},t.bytes=function(e,t){t=t||2;for(var a,i=0,s=(e+="").length,n=0;i<s;i++)n+=(a=e.charCodeAt(i))>=1&&a<=126||65376<=a&&a<=65439?1:t;return n},t.length=function(e){return String(e).replace(p,"*").length}}).call(this,a(46))},3:function(e,t,a){"use strict";var i="",s="";switch(window.location.hostname){case"backend.techedge.vn":i="https://apibackend.techedge.vn",s="https://apibackend.techedge.vn/uploads";break;case"solarmon.techedge.vn":case"www.solarmon.techedge.vn":case"www.devsolarmon.focustech.vn":case"devsolarmon.focustech.vn":i="https://apibackend.techedge.vn",s="https://apibackend.techedge.vn/uploads";break;default:i="http://localhost:3015",s="http://localhost:3015/uploads"}var n={API_HOST:i,SERVER_DATA:s,TINY_API_KEY:"w1ac8su5n6gkls7pzfyeg9b7ovfjb6988fm90c8mtr3zs8wt",STATIC_KEY:"6UTcKodwS4mSBIZgI9pC11vLfcTobNkz5ivqVVGn0PiC44Hev9w3vGZ4NU1RZqQL",GOOLGE_APP:{CLIENT_ID:"56493813142-e54ro8e4vq190rnrvddlmp8v6snke8dg.apps.googleusercontent.com",CLIENT_SECRET:"mpwy4os9Jz7NEeczkX1T3MFC",KEY:"AIzaSyD6YUqRCE3CZjUqj9RHkXXTv4prdpDHM9c",CAPTCHA_SITE_KEY:"6Lf5W6YZAAAAAI8Vxghb9fCgBOn3K3Y4pkNT0emm",CAPTCHA_SECRECT_KEY:"6Lf5W6YZAAAAAFQB5HeqzKweF5nmOSYTo4EBJb3j"},COMMON:{EMPLOYEE_INFO:"employee-info",CONGI_VIEW:"config-view",LIMIT_IMG:15,MAX_IMAGE_SIZE:1048576,MAX_VIDEO_SIZE:31457280,LIMIT:30,TOKEN:"cms-access-token",ACCESS_PARAM:"access-param"},URL:{FILES:{UPLOAD_IMG:"/FileUpload/saveUploadImage"},PROVINCE:{LIST:"/Province/getList"},DISTRICT:{LIST:"/District/getList"},WARD:{LIST:"/Ward/getList"},PROJECT_GROUP:{SAVE:"/ProjectGroup/saveAction",LIST:"/ProjectGroup/getList",UPDATE_STATUS:"/ProjectGroup/updateStatus",DELETE:"/ProjectGroup/deleteAction",DETAIL:"/ProjectGroup/getDetail",DROPDOWN_LIST:"/ProjectGroup/getDropDownList"},DEVICE:{SAVE:"/Device/saveAction",LIST:"/Device/getList",UPDATE_STATUS:"/Device/updateStatus",DELETE:"/Device/deleteAction",DETAIL:"/Device/getDetail",DROPDOWN_LIST:"/Device/getDropDownList",LIST_DEVICE_BY_PROJECT:"/Device/getListDeviceByProject",UPDATE_IS_VIRTUAL:"/Device/updateIsVirtual",LIST_DEVICE_BY_PROJECT_SHARE:"/Device/getListDeviceByProjectShare",SAVE_DEVICE_SHARE:"/Device/saveDeviceShare"},DEVICE_TYPE:{SAVE:"/DeviceType/saveAction",LIST:"/DeviceType/getList",UPDATE_STATUS:"/DeviceType/updateStatus",DELETE:"/DeviceType/deleteAction",DETAIL:"/DeviceType/getDetail",DROPDOWN_LIST:"/DeviceType/getDropDownList"},DEVICE_GROUP:{SAVE:"/DeviceGroup/saveAction",LIST:"/DeviceGroup/getList",UPDATE_STATUS:"/DeviceGroup/updateStatus",DELETE:"/DeviceGroup/deleteAction",DETAIL:"/DeviceGroup/getDetail",DROPDOWN_LIST:"/DeviceGroup/getDropDownList"},ROLE:{SAVE:"/role/saveAction",LIST:"/role/getList",UPDATE_STATUS:"/role/updateStatus",DELETE:"/role/deleteAction",DETAIL:"/role/getDetail",DROPDOWN_LIST:"/role/getDropDownList",PERMISSION:"/role/getListScreenPermissions",UPDATE_PERMISSIONS:"/role/updateRolePermissions",UPDATE_ROLE_MAP_SCREEN:"/role/updateRoleMapScreen"},EMPLOYEE:{LOGIN:"/auth/login",FORGOT_PASSWORD:"/employee/forgotPassword",RESET_PASSWORD:"/employee/resetPassword",DETAIL_UPDATE_PROFILE:"/employee/getDetailUpdateProfile",SAVE_UPDATE_PROFILE:"/employee/saveUpdateProfileAction",CHANGE_PASSWORD:"/employee/changePassword",LIST:"/employee/getList",LIST_ALL:"/employee/getListAll",SAVE:"/employee/saveAction",UPDATE_STATUS:"/employee/updateStatus",DELETE:"/employee/deleteAction",DETAIL:"/employee/getDetail",LIST_CONFIG_MAIL:"/employee/getListProjectConfigMail",UPDATE_STATUS_MAIL_CONFIG:"/employee/updateStatusMailConfig"},PROJECT:{SAVE:"/Project/saveAction",LIST:"/Project/getList",UPDATE_STATUS:"/Project/updateStatus",DELETE:"/Project/deleteAction",DETAIL:"/Project/getDetail",DROPDOWN_LIST:"/Project/getDropDownList",SAVE_CONFIG:"/Project/saveConfigAction",DETAIL_CONFIG:"/Project/getDetailConfig",SAVE_CONFIG_SENSOR:"/Project/saveConfigEstimationSensor",SAVE_MOVE_DEVICE:"/Project/saveMoveDevice"},ERROR_LEVEL:{SAVE:"/ErrorLevel/saveAction",LIST:"/ErrorLevel/getList",UPDATE_STATUS:"/ErrorLevel/updateStatus",DELETE:"/ErrorLevel/deleteAction",DETAIL:"/ErrorLevel/getDetail",DROPDOWN_LIST:"/ErrorLevel/getDropDownList"},ERROR_TYPE:{SAVE:"/ErrorType/saveAction",LIST:"/ErrorType/getList",UPDATE_STATUS:"/ErrorType/updateStatus",DELETE:"/ErrorType/deleteAction",DETAIL:"/ErrorType/getDetail",DROPDOWN_LIST:"/ErrorType/getDropDownList"},ERROR_STATE:{SAVE:"/ErrorState/saveAction",LIST:"/ErrorState/getList",UPDATE_STATUS:"/ErrorState/updateStatus",DELETE:"/ErrorState/deleteAction",DETAIL:"/ErrorState/getDetail",DROPDOWN_LIST:"/ErrorState/getDropDownList"},ALERT_STATE:{SAVE:"/AlertState/saveAction",LIST:"/AlertState/getList",UPDATE_STATUS:"/AlertState/updateStatus",DELETE:"/AlertState/deleteAction",DETAIL:"/AlertState/getDetail",DROPDOWN_LIST:"/AlertState/getDropDownList"},ERROR:{SAVE:"/Error/saveAction",LIST:"/Error/getList",UPDATE_STATUS:"/Error/updateStatus",DELETE:"/Error/deleteAction",DETAIL:"/Error/getDetail"},DEVICE_PARAMETER:{SAVE:"/DeviceParameter/saveAction",LIST:"/DeviceParameter/getList",UPDATE_STATUS:"/DeviceParameter/updateStatus",DELETE:"/DeviceParameter/deleteAction",DETAIL:"/DeviceParameter/getDetail"},CLIENT_PROJECT:{PROJECT_SIDEBAR:"/ClientProject/getAllProjectByEmployeeId",LIST_PROJECT_BY_EMPLOYEE:"/ClientProject/getListProjectByEmployee",LIST_PLANT_SUMMARY:"/ClientProject/getListPlantSummary"},PLANT:{DETAIL:"/Plant/getDetail",CHART_DATA:"/Plant/getChartData"},CLIENT_DEVICE:{LIST:"/ClientDevice/getList",PARAMETER:"/ClientDevice/getListParameterByDevice",LIST_ALERT:"/ClientDevice/getListAlertByDevice"},CLIENT_ACTIVITIES:{LIST:"/ClientActivities/getList",DELETE:"/ClientActivities/deleteAction",CLOSE_ALL:"/ClientActivities/closeAll",SAVE:"/ClientActivities/saveAction"},CLIENT_NOTIFY:{LIST:"/ClientNotify/getList",DELETE:"/ClientNotify/deleteAction",CLOSE_ALL:"/ClientNotify/closeAll",SAVE:"/ClientNotify/saveAction",NOTIFY_SIZE:"/ClientNotify/getNotifySize"},ANALYTICS:{CHART_PROFILE:"/ClientAnalytics/getDataChartProfile",LIST_DEVICE:"/ClientAnalytics/getListDeviceByProject",CHART_PARAMETER_DEVICE:"/ClientAnalytics/getChartParameterDevice",CHART_ALARM:"/ClientAnalytics/getChartAlarm"},REPORT:{MOTNH:"/ClientReport/getDataReportMonth",YEAR:"/ClientReport/getDataReportYear"},MAIN_PLANT:{DETAIL:"/MainPlant/getDetail",CHART_DATA:"/MainPlant/getChartData"},MAIN_PROJECT:{PROJECT_SIDEBAR:"/MainProject/getAllProjectByEmployeeId",LIST_PROJECT_BY_EMPLOYEE:"/MainProject/getListProjectByEmployee",LIST_PLANT_SUMMARY:"/MainProject/getListPlantSummary",LIST_METER_BY_EMPLOYEE:"/MainProject/getListMeterByEmployee"},MAIN_DEVICE:{LIST:"/MainDevice/getList",PARAMETER:"/MainDevice/getListParameterByDevice",LIST_ALERT:"/MainDevice/getListAlertByDevice",LIST_INVERTER:"/MainDevice/getListInverter",UPDATE_ON_OFF:"/MainDevice/updateOnOff",SAVE_CONTROL_CALENDAR:"/MainDevice/saveControlCalendar",LIST_CONTROL_CALENDAR:"/MainDevice/getListControlCalendar",SAVE_ARR_CONTROL_CALENDAR:"/MainDevice/saveArrControlCalendar",LIST_BY_SITE_CONTROL_CALENDAR:"/MainDevice/getListBySiteControlCalendar",DELETE_LIST_CALENDAR:"/MainDevice/deleteListCalendarControl",DELETE_ITEM_CALENDAR:"/MainDevice/deleteItemCalendarControl",UPDATE_MODE:"/MainDevice/updateControlMode",PROJECT_DETAIL:"/MainDevice/getProjectDetail",UPDATE_MODE_POWER_ENERGY:"/MainDevice/updateModePowerAndEnergy",POWER_NOW_BY_DAY:"/MainDevice/getPowerNowByDay"},MAIN_ACTIVITIES:{LIST:"/MainActivities/getList",DELETE:"/MainActivities/deleteAction",CLOSE_ALL:"/MainActivities/closeAll",SAVE:"/MainActivities/saveAction"},MAIN_ANALYTICS:{CHART_PROFILE:"/MainAnalytics/getDataChartProfile",LIST_DEVICE:"/MainAnalytics/getListDeviceByProject",CHART_PARAMETER_DEVICE:"/MainAnalytics/getChartParameterDevice",CHART_ALARM:"/MainAnalytics/getChartAlarm"},MAIN_REPORT:{MOTNH:"/MainReport/getDataReportMonth",YEAR:"/MainReport/getDataReportYear"},MAIN_CONFIG:{LIST_DEVICE:"/MainConfig/getListAllDeviceByProject",DEVICE_DETAIL:"/MainConfig/getDeviceDetail",UPDATE_DEVICE:"/MainConfig/updateDevice",LIST_DEVICE_SENSOR:"/MainConfig/getListDeviceSensor"},CLIENT_CONFIG:{LIST_DEVICE:"/ClientConfig/getListAllDeviceByProject",DEVICE_DETAIL:"/ClientConfig/getDeviceDetail",UPDATE_DEVICE:"/ClientConfig/updateDevice"},REGENCY:{SAVE:"/regency/saveAction",LIST:"/regency/getList",UPDATE_STATUS:"/regency/updateStatus",DELETE:"/regency/deleteAction",DETAIL:"/regency/getDetail",DROPDOWN_LIST:"/regency/getDropDownList"},CATEGORY:{SAVE:"/category/saveAction",LIST:"/category/getList",UPDATE_STATUS:"/category/updateStatus",DELETE:"/category/deleteAction",DETAIL:"/category/getDetail",DROPDOWN_LIST:"/category/getDropDownList",DROPDOWN_LIST_CATEGORY:"/category/getDropDownListCategory"},NEWS_CATEGORY:{SAVE:"/NewsCategory/saveAction",LIST:"/NewsCategory/getList",UPDATE_STATUS:"/NewsCategory/updateStatus",DELETE:"/NewsCategory/deleteAction",DETAIL:"/NewsCategory/getDetail",DROPDOWN_LIST:"/NewsCategory/getDropDownList",DROPDOWN_LIST_CATEGORY:"/NewsCategory/getDropDownListCategory"},NEWS:{SAVE:"/News/saveAction",LIST:"/News/getList",UPDATE_STATUS:"/News/updateStatus",DELETE:"/News/deleteAction",DETAIL:"/News/getDetail"},COLLECTION:{SAVE:"/Collection/saveAction",LIST:"/Collection/getList",UPDATE_STATUS:"/Collection/updateStatus",DELETE:"/Collection/deleteAction",DETAIL:"/Collection/getDetail"},PAGES:{SAVE:"/Pages/saveAction",LIST:"/Pages/getList",UPDATE_STATUS:"/Pages/updateStatus",DELETE:"/Pages/deleteAction",DETAIL:"/Pages/getDetail"},BANNER_POSITION:{SAVE:"/BannerPosition/saveAction",LIST:"/BannerPosition/getList",UPDATE_STATUS:"/BannerPosition/updateStatus",DELETE:"/BannerPosition/deleteAction",DETAIL:"/BannerPosition/getDetail",DROPDOWN_LIST:"/BannerPosition/getDropDownList"},CUSTOMER_GROUP:{SAVE:"/CustomerGroup/saveAction",LIST:"/CustomerGroup/getList",UPDATE_STATUS:"/CustomerGroup/updateStatus",DELETE:"/CustomerGroup/deleteAction",DETAIL:"/CustomerGroup/getDetail",DROPDOWN_LIST:"/CustomerGroup/getDropDownList"},CUSTOMER_TYPE:{SAVE:"/CustomerType/saveAction",LIST:"/CustomerType/getList",UPDATE_STATUS:"/CustomerType/updateStatus",DELETE:"/CustomerType/deleteAction",DETAIL:"/CustomerType/getDetail",DROPDOWN_LIST:"/CustomerType/getDropDownList"},COUPON:{SAVE:"/Coupon/saveAction",LIST:"/Coupon/getList",UPDATE_STATUS:"/Coupon/updateStatus",DELETE:"/Coupon/deleteAction",DETAIL:"/Coupon/getDetail",APPLY_COUPON:"/Coupon/getAppleCoupon"},CUSTOMER:{SAVE:"/Customer/saveAction",LIST:"/Customer/getList",UPDATE_STATUS:"/Customer/updateStatus",DELETE:"/Customer/deleteAction",DETAIL:"/Customer/getDetail",DROPDOWN_LIST:"/Customer/getDropDownList",SEARCH_AUTO:"/Customer/getSearchAuto",SAVE_CUSTOMER_ORDER:"/Customer/saveCustomerOrder"},NEWSLETTER:{SAVE:"/Newsletter/saveAction",LIST:"/Newsletter/getList",UPDATE_STATUS:"/Newsletter/updateStatus",DELETE:"/Newsletter/deleteAction",DETAIL:"/Newsletter/getDetail"},BANNER:{SAVE:"/Banner/saveAction",LIST:"/Banner/getList",UPDATE_STATUS:"/Banner/updateStatus",DELETE:"/Banner/deleteAction",DETAIL:"/Banner/getDetail"},CUSTOMER_REVIEW:{SAVE:"/CustomerReview/saveAction",LIST:"/CustomerReview/getList",UPDATE_STATUS:"/CustomerReview/updateStatus",DELETE:"/CustomerReview/deleteAction",DETAIL:"/CustomerReview/getDetail"},TYPE:{DROPDOWN_LIST:"/Type/getDropdownList",TYPE_KEY_STRS:"/Type/getListTypeKeyArr"},PAYMENT_MOTHOD:{DROPDOWN_LIST:"/PaymentMethod/getDropdownList"},ORDER_STATUS:{DROPDOWN_LIST:"/OrderStatus/getDropdownList"},PAYMENT_STATUS:{DROPDOWN_LIST:"/PaymentStatus/getDropdownList"},PRODUCT_TYPE:{SAVE:"/ProductType/saveAction",LIST:"/ProductType/getList",UPDATE_STATUS:"/ProductType/updateStatus",DELETE:"/ProductType/deleteAction",DETAIL:"/ProductType/getDetail",DROPDOWN_LIST:"/ProductType/getDropDownList"},ATTRIBUTES:{SAVE:"/attributes/saveAction",LIST:"/attributes/getList",UPDATE_STATUS:"/attributes/updateStatus",DELETE:"/attributes/deleteAction",DETAIL:"/attributes/getDetail",DROPDOWN_LIST:"/attributes/getDropDownList"},BRAND:{SAVE:"/brand/saveAction",LIST:"/brand/getList",UPDATE_STATUS:"/brand/updateStatus",DELETE:"/brand/deleteAction",DETAIL:"/brand/getDetail",DROPDOWN_LIST:"/brand/getDropDownList"},UNIT:{SAVE:"/unit/saveAction",LIST:"/unit/getList",UPDATE_STATUS:"/unit/updateStatus",DELETE:"/unit/deleteAction",DETAIL:"/unit/getDetail",DROPDOWN_LIST:"/unit/getDropDownList"},GALLERY_TYPE:{SAVE:"/GalleryType/saveAction",LIST:"/GalleryType/getList",UPDATE_STATUS:"/GalleryType/updateStatus",DELETE:"/GalleryType/deleteAction",DETAIL:"/GalleryType/getDetail",DROPDOWN_LIST:"/GalleryType/getDropDownList"},TAGS:{SAVE:"/tags/saveAction",LIST:"/tags/getList",UPDATE_STATUS:"/tags/updateStatus",DELETE:"/tags/deleteAction",DETAIL:"/tags/getDetail",DROPDOWN_LIST:"/tags/getDropDownList",SEARCH_AUTO:"/tags/getSearchAuto"},CUSTOM_FIELD:{SAVE:"/CustomField/saveAction",LIST:"/CustomField/getList",UPDATE_STATUS:"/CustomField/updateStatus",DELETE:"/CustomField/deleteAction",DETAIL:"/CustomField/getDetail",DROPDOWN_LIST:"/CustomField/getDropDownList",GROUP_CUSTOM_FIELD:"/CustomField/getListGroupCustomField",SAVE_FIELD:"/CustomField/saveFieldAction"},SPECIFICATION:{SAVE:"/specification/saveAction",LIST:"/specification/getList",UPDATE_STATUS:"/specification/updateStatus",DELETE:"/specification/deleteAction",DETAIL:"/specification/getDetail",DROPDOWN_LIST:"/specification/getDropDownList"},PRODUCT:{SEARCH_AUTO:"/Product/getSearchAuto",SAVE:"/Product/saveAction",LIST:"/Product/getList",UPDATE_STATUS:"/Product/updateStatus",DELETE:"/Product/deleteAction",DETAIL:"/Product/getDetail"},ORDERS:{SEARCH_PRODUCT_AUTO:"/Orders/getSearchProductAuto",SAVE:"/Orders/saveAction",LIST:"/Orders/getList",DETAIL:"/Orders/getDetail",PRINT:"/Orders/exportPrint"}},SITE_URL:{PUBLIC_URL:["/","/forgot-password","/reset-password"],LOGIN:"/",DEFAULT_PAGE:"/dashboard",DEFAULT_MAIN:"/main",ERROR_PAGE:"/error-404"},CONTENT_TYPE:{json:"application/json",stream:"application/octet-stream",excel:"application/vnd.ms-excel",multipart:"multipart/form-data"},METHOD:{POST:"post",GET:"get",DELETE:"delete",PUT:"put",POSTEXCEL:"postexcel",POSTPDF:"postpdf"},ERROR_MSG_TIMEOUT:8e3,ERROR_CODE:{CODE_01:1,CODE_02:1},SCREEN_MODE:{VIEW:0,ADD:1,EDIT:2},AUTH_MODE:{VIEW:0,NEW:1,DEL:2,EDIT:3,EXCEL:4,PDF:5,PRINT:6,TRANSLATE:7,APPROVAL:8,SET:9,FULL:511},AUTH_DATA_KEY:{VIEW:"view",NEW:"new",EDIT:"edit",DEL:"delete",PRINT:"print",PDF:"pdf",EXCEL:"excel",TRANSLATE:"translate",APPROVAL:"approval",FULL:"auths"}};t.a=n},310:function(e,t,a){var i=a(106),s=a(87),n=0,c=function(e,t,a){if(s.Function(e)&&(e={constructor:e}),!s.Function(e.constructor))throw Error("propertypes.constructor must be a function");var c=e.constructor;e.constructor=null;var r=s.Function(t),l=function(){var e=this,a=arguments;r&&t.apply(e,a),e.__classId__=n++,c.apply(e,a)};return r&&function(e,t,a){e.super_=t,e.prototype=Object.create(t.prototype),a&&i.extend(!0,e,t)}(l,t,a),i.each(e,(function(e,t){l.prototype[e]=t})),l.prototype.__constructor__=c,l.prototype.constructor=l,l},r=function(e,t,a){var i=this;i.p=e,i.s=t,i.i=a};r.prototype={constructor:r,create:function(e){var t=this;return t.p=e||t.p,c(t.p,t.s,t.i)}},t.extends=t.extend=function(e,t){return new r(null,e,t)},t.create=function(e,t,a){var i=this;return i.constructor===r&&i instanceof r?i.create(e):new r(e,t,a).create()},t.transfer=function(e,t,a,s){i.each(e.prototype,(function(n){!t.prototype[n]&&function(e,t){if(t=t||[],l.test(e))return!1;if(!t.length)return!0;var a=!0;return i.each(t,(function(t,i){if("!"===i[0]){if(a=!0,e===i.slice(1))return a=!1,!1}else if(a=!1,e===i)return a=!0,!1})),a}(n,s)&&(t.prototype[n]=function(){var t=this,i=t[a][n].apply(t[a],arguments);return i instanceof e?t:i})}))};var l=/^_/},311:function(e,t,a){var i=a(87),s=a(106),n={3:/(\d)(?=(\d{3})+$)/g},c=["","K","M","G","T","P","E","Z","Y"],r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l={};s.repeat(62,(function(e){l[r[e]]=e})),t.parseInt=function(e,t){return t=t||0,e=parseInt(e,10),i.nan(e)?t:e},t.parseFloat=function(e,t){return t=t||0,e=parseFloat(e),i.nan(e)?t:e},t.format=function(e,t,a){i.number(t)?(a=t,t=","):(t=t||",",a=a||3);var s=n[a];s||(s=n[a]=new RegExp("(\\d)(?=(\\d{"+a+"})+$)","g"));var c=String(e).split(".");return c[0].replace(s,"$1"+t)+(c[1]?"."+c[1]:"")},t.abbr=function(e,a,i){if(e<1)return e;e=t.parseInt(e,0),a=a||0,i=i||1e3;for(var s=0,n=c.length;e>=i&&++s<n;)e/=i;return s===n&&(s=n-1),t.format(e.toFixed(a))+c[s]},t.to62=function(e){var a=[];return function i(){var s=e%62;e=t.parseInt(e/62),a.unshift(r[s]),e&&i()}(),a.join("")},t.from62=function(e){var t=0,a=e.length;return s.repeat(a,(function(i){var s=e[i],n=l[s];t+=n*Math.pow(62,a-i-1)})),t}},322:function(e,t){},323:function(e,t,a){},324:function(e,t,a){},330:function(e,t,a){var i=a(744),s=a(310),n=a(106),c=a(87),r=a(196),l=a(197),o=a(748),d=a(749),h={},m="donkey-libs-validation",u=0,p={breakOnInvalid:"undefined"===typeof window,defaultMsg:"${1}\u4e0d\u5408\u6cd5"},j=s.extends(o).create({constructor:function(e){var t=this;t._options=n.extend({},p,e),t._validateList=[],t._validateIndexMap={},t._aliasMap={},t._msgMap={},t._validationMap={},t.className="validation"},setAlias:function(e,t){var a=this;return"object"===c(e)?(n.extend(a._aliasMap,e),a):(a._aliasMap[e]=t,a)},getAlias:function(e){return this._aliasMap[e]},setMsg:function(e,t,a){var i=this;return i._msgMap[e]=i._msgMap[e]||{},i._msgMap[e][t]=a,i},addRule:function(e,t){var a=this,i=r.args(arguments),s=i.slice(2),n=a._validateIndexMap[e];if(c.Undefined(n)&&(n=a._validateIndexMap[e]=a._validateList.length,a._validateList.push({path:e,rules:[]})),c.String(t)){var l=t;if(!h[l])throw"can not found `"+l+"` validation";a._validateList[n].rules.push({name:l,params:s,fn:h[l],id:d.guid()})}else c.Function(t)&&a._validateList[n].rules.push({name:m+u++,params:s,fn:t,id:d.guid()});return a},getRules:function(e){if(!e)return this._validateList;var t=[];return n.each(this._validateList,(function(a,i){if(e===i.path)return t=i.rules,!1})),t},getRuleParams:function(e,t){var a,i=this.getRules(e);return n.each(i,(function(e,i){if(i.name===t)return a=i,!1})),a&&a.params},getData:function(e){var t=this;return c.Array(e)?n.select(t.data,e):c.String(e)?t.data[e]:t.data},setData:function(e,t){return this.data[e]=t,this},validateOne:function(e,t,a){var i=r.args(arguments);return c.String(i[1])||(a=i[1],t=Object.keys(e)[0]),this.validateSome(e,t,a)},validateSome:function(e,t,a){var s=this,l=s._options,o=r.args(arguments),d={};if(s._isValidating)return s;c.String(o[1])||c.Array(o[1])||(t=Object.keys(e),a=o[1]),t=c.String(t)?[t]:t,n.each(t,(function(e,t){d[t]=1})),s._isValidating=!0,s.data=e;var h=null,m=null;return i.each(s._validateList,(function(e,t,a){if(!(t.path in d))return a();s._validateOne(t.path,t.rules,(function(e){e&&(m||(h=e,m=t.path)),e&&!l.breakOnInvalid&&(e=null),a(e)}))})).follow((function(){s._isValidating=!1,c.Function(a)&&a.call(s,h,m)})),s},validateSomeAll:function(e,t,a){var s=this,l=s._options,o=r.args(arguments),d={};if(s._isValidating)return s;c.String(o[1])||c.Array(o[1])||(t=Object.keys(e),a=o[1]),t=c.String(t)?[t]:t,n.each(t,(function(e,t){d[t]=1})),s._isValidating=!0,s.data=e;var h={};return i.each(s._validateList,(function(e,t,a){if(!(t.path in d))return a();s._validateOne(t.path,t.rules,(function(e){e&&(h[t.path]=e.message),e&&!l.breakOnInvalid&&(e=null),a(e)}))})).follow((function(){s._isValidating=!1,c.Function(a)&&a.call(s,h)})),s},validateAll:function(e,t){var a=[];return n.each(this._validateList,(function(e,t){a.push(t.path)})),this.validateSome(e,a,t)},FLValidateAll:function(e,t){var a=[];return n.each(this._validateList,(function(e,t){a.push(t.path)})),this.validateSomeAll(e,a,t)},_validateOne:function(e,t,a){var s,n=this,r=n._options,o=n.data;n.emit("beforeValidate",e),i.each(t,(function(t,a,i){var c=[o[e],i];s=a,n.emit("validate",e,a.name),c=c.concat(a.params),n.path=e,a.fn.apply(n,c)})).follow().try((function(){n.emit("valid",e),n.emit("validate",e),c.Function(a)&&a.call(n,null)})).catch((function(t){var i=[n._msgMap[e]&&n._msgMap[e][s.name]||t||r.defaultMsg,n.getAlias(e)||e];i=i.concat(s.params),(t=new TypeError(l.assign.apply(l,i))).id=s.id,n.emit("invalid",t,e),n.emit("validate",e),c.Function(a)&&a.call(n,t)}))},_validateAll:function(e,t,a){var s,n=this,r=n._options,o=n.data;n.emit("beforeValidate",e),i.each(t,(function(t,a,i){var c=[o[e],i];s=a,n.emit("validate",e,a.name),c=c.concat(a.params),n.path=e,a.fn.apply(n,c)})).follow().try((function(){n.emit("valid",e),n.emit("validate",e),c.Function(a)&&a.call(n,null)})).catch((function(t){var i=[n._msgMap[e]&&n._msgMap[e][s.name]||t||r.defaultMsg,n.getAlias(e)||e];i=i.concat(s.params),(t=new TypeError(l.assign.apply(l,i))).id=s.id,n.emit("invalid",t,e),n.emit("validate",e),c.Function(a)&&a.call(n,t)}))}});j.addRule=function(e,t){h[e]=t},j.getRule=function(e){return e?h[e]:h},a(750)(j),j.defaults=p,e.exports=j},340:function(e,t,a){"use strict";t.a=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,868)).then((function(t){var a=t.getCLS,i=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),i(e),s(e),n(e),c(e)}))}},341:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},342:function(e){e.exports=JSON.parse('{"report":{"estimation_data":"Ngu\u1ed3n d\u1eef li\u1ec7u \u01b0\u1edbc t\xednh:","report_data":"Ngu\u1ed3n d\u1eef li\u1ec7u b\xe1o c\xe1o:","report_period":"Chu k\u1ef3 b\xe1o c\xe1o:","reporter":"Ng\u01b0\u1eddi l\u1eadp:","report_time":"Th\u1eddi gian l\u1eadp:","PVSyst_energy_yield":"T\xednh to\xe1n","energy_yield":"Th\u1ef1c t\u1ebf","diff_Energy":"Ch\xeanh l\u1ec7ch","total":"T\u1ed5ng","monthly_engery_yield":"S\u1ea3n l\u01b0\u1ee3ng \u0111i\u1ec7n m\u1eb7t tr\u1eddi h\xe0ng th\xe1ng","monthly_accumulated":"S\u1ea3n l\u01b0\u1ee3ng \u0111i\u1ec7n m\u1eb7t tr\u1eddi t\xedch lu\u1ef9","measured_vs_calculated":"Bi\u1ec3u \u0111\u1ed3 s\u1ea3n l\u01b0\u1ee3ng \u0111i\u1ec7n m\u1eb7t tr\u1eddi h\xe0ng th\xe1ng th\u1ef1c t\u1ebf v\xe0 \u01b0\u1edbc t\xednh","monthly_accumulated_chart":"Bi\u1ec3u \u0111\u1ed3 s\u1ea3n l\u01b0\u1ee3ng \u0111i\u1ec7n m\u1eb7t tr\u1eddi t\xedch lu\u1ef9 th\u1ef1c t\u1ebf v\xe0 \u01b0\u1edbc t\xednh","chart_error":"Bi\u1ec3u \u0111\u1ed3 t\u1ec9 l\u1ec7 l\u1ed7i","report_month":"B\xe1o c\xe1o th\xe1ng:","energy_yield_today":"S\u1ea3n l\u01b0\u1ee3ng \u0111i\u1ec7n m\u1eb7t tr\u1eddi h\xe0ng ng\xe0y"},"login":{"email":"Email \u0111\u0103ng nh\u1eadp","password":"M\u1eadt kh\u1ea9u","iso_code":"M\xe3 doanh nghi\u1ec7p","save":"\u0110\u0103ng nh\u1eadp","forgot_password":"Qu\xean m\u1eadt kh\u1ea9u?","error":"T\xe0i kho\u1ea3n \u0111\u0103ng nh\u1eadp kh\xf4ng \u0111\xfang."},"forgot_password":{"title":"Qu\xean m\u1eadt kh\u1ea9u","email":"Nh\u1eadp email c\u1ee7a b\u1ea1n","iso_code":"M\xe3 doanh nghi\u1ec7p","save":"L\u1ea5y l\u1ea1i m\u1eadt kh\u1ea9u","error":"Email ho\u1eb7c m\xe3 doanh nghi\u1ec7p kh\xf4ng \u0111\xfang."},"reset_password":{"title":"T\u1ea1o m\u1eadt kh\u1ea9u m\u1edbi","password":"M\u1eadt kh\u1ea9u","re_password":"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u","save":"G\u1eedi","success":"Link l\u1ea5y l\u1ea1i m\u1eadt kh\u1ea9u v\u1eeba \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi Email c\u1ee7a b\u1ea1n, vui l\xf2ng ki\u1ec3m tra email."},"account":{"title":"T\xe0i kho\u1ea3n"},"regency":{"add_title":"T\u1ea1o ch\u1ee9c v\u1ee5","title":"Ch\u1ee9c v\u1ee5","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","edit_title":"S\u1eeda ch\u1ee9c v\u1ee5"},"role":{"add_title":"T\u1ea1o ph\xf2ng ban","title":"Ph\xf2ng ban","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","edit_title":"S\u1eeda ph\xf2ng ban"},"employee":{"add_title":"Th\xeam nh\xe2n vi\xean","title":"Nh\xe2n vi\xean","description":"Ghi ch\xfa","fullname":"H\u1ecd v\xe0 t\xean","first_name":"H\u1ecd v\xe0 t\xean \u0111\u1ec7m","last_name":"T\xean","role_name":"Ph\xf2ng ban","id":"M\xe3","regency":"Ch\u1ee9c v\u1ee5","working_day_title":"Ng\xe0y v\xe0o","status":"Tr\u1ea1ng th\xe1i","email":"Email","phone":"\u0110i\u1ec7n tho\u1ea1i","account_info":"Th\xf4ng tin t\xe0i kho\u1ea3n","working_day":"Ng\xe0y v\xe0o l\xe0m vi\u1ec7c","working_day_end":"Ng\xe0y ngh\u1ec9 vi\u1ec7c","birthday":"Sinh nh\u1eadt","avatar":"Avatar","password":"M\u1eadt kh\u1ea9u","random":"T\u1ea1o ng\u1eabu nhi\xean","account_role_info":"Ph\xf2ng ban","change_password":"\u0110\u1ed5i m\u1eadt kh\u1ea9u","password_confirm":"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi","current_password":"M\u1eadt kh\u1ea9u c\u0169","new_password":"M\u1eadt kh\u1ea9u m\u1edbi","password_valid_min_8character":"M\u1eadt kh\u1ea9u \xedt nh\u1ea5t 8 k\xfd t\u1ef1, g\u1ed3m ch\u1eef hoa, ch\u1eef th\u01b0\u1eddng, s\u1ed1.","password_incorrect":"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi kh\xf4ng \u0111\xfang","re_password":"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u","role_data":"B\u1ea1n ch\u01b0a ch\u1ecdn ph\xf2ng ban","edit_title":"S\u1eeda th\xf4ng tin nh\xe2n vi\xean"},"category":{"add_title":"T\u1ea1o danh m\u1ee5c","title":"Danh m\u1ee5c","description":"M\xf4 t\u1ea3","name":"T\xean","id":"M\xe3","name_vi":"T\xean","icon_title":"Icon (\u1ea3nh \u0111\u1ea1i di\u1ec7n danh m\u1ee5c)","icon_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc 320x320px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","banner_desktop_title":"Banner danh m\u1ee5c (Desktop)","banner_desktop_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc chu\u1ea9n 1920x460px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","banner_mobile_title":"Banner danh m\u1ee5c (Mobile)","banner_mobile_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc chu\u1ea9n 720x360px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","parent":"Danh m\u1ee5c cha","category_choose":"-- Ch\u1ecdn --","is_online":"B\xe1n online","menu_order":"Th\u1ee9 t\u1ef1","slug":"\u0110\u01b0\u1eddng d\u1eabn","edit_title":"S\u1eeda danh m\u1ee5c"},"news_category":{"add_title":"T\u1ea1o danh m\u1ee5c tin t\u1ee9c","title":"Danh m\u1ee5c tin t\u1ee9c","description":"M\xf4 t\u1ea3","name":"T\xean","id":"M\xe3","name_vi":"T\xean","icon_title":"Icon (\u1ea3nh \u0111\u1ea1i di\u1ec7n danh m\u1ee5c)","icon_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc 320x320px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","banner_desktop_title":"Banner danh m\u1ee5c (Desktop)","banner_desktop_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc chu\u1ea9n 1920x460px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","banner_mobile_title":"Banner danh m\u1ee5c (Mobile)","banner_mobile_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc chu\u1ea9n 720x360px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","parent":"Danh m\u1ee5c cha","category_choose":"-- Ch\u1ecdn --","is_online":"B\xe1n online","menu_order":"Th\u1ee9 t\u1ef1","slug":"\u0110\u01b0\u1eddng d\u1eabn","edit_title":"S\u1eeda danh m\u1ee5c"},"news":{"add_title":"\u0110\u0103ng tin","title":"Tin t\u1ee9c","description":"M\xf4 t\u1ea3 ng\u1eafn","name_title":"Ti\xeau \u0111\u1ec1","name":"T\xean","content":"N\u1ed9i dung","id":"M\xe3","id_new_category":"Danh m\u1ee5c","id_new_category_mes":"Danh m\u1ee5c kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng","created_date":"Ng\xe0y t\u1ea1o","title_thumbnail":"\u1ea2nh","category_choose":"-- Ch\u1ecdn --","status":"Tr\u1ea1ng th\xe1i","menu_order":"Th\u1ee9 t\u1ef1","slug":"\u0110\u01b0\u1eddng d\u1eabn","edit_title":"S\u1eeda tin \u0111\u0103ng","author":"T\xe1c gi\u1ea3","url_source":"Link ngu\u1ed3n b\xe0i vi\u1ebft","author_source":"T\xe1c gi\u1ea3 b\xe0i vi\u1ebft g\u1ed1c","is_comment":"Cho ph\xe9p b\xecnh lu\u1eadn"},"collection":{"add_title":"T\u1ea1o b\u1ed9 s\u01b0u t\u1eadp","title":"B\u1ed9 s\u01b0u t\u1eadp","description":"M\xf4 t\u1ea3 ng\u1eafn","name_title":"Ti\xeau \u0111\u1ec1","name":"T\xean","content":"N\u1ed9i dung","id":"M\xe3","created_date":"Ng\xe0y t\u1ea1o","title_thumbnail":"\u1ea2nh","status":"Tr\u1ea1ng th\xe1i","menu_order":"Th\u1ee9 t\u1ef1","slug":"\u0110\u01b0\u1eddng d\u1eabn","edit_title":"S\u1eeda b\u1ed9 s\u01b0u t\u1eadp","gallery":"Th\u01b0 vi\u1ec7n \u1ea3nh","title_product":"S\u1ea3n ph\u1ea9m","search_product":"T\xecm ki\u1ebfm s\u1ea3n ph\u1ea9m ..."},"pages":{"add_title":"T\u1ea1o trang","title":"Trang","name":"T\xean","content":"N\u1ed9i dung","id":"M\xe3","created_date":"Ng\xe0y t\u1ea1o","title_thumbnail":"\u1ea2nh","status":"Tr\u1ea1ng th\xe1i","menu_order":"Th\u1ee9 t\u1ef1","slug":"\u0110\u01b0\u1eddng d\u1eabn","edit_title":"S\u1eeda trang"},"group_attributes":{"edit_title":"S\u1eeda nh\xf3m thu\u1ed9c t\xednh","add_title":"T\u1ea1o nh\xf3m thu\u1ed9c t\xednh","title":"nh\xf3m thu\u1ed9c t\xednh","description":"M\xf4 t\u1ea3","name":"T\xean","is_default":"Nh\xf3m m\xe0u s\u1eafc"},"banner_position":{"edit_title":"S\u1eeda nh\xf3m banner","add_title":"T\u1ea1o nh\xf3m banner","title":"nh\xf3m banner","description":"M\xf4 t\u1ea3","name":"T\xean"},"banner":{"add_title":"T\u1ea1o banner","title":"Banner","description":"M\xf4 t\u1ea3","name":"T\xean","id":"M\xe3","banner_desktop_title":"Banner (Desktop)","banner_desktop_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc chu\u1ea9n 1920x460px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","banner_mobile_title":"Banner (Mobile)","banner_mobile_note":"B\u1ea1n \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng t\u1ed1i \u0111a 1 \u1ea3nh. \u1ea2nh c\xf3 k\xedch th\u01b0\u1edbc chu\u1ea9n 720x360px v\xe0 dung l\u01b0\u1ee3ng t\u1ed1i \u0111a 1MB.","id_banner_position":"V\u1ecb tr\xed","banner_choose":"-- Ch\u1ecdn --","menu_order":"Th\u1ee9 t\u1ef1","link":"\u0110\u01b0\u1eddng link","edit_title":"S\u1eeda banner"},"customer_review":{"page_title":"\u0110\xe1nh gi\xe1 c\u1ee7a kh\xe1ch h\xe0ng","customer":"Kh\xe1ch h\xe0ng","add_title":"T\u1ea1o \u0111\xe1nh gi\xe1 c\u1ee7a kh\xe1ch h\xe0ng","title":"Ti\xeau \u0111\u1ec1","description":"M\xf4 t\u1ea3","name":"T\xean","id":"M\xe3","fullname":"H\u1ecd v\xe0 t\xean","company_name":"C\xf4ng ty","content":"N\u1ed9i dung","menu_order":"Th\u1ee9 t\u1ef1","link":"\u0110\u01b0\u1eddng link","edit_title":"S\u1eeda \u0111\xe1nh gi\xe1 c\u1ee7a kh\xe1ch h\xe0ng"},"attributes":{"edit_title":"S\u1eeda thu\u1ed9c t\xednh","add_title":"T\u1ea1o thu\u1ed9c t\xednh","title":"Thu\u1ed9c t\xednh","description":"M\xf4 t\u1ea3","name":"T\xean","name_vi":"T\xean","id_attribute_group":"Nh\xf3m thu\u1ed9c t\xednh","color_code":"M\xe3 m\xe0u"},"brand":{"edit_title":"S\u1eeda th\u01b0\u01a1ng hi\u1ec7u","add_title":"T\u1ea1o th\u01b0\u01a1ng hi\u1ec7u","title":"Th\u01b0\u01a1ng hi\u1ec7u","description":"M\xf4 t\u1ea3","name":"T\xean"},"unit":{"edit_title":"S\u1eeda \u0111\u01a1n v\u1ecb","add_title":"T\u1ea1o \u0111\u01a1n v\u1ecb","title":"\u0110\u01a1n v\u1ecb","description":"M\xf4 t\u1ea3","name":"T\xean"},"tags":{"edit_title":"S\u1eeda Tag","add_title":"T\u1ea1o Tag","title":"Tags","description":"M\xf4 t\u1ea3","name":"T\xean"},"custom_field":{"edit_title":"S\u1eeda field groups","add_title":"T\u1ea1o field groups","title":"Field Groups","description":"M\xf4 t\u1ea3","name":"T\xean","total_field":"Field","location_title":"\xc1p d\u1ee5ng cho nh\xf3m","location":"Lo\u1ea1i","product":"S\u1ea3n ph\u1ea9m","page":"Trang","new":"Tin t\u1ee9c","add_field":"Th\xeam field","edit_field":"Edit field","field_type":"Lo\u1ea1i field","field_key":"Field Key","field_label":"Field Label"},"product_type":{"edit_title":"S\u1eeda lo\u1ea1i s\u1ea3n ph\u1ea9m","add_title":"T\u1ea1o lo\u1ea1i s\u1ea3n ph\u1ea9m","title":"Lo\u1ea1i s\u1ea3n ph\u1ea9m","description":"M\xf4 t\u1ea3","name":"T\xean"},"products":{"id_type_face":"Form khu\xf4n m\u1eb7t","id_type_gender":"D\xe0nh cho","id_type_frame_color":"M\xe0u g\u1ecdng k\xednh","id_type_material":"Ch\u1ea5t li\u1ec7u","id_type_shape":"H\xecnh d\u1ea1ng","id_type_horizontally":"Chi\u1ec1u ngang","slug":"\u0110\u01b0\u1eddng d\u1eabn","thumbnail_hover":"\u1ea2nh \u0111\u1ea1i di\u1ec7n hover","edit_product_title":"S\u1eeda s\u1ea3n ph\u1ea9m","thumbnail_mess":"H\xecnh \u0111\u1ea1i di\u1ec7n kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng","add_product_title":"Th\xeam s\u1ea3n ph\u1ea9m","thumbnail":"\u1ea2nh \u0111\u1ea1i di\u1ec7n","guarantee":"Ch\xednh s\xe1ch b\u1ea3o h\xe0ng","policy":"Quy \u0111\u1ecbnh \u0111\u1ed5i tr\u1ea3","privilege":"\u01afu \u0111\xe3i ri\xeang khi mua h\xe0ng","product_add_tag":"T\u1ea1o t\u1eeb kho\xe1","tag_suggest":"T\u1eeb kho\xe1 g\u1ee3i \xfd","tag_name":"Th\xeam t\u1eeb kho\xe1 m\u1edbi","hashtag":"T\u1eeb kh\xf3a (tags)","gallery":"Th\u01b0 vi\u1ec7n \u1ea3nh","video":"Video","id_category":"Danh m\u1ee5c s\u1ea3n ph\u1ea9m","id_brand":"Th\u01b0\u01a1ng hi\u1ec7u","id_unit":"\u0110\u01a1n v\u1ecb","id_product_type":"Lo\u1ea1i s\u1ea3n ph\u1ea9m","is_comment":"Cho ph\xe9p b\xecnh lu\u1eadn","hot":"S\u1ea3n ph\u1ea9m hot","sticky":"Hi\u1ec7n \u1edf trang ch\u1ee7","new":"S\u1ea3n ph\u1ea9m m\u1edbi","sell_a_lot":"S\u1ea3n ph\u1ea9m b\xe1n nhi\u1ec1u","add_title":"T\u1ea1o thu\u1ed9c t\xednh","title":"S\u1ea3m ph\u1ea9m","description":"M\xf4 t\u1ea3 ng\u1eafn","content":"Chi ti\u1ebft s\u1ea3n ph\u1ea9m","name":"T\xean","original_price":"Gi\xe1 nh\u1eadp","wholesale_price":"Gi\xe1 b\xe1n s\u1ec9","regular_price":"Gi\xe1 b\xe1n l\u1ebb","quantity":"S\u1ed1 l\u01b0\u1ee3ng","time_range_title":"Th\u1eddi gian khuy\u1ebfn m\xe3i","sku":"M\xe3 s\u1ea3n ph\u1ea9m","random_sku":"T\u1ea1o m\xe3 SKU","saleoff_price":"Gi\xe1 b\xe1n l\u1ebb khuy\u1ebfn m\xe3i","id_group_attribute":"Nh\xf3m thu\u1ed9c t\xednh","category_name":"Danh m\u1ee5c","created_date":"Ng\xe0y t\u1ea1o","price":"Gi\xe1","item_weight":"Tr\u1ecdng l\u01b0\u1ee3ng","title_length":"K\xedch th\u01b0\u1edbc \u0111\xf3ng g\xf3i","item_length":"D\xe0i","item_width":"R\u1ed9ng","item_height":"Cao","title_stores_tab":"Qu\u1ea3n l\xfd kho h\xe0ng?","stock":"S\u1ed1 l\u01b0\u1ee3ng trong kho","out_of_stock":"Ng\u01b0\u1ee1ng s\u1eafp h\u1ebft h\xe0ng","id_group_attr":"Tu\u1ef3 ch\u1ec9nh nh\xf3m thu\u1ed9c t\xednh s\u1ea3n ph\u1ea9m","id_type":"Cho ph\xe9p \u0111\u1eb7t h\xe0ng tr\u01b0\u1edbc?","title_attribute":"T\xf9y ch\u1ec9nh thu\u1ed9c t\xednh s\u1ea3n ph\u1ea9m","create":"Th\xeam","add_value":"Th\xeam gi\xe1 tr\u1ecb","fast_setup_title":"Thi\u1ebft l\u1eadp nhanh","fast_setup_current_price":"Gi\xe1 g\u1ed1c","special_price":"Gi\xe1 khuy\u1ebfn m\xe3i","special_qty":"S\u1ed1 l\u01b0\u1ee3ng","special_date":"Th\u1eddi gian khuy\u1ebfn m\xe3i","placeholder_start_date":"B\u1eaft \u0111\u1ea7u...","placeholder_end_date":"K\u1ebft th\xfac...","remove_time_sale":"Xo\xe1 th\u1eddi gian khuy\u1ebfn m\xe3i","apply_all":"\xc1p d\u1ee5ng","list_attr_title":"Danh s\xe1ch c\xe1c thu\u1ed9c t\xednh","promotion_price":"Gi\xe1 KM","amount":"S\u1ed1 l\u01b0\u1ee3ng","time_range":"Th\u1eddi gian","del_all_promotion":"Xo\xe1 khuy\u1ebfn m\xe3i","search_product":"T\xecm ki\u1ebfm s\u1ea3n ph\u1ea9m ...","brand":"Th\u01b0\u01a1ng hi\u1ec7u","unit":"\u0110\u01a1n v\u1ecb"},"permissions":{"title":"Ph\xe2n quy\u1ec1n","choose_role":"Ch\u1ecdn ph\xf2ng ban"},"stores":{"add_title":"T\u1ea1o kho h\xe0ng","title":"Kho h\xe0ng","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","address":"\u0110\u1ecba ch\u1ec9","phone":"\u0110i\u1ec7n tho\u1ea1i","management_info":"Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch","choose_employee_manage":"Ng\u01b0\u1eddi qu\u1ea3n l\xfd","email":"Email"},"partner":{"add_title":"T\u1ea1o nh\xe0 cung c\u1ea5p","title":"Nh\xe0 cung c\u1ea5p","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","address":"\u0110\u1ecba ch\u1ec9","phone":"\u0110i\u1ec7n tho\u1ea1i","management_info":"Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch","choose_employee_manage":"Ng\u01b0\u1eddi qu\u1ea3n l\xfd","email":"Email","persion_info":"Ng\u01b0\u1eddi li\xean h\u1ec7","contact_fullname":"H\u1ecd v\xe0 t\xean","contact_email":"Email","contact_phone":"\u0110i\u1ec7n tho\u1ea1i","payment_info":"Th\xf4ng tin thanh to\xe1n","bank":"Ng\xe2n h\xe0ng","bank_sub":"Chi nh\xe1nh","bank_number":"S\u1ed1 t\xe0i kho\u1ea3n","bank_own":"Ch\u1ee7 t\xe0i kho\u1ea3n","bank_note":"Ghi ch\xfa","tax_code":"M\xe3 s\u1ed1 thu\u1ebf"},"import_stock":{"add_new":"Th\xeam nh\u1eadp kho","label_edit":"S\u1eeda phi\u1ebfu nh\u1eadp","label_view":"Chi ti\u1ebft phi\u1ebfu nh\u1eadp","title":"Phi\u1ebfu nh\u1eadp kho","search":"T\xecm","search_title":"T\xecm ki\u1ebfm","label_keyword":"Nh\u1eadp t\u1eeb kho\xe1 b\u1ea1n mu\u1ed1n t\xecm","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y","btn_search":"T\xecm","function":"Ch\u1ee9c n\u0103ng","partner_name":"Nh\xe0 cung c\u1ea5p","id_code":"M\xe3 phi\u1ebfu","iso_code":"M\xe3 phi\u1ebfu nh\u1eadp","date":"Ng\xe0y","total":"T\u1ed5ng","description":"M\xf4 t\u1ea3","type_voucher":"Lo\u1ea1i ch\u1ee9ng t\u1eeb","label_add":"T\u1ea1o phi\u1ebfu nh\u1eadp","id_type_voucher":"Lo\u1ea1i phi\u1ebfu nh\u1eadp","product_name":"Nguy\xean v\u1eadt li\u1ec7u","store":"kho","unit":"\u0110\u01a1n v\u1ecb","quantity":"S\u1ed1 l\u01b0\u1ee3ng","price":"\u0110\u01a1n gi\xe1","total_sub":"Th\xe0nh ti\u1ec1n","product_date":"Ng\xe0y s\u1ea3n xu\u1ea5t","expiration_date":"Ng\xe0y h\u1ebft h\u1ea1n","label_add_row_warehousing":"Th\xeam s\u1ea3n ph\u1ea9m","exits_product_choose":"S\u1ea3n ph\u1ea9m \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ecdn","product_date_compare":"Ng\xe0y s\u1ea3n xu\u1ea5t ph\u1ea3i nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng ng\xe0y h\u1ebft h\u1ea1n.","list_product_is_not_null":"H\xe0ng ho\xe1 ch\u01b0a \u0111\u01b0\u1ee3c th\xeam v\xe0o danh s\xe1ch nh\u1eadp.","title_delete":"Xo\xe1 phi\u1ebfu nh\u1eadp","label_id_stores":"Nh\u1eadp t\u1ea1i kho","import_title_delete":"Xo\xe1 phi\u1ebfu nh\u1eadp","import_title_retore":"Kh\xf4i ph\u1ee5c phi\u1ebfu nh\u1eadp","vat":"VAT (%)","appointment_date":"Ng\xe0y h\u1eb9n thanh to\xe1n","vat_date":"Ng\xe0y xu\u1ea5t ho\xe1 \u0111\u01a1n","payment_method":"H\xecnh th\u1ee9c thanh to\xe1n","manual_discount":"Chi\u1ebft kh\u1ea5u","keyword_search_product":"Nh\u1eadp t\xean s\u1ea3n ph\u1ea9m"},"export_stock":{"tax_code_info":"Th\xf4ng tin xu\u1ea5t ho\xe1 \u0111\u01a1n","id_type":"Lo\u1ea1i phi\u1ebfu xu\u1ea5t","add_new":"Th\xeam phi\u1ebfu xu\u1ea5t","label_edit":"S\u1eeda phi\u1ebfu xu\u1ea5t","label_view":"Chi ti\u1ebft phi\u1ebfu xu\u1ea5t","title":"Phi\u1ebfu xu\u1ea5t kho","search":"T\xecm","search_title":"T\xecm ki\u1ebfm","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y","btn_search":"T\xecm","function":"Ch\u1ee9c n\u0103ng","id_room":"M\xe3 ph\xf2ng","id_order":"M\xe3 ho\xe1 \u0111\u01a1n","obj":"\u0110\u1ed1i t\u01b0\u1ee3ng","id_code":"M\xe3 phi\u1ebfu","date":"Ng\xe0y","id_branch":"Chi nh\xe1nh","exits_product_choose":"D\u1ecbch v\u1ee5 \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ecdn","list_product_is_not_null":"D\u1ecbch v\u1ee5 ch\u01b0a \u0111\u01b0\u1ee3c th\xeam v\xe0o danh s\xe1ch nh\u1eadp.","supplier_name":"Nh\xe0 cung c\u1ea5p","total":"T\u1ed5ng","description":"M\xf4 t\u1ea3","type_voucher":"Lo\u1ea1i ch\u1ee9ng t\u1eeb","label_add":"Th\xeam phi\u1ebfu xu\u1ea5t","id_type_voucher":"Lo\u1ea1i phi\u1ebfu xu\u1ea5t","product_name":"S\u1ea3n ph\u1ea9m","store":"kho","unit":"\u0110\u01a1n v\u1ecb","quantity":"S\u1ed1 l\u01b0\u1ee3ng","price":"\u0110\u01a1n gi\xe1","total_sub":"Th\xe0nh ti\u1ec1n","product_date":"Ng\xe0y s\u1ea3n xu\u1ea5t","expiration_date":"Ng\xe0y h\u1ebft h\u1ea1n","label_add_row_warehousing":"Th\xeam s\u1ea3n ph\u1ea9m","title_delete":"Xo\xe1 phi\u1ebfu xu\u1ea5t","id_stores":"Xu\u1ea5t t\u1ea1i kho","export_title_retore":"Kh\xf4i ph\u1ee5c phi\u1ebfu xu\u1ea5t","export_title_delete":"Xo\xe1 phi\u1ebfu xu\u1ea5t","company_name":"\u0110\u01a1n v\u1ecb nh\u1eadn ho\xe1 \u0111\u01a1n","tax_code":"M\xe3 s\u1ed1 thu\u1ebf","address":"\u0110\u1ecba ch\u1ec9","phone":"\u0110i\u1ec7n tho\u1ea1i","payment_method":"H\xecnh th\u1ee9c thanh to\xe1n"},"transfer_stock":{"title":"Chuy\u1ec3n kho","id_store_to":"\u0110\u1ebfn kho","id_store_from":"T\u1eeb kho","transfer_store_type":"Lo\u1ea1i","search_title":"T\xecm ki\u1ebfm","label_keyword":"Nh\u1eadp t\u1eeb kho\xe1 b\u1ea1n mu\u1ed1n t\xecm","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y","btn_search":"T\xecm","function":"Ch\u1ee9c n\u0103ng","date":"Ng\xe0y","id_code":"M\xe3 phi\u1ebfu","transfer_person":"Ng\u01b0\u1eddi v\u1eadn chuy\u1ec3n","add_new":"Th\xeam m\u1edbi","label_add":"Th\xeam phi\u1ebfu chuy\u1ec3n kho","store_export_stock":"Kho xu\u1ea5t","store_import_stock":"Kho nh\u1eadp","must_be_diffirent_id_import_stock":"Kho nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng kho xu\u1ea5t","must_be_diffirent_id_export_stock":"Kho xu\u1ea5t kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng kho nh\u1eadp","list_product_is_incorrect":"D\u1eef li\u1ec7u nh\u1eadp ch\u01b0a \u0111\xfang","label_edit":"S\u1eeda phi\u1ebfu chuy\u1ec3n kho","label_view":"Chi ti\u1ebft phi\u1ebfu chuy\u1ec3n kho","exits_product_choose":"S\u1ea3n ph\u1ea9m \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ecdn","list_product_is_not_null":"H\xe0ng ho\xe1 ch\u01b0a \u0111\u01b0\u1ee3c th\xeam v\xe0o danh s\xe1ch nh\u1eadp.","total":"T\u1ed5ng","description":"M\xf4 t\u1ea3","product_name":"S\u1ea3n ph\u1ea9m","store":"kho","unit":"\u0110\u01a1n v\u1ecb","quantity":"S\u1ed1 l\u01b0\u1ee3ng","price":"\u0110\u01a1n gi\xe1","total_sub":"Th\xe0nh ti\u1ec1n","product_date":"Ng\xe0y s\u1ea3n xu\u1ea5t","expiration_date":"Ng\xe0y h\u1ebft h\u1ea1n","label_add_row_warehousing":"Th\xeam s\u1ea3n ph\u1ea9m","title_delete":"Xo\xe1 phi\u1ebfu chuy\u1ec3n kho","transfer_person_phone":"\u0110i\u1ec7n tho\u1ea1i"},"summary_store":{"title":"T\u1ed5ng h\u1ee3p t\u1ed3n kho","product_name":"S\u1ea3n ph\u1ea9m","search":"T\xecm","search_title":"T\xecm ki\u1ebfm","label_keyword":"Nh\u1eadp t\u1eeb kho\xe1 b\u1ea1n mu\u1ed1n t\xecm","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y","btn_search":"T\xecm","function":"Ch\u1ee9c n\u0103ng","quantity_store_first":"T\u1ed3n \u0111\u1ea7u k\u1ef3","quantity_store_import":"S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp","quantity_store_export":"S\u1ed1 l\u01b0\u1ee3ng xu\u1ea5t","quantity_store_last":"T\u1ed3n cu\u1ed1i k\u1ef3","unit":"\u0110\u01a1n v\u1ecb","id_store":"Kho","id_category":"Nh\xf3m nguy\xean li\u1ec7u","label_view":"Chi ti\u1ebft nh\u1eadp - xu\u1ea5t - t\u1ed3n kho","id_code":"S\u1ed1 ch\u1ee9ng t\u1eeb","type_code":"Lo\u1ea1i ch\u1ee9ng t\u1eeb","id_code_date":"Ng\xe0y ch\u1ee9ng t\u1eeb","note":"M\xf4 t\u1ea3","quantity_import":"S\u1ed1 l\u01b0\u1ee3ng nh\u1eadp","quantity_export":"S\u1ed1 l\u01b0\u1ee3ng xu\u1ea5t","price_import":"Gi\xe1 tr\u1ecb nh\u1eadp","price_export":"Gi\xe1 tr\u1ecb xu\u1ea5t","quantity_store":"S\u1ed1 l\u01b0\u1ee3ng t\u1ed3n","price_total_store":"Gi\xe1 tr\u1ecb t\u1ed3n kho","store_quantity_first":"S\u1ed1 d\u01b0 \u0111\u1ea7u k\u1ef3","total":"T\u1ed5ng"},"inventory_stock":{"title":"Ki\u1ec3m k\xea kho","search":"T\xecm","search_title":"T\xecm ki\u1ebfm","label_keyword":"Nh\u1eadp t\u1eeb kho\xe1 b\u1ea1n mu\u1ed1n t\xecm","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y","btn_search":"T\xecm","function":"Ch\u1ee9c n\u0103ng","id_code":"M\xe3 phi\u1ebfu","add_new":"Th\xeam m\u1edbi","label_add":"Th\xeam phi\u1ebfu ki\u1ec3m kho","store_export_stock":"Kho xu\u1ea5t","store_import_stock":"Kho nh\u1eadp","must_be_diffirent_id_import_stock":"Kho nh\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng kho xu\u1ea5t","must_be_diffirent_id_export_stock":"Kho xu\u1ea5t kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng kho nh\u1eadp","list_product_is_incorrect":"D\u1eef li\u1ec7u nh\u1eadp ch\u01b0a \u0111\xfang","label_edit":"S\u1eeda phi\u1ebfu chuy\u1ec3n kho","label_view":"Chi ti\u1ebft phi\u1ebfu chuy\u1ec3n kho","exits_product_choose":"S\u1ea3n ph\u1ea9m \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ecdn","list_product_is_not_null":"H\xe0ng ho\xe1 ch\u01b0a \u0111\u01b0\u1ee3c th\xeam v\xe0o danh s\xe1ch nh\u1eadp.","total":"T\u1ed5ng","description":"M\xf4 t\u1ea3","product_name":"S\u1ea3n ph\u1ea9m","id_store":"Kho","unit":"\u0110\u01a1n v\u1ecb","quantity":"S\u1ed1 l\u01b0\u1ee3ng","price":"\u0110\u01a1n gi\xe1","total_sub":"Th\xe0nh ti\u1ec1n","product_date":"Ng\xe0y s\u1ea3n xu\u1ea5t","expiration_date":"Ng\xe0y h\u1ebft h\u1ea1n","label_add_row_warehousing":"Th\xeam s\u1ea3n ph\u1ea9m","title_delete":"Xo\xe1 phi\u1ebfu chuy\u1ec3n kho","status":"Tr\u1ea1ng th\xe1i","purpose":"M\u1ee5c \u0111\xedch","end_date":"Ki\u1ec3m k\xea \u0111\u1ebfn ng\xe0y","date":"Ng\xe0y ki\u1ec3m k\xea","result":"K\u1ebft lu\u1eadn","reason":"Nguy\xean nh\xe2n","difference":"Ch\xeanh l\u1ec7ch","quantity_check":"S\u1ed1 l\u01b0\u1ee3ng ki\u1ec3m k\xea","quantity_system":"H\u1ec7 th\u1ed1ng","id_order":"M\xe3 ho\xe1 \u0111\u01a1n","store_type":"Lo\u1ea1i ki\u1ec3m kho","store_name":"Kho","username":"Ng\u01b0\u1eddi t\u1ea1o","sp":"SP","sl":"SL","sp_missing":"SP thi\u1ebfu"},"sell":{"product_sub_total":"Th\xe0nh ti\u1ec1n","cart_empty":"Ch\u01b0a c\xf3 s\u1ea3n ph\u1ea9m trong \u0111\u01a1n h\xe0ng","stt":"STT","view_title":"\u0110\u01a1n h\xe0ng","pd_title":"\u0110o \u0111\u1ed3ng t\u1eed","pd":"PD","result_hospital":"K\u1ebft qu\u1ea3 kh\xe1m","lens_width":"Lens width","bridge_width":"Bridge width","frame_width":"Frame width","id_payment_status":"Thanh to\xe1n","edit_title":"S\u1eeda \u0111\u01a1n h\xe0ng","id_order_status":"\u0110\u01a1n h\xe0ng","copy_from_customer":"Copy t\u1eeb kh\xe1ch h\xe0ng","sub_total":"Ti\u1ec1n h\xe0ng","amount_received_title":"Ti\u1ec1n th\u1eeba","total_order":"Kh\xe1ch c\u1ea7n tr\u1ea3","amount_received":"S\u1ed1 ti\u1ec1n nh\u1eadn","amount_ship":"Ph\xed giao h\xe0ng","error_coupon":"M\xe3 coupon kh\xf4ng \u0111\xfang","success_coupon":"L\u01b0u Coupon th\xe0nh c\xf4ng","billing":"Ho\xe1 \u0111\u01a1n","sku":"SKU","ship_title":"\u0110\u1ecba ch\u1ec9 giao h\xe0ng","ship_first_name":"H\u1ecd v\xe0 t\xean \u0111\xeam","ship_last_name":"T\xean","ship_phone":"\u0110i\u1ec7n tho\u1ea1i","id_province_ship":"T\u1ec9nh/ Th\xe0nh ph\u1ed1","id_district_ship":"Qu\u1eadn/ Huy\u1ec7n","id_ward_ship":"Ph\u01b0\u1eddng/ X\xe3","ship_address":"\u0110\u1ecba ch\u1ec9","add_title":"T\u1ea1o \u0111\u01a1n h\xe0ng","title":"\u0110\u01a1n h\xe0ng","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","address":"\u0110\u1ecba ch\u1ec9","phone":"\u0110i\u1ec7n tho\u1ea1i","management_info":"Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch","choose_employee_manage":"Ng\u01b0\u1eddi qu\u1ea3n l\xfd","email":"Email","persion_info":"Ng\u01b0\u1eddi li\xean h\u1ec7","contact_fullname":"H\u1ecd v\xe0 t\xean","contact_email":"Email","contact_phone":"\u0110i\u1ec7n tho\u1ea1i","payment_info":"Th\xf4ng tin thanh to\xe1n","bank":"Ng\xe2n h\xe0ng","bank_sub":"Chi nh\xe1nh","bank_number":"S\u1ed1 t\xe0i kho\u1ea3n","bank_own":"Ch\u1ee7 t\xe0i kho\u1ea3n","bank_note":"Ghi ch\xfa","tax_code":"M\xe3 s\u1ed1 thu\u1ebf","username":"Ng\u01b0\u1eddi t\u1ea1o","id_order":"M\xe3 ho\xe1 \u0111\u01a1n","customer_name":"Kh\xe1ch h\xe0ng","id_store":"Kho","customer_phone":"\u0110i\u1ec7n tho\u1ea1i","product_name":"S\u1ea3n ph\u1ea9m","status":"Tr\u1ea1ng th\xe1i","id_payment_method":"H\xecnh th\u1ee9c thanh to\xe1n","employee_sell":"NV b\xe1n h\xe0ng","employee_account":"NV thu ng\xe2n","employee_technical":"NV k\u1ef9 thu\u1eadt","store":"kho","price":"Gi\xe1","sl":"SL","vat":"VAT (%)","note":"Ghi ch\xfa","saleoff":"Gi\u1ea3m gi\xe1","total":"T\u1ed5ng","categories":"Danh m\u1ee5c s\u1ea3n ph\u1ea9m","search_keyword":"T\xecm s\u1ea3n ph\u1ea9m","card_number":"M\xe3 s\u1ed1 th\u1ebb","id_province":"T\u1ec9nh/ Th\xe0nh ph\u1ed1","id_district":"Qu\u1eadn/ Huy\u1ec7n","id_ward":"Ph\u01b0\u1eddng/ X\xe3","facebook":"Facebook","birthday":"Ng\xe0y sinh","gender":"Gi\u1edbi t\xednh","id_customer_type":"Nh\xf3m kh\xe1ch h\xe0ng","id_customer_group":"Lo\u1ea1i kh\xe1ch h\xe0ng","customer_title":"Kh\xe1ch h\xe0ng","quantity":"S\u1ed1 l\u01b0\u1ee3ng","payment":"Thanh to\xe1n","company_name":"\u0110\u01a1n v\u1ecb nh\u1eadn ho\xe1 \u0111\u01a1n","coupon":"M\xe3 gi\u1ea3m gi\xe1","apply":"\xc1p d\u1ee5ng","manual_discount":"Chi\u1ebft kh\u1ea5u","note_order":"Ghi ch\xfa \u0111\u01a1n h\xe0ng","export_vat":"Xu\u1ea5t ho\xe1 \u0111\u01a1n","search_order":"T\xecm \u0111\u01a1n h\xe0ng"},"return_order":{"id_type_order":"Lo\u1ea1i phi\u1ebfu","staff_sale":"Nh\xe2n vi\xean b\xe1n h\xe0ng","add_title":"T\u1ea1o phi\u1ebfu tr\u1ea3 h\xe0ng","title":"Tr\u1ea3 h\xe0ng","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","address":"\u0110\u1ecba ch\u1ec9","phone":"\u0110i\u1ec7n tho\u1ea1i","management_info":"Ng\u01b0\u1eddi ph\u1ee5 tr\xe1ch","choose_employee_manage":"Ng\u01b0\u1eddi qu\u1ea3n l\xfd","email":"Email","persion_info":"Ng\u01b0\u1eddi li\xean h\u1ec7","contact_fullname":"H\u1ecd v\xe0 t\xean","contact_email":"Email","contact_phone":"\u0110i\u1ec7n tho\u1ea1i","payment_info":"Th\xf4ng tin thanh to\xe1n","bank":"Ng\xe2n h\xe0ng","bank_sub":"Chi nh\xe1nh","bank_number":"S\u1ed1 t\xe0i kho\u1ea3n","bank_own":"Ch\u1ee7 t\xe0i kho\u1ea3n","bank_note":"Ghi ch\xfa","tax_code":"M\xe3 s\u1ed1 thu\u1ebf","username":"Ng\u01b0\u1eddi t\u1ea1o","id_order":"ID","refund":"Tr\u1ea3 l\u1ea1i","customer_name":"Kh\xe1ch h\xe0ng","id_store":"Kho","customer_phone":"\u0110i\u1ec7n tho\u1ea1i","product_name":"S\u1ea3n ph\u1ea9m","status":"Tr\u1ea1ng th\xe1i","payment_method":"H\xecnh th\u1ee9c thanh to\xe1n","employee_sell":"NV b\xe1n h\xe0ng","employee_account":"NV thu ng\xe2n","employee_technical":"NV k\u1ef9 thu\u1eadt","store":"kho","price":"Gi\xe1","sl":"SL","vat":"VAT (%)","note":"Ghi ch\xfa","saleoff":"Gi\u1ea3m gi\xe1","total":"T\u1ed5ng","categories":"Danh m\u1ee5c s\u1ea3n ph\u1ea9m","search_keyword":"T\xecm s\u1ea3n ph\u1ea9m","card_number":"M\xe3 s\u1ed1 th\u1ebb","id_province":"T\u1ec9nh/ Th\xe0nh ph\u1ed1","id_district":"Qu\u1eadn/ Huy\u1ec7n","id_ward":"Ph\u01b0\u1eddng/ X\xe3","facebook":"Facebook","birthday":"Ng\xe0y sinh","gender":"Gi\u1edbi t\xednh","customer_group":"Nh\xf3m","customer_level":"C\u1ea5p \u0111\u1ed9","customer_title":"Kh\xe1ch h\xe0ng","quantity":"S\u1ed1 l\u01b0\u1ee3ng","payment":"Thanh to\xe1n","company_name":"\u0110\u01a1n v\u1ecb nh\u1eadn ho\xe1 \u0111\u01a1n","coupon":"M\xe3 gi\u1ea3m gi\xe1","apply":"\xc1p d\u1ee5ng","manual_discount":"Chi\u1ebft kh\u1ea5u","note_order":"Ghi ch\xfa \u0111\u01a1n h\xe0ng","export_vat":"Xu\u1ea5t ho\xe1 \u0111\u01a1n","search_order":"T\xecm \u0111\u01a1n h\xe0ng"},"customer_group":{"add_title":"T\u1ea1o nh\xf3m kh\xe1ch h\xe0ng","title":"Nh\xf3m kh\xe1ch h\xe0ng","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","is_default":"M\u1eb7c \u0111\u1ecbnh"},"customer_type":{"add_title":"T\u1ea1o lo\u1ea1i kh\xe1ch h\xe0ng","title":"Lo\u1ea1i kh\xe1ch h\xe0ng","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","is_default":"M\u1eb7c \u0111\u1ecbnh"},"coupon":{"add_title":"T\u1ea1o coupon","title":"Coupon","description":"Ghi ch\xfa","name":"T\xean","id":"M\xe3","status":"Tr\u1ea1ng th\xe1i","coupon_code":"M\xe3 coupon","total":"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3ng m\xe3 coupon","min_order":"Gi\xe1 tr\u1ecb \u0111\u01a1n h\xe0ng nh\u1ecf nh\u1ea5t","max_value":"Gi\xe1 tr\u1ecb l\u1edbn nh\u1ea5t c\u1ee7a coupon","coupon_value":"Gi\xe1 tr\u1ecb coupon","id_type":"Lo\u1ea1i gi\u1ea3m gi\xe1","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y","quantity":"S\u1ed1 l\u01b0\u1ee3ng"},"customer":{"add_title":"T\u1ea1o kh\xe1ch h\xe0ng","title":"Kh\xe1ch h\xe0ng","description":"Ghi ch\xfa","customer_name":"Kh\xe1ch h\xe0ng","id":"M\xe3","phone":"\u0110i\u1ec7n tho\u1ea1i","first_name":"H\u1ecd v\xe0 t\xean \u0111\u1ec7m","last_name":"T\xean","email":"Email","card_number":"M\xe3 s\u1ed1 th\u1ebb","gender":"Gi\u1edbi t\xednh","birthday":"Ng\xe0y sinh","id_customer_group":"Nh\xf3m kh\xe1ch h\xe0ng","tax_code":"M\xe3 s\u1ed1 thu\u1ebf","company_name":"C\xf4ng ty","passport":"Ch\u1ee9ng minh nh\xe2n d\xe2n","id_customer_type":"Lo\u1ea1i kh\xe1ch h\xe0ng","avatar":"\u1ea2nh \u0111\u1ea1i di\u1ec7n","total_money":"T\u1ed5ng ti\u1ec1n","total_point":"\u0110i\u1ec3m","total_order":"L\u1ea7n mua","last_time_order":"L\u1ea7n cu\u1ed1i \u0111\u1eb7t h\xe0ng","status":"Tr\u1ea1ng th\xe1i","account_info":"Th\xf4ng tin t\xe0i kho\u1ea3n","new_password":"M\u1eadt kh\u1ea9u","password_confirm":"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u","no_order":"Ch\u01b0a mua h\xe0ng","last_order":"L\u1ea7n cu\u1ed1i mua h\xe0ng: ","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y"},"newsletter":{"id":"M\xe3","add_title":"T\u1ea1o newsletter","title":"Newsletter","fullname":"H\u1ecd v\xe0 t\xean","email":"Email","gender":"Gi\u1edbi t\xednh","status":"Tr\u1ea1ng th\xe1i","is_follow":"Theo d\xf5i","phone":"\u0110i\u1ec7n tho\u1ea1i","from_date":"T\u1eeb ng\xe0y","to_date":"\u0110\u1ebfn ng\xe0y"},"common":{"tt":"aaa %s","hr":"Nh\xe2n s\u1ef1","sell":"B\xe1n h\xe0ng","website":"Website","product":"S\u1ea3n ph\u1ea9m","name":"T\xean","print":"In","male":"Nam","female":"N\u1eef","all":"T\u1ea5t c\u1ea3","crm":"CRM","page":"Trang","edit":"S\u1eeda","delete":"Xo\xe1","view":"Xem","search":"T\xecm","meta_title":"Ti\xeau \u0111\u1ec1","meta_keyword":"T\u1eeb kho\xe1","meta_description":"M\xf4 t\u1ea3","upload_image":"Ch\u1ecdn \u1ea3nh upload","create":"T\u1ea1o","cancel":"Hu\u1ef7","message_delete":"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 kh\xf4ng? Khi \u0111\xe3 xo\xe1 b\u1ea1n kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c l\u1ea1i.","page_is_number":"Trang ph\u1ea3i l\xe0 s\u1ed1","action":"Thao t\xe1c","add":"T\u1ea1o m\u1edbi","keyword":"T\u1eeb kho\xe1","choose":"-- Ch\u1ecdn --","info":"Th\xf4ng tin chung","excel":"Export Excel","pdf":"Export Pdf","save":"L\u01b0u","update":"C\u1eadp nh\u1eadt","data_empty":"\u0110ang c\u1eadp nh\u1eadt","id_province":"T\u1ec9nh/ Th\xe0nh ph\u1ed1","id_district":"Qu\u1eadn/ Huy\u1ec7n","id_ward":"Ph\u01b0\u1eddng/ X\xe3","address":"\u0110\u1ecba ch\u1ec9","facebook":"Facebook","note":"Ghi ch\xfa","close":"\u0110\xf3ng","status":"Tr\u1ea1ng th\xe1i","reset":"Reset","id":"M\xe3","error":"\u0110\xe3 c\xf3 l\u1ed7i b\u1ea1n vui l\xf2ng ki\u1ec3m tra l\u1ea1i d\u1eef li\u1ec7u nh\u1eadp.","move":"Chuy\u1ec3n device"},"message":{"msg_err_limit_image":"B\u1ea1n \u0111\u01b0\u1ee3c \u0111\u0103ng t\u1ed1i \u0111a 15 h\xecnh.","msg_err_ext_image_file":"File type is allowed to upload: .png, .jpg, .gif, jpeg.","msg_err_ext_video_file":"File type is allowed to upload: .mp4, .MP4, .avi, .AVI","msg_err_file_size":"File uploaded error or invalid file type.","msg_err_max_size_upload":"The file upload size limit (1 MB) is exceeded.","msg_err_max_size_video_upload":"The file upload size limit (30 MB) is exceeded.","msg_err_unknown":"A system error has occurred. Please contact your administrator.","msg_err_recaptcha":"Please verify you\u2019re not a robot.","agreed_policy":"You have not agreed with the policy"},"validate_rule":{"minLength_select":"$<1> need to choose at least $<2> m\u1ee5c","maxLength_select":"$<1> can only select up to $<2> m\u1ee5c","least":"$<1> need to choose at least $<2>","most":"$<1> can only select up to $<2>","type_array":"$<1> must be array format","type_number_positive":"$<1> must be positive number format","type_integer":"$<1> must be an integer","type_mobile":"$<1> must be a phone number","equal":"$<1> Please enter the same value again. $<2>","max":"Please enter a value less than or equal to $<0>.","min":"Please enter a value greater than or equal to $<0>.","step":"Please enter a multiple of $<0>.","type_image1":"$<1> must be jpg, jpeg or png","type_date_ddMMYYYY":"$<1> must be a date in the format dd/MM/yyyy","match":"$<1> and $<2> not matched.","required":"This field is required.","remote":"Please fix this field.","type_email":"Please enter a valid email address.","type_url":"Please enter a valid URL.","date":"Please enter a valid date.","dateISO":"Please enter a valid date (ISO).","type_number":"Please enter a valid number.","digits":"Please enter only digits.","equalTo":"Please enter the same value again.","maxLength_input":"Please enter no more than $<0> characters.","minLength_input":"Please enter at least $<0> characters.","rangelength":"Please enter a value between $<0> and $<1> characters long.","range":"Please enter a value between $<0> and $<1>.","invalid_password":"Password invalid.","size_widget_min":"Must be greater than or equal to 200","size_widget_max":"Must be less than or equal to 300"}}')},343:function(e){e.exports=JSON.parse('{"report":{"estimation_data":"Estimation data: ","report_data":"Report data:","report_period":"Report period:","reporter":"Reporter:","report_time":"Report time:","PVSyst_energy_yield":"PVSyst energy yield","energy_yield":"Energy yield","diff_Energy":"Diff. Energy","total":"Total","monthly_engery_yield":"Monthly Energy Yield","monthly_accumulated":"Monthly Accumulated Engery Yield","measured_vs_calculated":"Monthly Engery Yield Chart: Measured vs Calculated","monthly_accumulated_chart":"Monthly Accumulated Energy Yield Chart: Measured vs Calculated","chart_error":"Loss Ratio Chart","report_month":"Report month","energy_yield_today":"Daily Solar Energy Output"},"login":{"login_title":"System login","email":"Email","password":"Password","save":"Login","forgot_password":"Forgot password?","error":"Incorrect login account."},"forgot_password":{"title":"Forgot password","email":"Email","save":"Reset password","error":"Email not exist","success":"Password reset link has just been sent to your email, please check your email."},"reset_password":{"title":"New password","password":"Password","password_confirm":"Re-enter password","save":"Sent","success":"Password reset link has just been sent to your email, please check your email."},"account":{"title":"Account","manage_account":"Manage your Account","logout":"Logout","mail_notify":"Notification config","documents":"Documents","notify":"Notifications","alerts":"Alerts","projects":"Clients","main":"Projects","system":"Systems"},"dashboard":{"title":"Plants","name":"Project","power":"Power","installed_power":"Installed Power","irradiance":"Irradiance","irradiance1":"Irradiance 1","irradiance2":"Irradiance 2","today":"Energy today","lifetime":"Lifetime","revenue":"Revenue","last_updated":"Last updated","power_now":"Power Now","last_month":"Last month","device_name":"Device Name","activePower":"Power Now","activeEnergy":"Energy Lifetime","currentPhaseA":"Current Phase A","currentPhaseB":"Current Phase B","currentPhaseC":"Current Phase C","activeEnergyRate1":"Active Energy Rate 1","activeEnergyRate2":"Active Energy Rate 2","activeEnergyRate3":"Active Energy Rate 3","powerFactor":"Power Factor"},"role":{"add_title":"Create role","title":"Role","description":"Description","name":"Name","id":"ID","edit_title":"Edit role"},"employee":{"password_not_exist":"Old password is incorrect","add_title":"Create user","title":"User","description":"Description","fullname":"Fullname","first_name":"First name","last_name":"Last name","role_name":"Role","id":"ID","status":"Status","email":"Email","phone":"Phone","account_info":"Account information","birthday":"Birthday","avatar":"Avatar","password":"Password","random":"Random","account_role_info":"Ph\xf2ng ban","change_password":"Change password","password_confirm":"Enter new password","current_password":"Old password","new_password":"New password","password_valid_min_8character":"Password minimun 8 character, include uppercase, lowercase, number.","password_incorrect":"Invalid new password re-entered","re_password":"Enter the password","role_data":"You have not selected a role","edit_title":"Edit user"},"permissions":{"title":"Permissions","choose_role":"Role"},"project":{"menu_order":"Menu order","config_yi":"\u03b3(i)","config_po":"Po(i)","total_loss_factor":"Total loss factor","estimation_sensor":"Estimation Sensor","setup_title":"Setup","from_date":"From date","to_date":"To date","value":"Value","jan":"Jan","feb":"Feb","mar":"Mar","apr":"Apr","may":"May","jun":"Jun","jul":"Jul","aug":"Aug","sep":"Sep","oct":"Oct","nov":"Nov","dec":"Dec","yearly_egrade_default":"Yearly Degrade (0-100%)","yearly_egrade_two":"2nd Yearly Degrade (0-100%)","year":"Year","performance_estimate":"Site Performance Estimate - Monthly Output (kWh)","last_updated":"Last updated","site_name":"Site name","edit_title":"Edit project","id_group":"Group","add_title":"Create project","title":"Projects","name":"Project name","power":"Power","irradiance":"Irradiance","today":"Today","lifetime":"Lifetime","revenue":"Revenue","id_project_group":"Project group","device":"Device","description":"Description","address":"Address","lat":"Latitude","lng":"Longitude","installed_date":"Installed at","installed_power":"Installed Power","installed_power_client":"Installed Power Client","avatar":"Thumbnail","device_title":"Add Device","manufacturer":"Manufacturer","model":"Model","serial_number":"Serial Number","device_name":"Name","id_device_type":"Device type","add_device":"Add device","id_private_project":"Main Project","commisioning_date":"Commisioning date","account_manage":"User management","move_device":"Move Device"},"error_level":{"edit_title":"Edit error level","add_title":"Create error level","title":"Error level","name":"Name","description":"Description","avatar":"Thumbnail"},"error_type":{"edit_title":"Edit error type","add_title":"Create error type","title":"Error type","name":"Name","description":"Description","avatar":"Thumbnail"},"error_state":{"edit_title":"Edit error state","add_title":"Create error state","title":"Error state","name":"Name","description":"Description"},"error":{"edit_title":"Edit error","add_title":"Create error","title":"Error","description":"Description","id_error_type":"Type","id_error_level":"Level","id_error_state":"State","id_device_group":"Device group","message":"Message","solutions":"Solutions","error_code":"Error code/ Bit field","field":"Field","info":"Information","code":"Code","device":"Device"},"device_parameter":{"edit_title":"Edit device parameter","add_title":"Create device parameter","title":"Device parameter","description":"Description","id_device_group":"Device","slug":"Key","name":"Name","unit":"Unit"},"device":{"change_mode_auto":"Do you want to change the mode from manual to auto?","change_mode_manual":"Do you want to change the mode from auto to manual?","delete_scheduled":"Delete Schedule Control","device_list":"List Inverter","scheduled":"Schedule","export_limitation_control":"Export Limitation Control","scheduled_control":"Schedule Control","limit_power":"Zero Export","limit_energy":"Limit Energy","auto":"Auto","manual":"Manual","add":"Send","control_calendar":"Control Calendar","message_on":"Do you want to turn it on?","message_off":"Do you want to turn it off?","control":"Control","menu_order":"Menu order","last_month":"Last month","last_updated":"Last updated","id_device":"ID device","add_title":"Create project","title":"Devices","name":"Name","data_name":"Key","value":"Value","unit":"Unit","alert":"Alert","level":"Level","issus":"Issus","opened":"Opened","open_period":"Open period","id_level":"Level","status":"Status","chart":"Chart","device_title":"Device","manufacturer":"Manufacturer","model":"Model","serial_number":"Serial Number","device_name":"Name","id_device_type":"Device type","device":"Device","description":"Description","power":"Power now","energy":"Energy today","lifetime":"Lifetime","id_device_group":"Device group","installed_at":"Installed at","is_share":"Share","is_virtual":"Virtual","delete_device":"Delete Device","add_device_share":"Add device share","id_project":"Project","choose_device_title":"Choose Project","checked":"Checked","last_communication":"Last Communication","last_attempt":"Last Attempt","reload_latest_data":"Reload Latest Data","hardware":"Hardware","alarms":"Alarms","charting":"Charting","id_error_type":"Type","message":"Message"},"activities":{"alert_type":"Type","add_title":"Create project","title":"Alerts","name":"Name","value":"Value","unit":"Unit","alert":"Alert","level":"Level","issus":"Issues","opened":"Opened","open_period":"Open period","id_level":"Level","status":"Status","chart":"Chart","device_title":"Device","manufacturer":"Manufacturer","model":"Model","serial_number":"Serial Number","device_name":"Name","id_device_type":"Device type","device":"Device","description":"Description","add_note":"Add note","note":"Note","id_error_type":"Type","id_error_level":"Level","message":"Message","solutions":"Solutions","close":"Closed","alert_detail":"Alert Details"},"analytics":{"type":"Type","open_period":"Open period","level":"Level","isuse":"Issues","component":"Component","alarm_last_12month":"Alarms - Last 12 months","total":"Total","total_fleet_alerts":"Total Fleet Alerts","last_updated":"Last updated","alarms":"Alarms","opened":"Opened"},"notify":{"project_name":"Project","alert_type":"Type","add_title":"Create project","title":"Notifications","name":"Name","value":"Value","unit":"Unit","alert":"Alert","level":"Level","issus":"Issus","opened":"Opened","open_period":"Open period","id_level":"Level","status":"Status","chart":"Chart","device_title":"Device","manufacturer":"Manufacturer","model":"Model","serial_number":"Serial Number","device_name":"Name","id_device_type":"Device type","device":"Device","description":"Description","add_note":"Add note","note":"Note"},"reports":{"add_title":"Create project","title":"Reports","name":"Name","value":"Value","unit":"Unit","alert":"Alert","level":"Level","issus":"Issus","opened":"Opened","open_period":"Open period","id_level":"Level","status":"Status","chart":"Chart","device_title":"Device","manufacturer":"Manufacturer","model":"Model","serial_number":"Serial Number","device_name":"Name","id_device_type":"Device type","device":"Device","description":"Description","add_note":"Add note","note":"Note"},"project_group":{"edit_title":"Edit project group","add_title":"Create project group","title":"Project group","description":"Description","name":"Name","status":"Status"},"plant":{"project_name":"Project name","site_name":"Site name","address":"Address","installed_power":"Installed Power","commisioning_date":"Commisioning date","instaled_date":"Instaled date","last_updated":"Last updated","power_now":"Power Now","today_production":"Today\'s Production","total_production":"Total Production","today_revenue":"Today\'s Revenue","total_revenue":"Total Revenue","energy_flow":"Energy Flow"},"config":{"alert_trigger":"Alert trigger","pv_model_setting":"PV model setting","data_field":"Data fields","device":"Devices"},"common":{"control":"Control","main":"Projects","config":"Config","now":"Now","day":"Day","month":"Month","year":"Year","yes":"Yes","no":"No","delete_all":"Delete all alerts","DAY":"day","HOUR":"hour","MINUTE":"minute","NOW":"now","plant":"Plants","dashboard":"Dashboard","device":"Devices","analytics":"Analytics","alert":"Alarms","report":"Reports","project":"Projects","close":"Close","message_delete":"Do you want to delete?","message_delete_all":"Are you sure delete all alerts selected?","date_from":"Date from","date_to":"Date to","choose":"-- Choose --","info":"Basic information","cancel":"Cancel","create":"Create","status":"Status","action":"Action","system":"Systems","reset":"Reset","update":"Updated","save":"Save","data_empty":"Data empty","id":"ID","all":"All","crm":"CRM","page":"Page","edit":"Edit","delete":"Delete","view":"View","search":"Search","meta_title":"Meta title","meta_keyword":"Meta keyword","meta_description":"Meta description","upload_image":"Select image upload","move":"Move device"},"message":{"msg_err_ext_image_file":"File type is allowed to upload: .png, .jpg, .gif, jpeg.","msg_err_file_size":"File uploaded error or invalid file type.","msg_err_max_size_upload":"The file upload size limit (1 MB) is exceeded.","msg_err_unknown":"A system error has occurred. Please contact your administrator.","msg_err_recaptcha":"Please verify you\u2019re not a robot.","agreed_policy":"You have not agreed with the policy"},"validate_rule":{"minLength_input":"$<1> kh\xf4ng th\u1ec3 nh\u1ecf h\u01a1n $<2> k\xfd t\u1ef1","minLength_select":"$<1> c\u1ea7n ch\u1ecdn \xedt nh\u1ea5t $<2> m\u1ee5c","maxLength_input":"$<1> kh\xf4ng th\u1ec3 v\u01b0\u1ee3t qu\xe1 $<2> k\xfd t\u1ef1","maxLength_select":"$<1> ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn t\u1ed1i \u0111a $<2> m\u1ee5c","least":"$<1> c\u1ea7n ch\u1ecdn \xedt nh\u1ea5t $<2>","most":"$<1> ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn t\u1ed1i \u0111a $<2>","type_array":"$<1> ph\u1ea3i l\xe0 \u0111\u1ecbnh d\u1ea1ng m\u1ea3ng","type_number":"$<1> ph\u1ea3i l\xe0 \u0111\u1ecbnh d\u1ea1ng s\u1ed1","type_number_positive":"$<1> ph\u1ea3i l\xe0 \u0111\u1ecbnh d\u1ea1ng s\u1ed1 d\u01b0\u01a1ng","type_integer":"$<1> ph\u1ea3i l\xe0 s\u1ed1 nguy\xean","type_mobile":"$<1> ph\u1ea3i l\xe0 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","type_email":"$<1> ph\u1ea3i l\xe0 \u0111\u1ecbnh d\u1ea1ng h\u1ed9p th\u01b0","type_url":"$<1> ph\u1ea3i l\xe0 \u0111\u1ecbnh d\u1ea1ng URL","required":"$<1> not be empty","equal":"$<1> ph\u1ea3i b\u1eb1ng $<2>","min":"$<1> kh\xf4ng th\u1ec3 nh\u1ecf h\u01a1n $<2>","max":"$<1> kh\xf4ng th\u1ec3 l\u1edbn h\u01a1n $<2>","step":"B\u01b0\u1edbc $<1> ph\u1ea3i l\xe0 $<2>","type_image1":"$<1> ph\u1ea3i l\xe0 \u0111\u1ecbnh h\u1ea1ng jpg, jpeg ho\u1eb7c png","type_date_ddMMYYYY":"$<1> ph\u1ea3i l\xe0 ng\xe0y c\xf3 \u0111\u1ecbnh d\u1ea1ng dd/MM/yyyy","invalid_password":"$<1> \xedt nh\u1ea5t 4 k\xed t\u1ef1 v\xe0 nhi\u1ec1u nh\u1ea5t 20 k\xed t\u1ef1","match":"$<1> v\xe0 $<2> ph\u1ea3i tr\xf9ng nhau"}}')},344:function(e,t,a){"use strict";a.d(t,"a",(function(){return Sr}));var i=a(4),s=a(5),n=a(7),c=a(6),r=a(2),l=a.n(r),o=a(32),d=a(23),h=a(52),m=a(0),u=function(e){var t=e.children;return Object(m.jsx)("div",{children:t})},p=a(9),j=a(26),b=a(1),v=a(3),_=a(15);function g(){var e,t=this,a=this.props,i=a.t,s=a.i18n,n=this.state,c=n.menuProfile,r=n.employee,l=n.totalAlerts,o=r.languages,h=null,u=null,p=localStorage.getItem(v.a.COMMON.ACCESS_PARAM),g=JSON.parse(b.a.base64Decrypt(p));if(b.a.isArrayData(o)){var f=b.a.find(o,"is_default",1);b.a.isObjectEmpty(f)||(u=Object(m.jsxs)(d.c,{to:"/",className:"text-uppercase",onClick:function(e){t.setMenuProfile(e,"language"),e.preventDefault()},children:[Object(m.jsx)("img",{src:"/"+f.icon,alt:f.name}),f.iso_code]})),h=o.map((function(e,a){return Object(m.jsxs)(d.c,{to:"/",activeClassName:1===e.is_default?"active-lang":"",onClick:function(a){s.changeLanguage(e.iso_code),t.setMenuProfile(a,""),t.setLanguage(a,e.iso_code),a.preventDefault()},children:[Object(m.jsx)("img",{src:"/"+e.icon,alt:e.name})," ",e.name," "]},a)}))}return Object(m.jsx)("div",{className:"header",children:Object(m.jsx)("div",{className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsx)("div",{className:"logo",children:Object(m.jsx)(d.c,{to:b.a.isBlank(r.type)||"main"!=r.type?"/dashboard":"/main",children:Object(m.jsx)("img",{src:"/logo.png",alt:"Logo"})})})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("div",{className:"menu-top",children:Object(m.jsxs)("ul",{ref:this.wrapperRef,children:[b.a.isObjectEmpty(g)||b.a.isBlank(g["/notify"])||!_.a.getPermisson(g["/notify"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsxs)(d.c,{className:"round",to:"/notify",children:[Object(m.jsx)("span",{className:"icon icon-alert"}),Object(m.jsx)("var",{className:"notification",children:l>=100?"99+":l})]})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{className:"avatar",to:"/user",children:Object(m.jsx)("span",{children:null!==r.avatar?Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+r.avatar,alt:"Avatar"}):Object(m.jsx)("var",{className:"icon-man-people-streamline-user"})})})}),Object(m.jsx)("li",{className:"username",children:Object(m.jsx)(d.c,{className:"avatar",to:"/user",children:r.full_name})}),Object(m.jsxs)("li",{children:[Object(m.jsx)(d.c,{onClick:function(e){t.setMenuProfile(e,"setup"),e.preventDefault()},className:"round",to:"#",children:Object(m.jsx)("span",{className:"icon icon-settings-streamline-1"})}),"setup"===c?Object(m.jsx)("ul",{className:"on",children:Object(m.jsxs)("li",{children:[Object(m.jsx)("div",{className:"item",children:Object(m.jsxs)("div",{className:"main-item",children:[Object(m.jsx)("div",{className:"header-avatar",children:null!==r.avatar?Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+r.avatar,alt:"Avatar"}):Object(m.jsx)("var",{className:"icon-man-people-streamline-user"})}),Object(m.jsxs)("div",{className:"channel-container",children:[Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:r.full_name})}),Object(m.jsx)("p",{children:Object(m.jsx)(d.c,{to:"/user",children:i("account.manage_account")})})]})]})}),Object(m.jsxs)("div",{className:"item-group",children:[b.a.isObjectEmpty(g)||b.a.isBlank(g["/main"])||!_.a.getPermisson(g["/main"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsxs)(d.c,{onClick:function(e){t.setClosedMenuDropdown(e)},to:"/main",children:[Object(m.jsx)("span",{className:"icon-bars"}),i("account.main")]}),b.a.isObjectEmpty(g)||b.a.isBlank(g["/dashboard"])||!_.a.getPermisson(g["/dashboard"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsxs)(d.c,{onClick:function(e){t.setClosedMenuDropdown(e)},to:"/dashboard",children:[Object(m.jsx)("span",{className:"icon-list-unordered"})," ",i("account.projects")]}),b.a.isObjectEmpty(g)||b.a.isBlank(g["/system"])||!_.a.getPermisson(g["/system"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsxs)(d.c,{onClick:function(e){t.setClosedMenuDropdown(e)},to:"/system",children:[Object(m.jsx)("span",{className:"icon icon-settings-streamline-1"})," ",i("account.system")]}),b.a.isObjectEmpty(g)||b.a.isBlank(g["/user/config-receive-email"])||!_.a.getPermisson(g["/user/config-receive-email"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsxs)(d.c,{onClick:function(e){t.setClosedMenuDropdown(e)},to:"/user/config-receive-email",children:[Object(m.jsx)("span",{className:"icon-email-mail-streamline"})," ",i("account.mail_notify")]}),Object(m.jsxs)(d.c,{onClick:function(e){t.setClosedMenuDropdown(e)},to:"/user/documents",children:[Object(m.jsx)("span",{className:"icon icon-book"})," ",i("account.documents")]}),Object(m.jsxs)(d.c,(e={to:"/",onClick:function(e){t.setClosedMenuDropdown(e)}},Object(j.a)(e,"onClick",this.logout.bind(this)),Object(j.a)(e,"children",[Object(m.jsx)("span",{className:"icon icon-logout"})," ",i("account.logout")]),e))]})]})}):""]}),Object(m.jsxs)("li",{children:[u,"language"===c&&b.a.isArrayData(o)&&o.length>1?Object(m.jsx)("ul",{className:"on language",children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"item-group",children:h})})}):""]})]})})})]})})})}var f=a(874),x=a(11),O=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getNotifySize",value:function(e,t){try{new x.a(!1).post(v.a.URL.CLIENT_NOTIFY.NOTIFY_SIZE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_NOTIFY.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_NOTIFY.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"closeAlert",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_NOTIFY.CLOSE_ALL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_NOTIFY.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),y=(a(498),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).menuCollapseSidebar=function(){var e=n.state.menu_collapse,t=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),a=JSON.parse(b.a.base64Decrypt(t));b.a.isObjectEmpty(a)||(e=!e,n.setState({menu_collapse:e},(function(){e?document.body.classList.remove("menu_collapse"):document.body.classList.add("menu_collapse")})))},n.setLanguage=function(e,t){var a=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),i=JSON.parse(b.a.base64Decrypt(a)),s=i.languages;if(b.a.isArrayData(s)){var n=b.a.find(s,"iso_code",t);if(!b.a.isObjectEmpty(i)){i.id_language=n.id,i.lang=n.iso_code;for(var c=0;c<s.length;c++)i.id_language===s[c].id?s[c].is_default=1:s[c].is_default=0}var r=JSON.stringify(i);localStorage.setItem(v.a.COMMON.EMPLOYEE_INFO,b.a.base64Encrypt(r)),window.location.reload()}},n.setMenuProfile=function(e,t){n.setState({menuProfile:t})},n.setClosedMenuDropdown=function(){n.setState({menuProfile:""})},n.handleClickOutside=function(e){var t=e.target,a=n.state.menuProfile,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a&&i.setState({menuProfile:""})},n.jsxTemplate=g,n.state={curItem:{},menuProfile:"",menu_collapse:!0,totalAlerts:0},n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),t=JSON.parse(b.a.base64Decrypt(e));this.setState({employee:t})}},{key:"getNotifySize",value:function(){var e=this,t=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),a=JSON.parse(b.a.base64Decrypt(t)),i={id_language:a.id_language,id_employee:a.id_employee};O.instance.getNotifySize(i,(function(t,a){a>0?e.setState({totalAlerts:a}):e.setState({totalAlerts:0})}))}},{key:"componentDidMount",value:function(){this.getNotifySize(),document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"logout",value:function(){localStorage.clear(),window.location.href="/"}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component)),M=Object(f.a)("common")(y),N=(a(502),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(m.jsx)("h1",{children:"Footer "})}}]),a}(l.a.Component)),C=a(347),k=Object(h.f)((function(e){var t=e.location,a=Object(C.a)(e,["location"]),i=t.pathname===a.to?"active":"";return Object(m.jsx)(d.b,{className:i,to:a.to,children:a.children})}));function D(){var e=this.state.permissions,t=null,a=this.props.t;return e=e.filter((function(e){return e.auth>0})),b.a.isArrayData(e)&&(t=e.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)(k,{to:e.module_path,children:[Object(m.jsx)("var",{className:e.class_icon}),"/system"===e.module_path?Object(m.jsx)("span",{children:"Dashboard"}):Object(m.jsx)("span",{children:e.title})]})},t)}))),Object(m.jsxs)("div",{className:"sidebar",children:[Object(m.jsx)("h2",{children:a("common.system")}),Object(m.jsx)("ul",{children:t})]})}var w=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=D,n.state={permissions:[]},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this.state.permissions,t=localStorage.getItem(v.a.COMMON.ACCESS_PARAM),a=JSON.parse(b.a.base64Decrypt(t));e=Object.values(a).filter((function(e){return"system"===e.group_type})),this.setState({permissions:e})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component),A=Object(f.a)("common")(w),I=function(e){var t=e.children;return Object(m.jsxs)("div",{children:[Object(m.jsx)(M,{}),Object(m.jsx)(A,{}),Object(m.jsx)("div",{id:"main",children:t}),Object(m.jsx)(N,{})]})};function P(){var e=this,t=this.state,a=t.dataProjects,i=t.des,s=this.props.t,n=window.location.pathname,c=n.split("/");return c&&(i=c[c.length-1],i=["devices","activities","analytics","reports"].includes(i)?i:null),Object(m.jsxs)("div",{className:"sidebar-project",children:[Object(m.jsx)("h2",{children:s("common.project")}),Object(m.jsx)("div",{className:"sidebar-content",children:Object(m.jsx)("ul",{children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{onClick:e.showChildMenu.bind(e,a),className:"group",children:[Object(m.jsx)("span",{className:"icon-list-unordered"})," ",t.name," ",Object(m.jsx)("div",{className:"scal-ex",children:Object(m.jsx)("var",{className:t.show_child?"icon-angle-right rotate":"icon-angle-right"})})]}),Object(m.jsx)("ul",{children:b.a.isArrayData(t.dataChilds)&&t.show_child?t.dataChilds.map((function(t,a){var s=t.hash_id+(i?"/"+i:"");return Object(m.jsx)("li",{children:Object(m.jsxs)(d.c,{isActive:function(){return["/project/"+t.hash_id,"/project/"+t.hash_id+"/dashboard","/project/"+t.hash_id+"/devices","/project/"+t.hash_id+"/activities","/project/"+t.hash_id+"/analytics","/project/"+t.hash_id+"/reports"].includes(n)},onClick:function(a){e.setActiveLink(t.hash_id),a.preventDefault()},to:"/project/"+s,children:[Object(m.jsx)("span",{className:"icon-building-o"})," ",Object(m.jsx)("label",{children:t.name})]})},a)})):""})]},a)})):""})})]})}var Y=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getProjectSideBar",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_PROJECT.PROJECT_SIDEBAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListProjectByEmplpyee",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_PROJECT.LIST_PROJECT_BY_EMPLOYEE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListPlantSummary",value:function(e,t){try{new x.a(!1).post(v.a.URL.CLIENT_PROJECT.LIST_PLANT_SUMMARY,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getAllProjectByEmployeeId",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_PROJECT.LIST_SCOPE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),E=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).setActiveLink=function(e){var t=n.state.des,a=window.location.pathname.split("/");a&&(t=a[a.length-1],t=["devices","activities","analytics","reports","dashboard","config"].includes(t)?t:null);var i=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),s=JSON.parse(b.a.base64Decrypt(i));n.props.history.push({pathname:(b.a.isBlank(s.type)||"main"!=s.type?"/project/":"/private/")+e+(b.a.isBlank(t)?"":"/"+t)}),n.setState({hash_id:e||null,des:t})},n.showChildMenu=function(e){var t=n.state.dataProjects,a=t[e];b.a.isObjectEmpty(a)||(t[e].show_child=!t[e].show_child,n.setState({dataProjects:t}))},n.jsxTemplate=P,n.state={permissions:[],dataProjects:[],hash_id:null,des:null},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),a=JSON.parse(b.a.base64Decrypt(t)),i={id_language:a.id_language,id_employee:a.id_employee};Y.instance.getProjectSideBar(i,(function(t,a){b.a.isArrayData(t)?e.setState({dataProjects:t}):e.setState({dataProjects:[]})}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component),L=Object(f.a)("common")(E),S=Object(h.f)(L),T=function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(M,{parent:e.parent}),Object(m.jsx)(S,{}),Object(m.jsx)("div",{id:"main",children:e.children})]})};function R(){var e=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),t=JSON.parse(b.a.base64Decrypt(e)),a=this.props.t,i=localStorage.getItem(v.a.COMMON.ACCESS_PARAM),s=JSON.parse(b.a.base64Decrypt(i));return Object(m.jsxs)("div",{className:"sidebar-profile",children:[Object(m.jsxs)("div",{className:"title",children:[Object(m.jsx)("div",{className:"avatar",children:Object(m.jsx)("span",{children:null!==t.avatar?Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+t.avatar,alt:"Avatar"}):Object(m.jsx)("var",{className:"icon-man-people-streamline-user"})})}),Object(m.jsx)("h2",{children:t.full_name}),Object(m.jsx)("p",{children:a("account.manage_account")})]}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsxs)(k,{to:"/notify",children:[Object(m.jsx)("var",{className:"icon icon-alert"}),a("account.alerts")]})}),Object(m.jsx)("li",{children:Object(m.jsxs)(k,{to:"/user/documents",children:[Object(m.jsx)("var",{className:"icon icon-book"}),a("account.documents")]})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/user/config-receive-email"])||!_.a.getPermisson(s["/user/config-receive-email"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsxs)(k,{to:"/user/config-receive-email",children:[Object(m.jsx)("var",{className:"icon-email-mail-streamline"}),a("account.mail_notify")]})}),Object(m.jsx)("li",{children:Object(m.jsxs)(k,{to:"/",onClick:this.logout.bind(this),children:[Object(m.jsx)("var",{className:"icon icon-logout"}),a("account.logout")]})})]})})]})}a(503);var F=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=R,n.state={},n}return Object(s.a)(a,[{key:"logout",value:function(){localStorage.clear(),window.location.href="/"}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component),H=Object(f.a)("common")(F),B=function(e){var t=e.children;return Object(m.jsxs)("div",{children:[Object(m.jsx)(M,{}),Object(m.jsx)("div",{id:"main-user",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)(H,{})}),Object(m.jsx)("div",{className:"col-md-9",children:t})]})})})]})};function U(){var e=this,t=this.state,a=t.dataProjects,i=t.des,s=this.props.t,n=window.location.pathname,c=n.split("/");return c&&(i=c[c.length-1],i=["devices","activities","analytics","reports","config","control"].includes(i)?i:null),Object(m.jsxs)("div",{className:"sidebar-project",children:[Object(m.jsx)("h2",{children:s("common.main")}),Object(m.jsx)("div",{className:"sidebar-content",children:Object(m.jsx)("ul",{children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{onClick:e.showChildMenu.bind(e,a),className:"group",children:[Object(m.jsx)("span",{className:"icon-list-unordered"})," ",t.name," ",Object(m.jsx)("div",{className:"scal-ex",children:Object(m.jsx)("var",{className:t.show_child?"icon-angle-right rotate":"icon-angle-right"})})]}),Object(m.jsx)("ul",{children:b.a.isArrayData(t.dataChilds)&&t.show_child?t.dataChilds.map((function(t,a){var s=t.hash_id+(i?"/"+i:"");return Object(m.jsx)("li",{children:Object(m.jsxs)(d.c,{isActive:function(){return["/private/"+t.hash_id,"/private/"+t.hash_id+"/dashboard","/private/"+t.hash_id+"/devices","/private/"+t.hash_id+"/activities","/private/"+t.hash_id+"/analytics","/private/"+t.hash_id+"/reports","/private/"+t.hash_id+"/config","/private/"+t.hash_id+"/control"].includes(n)},onClick:function(a){e.setActiveLink(t.hash_id),a.preventDefault()},to:t.main_module_path+"/"+s,children:[Object(m.jsx)("span",{className:"icon-building-o"})," ",Object(m.jsx)("label",{children:t.name})]})},a)})):""})]},a)})):""})})]})}var V=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).setActiveLink=function(e){var t=n.state.des,a=window.location.pathname.split("/");a&&(t=a[a.length-1],t=["devices","activities","analytics","reports","dashboard","config","control"].includes(t)?t:null),n.props.history.push({pathname:"/private/"+e+(b.a.isBlank(t)?"":"/"+t)}),n.setState({hash_id:e||null,des:t})},n.showChildMenu=function(e){var t=n.state.dataProjects,a=t[e];b.a.isObjectEmpty(a)||(t[e].show_child=!t[e].show_child,n.setState({dataProjects:t}))},n.jsxTemplate=U,n.state={permissions:[],dataProjects:[],hash_id:null,des:null},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),a=JSON.parse(b.a.base64Decrypt(t)),i={id_language:a.id_language,id_employee:a.id_employee};Y.instance.getProjectSideBar(i,(function(t,a){b.a.isArrayData(t)?e.setState({dataProjects:t}):e.setState({dataProjects:[]})}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component),W=Object(f.a)("common")(V),q=Object(h.f)(W),z=function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(M,{parent:e.parent}),Object(m.jsx)(q,{parent:e.parent,baseParam:e.baseParam}),Object(m.jsx)("div",{id:"main",children:e.children})]})},G=a(10),$=a.n(G),K=a(16),J=a(112),X=a(42),Z=a.n(X),Q=a(98),ee=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;if(Object(i.a)(this,a),(s=t.call(this,e)).setValidateMessage=function(e,t,a){var i=Z()("#"+a);if("undefined"!==typeof e&&null!==e&&0!==Object.keys(e).length){t="boolean"===typeof t&&t;var n=".validate-message",c=".input-error",r=".input-error",l=function(e,t){var a=t.find(n);a.length>0&&a.remove()},o=function(e,t,a){if("string"===typeof e&&e.length>0){var i=function(e){var t=document.createElement("p");return t.classList.add(n.replace(".","")),t.innerText=e,t}(e);l(0,a),t[0].classList.add(c.replace(".",""));var s=t[0].nextElementSibling;"SELECT"===t[0].nodeName&&s.classList.add(c.replace(".","")),a[0].appendChild(i),a[0].classList.add(r.replace(".",""))}else{l(0,a),t[0].classList.remove(c.replace(".","")),a[0].classList.remove(r.replace(".",""));var o=t[0].nextElementSibling;"SELECT"===t[0].nodeName&&o.classList.remove(c.replace(".",""))}};!function(e){for(var a in t||s.removeAllValidateMessage(),e){var n=e[a],c=Z()('[name="'+a+'"]');if(d=i,Z.a.trim(d.html())&&(c=i.find('[name="'+a+'"]')),c.length>0){var r=c.parents(".mb-3");if(r.length>0)o(n,c,r);else{var l=c.parent();o(n,c,l)}}}var d}(e)}},s.removeAllValidateMessage=function(){Z()(".validate-message").length&&Z()(".validate-message").remove(),Z()(".input-error").length&&Z()(".input-error").removeClass("input-error"),Z()(".select2-error").length&&Z()(".select2-error").removeClass("select2-error")},s.state={currentMode:v.a.SCREEN_MODE.VIEW},s.jsxTemplate=function(){},s.searchParam={},e.baseParam&&e.baseParam.match&&(s.params=e.baseParam.match.params,s.path=e.baseParam.match.path),-1===v.a.SITE_URL.PUBLIC_URL.indexOf(window.location.pathname)){if(s.setEmployeeInfo(),b.a.isObjectEmpty(e.auth))return window.location.href=v.a.SITE_URL.LOGIN,Object(J.a)(s);var n=null;e.baseParam&&e.baseParam.match&&(s.params=e.baseParam.match.params,n=e.baseParam.match.path);var c=e.auth[n];if(s.permission=e.auth,!b.a.isBlank(s.path)){if(!c)return window.location.href=v.a.SITE_URL.ERROR_PAGE,Object(J.a)(s);if(s.actions=c.auth,c.auth<=0)return window.location.href=v.a.SITE_URL.ERROR_PAGE,Object(J.a)(s)}}if(s.constructor===a)throw new TypeError("Can not construct abstract class.");return s}return Object(s.a)(a,[{key:"setEmployeeInfo",value:function(){var e=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),t=JSON.parse(b.a.base64Decrypt(e));b.a.isObjectEmpty(t)&&(localStorage.clear(),window.location.href=v.a.SITE_URL.LOGIN);var a=1*t.timeout;if((new Date).getTime()>a)return localStorage.clear(),window.location.href=v.a.SITE_URL.LOGIN,!1;this.employee=t}},{key:"render",value:function(){return this.jsxTemplate.call(this)}},{key:"setValidationError",value:function(e,t){"undefined"===typeof e||null===e||Object.keys(e).length<=0||Z.a.each(e,(function(e,a){var i=Z()('[name="'+e+'"]');if("undefined"!==t&&null!==t&&""!==t){var s=Z()("."+t);(!s||s.length<=0)&&(s=Z()("#"+t)),i=s.find('[name="'+e+'"]')}i.length&&(a&&null!==a?(i.removeClass("input-error"),i.addClass("input-error"),i.next(".validate-message").remove(),i.after('<p class="validate-message">'+a+"</p>")):(i.removeClass("input-error"),i.next(".validate-message").remove()))}))}},{key:"toast",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top-right",i="top-right";switch("undefined"!==typeof a&&(i=a),t){case"error":Q.b.error(e,{position:i,autoClose:!0,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:10,limit:1});break;case"warn":Q.b.warn(e,{position:i,autoClose:!0,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:10});break;default:Q.b.info(e,{position:i,autoClose:!0,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:10})}Q.b.clearWaitingQueue()}},{key:"handleSearchInputChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s.index=1,s.offset=0,"checkbox"!==t.type&&(isNaN(i)||i.startsWith("0")||b.a.isBlank(i)||(i*=1)),s[a]=i,this.setState({searchParam:s})}}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.curItem;s[a]=e.target.validity.valid?i:s[a],this.setState({curItem:s})}}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.curItem;s[a]=i,this.setState({curItem:s})}}}]),a}(l.a.Component),te=a(107),ae=a.n(te),ie=(a(743),a.p+"static/media/logo-color.63c0e0fc.png"),se=function(e){return Object(m.jsxs)(l.a.Fragment,{children:[""!==e.label&&"undefined"!==typeof e.label?Object(m.jsx)("label",{className:"control-label",children:e.label}):null,Object(m.jsx)("div",{className:"switch",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{id:e.inputId,type:"checkbox",name:e.inputName,onChange:e.onChange,disabled:e.disabled,onKeyPress:b.a.rEnter,checked:1===e.checked}),Object(m.jsx)("span",{className:"lever switch-col-darkblue"})]})})]})},ne=function(e){return Object(m.jsxs)(l.a.Fragment,{children:[Object(m.jsx)("input",{id:e.inputId,type:"checkbox",name:e.inputName,className:null!==e.inputClass&&void 0!==typeof e.inputClass?e.inputClass:"filled-in chk-col-blue",onChange:e.onChange,onClick:e.onClick,disabled:!b.a.isBlank(e.disabled)&&e.disabled,readOnly:!b.a.isBlank(e.readOnly)&&e.readOnly,onKeyPress:b.a.rEnter,value:e.value,checked:1===e.checked}),Object(m.jsx)("label",{htmlFor:e.inputId,className:"chkbox-gray-border "+(e.labelClass?e.labelClass:""),children:""!==e.label&&"undefined"!==typeof e.label&&e.label})]})},ce=function(e){return Object(m.jsxs)(l.a.Fragment,{children:[""!==e.label&&"undefined"!==typeof e.label&&Object(m.jsxs)("label",{className:"control-label",children:[e.label,"required"===e.required?Object(m.jsx)("span",{className:"required",children:"*"}):null]}),e.labelIcon&&Object(m.jsx)("i",{className:e.iconClass,onClick:e.iconClick,"aria-hidden":"true"}),Object(m.jsx)("input",{id:e.inputId?e.inputId:null,style:e.style?e.style:null,className:e.inputClass,name:e.inputName?e.inputName:"",maxLength:"undefined"!==typeof e.maxLength?e.maxLength:null,value:null===e.value||"undefined"===typeof e.value?"":e.value,placeholder:e.placeholder,onChange:e.onChange,tabIndex:e.tabindex,disabled:e.disabled,onKeyPress:b.a.rEnter,onKeyUp:e.onKeyUp,onFocus:e.onFocus,onClick:e.onClick,onKeyDown:e.onKeyDown,autoComplete:"off",onBlur:e.onBlur,readOnly:!!e.readOnly&&e.readOnly,pattern:null===e.pattern||"undefined"===typeof e.pattern?".*":e.pattern}),""!==e.note&&"undefined"!==typeof e.note&&Object(m.jsxs)("span",{className:"input-group-text",children:["\xa0",e.note]})]})},re=function(e){return Object(m.jsxs)(l.a.Fragment,{children:[""!==e.label&&"undefined"!==typeof e.label?Object(m.jsxs)("label",{className:"control-label",children:[e.label,"required"===e.required?Object(m.jsx)("span",{className:"required",children:"*"}):null]}):null,e.labelIcon&&Object(m.jsx)("i",{className:e.iconClass||null,"aria-hidden":"true"}),Object(m.jsx)("input",{id:e.inputId?e.inputId:null,type:"password",className:e.inputClass,name:e.inputName,value:null===e.value||"undefined"===typeof e.value?"":e.value,placeholder:e.placeholder,onChange:e.onChange,tabIndex:e.tabindex,disabled:e.disabled,maxLength:"undefined"!==typeof e.maxLength?e.maxLength:null,onBlur:e.onBlur&&"function"===typeof e.onBlur?e.onBlur:null,onKeyPress:e.onKeyPress&&"function"===typeof e.onKeyPress?e.onKeyPress:null,autoComplete:"false"})]})},le=function(e){return Object(m.jsxs)(l.a.Fragment,{children:[""!==e.label&&"undefined"!==typeof e.label&&null!==e.label?Object(m.jsxs)("label",{className:"control-label",children:[e.label,"required"===e.required?Object(m.jsx)("span",{className:"required",children:"*"}):null,e.onTranslateClick&&"function"===typeof e.onTranslateClick&&e.auth?Object(m.jsx)("button",{disabled:e.disabledTranslateBtn,className:"btn translate-field",onClick:e.onTranslateClick,type:"button",children:Object(m.jsx)("i",{className:"fa fa-language"})}):null]}):null,Object(m.jsx)("textarea",{rows:e.rows,id:e.inputId?e.inputId:null,className:e.inputClass,name:e.inputName,value:null===e.value||"undefined"===typeof e.value?"":e.value,placeholder:e.placeholder,onChange:e.onChange,onBlur:e.onBlur,disabled:e.disabled,tabIndex:e.tabindex,maxLength:"undefined"!==typeof e.maxLength?e.maxLength:null,style:e.style||null})]})},oe=function(e){return Object(m.jsx)(l.a.Fragment,{children:Object(m.jsxs)("button",{id:e.btnId,disabled:!e.auth&&void 0!==e.auth||e.auth&&e.disabled,className:e.className,onClick:e.onClick,type:"button","aria-hidden":"false",title:e.title,children:[null!==e.iClass&&void 0!==typeof e.iClass?Object(m.jsx)("i",{className:e.iClass}):null,null!==e.text&&void 0!==typeof e.text?e.text:null]})})};function de(){var e=this,t=this.props.t,a=this.state.curItem;return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)("div",{className:"main-login",children:Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"main-form",children:[Object(m.jsx)("div",{className:"logo",children:Object(m.jsx)(d.c,{to:"/",children:Object(m.jsx)("img",{src:ie,alt:"Solarmon"})})}),Object(m.jsx)("h1",{children:t("login.login_title")}),Object(m.jsx)("div",{className:"form",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("login.email"),inputClass:"form-control",inputId:"email",inputName:"email",value:a.email,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(re,{label:t("login.password"),inputClass:"form-control",inputId:"password",inputName:"password",value:a.password,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:30})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(d.c,{to:"/forgot-password",children:t("login.forgot_password")})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)(oe,{onClick:this.onSaveAction.bind(this),className:"btn btn-save",text:t("login.save"),title:t("login.save")})})]})})]})})}),Object(m.jsx)(ae.a,{style:{width:"100%",height:"100%"},params:{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{events:{onclick:{enable:!0,mode:"push"}},modes:{push:{particles_nb:1}}},retina_detect:!0}})]})}var he=a(330),me=a.n(he),ue=function(){function e(){if(Object(i.a)(this,e),this.setRule===e.prototype.setRule)throw new TypeError("Please implement abstract method setRule.");if(this.setAlias===e.prototype.setAlias)throw new TypeError("Please implement abstract method setAlias.");this.v=new me.a}return Object(s.a)(e,[{key:"validateOne",value:function(e,t,a){try{this.setAlias(),this.setRule();var i=this;return new Promise((function(a,s){i.v.validateOne(e,t,(function(e,i){a(e?Object(j.a)({},t,e.message):Object(j.a)({},t,null))}))}))}catch(s){a(s)}}},{key:"FLValidationAll",value:function(e,t){try{this.setAlias(),this.setRule();var a=this;return new Promise((function(t,i){a.v.FLValidateAll(e,(function(e){if(Object.keys(e).length>0){var a=0;for(var i in e){null===e[i]&&a++}a===Object.keys(e).length?t(null):t(e)}else t(null)}))}))}catch(i){console.log(i),t(i)}}},{key:"setRule",value:function(){}},{key:"setAlias",value:function(){}},{key:"addRuleForField",value:function(e,t,a,i,s){i&&(i=b.a.stringAssign(i,[e,s,a],/\$\<([^{}]*?)\>/g)),this.v.addRule(e,t,a),this.v.setMsg(e,t,i)}}]),e}(),pe=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("email","trim",!0),this.addRuleForField("email","required",!0,this.trans("validate_rule.required"),this.trans("login.email")),this.addRuleForField("email","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("login.email")),this.addRuleForField("email","type","email",this.trans("validate_rule.type_email"),this.trans("login.email")),this.addRuleForField("password","trim",!0),this.addRuleForField("password","required",!0,this.trans("validate_rule.required"),this.trans("login.password"))}},{key:"setAlias",value:function(){this.v.setAlias({email:this.trans("login.email"),password:this.trans("login.password")})}}]),a}(ue),je=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getLogin",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.LOGIN,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i,a.status,a.mess)}}))}catch(a){t({})}}},{key:"getForgotPassword",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.FORGOT_PASSWORD,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t([])}}},{key:"getResetPassword",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.RESET_PASSWORD,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i,a.status,a.mess)}}))}catch(a){t([])}}},{key:"getDetailEmployee",value:function(e,t){try{new x.a(!1).post(v.a.URL.EMPLOYEE.DETAIL_UPDATE_PROFILE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(a.status,a.mess,i)}}))}catch(a){t([])}}},{key:"saveUpdateProfile",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.SAVE_UPDATE_PROFILE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"employeeChangePassword",value:function(e,t){try{new x.a(!1).post(v.a.URL.EMPLOYEE.CHANGE_PASSWORD,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListProjectConfigMail",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.LIST_CONFIG_MAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListAll",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.LIST_ALL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.EMPLOYEE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"updateStatusMailConfig",value:function(e,t){try{new x.a(!1).post(v.a.URL.EMPLOYEE.UPDATE_STATUS_MAIL_CONFIG,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.EMPLOYEE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t([])}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),be=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=de,n.state={curItem:{},lang:"en"},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=Object(K.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i={email:t.email,password:b.a.SHA3(t.password),lang:this.state.lang},s=new pe(this.props),e.next=5,s.FLValidationAll(t);case 5:if(!(n=e.sent)){e.next=9;break}return this.setValidateMessage(n),e.abrupt("return");case 9:c=this.props.t,je.instance.getLogin(i,(function(e){if(b.a.isObjectEmpty(e))a.toast(c("login.error"),"error");else{a.setAccessParam(e);var t=e.permissions,i=t["/dashboard"],s=t["/main"];!b.a.isObjectEmpty(s)&&s.auth>0?window.location.href=v.a.SITE_URL.DEFAULT_MAIN:!b.a.isObjectEmpty(i)&&i.auth>0&&(window.location.href=v.a.SITE_URL.DEFAULT_PAGE)}}),!1);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAccessParam",value:function(e){var t=e.token,a=e.permissions,i="dashboard",s=a["/dashboard"],n=a["/main"];!b.a.isObjectEmpty(n)&&n.auth>0?i="main":!b.a.isObjectEmpty(s)&&s.auth>0&&(i="dashboard"),localStorage.setItem(v.a.COMMON.TOKEN,t);var c=JSON.stringify(a);localStorage.setItem(v.a.COMMON.ACCESS_PARAM,b.a.base64Encrypt(c));var r="en",l="";if(b.a.isArrayData(e.languages)){var o=b.a.find(e.languages,"is_default",1);b.a.isObjectEmpty(o)||(r=o.iso_code,l=o.id)}var d={lang:r,id_language:l,email:e.email,first_name:e.first_name,last_name:e.last_name,full_name:e.full_name,avatar:e.avatar,id_employee:e.id_employee,timeout:e.timeout,roles:e.roles,languages:e.languages,menu_collapse:!0,type:i},h=JSON.stringify(d);localStorage.setItem(v.a.COMMON.EMPLOYEE_INFO,b.a.base64Encrypt(h))}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new pe(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return localStorage.getItem(v.a.COMMON.TOKEN)?null:this.jsxTemplate.call(this)}}]),a}(ee),ve=Object(f.a)("common")(be);a(752);function _e(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.message;return Object(m.jsxs)("div",{className:"forgot-password",children:[Object(m.jsx)("div",{className:"main-login",children:Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"main-form",children:[Object(m.jsx)("div",{className:"logo",children:Object(m.jsx)(d.c,{to:"/",children:Object(m.jsx)("img",{src:ie,alt:"Ph\u1ea7n m\u1ec1m qu\u1ea3n l\xfd b\xe1n h\xe0ng"})})}),Object(m.jsx)("h1",{children:t("forgot_password.title")}),Object(m.jsx)("div",{className:"form",children:b.a.isBlank(s)?Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("forgot_password.email"),inputClass:"form-control",inputId:"email",inputName:"email",value:i.email,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)(oe,{onClick:this.onSaveAction.bind(this),className:"btn btn-save",text:t("forgot_password.save"),title:t("forgot_password.save")})})]}):Object(m.jsxs)("div",{className:"alert-message",children:[Object(m.jsx)("p",{children:Object(m.jsx)("span",{className:"icon-check-circle"})}),Object(m.jsx)("p",{children:s}),Object(m.jsx)("p",{children:Object(m.jsx)(d.c,{to:"/",children:t("common.close")})})]})})]})})}),Object(m.jsx)(ae.a,{style:{width:"100%",height:"100%"},params:{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{events:{onclick:{enable:!0,mode:"push"}},modes:{push:{particles_nb:1}}},retina_detect:!0}})]})}var ge=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("email","trim",!0),this.addRuleForField("email","required",!0,this.trans("validate_rule.required"),this.trans("forgot_password.email")),this.addRuleForField("email","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("forgot_password.email")),this.addRuleForField("email","type","email",this.trans("validate_rule.type_email"),this.trans("forgot_password.email"))}},{key:"setAlias",value:function(){this.v.setAlias({email:this.trans("forgot_password.email")})}}]),a}(ue),fe=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=_e,n.state={curItem:{},lang:"en",message:""},n}return Object(s.a)(a,[{key:"onSaveAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i={email:t.email,lang:this.state.lang,iso_code:t.iso_code},s=new ge(this.props),e.next=5,s.FLValidationAll(t);case 5:if(!(n=e.sent)){e.next=9;break}return this.setValidateMessage(n),e.abrupt("return");case 9:c=this.props.t,je.instance.getForgotPassword(i,(function(e){b.a.isObjectEmpty(e)?a.toast(c("forgot_password.error"),"error"):a.setState({message:c("forgot_password.success")})}),!1);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new ge(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),xe=Object(f.a)("common")(fe);a(753);function Oe(){var e=this,t=this.props.t,a=this.state.curItem;return Object(m.jsxs)("div",{className:"reset-password",children:[Object(m.jsx)("div",{className:"main-login",children:Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"main-form",children:[Object(m.jsx)("div",{className:"logo",children:Object(m.jsx)(d.c,{to:"/",children:Object(m.jsx)("img",{src:ie,alt:"Ph\u1ea7n m\u1ec1m qu\u1ea3n l\xfd b\xe1n h\xe0ng"})})}),Object(m.jsx)("h1",{children:t("reset_password.title")}),Object(m.jsx)("div",{className:"form",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(re,{label:t("reset_password.password"),inputClass:"form-control",inputId:"password",inputName:"password",value:a.password,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(re,{label:t("reset_password.password_confirm"),inputClass:"form-control",inputId:"password_confirm",inputName:"password_confirm",value:a.password_confirm,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:30})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-4 col-12",children:Object(m.jsx)(oe,{onClick:this.onSaveAction.bind(this),className:"btn btn-save",text:t("reset_password.save"),title:t("reset_password.save")})})]})})]})})}),Object(m.jsx)(ae.a,{style:{width:"100%",height:"100%"},params:{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{events:{onclick:{enable:!0,mode:"push"}},modes:{push:{particles_nb:1}}},retina_detect:!0}})]})}var ye=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("password","trim",!0),this.addRuleForField("password","required",!0,this.trans("validate_rule.required"),this.trans("reset_password.password")),this.addRuleForField("password","maxLength",60,this.trans("validate_rule.maxLength_input"),this.trans("reset_password.password")),this.addRuleForField("password","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("reset_password.password")),this.addRuleForField("password_confirm","trim",!0),this.addRuleForField("password_confirm","required",!0,this.trans("validate_rule.required"),this.trans("reset_password.password_confirm")),this.addRuleForField("password_confirm","maxLength",60,this.trans("validate_rule.maxLength_input"),this.trans("reset_password.password_confirm")),this.addRuleForField("password_confirm","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("reset_password.password_confirm"))}},{key:"setAlias",value:function(){this.v.setAlias({password:this.trans("reset_password.password"),password_confirm:this.trans("reset_password.password_confirm")})}}]),a}(ue),Me=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=Oe,n.state={curItem:{}},n}return Object(s.a)(a,[{key:"onSaveAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l,o,d,h;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.t,a=this.state.curItem,i=this,s=!1,n="",(b.a.isBlank(this.props)||b.a.isBlank(this.props.location)||b.a.isBlank(this.props.location.search))&&(window.location.href=v.a.SITE_URL.LOGIN),n=(n=this.props.location.search).replace("?token=",""),b.a.isBlank(n)&&(window.location.href=v.a.SITE_URL.LOGIN),c={password:b.a.SHA3(a.password),token:n},r=new ye(this.props),e.next=12,r.FLValidationAll(a);case 12:if(l=e.sent,b.a.isBlank(a.password)&&b.a.isBlank(a.password_confirm)||(o=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,(d=a.password).length<8||null===o.exec(d)?(l=Object.assign(b.a.isObjectEmpty(l)?{}:l,{password:t("employee.password_valid_min_8character")}),s=!0):(b.a.isObjectEmpty(l)||delete l[d],s=!1),(h=a.password_confirm)!==d||b.a.isBlank(a.password_confirm)?(l=Object.assign(b.a.isObjectEmpty(l)?{}:l,{password_confirm:t("employee.password_incorrect")}),s=!0):(s=!1,b.a.isObjectEmpty(l)||delete l[h])),!l){e.next=18;break}return this.setValidateMessage(l,!0),s=!0,e.abrupt("return");case 18:if(this.removeAllValidateMessage(),!s){e.next=21;break}return e.abrupt("return");case 21:je.instance.getResetPassword(c,(function(e,t,a){b.a.isObjectEmpty(e)?i.toast(a,"error"):(i.toast(a,"info"),setTimeout(function(){window.location.href=v.a.SITE_URL.LOGIN}.bind(this),2e3))}),!1);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r,l,o,d;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.t,i=t.target,s=i.name,n=i.value,c=this.state.curItem,!s){e.next=15;break}return r=Object(j.a)({},s,n),l=new ye(this.props),e.next=10,l.validateOne(r,s);case 10:o=e.sent,d=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,"password"===s&&(o=n.length<8||null===d.exec(n)?{password:a("employee.password_valid_min_8character")}:{password:""}),"password_confirm"===s&&b.a.isBlank(o.password_confirm)&&(o=c.password!==n?{password_confirm:a("employee.password_incorrect")}:{password_confirm:""}),null!=o&&this.setValidateMessage(o,!0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ne=Object(f.a)("common")(Me),Ce=a(332),ke=a.n(Ce),De=(a(216),a(763)),we=a(777),Ae=a(331),Ie=a.n(Ae),Pe=(a(762),a(8)),Ye=a.n(Pe),Ee=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).toggle=function(e){s.component.setOpen(!s.focus)},s.state={startDate:new Date,minDate:null,maxDate:null,showTimeSelect:!1,showDisabledMonthNavigation:!1,timeCaption:"Time",dateFormat:"dd/MM/yyyy HH:mm",timeFormat:"HH:mm",timeIntervals:15,readOnly:!1,disabled:!1,isClearable:!1,isOpen:!1,showIconCalendar:!0,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showYearPicker:!1,yearItemNumber:1,showCustomMonth:!0},s.focus=!1,s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.handleOnBlur=s.handleOnBlur.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.showTimeSelect,a=e.readOnly,i=e.disabled,s=e.dateFormat,n=e.format,c=e.minDate,r=e.maxDate,l=e.value,o=e.showIconCalendar,d=e.showMonthYearPicker,h=e.showFullMonthYearPicker,m=e.showTwoColumnMonthYearPicker,u=e.showYearPicker,p=e.yearItemNumber,j=e.showCustomMonth,v=e.timeIntervals;b.a.isBlank(s)&&(s="dd/MM/yyyy"),b.a.isBlank(n)&&(n="dd/MM/yyyy"),b.a.isBlank(c)||(c=b.a.convertStrtoDate(c,n)),b.a.isBlank(r)||(r=b.a.convertStrtoDate(r,n)),l=b.a.isBlank(l)?null:b.a.convertStrtoDate(l,n),this.setState({startDate:l,readOnly:!b.a.isBlank(a)&&a,disabled:!b.a.isBlank(i)&&i,format:n,dateFormat:s,showTimeSelect:!b.a.isBlank(t)&&t,minDate:b.a.isBlank(c)?null:c,maxDate:b.a.isBlank(r)?null:r,showIconCalendar:o,showMonthYearPicker:!b.a.isBlank(d)&&d,showFullMonthYearPicker:!b.a.isBlank(h)&&h,showTwoColumnMonthYearPicker:!b.a.isBlank(m)&&m,showYearPicker:!b.a.isBlank(u)&&u,yearItemNumber:b.a.isBlank(p)?1:p,showCustomMonth:!!b.a.isBlank(j)||j,timeIntervals:b.a.isBlank(v)?15:v})}},{key:"componentDidUpdate",value:function(e,t,a){var i=this.props,s=i.showTimeSelect,n=i.readOnly,c=i.disabled,r=i.dateFormat,l=i.format,o=i.minDate,d=i.maxDate,h=i.value,m=i.showMonthYearPicker,u=i.showFullMonthYearPicker,p=i.showTwoColumnMonthYearPicker,j=i.showYearPicker,v=i.yearItemNumber,_=i.showCustomMonth,g=i.timeIntervals;e.disabled===c&&e.minDate===o&&e.maxDate===d&&e.value===h||(b.a.isBlank(r)&&(r="dd/MM/yyyy"),b.a.isBlank(l)&&(l="dd/MM/yyyy"),b.a.isBlank(o)||(o=b.a.convertStrtoDate(o,l)),b.a.isBlank(d)||(d=b.a.convertStrtoDate(d,l)),b.a.isBlank(h)||(h=b.a.convertStrtoDate(h,l)),this.setState({startDate:h,readOnly:!b.a.isBlank(n)&&n,disabled:!b.a.isBlank(c)&&c,format:l,dateFormat:r,showTimeSelect:!b.a.isBlank(s)&&s,minDate:b.a.isBlank(o)?null:o,maxDate:b.a.isBlank(d)?null:d,showMonthYearPicker:!b.a.isBlank(m)&&m,showFullMonthYearPicker:!b.a.isBlank(u)&&u,showTwoColumnMonthYearPicker:!b.a.isBlank(p)&&p,showYearPicker:!b.a.isBlank(j)&&j,yearItemNumber:b.a.isBlank(v)?1:v,showCustomMonth:!!b.a.isBlank(_)||_,timeIntervals:b.a.isBlank(g)?15:g}))}},{key:"handleChange",value:function(e,t,a){if("function"===typeof this.props.handleChange){var i=b.a.dateFormat(e,this.state.format),s={target:{name:a,value:i}};this.props.handleChange(s,a,i)}}},{key:"handleOnBlur",value:function(e){"function"===typeof this.props.handleOnBlur?this.props.handleOnBlur(e):"function"===typeof this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this,t="string"===typeof this.props.inputClass&&""!==this.props.inputClass?this.props.inputClass:null,a="string"===typeof this.props.inputName&&""!==this.props.inputName?this.props.inputName:null,i="string"===typeof this.props.placeholder&&""!==this.props.placeholder?this.props.placeholder:null,s="string"===typeof this.props.inputId&&""!==this.props.inputId?this.props.inputId:null,n=Ie()(1990,Object(De.default)(new Date)+1,1),c=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(m.jsxs)(l.a.Fragment,{children:[""!==this.props.label&&"undefined"!==typeof this.props.label?Object(m.jsxs)("label",{className:"control-label",children:[this.props.label,"required"===this.props.required?Object(m.jsx)("span",{className:"required",children:"*"}):null]}):null,Object(m.jsxs)("div",{className:"input-group cmsdatepicker pl-0 pr-0"+(this.state.disabled?" bg-disabled":""),children:[Object(m.jsx)("div",{className:t,children:Object(m.jsx)(ke.a,{id:s,name:a,autoComplete:"off",renderCustomHeader:function(t){var a=t.date,i=t.changeYear,s=t.changeMonth,r=t.decreaseMonth,l=t.increaseMonth,o=t.prevMonthButtonDisabled,d=t.nextMonthButtonDisabled;return Object(m.jsxs)("div",{style:{margin:"0 10px 10px 10px",display:"flex",justifyContent:"center"},children:[Object(m.jsx)("button",{onClick:r,disabled:o,children:Object(m.jsx)("var",{className:"icon-angle-left"})}),e.state.showCustomMonth?Object(m.jsx)("select",{value:c[Object(we.default)(a)],onChange:function(e){var t=e.target.value;return s(c.indexOf(t))},children:c.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))}):"",Object(m.jsx)("select",{value:Object(De.default)(a),onChange:function(e){var t=e.target.value;return i(t)},children:n.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))}),Object(m.jsx)("button",{onClick:l,disabled:d,children:Object(m.jsx)("var",{className:"icon-angle-right"})})]})},selected:this.state.startDate,onChange:function(t,i){return e.handleChange(t,i,a)},onBlur:this.handleOnBlur,showTimeSelect:this.state.showTimeSelect,timeFormat:this.state.timeFormat,timeIntervals:this.state.timeIntervals,dateFormat:this.state.dateFormat,timeCaption:this.state.timeCaption,todayButton:"Today",placeholderText:i,minDate:this.state.minDate,maxDate:this.state.maxDate,readOnly:this.state.readOnly,disabled:this.state.disabled,isClearable:this.state.isClearable,showDisabledMonthNavigation:this.state.showDisabledMonthNavigation,fixedHeight:!0,popperPlacement:"bottom-start",showMonthYearPicker:this.state.showMonthYearPicker,showFullMonthYearPicker:this.state.showFullMonthYearPicker,showTwoColumnMonthYearPicker:this.state.showTwoColumnMonthYearPicker,showYearPicker:this.state.showYearPicker,yearItemNumber:this.state.yearItemNumber,ref:function(t){e.component=t}})}),this.state.showIconCalendar?Object(m.jsx)("div",{className:"input-group-append",children:Object(m.jsx)("button",{onClick:function(t){return e.toggle(t)},className:"btn btn-outline-secondary datepickerbutton",type:"button",children:Object(m.jsx)("span",{className:"icon icon-calendar"})})}):""]}),"boolean"===typeof this.props.validate&&!0===this.props.validate?Object(m.jsx)("p",{className:"pl-0 col-sm-12 validate-message d-none"}):null]})}}]),a}(r.Component),Le=a(20),Se=a.n(Le);function Te(){var e=this,t=this.state.curItem,a=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-small modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:a("employee.change_password")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onCloseChangePassword.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("div",{className:"box-info clear-margin-bottom",children:Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(re,{label:a("employee.current_password"),inputClass:"form-control",required:"required",inputId:"current_password",inputName:"current_password",value:t.current_password,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"group-password",children:[Object(m.jsx)(ce,{label:a("employee.new_password"),inputClass:"form-control",required:"required",inputId:"password",inputName:"password",value:t.password,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:20}),Object(m.jsxs)("span",{onClick:this.generatePassword.bind(this),className:"generate-pass",children:[" ",a("employee.random")]})]})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("employee.password_confirm"),inputClass:"form-control",required:"required",inputId:"password_confirm",inputName:"password_confirm",value:t.password_confirm,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:20})})})]})})})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onCloseChangePassword.bind(this),children:a("common.close")}),Object(m.jsxs)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:[" ",a("common.save")," "]})]})]})}var Re=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("current_password","trim",!0),this.addRuleForField("current_password","required",!0,this.trans("validate_rule.required"),this.trans("employee.current_password")),this.addRuleForField("current_password","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.current_password")),this.addRuleForField("current_password","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("employee.current_password")),this.addRuleForField("password","trim",!0),this.addRuleForField("password","required",!0,this.trans("validate_rule.required"),this.trans("employee.new_password")),this.addRuleForField("password","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.new_password")),this.addRuleForField("password","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("employee.new_password")),this.addRuleForField("password_confirm","trim",!0),this.addRuleForField("password_confirm","required",!0,this.trans("validate_rule.required"),this.trans("employee.password_confirm")),this.addRuleForField("password_confirm","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.password_confirm")),this.addRuleForField("password_confirm","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("employee.password_confirm"))}},{key:"setAlias",value:function(){this.v.setAlias({current_password:this.trans("employee.current_password"),password:this.trans("employee.new_password"),password_confirm:this.trans("employee.password_confirm")})}}]),a}(ue),Fe=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:{}},s.jsxTemplate=Te,s}return Object(s.a)(a,[{key:"generatePassword",value:function(){var e=this.state.curItem,t=b.a.generateStrRandom(2,2,2,2);e.password=t,e.password_confirm=t,this.setState({curItem:e}),this.setValidateMessage({password:""},!0),this.setValidateMessage({password_confirm:""},!0)}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r,l,o,d;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.t,i=t.target,s=i.name,n=i.value,c=this.state.curItem,!s){e.next=15;break}return r=Object(j.a)({},s,n),l=new Re(this.props),e.next=10,l.validateOne(r,s);case 10:o=e.sent,d=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,"password"===s&&(o=n.length<8||null===d.exec(n)?{password:a("employee.password_valid_min_8character")}:{password:""}),"password_confirm"===s&&b.a.isBlank(o.password_confirm)&&(o=c.password!==n?{password_confirm:a("employee.password_incorrect")}:{password_confirm:""}),null!=o&&this.setValidateMessage(o,!0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l,o,d;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.t,a=this.state.curItem,i=this,s=Object.assign({},this.state.curItem),n=v.a.SCREEN_MODE.EDIT,c=new Re(this.props),e.next=7,c.FLValidationAll(s);case 7:if(r=e.sent,b.a.isBlank(a.password)&&b.a.isBlank(a.password_confirm)||(l=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,(o=a.password).length<8||null===l.exec(o)?r=Object.assign(b.a.isObjectEmpty(r)?{}:r,{password:t("employee.password_valid_min_8character")}):b.a.isObjectEmpty(r)||delete r[o],(d=a.password_confirm)!==o||b.a.isBlank(a.password_confirm)?r=Object.assign(b.a.isObjectEmpty(r)?{}:r,{password_confirm:t("employee.password_incorrect")}):b.a.isObjectEmpty(r)||delete r[d]),!r){e.next=12;break}return this.setValidateMessage(r),e.abrupt("return");case 12:this.removeAllValidateMessage(),s.screen_mode=n,s.iso_code=this.employee.iso_code,s.email=this.employee.email,s.password=b.a.SHA3(a.password),s.current_password=b.a.SHA3(a.current_password),s.id=this.employee.id_employee,delete s.password_confirm,je.instance.employeeChangePassword(s,(function(e,t,a){e?(i.toast(a,"info"),i.props.onCloseChangePassword()):t?i.setValidateMessage(t):b.a.isBlank(a)||i.toast(a,"error")}),!0);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function He(){var e=this,t=this.props.t,a=this.state.curItem,i=this.state.add?Object(m.jsx)(Fe,{onCloseChangePassword:this.onCloseChangePassword,auth:this.props.auth,curItem:a,actions:this.actions,t:t}):"";return Object(m.jsxs)("div",{className:"account",children:[i,Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("h2",{children:t("account.title")})})})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsx)("div",{className:"form-account",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("ul",{children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"add",onClick:this.onAddChangePassword.bind(this),children:t("employee.change_password")})})})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("employee.first_name"),inputClass:"form-control",inputId:"first_name",inputName:"first_name",required:"required",value:a.first_name,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("employee.last_name"),inputClass:"form-control",required:"required",inputId:"last_name",inputName:"last_name",value:a.last_name,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("employee.email"),inputClass:"form-control",inputId:"email",inputName:"email",value:a.email,disabled:!0,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("employee.phone"),inputClass:"form-control",inputId:"phone",inputName:"phone",value:a.phone,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9-+()._ ]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:t("employee.birthday"),value:a.birthday,inputId:"birthday",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"birthday",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"file-upload",children:[Object(m.jsx)("label",{children:t("employee.avatar")}),Object(m.jsx)("ul",{className:"row",children:Object(m.jsx)("li",{className:"col-md-12 col-12",children:Object(m.jsxs)("div",{className:"item-add-file-upload",children:[Object(m.jsx)("input",{onChange:function(t){return e.onFileAvatarChange(t)},type:"file",id:"file_upload",name:"file_upload"}),a.file_upload?"":Object(m.jsx)("div",{className:"add-file-upload",children:Object(m.jsxs)("label",{htmlFor:"file_upload",className:"file-upload",children:[Object(m.jsx)("i",{className:"icon-picture-o"})," ",Object(m.jsx)("span",{children:t("common.upload_image")})]})}),b.a.isBlank(a.file_upload)?b.a.isBlank(a.avatar_full)?"":Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:a.avatar_full}),Object(m.jsxs)("div",{className:"file-upload-action",children:[Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})}),Object(m.jsx)("span",{className:"delete",onClick:function(t){return e.onClickDeleteAvatar(t)},children:Object(m.jsx)("var",{className:"icon-trash-o"})})]})]}):Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:a.file_upload}),Object(m.jsx)("div",{className:"file-upload-action",children:Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})})})]})]})})}),b.a.isBlank(a.file_message)?"":Object(m.jsx)("div",{className:"alert alert-danger",children:a.file_message})]})})})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("button",{type:"button",className:"btn btn-save",onClick:this.onSaveAction.bind(this),children:[" ",t("common.save")," "]})})})]})})})})})]})]})}var Be=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("first_name","trim",!0),this.addRuleForField("first_name","required",!0,this.trans("validate_rule.required"),this.trans("employee.first_name")),this.addRuleForField("first_name","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.first_name")),this.addRuleForField("last_name","trim",!0),this.addRuleForField("last_name","required",!0,this.trans("validate_rule.required"),this.trans("employee.last_name")),this.addRuleForField("last_name","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.last_name"))}},{key:"setAlias",value:function(){this.v.setAlias({last_name:this.trans("employee.last_name"),first_name:this.trans("employee.first_name")})}}]),a}(ue),Ue=(a(820),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onAddChangePassword=function(){n.setState({add:!0})},n.onCloseChangePassword=function(){n.setState({add:!1})},n.onFileAvatarChange=function(e){var t=n.props.t,a=e.target.files[0];if(a&&void 0!==a&&null!==a){var i=a.name,s=a.size,c=null;b.a.checkExtensionFile(i,1)?s<=0?c=t("message.msg_err_file_size"):s>v.a.COMMON.MAX_IMAGE_SIZE&&(c=t("message.msg_err_max_size_upload")):c=t("message.msg_err_ext_image_file");var r=Object(p.a)(n),l=n.state.curItem;if(!b.a.isBlank(c))return l.file_upload="",l.file_message=c,void n.setState({curItem:l});l.file_message="",n.setState({curItem:l});var o=new FileReader;o.onload=function(e){l.file_upload=e.target.result,l.file_name=i,r.setState({curItem:l})},o.readAsDataURL(a)}},n.onClickDeleteAvatar=function(e){var t=n.state.curItem;t.file_message="",t.file_upload="",t.avatar_full=null,n.setState({curItem:t})},n.jsxTemplate=He,n.state={curItem:{max_date:b.a.getCurrentDDMMYYYY()},add:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"getDetail",value:function(){var e=this,t=this.state.curItem,a={id:this.employee.id_employee,iso_code:this.employee.iso_code};je.instance.getDetailEmployee(a,(function(a,i,s){a?null!=s&&e.setState({curItem:Object.assign(t,s)}):e.toast(i,"error")}))}},{key:"onSaveAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=v.a.SCREEN_MODE.EDIT,s=new Be(this.props),e.next=5,s.FLValidationAll(t);case 5:if(!(n=e.sent)){e.next=9;break}return this.setValidateMessage(n),e.abrupt("return");case 9:this.removeAllValidateMessage(),t.screen_mode=i,t.iso_code=this.employee.iso_code,c=Object.assign({},t),je.instance.saveUpdateProfile(c,(function(e,t,i){if(e){a.toast(i,"info");var s=localStorage.getItem(v.a.COMMON.EMPLOYEE_INFO),n=JSON.parse(b.a.base64Decrypt(s));n.first_name=t.first_name,n.last_name=t.last_name,n.full_name=t.first_name+" "+t.last_name,n.avatar=t.avatar;var c=JSON.stringify(n);localStorage.setItem(v.a.COMMON.EMPLOYEE_INFO,b.a.base64Encrypt(c)),setTimeout((function(){window.location.reload()}),4e3)}else t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Be(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee)),Ve=Object(f.a)("common")(Ue);function We(){this.props.t;return Object(m.jsxs)("div",{className:"error-404",children:[Object(m.jsx)("h2",{children:"403 Forbidden"}),Object(m.jsx)("p",{children:"You don't have the permission to access the requested resource. It is either read-protected or not readable by the server."})]})}a(821);var qe=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=We,n.state={curItem:{}},n}return Object(s.a)(a,[{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(l.a.Component),ze=Object(f.a)("common")(qe);function Ge(){return Object(m.jsx)("div",{className:"dashboard",children:"Dashboard"})}var $e=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{}},n.jsxTemplate=Ge,n}return Object(s.a)(a,[{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ke=Object(f.a)("common")($e),Je=a(30),Xe=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[e.id," "]})}),Object(m.jsx)("div",{className:"body-col width40",children:Object(m.jsxs)("p",{children:[e.name," "]})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsx)("p",{children:e.description})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component),Ze=a(346),Qe=a(327),et=function(e){var t=[],a=2,i=parseInt(a/2),s=1;e.total>a&&(e.current>i&&(s=e.current-i),parseInt(e.current)+i>=e.total&&(s=e.total-a)),a+=s;for(var n=s;n<=a&&n<=e.total;n++)t[n]=n==e.current?Object(m.jsx)("li",{className:"active","aria-current":"page",children:Object(m.jsx)("span",{children:n})},"page_"+n):Object(m.jsx)("li",{children:Object(m.jsx)("span",{onClick:e.onSelectPage(n),children:n})},"page_"+n);var c=Object(Qe.a)("common"),r=Object(Ze.a)(c,1)[0];return Object(m.jsx)(l.a.Fragment,{children:e.total>1&&Object(m.jsx)("div",{className:"paging",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6 text-start",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsxs)("select",{onChange:function(t){return e.inputChangedHandler(t)},name:"limit",className:"form-select input-sm",children:[Object(m.jsx)("option",{value:"10",children:"10"}),Object(m.jsx)("option",{value:"25",children:"25"}),Object(m.jsx)("option",{value:"50",children:"50"}),Object(m.jsx)("option",{value:"100",children:"100"})]})}),Object(m.jsx)("li",{children:Object(m.jsx)("span",{onClick:e.onClickReload(),children:Object(m.jsx)("var",{className:"icon-arrows-ccw"})})})]})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[r("common.page"),Object(m.jsx)("input",{type:"text",name:"current",value:e.currentInput,onChange:function(t){return e.inputChangedHandler(t)},onBlur:function(t){return e.inputChangedBlue(t)},onKeyUp:function(t){return e.inputChangedEnter(t)},className:"paging-number"})," / ",e.total]}),1==e.current?Object(m.jsx)("li",{className:"page-item disabled previous",children:Object(m.jsx)("span",{children:Object(m.jsx)("i",{className:"icon-angle-double-left"})})}):Object(m.jsx)("li",{className:"page-item previous",children:Object(m.jsx)("span",{onClick:e.onSelectPage(1),children:Object(m.jsx)("i",{className:"icon-angle-double-left","aria-hidden":"true"})})}),1==e.current?Object(m.jsx)("li",{className:"page-item disabled previous",children:Object(m.jsx)("span",{children:Object(m.jsx)("i",{className:"icon-angle-left","aria-hidden":"true"})})}):Object(m.jsx)("li",{className:"page-item previous",children:Object(m.jsx)("span",{onClick:e.onSelectPage(e.current-1),children:Object(m.jsx)("i",{className:"icon-angle-left"})})}),s>1&&Object(m.jsxs)(l.a.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)("span",{onClick:e.onSelectPage(1),children:"1"})}),Object(m.jsx)("li",{children:Object(m.jsx)("var",{children:"..."})})]}),t,a<e.total&&Object(m.jsxs)(l.a.Fragment,{children:[Object(m.jsx)("li",{className:"page-item active","aria-current":"page",children:Object(m.jsx)("var",{children:"..."})}),Object(m.jsx)("li",{className:"page-item",children:Object(m.jsx)("span",{onClick:e.onSelectPage(e.total),children:e.total})})]}),e.current==e.total?Object(m.jsx)("li",{className:"page-item disabled next",children:Object(m.jsx)("span",{children:Object(m.jsx)("i",{className:"icon-angle-right"})})}):Object(m.jsx)("li",{className:"page-item next",children:Object(m.jsx)("span",{onClick:e.onSelectPage(e.current+1),children:Object(m.jsx)("i",{className:"icon-angle-right"})})}),e.current==e.total?Object(m.jsx)("li",{className:"page-item disabled next",children:Object(m.jsx)("span",{children:Object(m.jsx)("i",{className:"icon-angle-double-right"})})}):Object(m.jsx)("li",{className:"page-item next",children:Object(m.jsx)("span",{onClick:e.onSelectPage(e.total),children:Object(m.jsx)("i",{className:"icon-angle-double-right"})})})]})})]})})})};function tt(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=this.props.t,c=null;return s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),c=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:n("role.name"),inputClass:"form-control",required:1===e.is_default?"required":"",inputId:"name_"+e.iso_code,inputName:"name_"+e.iso_code,value:i.data[a].name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:n("role.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})})]})})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("role.edit_title"):n("role.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:c})]})})})})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:n("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("common.update"):n("common.create")})]})]})}var at=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.iso_code_language;return s.trans=n,s.iso_code_language=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){"vi"===this.iso_code_language&&(this.addRuleForField("name_vi","trim",!0),this.addRuleForField("name_vi","required",!0,this.trans("validate_rule.required"),this.trans("role.name")),this.addRuleForField("name_vi","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("role.name"))),"en"===this.iso_code_language&&(this.addRuleForField("name_en","trim",!0),this.addRuleForField("name_en","required",!0,this.trans("validate_rule.required"),this.trans("role.name")),this.addRuleForField("name_en","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("role.name")))}},{key:"setAlias",value:function(){"vi"===this.iso_code_language&&this.v.setAlias({name_vi:this.trans("role.name")}),"en"===this.iso_code_language&&this.v.setAlias({name_en:this.trans("role.name")})}}]),a}(ue),it=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.ROLE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.ROLE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.ROLE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"updateRoleMapScreen",value:function(e,t){try{new x.a(!0).post(v.a.URL.ROLE.UPDATE_ROLE_MAP_SCREEN,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.ROLE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.ROLE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.ROLE.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListScreenPermissions",value:function(e,t){try{new x.a(!0).post(v.a.URL.ROLE.PERMISSION,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateRolePermissions",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var i=new x.a(a);i.post(v.a.URL.ROLE.UPDATE_PERMISSIONS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(s){t(!1,s)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),st=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,4),o=a.substr(0,11);c.map((function(t,a){return r===t.iso_code&&"name"===l&&(n.data[a].name=e.target.validity.valid?i:s.state.curItem.data[a].name),r===t.iso_code&&"description"===o&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage},s.jsxTemplate=tt,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new at(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new at(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,i.iso_code=this.employee.iso_code,i.status=1,!b.a.isArrayData(i.data)){e.next=23;break}if(r=b.a.find(i.data,"is_default",1)){e.next=20;break}return e.abrupt("return");case 20:i.data.map((function(e,t){return i.data[t].name=""===e.name?r.name:e.name,i.data[t].description=""===e.description?r.description:e.description,i})),e.next=24;break;case 23:return e.abrupt("return",!1);case 24:it.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function nt(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.id," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var ct=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=nt,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,it.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function rt(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(Xe,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(st,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(ct,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"position",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("role.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("role.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("role.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("role.id")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"name")},className:"name"===r.sort_column?"header-col width40 sorting "+r.order_by:"header-col width40 sorting",children:Object(m.jsx)("p",{children:a("role.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:a("role.description")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var lt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id_company=t.id_company,i.id=t.id,it.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(t["name_"+i.iso_code]=i.name,b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_company=n.employee.id_company,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,it.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=rt,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.id=null,t.name=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_company=this.employee.id_company,it.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=this,t=!1===this.state.formSearch;if(!0===this.state.formSearch){var a=this.state.searchParam;a.name="",a.index=1,a.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:a},(function(){e.getList()}))}this.setState({formSearch:t})}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ot=Object(f.a)("common")(lt),dt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickItemLevel1=function(){s.props.onClickItemLevel1&&"function"===typeof s.props.onClickItemLevel1&&s.props.onClickItemLevel1(s.props.index,s.props.id)},s.onClickItemLevel2=function(e,t){s.props.onClickItemLevel2&&"function"===typeof s.props.onClickItemLevel2&&s.props.onClickItemLevel2(e,t,s.props.index)},s}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem;return Object(m.jsx)("div",{className:"main-level",children:Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col screen-name",children:Object(m.jsx)("p",{className:null!=t.parent?"level":"",children:t.screen_name})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"full_"+t.id,inputName:"full",labelClass:"no-label",checked:t.auths===v.a.AUTH_MODE.FULL?1:0,onChange:function(a){e.props._selectFullCheckedChange(a,t,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"view_"+t.id,inputName:"view",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.VIEW)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.VIEW,v.a.AUTH_MODE.VIEW,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"new_"+t.id,inputName:"new",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.NEW)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.NEW,v.a.AUTH_MODE.NEW,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"del_"+t.id,inputName:"del",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.DEL)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.DEL,v.a.AUTH_MODE.DEL,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"edit_"+t.id,inputName:"edit",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.EDIT)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.EDIT,v.a.AUTH_MODE.EDIT,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"excel_"+t.id,inputName:"excel",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.EXCEL)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.EXCEL,v.a.AUTH_MODE.EXCEL,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"pdf_"+t.id,inputName:"pdf",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.PDF)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.PDF,v.a.AUTH_MODE.PDF,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"print_"+t.id,inputName:"print",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.PRINT)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.PRINT,v.a.AUTH_MODE.PRINT,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"translate_"+t.id,inputName:"translate",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.TRANSLATE)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.TRANSLATE,v.a.AUTH_MODE.TRANSLATE,e.props.index)}})})}),Object(m.jsx)("div",{className:"body-col widthfix80",children:Object(m.jsx)("p",{children:Object(m.jsx)(ne,{inputId:"approval_"+t.id,inputName:"approval",labelClass:"no-label",checked:b.a.checkBitOnOff(t.auths,v.a.AUTH_MODE.APPROVAL)?1:0,onChange:function(a){e.props.handleInputChange(a,t,v.a.AUTH_DATA_KEY.APPROVAL,v.a.AUTH_MODE.APPROVAL,e.props.index)}})})})]})},this.props.index)}}]),a}(r.Component),ht=a(345),mt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={className:"form-control-label"},s}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.selectKey,a=e.name,i=e.id,s=e.onChange,n=e.className,c=e.value,r=e.label,l=e.required,d=e.optionList,h=e.isDisabled,u=e.isLoading,p=e.isClearable,j=e.isMulti,b=e.isRtl,v=e.isSearchable,_=e.isOptionDisabled,g=e.defaultValue,f=e.placeHolder,x=e.instanceId,O={option:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{fontWeight:t.isSelected?"bold":"normal"})},singleValue:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{minHeight:"34px",lineHeight:"34px"})},control:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{minHeight:"34px",outline:"none",border:"1px solid #ced4da"})},input:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{minHeight:"28px",outline:"none"})},dropdownIndicator:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{padding:"5px"})},indicatorSeparator:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{padding:"0px"})},clearIndicator:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{padding:"0px"})},placeholder:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{padding:"0px 8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 8px)"})},valueContainer:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{padding:"0px 8px"})},menu:function(e,t){return Object(o.a)(Object(o.a)({},e),{},{zIndex:9})}};return Object(m.jsxs)(m.Fragment,{children:[r?Object(m.jsxs)("label",{className:"control-label",htmlFor:a,children:[r," ","required"===l?Object(m.jsx)("span",{className:"required",children:"*"}):null]}):"",Object(m.jsx)(ht.a,{id:i,placeholder:f,className:n,classNamePrefix:"select",defaultValue:g,isDisabled:h,isLoading:u,isClearable:p,isMulti:j,isRtl:b,isSearchable:v,name:a,value:c,options:d,onChange:s,isOptionDisabled:_,instanceId:x,styles:O,components:{IndicatorSeparator:function(){return null}}},t)]})}}]),a}(r.Component);function ut(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.dataRoles;return e=n.map((function(e,i){return Object(m.jsx)(dt,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,_selectFullCheckedChange:t._selectFullCheckedChange,handleInputChange:t.handleInputChange,t:a,actions:t.actions},"row_item_"+i)})),Object(m.jsxs)("div",{className:"permissions",children:[Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("permissions.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-7"}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("div",{className:"choose-role",children:Object(m.jsx)(mt,{instanceId:"id_role",className:"id_role",name:"id_role",value:c.filter((function(e){return e.id===s.id})),onChange:function(e){t.handleDropdownChange(e)},optionList:c,placeHolder:a("common.choose")})})}),Object(m.jsx)("div",{className:"col-md-1",children:Object(m.jsx)("ul",{children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"add",onClick:this.onClickUpdateRole.bind(this),children:Object(m.jsx)("span",{className:"icon icon-arrows-ccw none-text"})})})})})]})})]})}),Object(m.jsx)("div",{className:"form-roles",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-4"})})}),Object(m.jsxs)("div",{className:"data-permissions",children:[Object(m.jsx)("div",{className:"box-header",children:Object(m.jsx)("div",{className:"data-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col screen-name",children:"Modules"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Full"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"View"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Add"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Del"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Edit"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Excel"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Pdf"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Print"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Translate"}),Object(m.jsx)("div",{className:"header-col widthfix80",children:"Approval"})]})})}),Object(m.jsx)("div",{className:"box-body",children:Object(m.jsx)("div",{className:"data-body",children:e})})]})]})}a(827);var pt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleInputChange=function(e,t,a,i,s){var c=Object(p.a)(n),r=e.target.checked,l=0,o=n.state.dataList;if(r){for(var d=0;d<i+1;d++)l=1<<d;b.a.isBlank(i)||i==v.a.AUTH_MODE.VIEW||(t[v.a.AUTH_DATA_KEY.VIEW]=1)}else b.a.isBlank(i)||i!=v.a.AUTH_MODE.VIEW||(t[v.a.AUTH_DATA_KEY.NEW]=0,t[v.a.AUTH_DATA_KEY.EDIT]=0,t[v.a.AUTH_DATA_KEY.DEL]=0,t[v.a.AUTH_DATA_KEY.PRINT]=0,t[v.a.AUTH_DATA_KEY.PDF]=0,t[v.a.AUTH_DATA_KEY.EXCEL]=0,t[v.a.AUTH_DATA_KEY.TRANSLATE]=0,t[v.a.AUTH_DATA_KEY.APPROVAL]=0,t[v.a.AUTH_DATA_KEY.FULL]=0);t[a]=l,1===parseInt(t.has_child)&&o.map((function(e,s){if(t.id===e.parent){var c=0;if(r){for(var l=0;l<i+1;l++)c=1<<l;b.a.isBlank(i)||i===v.a.AUTH_MODE.VIEW||(e[v.a.AUTH_DATA_KEY.VIEW]=1)}else b.a.isBlank(i)||i!==v.a.AUTH_MODE.VIEW||(e[v.a.AUTH_DATA_KEY.NEW]=0,e[v.a.AUTH_DATA_KEY.EDIT]=0,e[v.a.AUTH_DATA_KEY.DEL]=0,e[v.a.AUTH_DATA_KEY.PRINT]=0,e[v.a.AUTH_DATA_KEY.PDF]=0,e[v.a.AUTH_DATA_KEY.EXCEL]=0,e[v.a.AUTH_DATA_KEY.TRANSLATE]=0,e[v.a.AUTH_DATA_KEY.APPROVAL]=0,e[v.a.AUTH_DATA_KEY.FULL]=0);e[a]=c,e=n._setAuths(e),o[s]=e}})),o[s]=t,t=n._setAuths(t),c.setState({dataList:o}),n._updateData(t)},n._selectFullCheckedChange=function(e,t,a){var i=Object(p.a)(n),s=e.target.checked,c=0,r=n.state.dataList;if(s)if(c=511,r[a].auths=c,1===parseInt(t.has_child))r.map((function(e,a){parseInt(t.id)===parseInt(e.parent)&&(r[a].auths=c)}));else{var l=b.a.find(r,"id",t.parent);b.a.isObjectEmpty(l)||r.map((function(e,t){parseInt(l.id)===parseInt(e.id)&&(r[t].auths=c)}))}else r[a].auths=c,1===parseInt(t.has_child)&&r.map((function(e,a){parseInt(t.id)===parseInt(e.parent)&&(r[a].auths=0)}));i.setState({dataList:r}),n._updateData(t)},n.handleDropdownChange=function(e){if(!b.a.isObjectEmpty(e)){var t=n.state.curItem;t=e;var a=Object(p.a)(n);a.setState({curItem:t},(function(){a.getListScreenPermissions()}))}},n.jsxTemplate=ut,n.state={curItem:{},dataList:[],dataRoles:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1}},n._selectFullCheckedChange=n._selectFullCheckedChange.bind(Object(p.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataRole()}},{key:"_setPermissions",value:function(e){return e.view=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.VIEW)),e.new=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.NEW)),e.edit=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.EDIT)),e.excel=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.EXCEL)),e.pdf=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.PDF)),e.translate=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.TRANSLATE)),e.print=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.PRINT)),e.delete=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.DEL)),e.approval=e.auths&parseInt(Math.pow(2,v.a.AUTH_MODE.APPROVAL)),e}},{key:"_setAuths",value:function(e){return e.auths=e.view+e.new+e.edit+e.excel+e.pdf+e.translate+e.print+e.delete+e.approval,e}},{key:"_updateData",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.t,s=[],n=(i=this).state.curItem,!b.a.isObjectEmpty(t)){e.next=6;break}return this.toast(a("message.msg_err_unknown"),"error"),e.abrupt("return");case 6:if(c=i.state.dataList,b.a.isBlank(t.has_child)){e.next=12;break}s.push({id_role:n.id_role,id_screen:t.id_screen,id_package_screen:t.id_package_screen,auths:t.auths}),b.a.isArrayData(c)&&c.map((function(e,a){e.parent===t.id&&s.push({id_role:n.id_role,id_screen:e.id_screen,id_package_screen:e.id_package_screen,auths:e.auths})})),e.next=20;break;case 12:if(b.a.isArrayData(c)){e.next=14;break}return e.abrupt("return");case 14:if(r=b.a.find(c,"id",t.id),!b.a.isObjectEmpty(r)){e.next=17;break}return e.abrupt("return");case 17:s.push({id_role:n.id_role,id_screen:t.id_screen,id_package_screen:t.id_package_screen,auths:t.auths}),l=b.a.find(c,"id",t.parent),b.a.isObjectEmpty(l)||s.push({id_role:n.id_role,id_screen:l.id_screen,id_package_screen:l.id_package_screen,auths:l.auths});case 20:if(b.a.isArrayData(s)){e.next=23;break}return this.toast(a("message.msg_err_unknown"),"error"),e.abrupt("return");case 23:n.screens=s,it.instance.updateRolePermissions(n,(function(e,t){e?i.getListScreenPermissions():i.toast(t,"error")})),this.setState({dataList:c});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDataRole",value:function(){var e=this,t=this.state.curItem,a=e.state.searchParam;a.id_company=this.employee.id_company,a.id_language=this.employee.id_language,it.instance.getDropdownList(a,(function(a,i){b.a.isArrayData(a)&&(t=a[0],e.setState({dataRoles:a,curItem:t},(function(){e.getListScreenPermissions()})))}))}},{key:"getListScreenPermissions",value:function(){var e=this,t=this.state.curItem;t.id_language=this.employee.id_language,t.id_role=t.id,it.instance.getListScreenPermissions(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataList:t}):e.setState({dataList:[]})}))}},{key:"onClickUpdateRole",value:function(){var e=this.state.curItem,t=this;it.instance.updateRoleMapScreen(e,(function(e,a,i){e?(t.toast(i,"info"),t.getListScreenPermissions()):b.a.isBlank(i)||t.toast(i,"error")}),!0)}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),jt=Object(f.a)("common")(pt),bt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e.onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t,a=null,i=e.role_name,s=[];return b.a.isBlank(i)||(s=i.split(",")),b.a.isArrayData(s)&&(a=s.map((function(e,t){return Object(m.jsx)("p",{children:Object(m.jsx)("span",{children:e})},t)}))),Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[e.id," "]})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.full_name," "]})})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:e.email})}),Object(m.jsx)("div",{className:"body-col width20",children:a}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function vt(){var e=this,t=this.state,a=t.curItem,i=(t.dataRegency,t.dataRoles),s=this.props.t,n=null;return b.a.isArrayData(i)&&(n=i.map((function(t,a){return Object(m.jsx)("li",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)(ne,{inputId:"role_"+t.id,inputName:"role",labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleRoleInputChange(t,a)},label:t.label})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:a.screen_mode===v.a.SCREEN_MODE.EDIT?s("employee.edit_title"):s("employee.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:s("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12vcol-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:s("employee.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:a.status,onChange:function(t){e.handleInputChange(t)}})})]})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("employee.first_name"),inputClass:"form-control",required:"required",inputId:"first_name",inputName:"first_name",value:a.first_name,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("employee.last_name"),inputClass:"form-control",required:"required",inputId:"last_name",inputName:"last_name",value:a.last_name,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("employee.phone"),inputClass:"form-control",required:"required",inputId:"phone",inputName:"phone",value:a.phone,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9-+()._ ]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:s("employee.birthday"),value:a.birthday,inputId:"birthday",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"birthday",minDate:a.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"file-upload",children:[Object(m.jsx)("label",{children:s("employee.avatar")}),Object(m.jsx)("ul",{className:"row",children:Object(m.jsx)("li",{className:"col-md-12 col-12",children:Object(m.jsxs)("div",{className:"item-add-file-upload",children:[Object(m.jsx)("input",{onChange:function(t){return e.onFileAvatarChange(t)},type:"file",id:"file_upload",name:"file_upload"}),a.avatar_upload?"":Object(m.jsx)("div",{className:"add-file-upload",children:Object(m.jsxs)("label",{htmlFor:"file_upload",className:"file-upload",children:[Object(m.jsx)("i",{className:"icon-picture-o"})," ",Object(m.jsx)("span",{children:s("common.upload_image")})]})}),b.a.isBlank(a.file_upload)?b.a.isBlank(a.avatar_full)?"":Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:v.a.SERVER_DATA+"/"+a.avatar_full}),Object(m.jsxs)("div",{className:"file-upload-action",children:[Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})}),Object(m.jsx)("span",{className:"delete",onClick:function(t){return e.onClickDeleteAvatar(t)},children:Object(m.jsx)("var",{className:"icon-trash-o"})})]})]}):Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:a.file_upload}),Object(m.jsx)("div",{className:"file-upload-action",children:Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})})})]})]})})}),b.a.isBlank(a.file_message)?"":Object(m.jsx)("div",{className:"alert alert-danger",children:a.file_message})]})})})]})})]}),Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:s("employee.account_info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("employee.email"),inputClass:"form-control",required:"required",inputId:"email",inputName:"email",value:a.email,disabled:a.screen_mode===v.a.SCREEN_MODE.EDIT,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:200})})})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"group-password",children:[Object(m.jsx)(ce,{label:s("employee.password"),inputClass:"form-control",required:"required",inputId:"password",inputName:"password",value:a.password,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:60}),Object(m.jsxs)("span",{onClick:this.generatePassword.bind(this),className:"generate-pass",children:[" ",s("employee.random")]})]})})})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"group-password",children:Object(m.jsx)(ce,{label:s("employee.re_password"),inputClass:"form-control",required:"required",inputId:"password_confirm",inputName:"password_confirm",value:a.password_confirm,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:60})})})})})})]})})]}),Object(m.jsxs)("div",{className:b.a.isBlank(a.role_message)?"box-info":"box-info input-error-role",children:[Object(m.jsxs)("h2",{children:[s("employee.account_role_info")," ",Object(m.jsx)("span",{className:"required",children:"*"})]}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsx)("div",{className:"list-role",children:Object(m.jsx)("ul",{className:"row",children:n})})})]})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:s("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:a.screen_mode===v.a.SCREEN_MODE.EDIT?s("common.update"):s("common.create")})]})]})}var _t=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.curItem;return s.trans=n,s.curItem=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("first_name","trim",!0),this.addRuleForField("first_name","required",!0,this.trans("validate_rule.required"),this.trans("employee.first_name")),this.addRuleForField("first_name","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("employee.first_name")),this.addRuleForField("last_name","trim",!0),this.addRuleForField("last_name","required",!0,this.trans("validate_rule.required"),this.trans("employee.last_name")),this.addRuleForField("last_name","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("employee.last_name")),this.addRuleForField("phone","trim",!0),this.addRuleForField("phone","required",!0,this.trans("validate_rule.required"),this.trans("employee.phone")),this.addRuleForField("phone","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("employee.phone")),this.addRuleForField("email","trim",!0),this.addRuleForField("email","required",!0,this.trans("validate_rule.required"),this.trans("employee.email")),this.addRuleForField("email","type","email",this.trans("validate_rule.type_email"),this.trans("employee.email")),this.addRuleForField("email","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.email")),(this.curItem.screen_mode==v.a.SCREEN_MODE.ADD||this.curItem.screen_mode==v.a.SCREEN_MODE.EDIT&&!b.a.isBlank(this.curItem.password))&&(this.addRuleForField("password","trim",!0),this.addRuleForField("password","required",!0,this.trans("validate_rule.required"),this.trans("employee.new_password")),this.addRuleForField("password","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.new_password")),this.addRuleForField("password","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("employee.new_password")),this.addRuleForField("password_confirm","trim",!0),this.addRuleForField("password_confirm","required",!0,this.trans("validate_rule.required"),this.trans("employee.password_confirm")),this.addRuleForField("password_confirm","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("employee.password_confirm")),this.addRuleForField("password_confirm","minLength",8,this.trans("validate_rule.minLength_input"),this.trans("employee.password_confirm")))}},{key:"setAlias",value:function(){this.v.setAlias({first_name:this.trans("employee.first_name"),last_name:this.trans("employee.last_name"),phone:this.trans("employee.phone"),email:this.trans("employee.email"),password:this.trans("employee.password"),password_confirm:this.trans("employee.password_confirm")})}}]),a}(ue),gt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onFileAvatarChange=function(e){var t=s.props.t,a=e.target.files[0];if(a&&void 0!==a&&null!==a){var i=a.name,n=a.size,c=null;b.a.checkExtensionFile(i,1)?n<=0?c=t("message.msg_err_file_size"):n>v.a.COMMON.MAX_IMAGE_SIZE&&(c=t("message.msg_err_max_size_upload")):c=t("message.msg_err_ext_image_file");var r=Object(p.a)(s),l=s.state.curItem;if(!b.a.isBlank(c))return l.file_upload="",l.file_message=c,void s.setState({curItem:l});l.file_message="",s.setState({curItem:l});var o=new FileReader;o.onload=function(e){l.file_upload=e.target.result,l.file_name=i,r.setState({curItem:l})},o.readAsDataURL(a)}},s.onClickDeleteAvatar=function(e){var t=s.state.curItem;t.file_message="",t.file_upload="",t.avatar_full=null,t.avatar=null,s.setState({curItem:t})},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage,dataRoles:[],dataRegency:[]},s.jsxTemplate=vt,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;e.screen_mode===v.a.SCREEN_MODE.ADD&&(e.status=1,e.role_data=[],e.regency_data=[]),this.getDataRole()}},{key:"handleRoleInputChange",value:function(e,t){var a=e.target,i=a.name,s=a.value;if("checkbox"===a.type&&(s=a.checked?1:0),i){var n=this.state,c=n.curItem,r=n.dataRoles,l=c.role_data,o=r[t];if(b.a.isObjectEmpty(o))return;1===s?l.push({id_employee:"",id_role:o.id}):b.a.isArrayData(l)&&l.map((function(e,t){e.id_role===o.id&&l.splice(t,1)})),r[t].is_checked=s,c.role_data=l,b.a.isArrayData(l)&&(c.role_message=null),this.setState({curItem:c,dataRoles:r})}}},{key:"handleRegencyInputChange",value:function(e,t){var a=e.target,i=a.name,s=a.value;if("checkbox"===a.type&&(s=a.checked?1:0),i){var n=this.state,c=n.curItem,r=n.dataRegency,l=c.regency_data,o=r[t];if(b.a.isObjectEmpty(o))return;1===s?l.push({id_employee:"",id_regency:o.id}):b.a.isArrayData(l)&&l.map((function(e,t){e.id_regency===o.id&&l.splice(t,1)})),r[t].is_checked=s,c.regency_data=l,this.setState({curItem:c,dataRegency:r})}}},{key:"getDataRole",value:function(){var e=this,t={id_language:this.employee.id_language};it.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)&&e.setState({dataRoles:t},(function(){var t=e.state.curItem;if(t.screen_mode==v.a.SCREEN_MODE.EDIT){var a=e.state.dataRoles;b.a.isArrayData(a)&&a.map((function(e,i){var s=b.a.find(t.role_data,"id_role",e.id);b.a.isObjectEmpty(s)||(a[i].is_checked=1)})),e.setState({dataRoles:a})}}))}))}},{key:"generatePassword",value:function(){var e=this.state.curItem,t=b.a.generateStrRandom(2,2,2,2);e.password=t,e.password_confirm=t,this.setState({curItem:e}),this.setValidateMessage({password:""},!0),this.setValidateMessage({password_confirm:""},!0)}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r,l,o,d;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.t,i=t.target,s=i.name,n=i.value,c=this.state.curItem,!s){e.next=15;break}return r=Object(j.a)({},s,n),l=new _t(this.props),e.next=10,l.validateOne(r,s);case 10:o=e.sent,d=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,"password"===s&&(o=n.length<8||null===d.exec(n)?{password:a("employee.password_valid_min_8character")}:{password:""}),"password_confirm"===s&&b.a.isBlank(o.password_confirm)&&(o=c.password!==n?{password_confirm:a("employee.password_incorrect")}:{password_confirm:""}),null!=o&&this.setValidateMessage(o,!0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l,o,d,h;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.t,a=this.state.curItem,i=this,s=Object.assign({},a),n=!1,c=b.a.isBlank(a.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,r=new _t(this.props),e.next=8,r.FLValidationAll(a);case 8:if(l=e.sent,c!==v.a.SCREEN_MODE.ADD&&b.a.isBlank(a.password)&&b.a.isBlank(a.password_confirm)||(o=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,(d=a.password).length<8||null===o.exec(d)?(l=Object.assign(b.a.isObjectEmpty(l)?{}:l,{password:t("employee.password_valid_min_8character")}),n=!0):(b.a.isObjectEmpty(l)||delete l[d],n=!1),(h=a.password_confirm)!==d||b.a.isBlank(a.password_confirm)?(l=Object.assign(b.a.isObjectEmpty(l)?{}:l,{password_confirm:t("employee.password_incorrect")}),n=!0):(n=!1,b.a.isObjectEmpty(l)||delete l[h])),b.a.isArrayData(a.role_data)?(a.role_message=null,n=!1,i.setState({curItem:a})):(a.role_message=t("employee.role_data"),i.setState({curItem:a},(function(){i.toast(t("employee.role_data"),"error")})),n=!0),!l){e.next=15;break}return this.setValidateMessage(l,!0),n=!0,e.abrupt("return");case 15:if(this.removeAllValidateMessage(),!n){e.next=18;break}return e.abrupt("return");case 18:s.screen_mode=c,s.id_language=this.employee.id_language,s.iso_code=this.employee.iso_code,s.password=b.a.SHA3(a.password),s.created_by=this.employee.first_name+" "+this.employee.last_name,je.instance.save(s,(function(e,t,a){e?(i.toast(a,"info"),i.props.onClickCloseAdd(!0)):t?i.setValidateMessage(t):b.a.isBlank(a)||i.toast(a,"error")}),!0);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function ft(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.id," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this,!1),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var xt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=ft,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,je.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Ot(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(bt,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(gt,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(xt,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"";return Object(m.jsxs)("div",{className:"employee",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("employee.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("employee.fullname"),inputClass:"form-control",inputId:"full_name",inputName:"full_name",value:r.full_name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("employee.id")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"last_name")},className:"name"===r.sort_column?"header-col width25 sorting "+r.order_by:"header-col width25 sorting",children:Object(m.jsx)("p",{children:a("employee.fullname")})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:a("employee.email")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:a("employee.role_name")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:a("employee.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("p",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:e||Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")})})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}a(828);var yt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.default&&(e.tabActive=1===a.default?a.iso_code:"");var s={default:a.default,iso_code:a.iso_code,id_language:a.id,name:"",description:"",icon:"",icon_upload:"",icon_message:"",banner_desktop:"",banner_desktop_upload:"",banner_desktop_message:"",banner_mobile:"",banner_mobile_upload:"",banner_mobile_message:"",meta_title:"",meta_keyword:"",meta_description:"",status:1};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e,t){e&&n.getList(),n.setState({curItem:{},add:!1})},n.onClickCloseDelete=function(e,t){e&&n.getList(),n.setState({delete:!1})},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.id_company=n.employee.id_company,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,je.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.id_company=n.employee.id_company,t.id_language=n.employee.id_language,je.instance.getDetail(t,(function(e){e&&(e.screen_mode=v.a.SCREEN_MODE.EDIT,a.setState({curItem:e,add:!0}))}),!1)}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=Ot,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,je.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.full_name=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Mt=Object(f.a)("common")(yt),Nt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e.onClickAddDevice=function(){e.props.onClickAddDevice&&"function"===typeof e.props.onClickAddDevice&&e.props.onClickAddDevice(e.props.index)},e.onItemClickSetup=function(){e.props.onItemClickSetup&&"function"===typeof e.props.onItemClickSetup&&e.props.onItemClickSetup(e.props.index)},e.onItemClickMove=function(){e.props.onItemClickMove&&"function"===typeof e.props.onItemClickMove&&e.props.onItemClickMove(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.id," "]})})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.name," "]})})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsxs)("p",{children:[e.project_group_name," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.device_total})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.installed_power})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.installed_date})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClickMove.bind(this):null,"data-tip":t("common.move"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon icon-flow-tree","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClickSetup.bind(this):null,"data-tip":t("common.config"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon icon-settings-streamline-1","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.NEW)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.NEW)?this.onClickAddDevice.bind(this):null,"data-tip":t("project.add_device"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-plus","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component),Ct=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onIsCheckedChange=function(){e.props.onIsCheckedChange&&"function"===typeof e.props.onIsCheckedChange&&e.props.onIsCheckedChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=e.role_name,a=[];return b.a.isBlank(t)||(a=t.split(",")),b.a.isArrayData(a)&&a.map((function(e,t){return Object(m.jsx)("p",{children:Object(m.jsx)("span",{children:e})},t)})),Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"is_checked_"+e.id,inputName:"is_checked",checked:1*e.is_checked===1?1:0,onChange:this.onIsCheckedChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width45",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.full_name," "]})})}),Object(m.jsx)("div",{className:"body-col width45",children:Object(m.jsx)("p",{children:e.email})})]},e.id)}}]),a}(r.Component);function kt(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=a.dataProjectGroup,c=a.dataListEmployee,r=this.props.t,l=null;s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),l=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.name"),inputClass:"form-control",required:1===e.is_default?"required":"",inputId:"name_"+e.iso_code,inputName:"name_"+e.iso_code,value:i.data[a].name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.site_name"),inputClass:"form-control",inputId:"site_name_"+e.iso_code,inputName:"site_name_"+e.iso_code,value:i.data[a].site_name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:r("project.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})})]})})},a)})));var o=null;return b.a.isArrayData(c)&&(o=c.map((function(e,a){return Object(m.jsx)(Ct,{index:a,dataItem:e,dataEmployees:b.a.isArrayData(i.dataEmployees)?i.dataEmployees:[],onIsCheckedChange:t.onIsCheckedChange},"row_item_"+a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?r("project.edit_title"):r("project.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:r("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("project.id_project_group"),instanceId:"id_project_group",className:"id_project_group",name:"id_project_group",required:"required",value:n.filter((function(e){return e.id===i.id_project_group})),onChange:function(e){t.handleDropdownChange(e,"id_project_group")},optionList:n,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("project.installed_date"),required:"required",value:i.installed_date,inputId:"installed_date",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"installed_date",handleChange:function(e){t.handleInputDateChange(e),t.validateOne(e)},maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.address"),required:"required",inputClass:"form-control",inputId:"address",inputName:"address",value:i.address,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:500})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.lat"),required:"required",inputClass:"form-control",inputId:"lat",inputName:"lat",value:i.lat,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},pattern:"^[0-9-.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.lng"),required:"required",inputClass:"form-control",inputId:"lng",inputName:"lng",value:i.lng,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},pattern:"^[0-9-.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.installed_power"),required:"required",inputClass:"form-control",inputId:"installed_power",inputName:"installed_power",value:i.installed_power,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:60})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.installed_power_client"),required:"required",inputClass:"form-control",inputId:"installed_power_client",inputName:"installed_power_client",value:i.installed_power_client,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:60})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("project.commisioning_date"),value:i.commisioning_date,required:"required",inputId:"commisioning_date",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"commisioning_date",minDate:i.min_date,handleChange:function(e){t.handleInputDateChange(e),t.validateOne(e)},maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("project.last_updated"),value:i.last_updated,inputId:"last_updated",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"last_updated",minDate:i.min_date,handleChange:function(e){t.handleInputDateChange(e),t.validateOne(e)},maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:r("project.menu_order"),inputClass:"form-control",inputId:"menu_order",inputName:"menu_order",value:i.menu_order,pattern:"^[0-9]*$",onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"file-upload",children:[Object(m.jsx)("label",{children:r("project.avatar")}),Object(m.jsx)("ul",{className:"row",children:Object(m.jsx)("li",{className:"col-md-12 col-12",children:Object(m.jsxs)("div",{className:"item-add-file-upload",children:[Object(m.jsx)("input",{onChange:function(e){return t.onFileAvatarChange(e)},type:"file",id:"upload_thumbnail",name:"upload_thumbnail"}),i.upload_thumbnail?"":Object(m.jsx)("div",{className:"add-file-upload",children:Object(m.jsxs)("label",{htmlFor:"upload_thumbnail",className:"file-upload",children:[Object(m.jsx)("i",{className:"icon-picture-o"})," ",Object(m.jsx)("span",{children:r("common.upload_image")})]})}),b.a.isBlank(i.upload_thumbnail)?b.a.isBlank(i.thumbnail)?"":Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:v.a.SERVER_DATA+"/"+i.thumbnail}),Object(m.jsxs)("div",{className:"file-upload-action",children:[Object(m.jsx)("label",{className:"edit",htmlFor:"upload_thumbnail",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})}),Object(m.jsx)("span",{className:"delete",onClick:function(e){return t.onClickDeleteAvatar(e)},children:Object(m.jsx)("var",{className:"icon-trash-o"})})]})]}):Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:i.upload_thumbnail}),Object(m.jsx)("div",{className:"file-upload-action",children:Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})})})]})]})})}),b.a.isBlank(i.thumbnail_message)?"":Object(m.jsx)("div",{className:"alert alert-danger",children:i.thumbnail_message})]})})})]})})]}),Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:l})]})})})}),Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:r("project.account_manage")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsx)("div",{className:"project-user-manage",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:r("employee.id")})}),Object(m.jsx)("div",{className:"header-col width45",children:Object(m.jsx)("p",{children:r("employee.fullname")})}),Object(m.jsx)("div",{className:"header-col width45",children:Object(m.jsx)("p",{children:r("employee.email")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:o||Object(m.jsx)("div",{className:"data-empty",children:r("common.data_empty")})})})]})})})]})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:r("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?r("common.update"):r("common.create")})]})]})}var Dt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.iso_code_language;return s.trans=n,s.iso_code_language=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){"vi"===this.iso_code_language&&(this.addRuleForField("name_vi","trim",!0),this.addRuleForField("name_vi","required",!0,this.trans("validate_rule.required"),this.trans("project.name")),this.addRuleForField("name_vi","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("project.name"))),"en"===this.iso_code_language&&(this.addRuleForField("name_en","trim",!0),this.addRuleForField("name_en","required",!0,this.trans("validate_rule.required"),this.trans("project.name")),this.addRuleForField("name_en","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("project.name"))),this.addRuleForField("id_project_group","trim",!0),this.addRuleForField("id_project_group","required",!0,this.trans("validate_rule.required"),this.trans("project.id_project_group")),this.addRuleForField("id_project_group","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.id_project_group")),this.addRuleForField("installed_date","trim",!0),this.addRuleForField("installed_date","required",!0,this.trans("validate_rule.required"),this.trans("project.installed_date")),this.addRuleForField("installed_date","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.installed_date")),this.addRuleForField("address","trim",!0),this.addRuleForField("address","required",!0,this.trans("validate_rule.required"),this.trans("project.address")),this.addRuleForField("address","maxLength",500,this.trans("validate_rule.maxLength_input"),this.trans("project.address")),this.addRuleForField("lat","trim",!0),this.addRuleForField("lat","required",!0,this.trans("validate_rule.required"),this.trans("project.lat")),this.addRuleForField("lat","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.lat")),this.addRuleForField("lng","trim",!0),this.addRuleForField("lng","required",!0,this.trans("validate_rule.required"),this.trans("project.lng")),this.addRuleForField("lng","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.lng")),this.addRuleForField("installed_power","trim",!0),this.addRuleForField("installed_power","required",!0,this.trans("validate_rule.required"),this.trans("project.installed_power")),this.addRuleForField("installed_power","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("project.installed_power")),this.addRuleForField("installed_power_client","trim",!0),this.addRuleForField("installed_power_client","required",!0,this.trans("validate_rule.required"),this.trans("project.installed_power")),this.addRuleForField("installed_power_client","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("project.installed_power")),this.addRuleForField("commisioning_date","trim",!0),this.addRuleForField("commisioning_date","required",!0,this.trans("validate_rule.required"),this.trans("project.commisioning_date")),this.addRuleForField("commisioning_date","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.commisioning_date"))}},{key:"setAlias",value:function(){"vi"===this.iso_code_language&&this.v.setAlias({name_vi:this.trans("project.name"),id_project_group:this.trans("project.id_project_group"),installed_date:this.trans("project.installed_date"),address:this.trans("project.address"),lat:this.trans("project.lat"),lng:this.trans("project.lng"),installed_power:this.trans("project.installed_power"),installed_power_client:this.trans("project.installed_power_client"),commisioning_date:this.trans("project.commisioning_date")}),"en"===this.iso_code_language&&this.v.setAlias({name_en:this.trans("project.name"),id_project_group:this.trans("project.id_project_group"),installed_date:this.trans("project.installed_date"),address:this.trans("project.address"),lat:this.trans("project.lat"),lng:this.trans("project.lng"),installed_power:this.trans("project.installed_power"),installed_power_client:this.trans("project.installed_power_client"),commisioning_date:this.trans("project.commisioning_date")})}}]),a}(ue),wt=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT_GROUP.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.PROJECT_GROUP.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT_GROUP.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT_GROUP.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT_GROUP.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.PROJECT_GROUP.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),At=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.PROJECT.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"saveConfig",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.SAVE_CONFIG,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"saveMoveDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.SAVE_MOVE_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"saveConfigEstimationSenSor",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.SAVE_CONFIG_SENSOR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDetailConfig",value:function(e,t){try{new x.a(!0).post(v.a.URL.PROJECT.DETAIL_CONFIG,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.PROJECT.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.PROJECT.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),It=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onIsCheckedChange=function(e){var t=s.state.dataListEmployee;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t[e].is_checked=t[e].is_checked?0:1,s.setState({dataListEmployee:t}))}},s.onFileAvatarChange=function(e){var t=s.props.t,a=e.target.files[0];if(a&&void 0!==a&&null!==a){var i=a.name,n=a.size,c=null;b.a.checkExtensionFile(i,1)?n<=0?c=t("message.msg_err_file_size"):n>v.a.COMMON.MAX_IMAGE_SIZE&&(c=t("message.msg_err_max_size_upload")):c=t("message.msg_err_ext_image_file");var r=Object(p.a)(s),l=s.state.curItem;if(!b.a.isBlank(c))return l.upload_thumbnail="",l.thumbnail_message=c,void s.setState({curItem:l});l.thumbnail_message="",s.setState({curItem:l});var o=new FileReader;o.onload=function(e){l.upload_thumbnail=e.target.result,l.upload_thumbnail_name=i,r.setState({curItem:l})},o.readAsDataURL(a)}},s.onClickDeleteAvatar=function(e){var t=s.state.curItem;t.thumbnail_message="",t.thumbnail_upload="",t.thumbnail=null,s.setState({curItem:t})},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.id_project_group="";else{var n=e.value;i[t]=n,a.setValidateMessage({id_project_group:""},!0)}a.setState({curItem:i})},s.onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,4),o=a.substr(0,9),d=a.substr(0,11);c.map((function(t,a){return r===t.iso_code&&"name"===l&&(n.data[a].name=e.target.validity.valid?i:s.state.curItem.data[a].name),r===t.iso_code&&"site_name"===o&&(n.data[a].site_name=e.target.validity.valid?i:s.state.curItem.data[a].site_name),r===t.iso_code&&"description"===d&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:Object.assign({},s.props.curItem),allLanguage:s.props.allLanguage,dataProjectGroup:[],dataListEmployee:[]},s.jsxTemplate=kt,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;if(e.screen_mode===v.a.SCREEN_MODE.ADD){var t=[];t.push({id_project:null,id_employee:this.employee.id_employee}),e.dataEmployees=t}this.getDataProjectGroup(),this.getListAllEmployee()}},{key:"getListAllEmployee",value:function(){var e=this,t={id_language:this.employee.id_language},a=this.state.curItem,i=b.a.isArrayData(a.dataEmployees)?a.dataEmployees:[];je.instance.getListAll(t,(function(t,a){if(b.a.isArrayData(t)){for(var s=0,n=t.length;s<n;s++){var c=b.a.find(i,"id_employee",t[s].id);b.a.isObjectEmpty(c)?t[s].is_checked=0:t[s].is_checked=1}e.setState({dataListEmployee:t})}else e.setState({dataListEmployee:[]})}))}},{key:"getDataProjectGroup",value:function(){var e=this,t={id_language:this.employee.id_language};wt.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataProjectGroup:t}):e.setState({dataProjectGroup:[]})}))}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Dt(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l,o,d,h,m;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.curItem,i=t.dataListEmployee,s=this,n=Object.assign({},this.state.curItem),c=b.a.isBlank(a.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,r=new Dt(this.props),e.next=6,r.FLValidationAll(a);case 6:if(!(l=e.sent)){e.next=10;break}return this.setValidateMessage(l),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),n.screen_mode=c,n.iso_code_lang=this.employee.lang,n.id_language=this.employee.id_language,n.iso_code=this.employee.iso_code,o=[],b.a.isArrayData(i))for(d=0,h=i.length;d<h;d++)i[d].is_checked&&o.push({id_project:null,id_employee:i[d].id});if(n.dataEmployees=o,!b.a.isArrayData(n.data)){e.next=25;break}if(m=b.a.find(n.data,"is_default",1)){e.next=22;break}return e.abrupt("return");case 22:n.data.map((function(e,t){return n.data[t].name=""===e.name?m.name:e.name,n.data[t].site_name=""===e.site_name?m.site_name:e.site_name,n.data[t].description=""===e.description?m.description:e.description,n})),e.next=26;break;case 25:return e.abrupt("return",!1);case 26:At.instance.save(n,(function(e,t,a){e?(s.toast(a,"info"),s.props.onClickCloseAdd(!0)):t?s.setValidateMessage(t):b.a.isBlank(a)||s.toast(a,"error")}),!0);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Pt(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var Yt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=Pt,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,At.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee),Et=(a(829),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onClickDeleteDevice=function(){e.props.onClickDeleteDevice&&"function"===typeof e.props.onClickDeleteDevice&&e.props.onClickDeleteDevice(e.props.index)},e.onIsVirtualChange=function(){e.props.onIsVirtualChange&&"function"===typeof e.props.onIsVirtualChange&&e.props.onIsVirtualChange(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:e.name})," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[e.model," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.serial_number})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.device_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.manufacturer})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"is_share"+e.id,inputName:"is_share",checked:1*e.is_share===1?1:0,readOnly:!0,disabled:!0})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"is_virtual_"+e.id,inputName:"is_virtual",checked:1*e.is_virtual===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onIsVirtualChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[1!=e.is_share?Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):"","data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}):"",Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onClickDeleteDevice.bind(this):"","data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component));function Lt(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("device.delete_device"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDeleteDevice.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDeleteDevice.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteDeviceAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var St=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getListDeviceByProject",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.LIST_DEVICE_BY_PROJECT,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListDeviceByProjectShare",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.LIST_DEVICE_BY_PROJECT_SHARE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListDeviceByHashId",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.CLIENT_LIST_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"updateIsVirtual",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE.UPDATE_IS_VIRTUAL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"saveDeviceShare",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.SAVE_DEVICE_SHARE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Tt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItemDelete},s.jsxTemplate=Lt,s}return Object(s.a)(a,[{key:"onClickCloseDeleteDevice",value:function(){this.props.onClickCloseDeleteDevice&&"function"===typeof this.props.onClickCloseDeleteDevice&&this.props.onClickCloseDeleteDevice(!1,null)}},{key:"onDeleteDeviceAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,St.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDeleteDevice(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee),Rt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onIsCheckedChange=function(){e.props.onIsCheckedChange&&"function"===typeof e.props.onIsCheckedChange&&e.props.onIsCheckedChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"is_checked_"+e.id,inputName:"is_checked",checked:1*e.is_checked===1?1:0,onChange:this.onIsCheckedChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsxs)("p",{children:[e.name," "]})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsxs)("p",{children:[e.model," "]})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:e.serial_number})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("p",{children:e.device_type_name})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("p",{children:e.manufacturer})})]},e.id)}}]),a}(r.Component);function Ft(){var e,t=this,a=this.state,i=a.curItem,s=a.dataListProject,n=a.dataList,c=this.props.t,r=n.filter((function(e){return 1==e.is_checked}));return e=n.map((function(e,a){return Object(m.jsx)(Rt,{index:a,dataItem:e,onIsCheckedChange:t.onIsCheckedChange,actions:t.actions,t:c},"row_item_"+a)})),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-device",dialogClassName:"modal-xl screen-full modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:c("device.add_device_share")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseDeviceShare.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:c("device.choose_device_title")}),Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-11",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{instanceId:"id_project",className:"id_project",name:"id_project",isSearchable:!0,value:s.filter((function(e){return e.id===i.id_project})),onChange:function(e){t.handleDropdownChange(e,"id_project")},optionList:s,placeHolder:c("common.choose")})})})})})}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("strong",{children:c("device.checked")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:c("device.device_name")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:c("device.model")})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:c("device.serial_number")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:c("device.id_device_type")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:c("device.manufacturer")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:c("common.data_empty")}):e})})]})})]})]})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseDeviceShare.bind(this,!1),children:c("common.cancel")}),Object(m.jsx)("button",{type:"button",disabled:!b.a.isArrayData(r),className:"btn btn-save",onClick:this.onSave.bind(this),children:c("common.save")})]})]})}var Ht=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onIsCheckedChange=function(e){var t=s.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t[e].is_checked=t[e].is_checked?0:1,s.setState({dataList:t}))}},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.id_project="";else{var n=e.value;i[t]=n}a.setState({curItem:i},(function(){a.getList()}))},s.state={curItem:{},curItemProject:s.props.curItemProject,dataListProject:[],dataList:[],searchParam:{}},s.jsxTemplate=Ft,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList(),this.getDataListProject()}},{key:"getList",value:function(){var e=this,t=this.state.curItem,a=this.state.searchParam;a.id_language=this.employee.id_language,a.id_project=t.id_project,b.a.isBlank(t.id_project)||St.instance.getListDeviceByProjectShare(a,(function(t,a){b.a.isArrayData(t)?e.setState({dataList:t}):e.setState({dataList:[]}),e.forceUpdate()}))}},{key:"getDataListProject",value:function(){var e=this,t=this.state.curItemProject,a={id_language:this.employee.id_language,id_project:t.id?t.id:null};At.instance.getDropdownList(a,(function(t,a){b.a.isArrayData(t)?e.setState({dataListProject:t}):e.setState({dataListProject:[]})}))}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.curItemProject,i=t.dataList,s=this,!b.a.isBlank(a.id)&&b.a.isArrayData(i)){e.next=3;break}return e.abrupt("return");case 3:for(n={},c=[],r=0,l=i.length;r<l;r++)1==i[r].is_checked&&c.push({id_project:a.id,id_device:i[r].id});if(b.a.isArrayData(c)){e.next=8;break}return e.abrupt("return");case 8:n.dataParams=c,n.screen_mode=v.a.SCREEN_MODE.ADD,St.instance.saveDeviceShare(n,(function(e,t,a){e?(s.toast(a,"info"),s.props.onClickCloseDeviceShare(!0)):t?s.setValidateMessage(t):b.a.isBlank(a)||s.toast(a,"error")}),!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Bt(){var e,t=this,a=this.state,i=a.curItemProject,s=a.curItem,n=a.curItemDelete,c=a.dataDeviceType,r=a.dataDeviceGroup,l=a.dataList,o=this.props.t;e=l.map((function(e,a){return Object(m.jsx)(Et,{index:a,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onIsVirtualChange:t.onIsVirtualChange,onStatusChange:t.onStatusChange,actions:t.props.actions,auth:t.props.auth,onClickDeleteDevice:t.onClickDeleteDevice,t:o},"row_item_"+a)}));var d=this.state.showDeleteDevice?Object(m.jsx)(Tt,{t:o,auth:this.props.auth,actions:this.actions,curItemDelete:n,onClickCloseDeleteDevice:this.onClickCloseDeleteDevice}):"",h=this.state.showDeviceShare?Object(m.jsx)(Ht,{t:o,auth:this.props.auth,actions:this.actions,curItemProject:i,onClickCloseDeviceShare:this.onClickCloseDeviceShare}):"";return Object(m.jsxs)("div",{className:"main-multi-modal",children:[Object(m.jsx)("div",{className:"modal-device-share",children:h}),Object(m.jsx)("div",{className:"modal-delete-device",children:d}),Object(m.jsx)("div",{className:"modal-list-device",children:Object(m.jsxs)(Se.a,{visible:!0,className:"modal-device",dialogClassName:"modal-xl screen-full modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.name}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAddDevice.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsxs)("h2",{children:[o("device.device_title"),Object(m.jsx)("div",{onClick:this.onClickDeviceShare.bind(this),className:"add-device-share",children:"Add device share"})]}),Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-11",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("device.id_device"),inputClass:"form-control",required:"required",inputId:"id_device",inputName:"id_device",value:s.id_device,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("device.device_name"),inputClass:"form-control",required:"required",inputId:"name",inputName:"name",value:s.name,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("device.model"),inputClass:"form-control",required:"required",inputId:"model",inputName:"model",value:s.model,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("device.serial_number"),inputClass:"form-control",required:"required",inputId:"serial_number",inputName:"serial_number",value:s.serial_number,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:o("device.id_device_type"),instanceId:"id_device_type",className:"id_device_type",name:"id_device_type",required:"required",value:c.filter((function(e){return e.id===s.id_device_type})),onChange:function(e){t.handleDropdownChange(e,"id_device_type")},optionList:c,placeHolder:o("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:o("device.id_device_group"),instanceId:"id_device_group",className:"id_device_group",name:"id_device_group",required:"required",value:r.filter((function(e){return e.id===s.id_device_group})),onChange:function(e){t.handleDropdownChange(e,"id_device_group")},optionList:r,placeHolder:o("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:o("device.installed_at"),value:s.installed_at,inputId:"installed_at",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"installed_at",minDate:s.min_date,handleChange:function(e){t.handleInputDateChange(e),t.validateOne(e)},maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("device.manufacturer"),inputClass:"form-control",inputId:"manufacturer",inputName:"manufacturer",value:s.manufacturer,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("device.menu_order"),inputClass:"form-control",inputId:"menu_order",inputName:"menu_order",value:s.menu_order,pattern:"^[0-9]*$",onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:200})})})]})}),Object(m.jsx)("div",{className:"col-md-1",children:Object(m.jsx)("button",{type:"button",className:"btn btn-save btn-margin-top",onClick:this.onSave.bind(this),children:s.screen_mode===v.a.SCREEN_MODE.EDIT?o("common.update"):o("common.create")})})]}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:o("device.device_name")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:o("device.model")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:o("device.serial_number")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:o("device.id_device_type")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:o("device.manufacturer")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:o("device.is_share")})}),Object(m.jsx)("div",{className:"header-col width10 sorting text-center",children:Object(m.jsx)("p",{children:o("device.is_virtual")})}),Object(m.jsx)("div",{className:"header-col width10 sorting text-center",children:Object(m.jsx)("p",{children:o("device.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:o("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:o("common.data_empty")}):e})})]})})]})]})})]})})]})}var Ut=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("name","trim",!0),this.addRuleForField("name","required",!0,this.trans("validate_rule.required"),this.trans("device.name")),this.addRuleForField("name","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("device.name")),this.addRuleForField("id_device","trim",!0),this.addRuleForField("id_device","required",!0,this.trans("validate_rule.required"),this.trans("device.id_device")),this.addRuleForField("id_device","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("device.id_device")),this.addRuleForField("model","trim",!0),this.addRuleForField("model","required",!0,this.trans("validate_rule.required"),this.trans("device.model")),this.addRuleForField("model","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("device.model")),this.addRuleForField("serial_number","trim",!0),this.addRuleForField("serial_number","required",!0,this.trans("validate_rule.required"),this.trans("device.serial_number")),this.addRuleForField("serial_number","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("device.serial_number")),this.addRuleForField("id_device_type","trim",!0),this.addRuleForField("id_device_type","required",!0,this.trans("validate_rule.required"),this.trans("device.id_device_type")),this.addRuleForField("id_device_type","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.id_device_type")),this.addRuleForField("id_device_group","trim",!0),this.addRuleForField("id_device_group","required",!0,this.trans("validate_rule.required"),this.trans("device.id_device_group")),this.addRuleForField("id_device_group","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.id_device_group"))}},{key:"setAlias",value:function(){this.v.setAlias({id_device:this.trans("device.id_device"),name:this.trans("device.name"),model:this.trans("device.model"),serial_number:this.trans("device.serial_number"),id_device_type:this.trans("device.id_device_type"),id_device_group:this.trans("device.id_device_group")})}}]),a}(ue),Vt=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0);t([{id:1,name:"Group 1",status:1},{id:2,name:"Group 2",status:1},{id:3,name:"Group 3",status:1},{id:4,name:"Group 4",status:1},{id:5,name:"Group 5",status:1},{id:6,name:"Group 6",status:1}],40,"")}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_TYPE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_TYPE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_TYPE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_TYPE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_TYPE.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_TYPE.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Wt=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0);t([{id:1,name:"Group 1",status:1},{id:2,name:"Group 2",status:1},{id:3,name:"Group 3",status:1},{id:4,name:"Group 4",status:1},{id:5,name:"Group 5",status:1},{id:6,name:"Group 6",status:1}],40,"")}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_GROUP.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_GROUP.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_GROUP.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_GROUP.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_GROUP.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_GROUP.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),qt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickDeviceShare=function(){s.setState({showDeviceShare:!0},(function(){document.body.classList.add("modal-multi")}))},s.onClickCloseDeviceShare=function(e){e&&s.getListDeviceByProject(),s.setState({showDeviceShare:!1},(function(){document.body.classList.remove("modal-multi")}))},s.onClickDeleteDevice=function(e){if(b.a.isArrayData(s.state.dataList)){var t=s.state.dataList[e];b.a.isObjectEmpty(t)||s.setState({showDeleteDevice:!0,curItemDelete:t},(function(){document.body.classList.add("modal-multi")}))}},s.onClickCloseDeleteDevice=function(e){e&&s.getListDeviceByProject(),s.setState({curItemDelete:{},showDeleteDevice:!1},(function(){document.body.classList.remove("modal-multi")}))},s.onItemClick=function(e){if(b.a.isArrayData(s.state.dataList)){var t=s.state.dataList[e];t.screen_mode=v.a.SCREEN_MODE.EDIT,b.a.isObjectEmpty(t)||s.setState({curItem:Object.assign({},t)})}},s.onIsVirtualChange=function(e){var t=s.state.curItemProject;if(b.a.isArrayData(s.state.dataList)){var a=s.state.dataList[e],i=Object(p.a)(s);a.screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=s.employee.id_language;var n=a.is_virtual;n=1*n===1?0:1,a.id_project=t.id,a.is_virtual=n,a.updated_by=s.employee.first_name+" "+s.employee.last_name,St.instance.updateIsVirtual(a,(function(e,t){e&&i.setState({dataList:i.state.dataList})}))}},s.onStatusChange=function(e){var t=s.state.curItemProject;if(b.a.isArrayData(s.state.dataList)){var a=s.state.dataList[e],i=Object(p.a)(s);a.screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=s.employee.id_language;var n=a.status;n=1*n===1?0:1,a.id_project=t.id,a.status=n,a.updated_by=s.employee.first_name+" "+s.employee.last_name,St.instance.updateStatus(a,(function(e,t){e&&i.setState({dataList:i.state.dataList})}))}},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;s.props.t;if("id_device_type"===t)if(b.a.isObjectEmpty(e))i.id_device_type="";else{var n=e.value;i[t]=n,a.setValidateMessage({id_device_type:""},!0)}if("id_device_group"===t)if(b.a.isObjectEmpty(e))i.id_device_group="";else{n=e.value;i[t]=n,a.setValidateMessage({id_device_group:""},!0)}a.setState({curItem:i})},s.state={curItemProject:s.props.curItem,curItem:{},curItemDelete:{},dataDeviceType:[],dataDeviceGroup:[],dataList:[],searchParam:{},showDeleteDevice:!1,showDeviceShare:!1},s.jsxTemplate=Bt,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeviceType(),this.getDeviceGroup(),this.getListDeviceByProject()}},{key:"getListDeviceByProject",value:function(){var e=this,t=this.state,a=t.curItemProject,i=t.searchParam;i.id_project=a.id,i.id_language=this.employee.id_language,St.instance.getListDeviceByProject(i,(function(t,a){b.a.isArrayData(t)?e.setState({dataList:t}):e.setState({dataList:[]}),e.forceUpdate()}))}},{key:"getDeviceType",value:function(){var e=this,t={id_language:this.employee.id_language};Vt.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataDeviceType:t}):e.setState({dataDeviceType:[]})}))}},{key:"getDeviceGroup",value:function(){var e=this,t={id_language:this.employee.id_language};Wt.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataDeviceGroup:t}):e.setState({dataDeviceGroup:[]})}))}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Ut(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.curItem,i=t.curItemProject,s=this,a.id_project=i.id,n=Object.assign({},this.state.curItem),c=b.a.isBlank(a.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,r=new Ut(this.props),e.next=7,r.FLValidationAll(a);case 7:if(!(l=e.sent)){e.next=11;break}return this.setValidateMessage(l),e.abrupt("return");case 11:this.removeAllValidateMessage(),n.screen_mode=c,n.iso_code_lang=this.employee.lang,n.id_language=this.employee.id_language,n.iso_code=this.employee.iso_code,St.instance.save(n,(function(e,t,a){e?(s.toast(a,"info"),s.setState({curItem:{}},(function(){s.getListDeviceByProject()}))):t?s.setValidateMessage(t):b.a.isBlank(a)||s.toast(a,"error")}),!0);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee),zt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width10",children:this.props.index+1}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"config_revenue",inputName:"config_revenue",value:t.config_revenue,onChange:function(t){e.props.handleInputChangeItem(t,e.props.index)},pattern:"^[0-9.]*$",maxLength:20})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)(Ee,{value:t.start_date,inputId:"start_date",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",handleChange:function(t){e.props.handleInputChangeItem(t,e.props.index)},maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)(Ee,{value:t.end_date,inputId:"end_date",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",handleChange:function(t){e.props.handleInputChangeItem(t,e.props.index)},maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsx)("ul",{children:Object(m.jsx)("li",{onClick:this.onItemClickDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})})})})]},t.id)}}]),a}(r.Component);function Gt(){var e=this,t=this.state,a=t.curItem,i=t.curItemProject,s=t.dataYear,n=t.dataConfigRevenue,c=this.props.t,r=null;return b.a.isArrayData(n)&&(r=n.map((function(t,i){return Object(m.jsx)(zt,{index:i,dataItem:t,dataEmployees:b.a.isArrayData(a.dataEmployees)?a.dataEmployees:[],onItemClickDelete:e.onItemClickDelete,handleInputChangeItem:e.handleInputChangeItem},"row_item_"+i)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-project-config",dialogClassName:"modal-xl modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[c("project.setup_title"),": ",i.name]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onItemClickCloseSetup.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsxs)("h2",{children:[c("project.estimation_sensor"),Object(m.jsx)("button",{type:"button",className:"btn btn-save save-config",onClick:this.onSaveEstimationSenSor.bind(this),children:(a.screen_mode,v.a.SCREEN_MODE.EDIT,c("common.save"))})]}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("legend",{children:"M\xe1i 1"}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.config_yi"),inputClass:"form-control",inputId:"config_yi",inputName:"config_yi",value:a.config_yi,onChange:function(t){e.handleInputChange(t),e.validateOneEst(t)},pattern:"^[0-9.-]*$",required:"required",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.config_po"),inputClass:"form-control",inputId:"config_po",inputName:"config_po",value:a.config_po,onChange:function(t){e.handleInputChange(t),e.validateOneEst(t)},pattern:"^[0-9.]*$",required:"required",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.total_loss_factor"),inputClass:"form-control",inputId:"total_loss_factor",inputName:"total_loss_factor",value:a.total_loss_factor,onChange:function(t){e.handleInputChange(t),e.validateOneEst(t)},pattern:"^[0-9.]*$",required:"required",maxLength:20})})})]})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("legend",{children:"M\xe1i 2"}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.config_yi"),inputClass:"form-control",inputId:"config_yi1",inputName:"config_yi1",value:a.config_yi1,onChange:function(t){e.handleInputChange(t),e.validateOneEst(t)},pattern:"^[0-9.-]*$",required:"required",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.config_po"),inputClass:"form-control",inputId:"config_po1",inputName:"config_po1",value:a.config_po1,onChange:function(t){e.handleInputChange(t),e.validateOneEst(t)},pattern:"^[0-9.]*$",required:"required",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.total_loss_factor"),inputClass:"form-control",inputId:"total_loss_factor1",inputName:"total_loss_factor1",value:a.total_loss_factor1,onChange:function(t){e.handleInputChange(t),e.validateOneEst(t)},pattern:"^[0-9.]*$",required:"required",maxLength:20})})})]})]})})]})})]}),Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:c("project.revenue")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsx)("div",{className:"project-user-manage",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"ID"})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:c("project.value")})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:c("project.from_date")})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:c("project.to_date")})}),Object(m.jsx)("div",{className:"header-col width15 text-end",children:Object(m.jsx)("div",{className:"add-config",onClick:this.addRowConfigRevenue.bind(this),children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:r||Object(m.jsx)("div",{className:"data-empty",children:c("common.data_empty")})})})]})})})]}),Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:c("project.performance_estimate")}),Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.yearly_egrade_default"),inputClass:"form-control",inputId:"yearly_egrade_default",inputName:"yearly_egrade_default",required:"required",value:a.yearly_egrade_default,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:3})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.yearly_egrade_two"),inputClass:"form-control",required:"required",inputId:"yearly_egrade_two",inputName:"yearly_egrade_two",value:a.yearly_egrade_two,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:3})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:c("project.year"),instanceId:"year",className:"year",name:"year",required:"required",value:s.filter((function(e){return e.id===a.year})),onChange:function(t){e.handleDropdownChange(t,"year")},optionList:s,placeHolder:c("common.choose")})})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.jan"),inputClass:"form-control",inputId:"jan",inputName:"jan",value:a.jan,required:"required",onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.feb"),inputClass:"form-control",inputId:"feb",inputName:"feb",required:"required",value:a.feb,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.mar"),inputClass:"form-control",inputId:"mar",inputName:"mar",required:"required",value:a.mar,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.apr"),inputClass:"form-control",inputId:"apr",inputName:"apr",value:a.apr,required:"required",onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.may"),inputClass:"form-control",inputId:"may",inputName:"may",required:"required",value:a.may,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.jun"),inputClass:"form-control",inputId:"jun",required:"required",inputName:"jun",value:a.jun,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.jul"),inputClass:"form-control",inputId:"jul",inputName:"jul",required:"required",value:a.jul,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.aug"),inputClass:"form-control",inputId:"aug",inputName:"aug",value:a.aug,required:"required",onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.sep"),inputClass:"form-control",inputId:"sep",inputName:"sep",required:"required",value:a.sep,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.oct"),inputClass:"form-control",inputId:"oct",inputName:"oct",value:a.oct,required:"required",onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.nov"),inputClass:"form-control",inputId:"nov",inputName:"nov",required:"required",value:a.nov,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:c("project.dec"),inputClass:"form-control",inputId:"dec",inputName:"dec",required:"required",value:a.dec,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^[0-9.]*$",maxLength:20})})})]})]})]})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onItemClickCloseSetup.bind(this,!1),children:c("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:(a.screen_mode,v.a.SCREEN_MODE.EDIT,c("common.save"))})]})]})}var $t=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("yearly_egrade_default","trim",!0),this.addRuleForField("yearly_egrade_default","required",!0,this.trans("validate_rule.required"),this.trans("project.yearly_egrade_default")),this.addRuleForField("yearly_egrade_default","maxLength",3,this.trans("validate_rule.maxLength_input"),this.trans("project.yearly_egrade_default")),this.addRuleForField("yearly_egrade_two","trim",!0),this.addRuleForField("yearly_egrade_two","required",!0,this.trans("validate_rule.required"),this.trans("project.yearly_egrade_two")),this.addRuleForField("yearly_egrade_two","maxLength",3,this.trans("validate_rule.maxLength_input"),this.trans("project.yearly_egrade_two")),this.addRuleForField("year","trim",!0),this.addRuleForField("year","required",!0,this.trans("validate_rule.required"),this.trans("project.year")),this.addRuleForField("year","maxLength",4,this.trans("validate_rule.maxLength_input"),this.trans("project.year")),this.addRuleForField("jan","trim",!0),this.addRuleForField("jan","required",!0,this.trans("validate_rule.required"),this.trans("project.jan")),this.addRuleForField("jan","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.jan")),this.addRuleForField("feb","trim",!0),this.addRuleForField("feb","required",!0,this.trans("validate_rule.required"),this.trans("project.feb")),this.addRuleForField("feb","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.feb")),this.addRuleForField("mar","trim",!0),this.addRuleForField("mar","required",!0,this.trans("validate_rule.required"),this.trans("project.mar")),this.addRuleForField("mar","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.mar")),this.addRuleForField("apr","trim",!0),this.addRuleForField("apr","required",!0,this.trans("validate_rule.required"),this.trans("project.apr")),this.addRuleForField("apr","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.apr")),this.addRuleForField("may","trim",!0),this.addRuleForField("may","required",!0,this.trans("validate_rule.required"),this.trans("project.may")),this.addRuleForField("may","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.may")),this.addRuleForField("jun","trim",!0),this.addRuleForField("jun","required",!0,this.trans("validate_rule.required"),this.trans("project.jun")),this.addRuleForField("jun","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.jun")),this.addRuleForField("jul","trim",!0),this.addRuleForField("jul","required",!0,this.trans("validate_rule.required"),this.trans("project.jul")),this.addRuleForField("jul","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.jul")),this.addRuleForField("aug","trim",!0),this.addRuleForField("aug","required",!0,this.trans("validate_rule.required"),this.trans("project.aug")),this.addRuleForField("aug","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.aug")),this.addRuleForField("sep","trim",!0),this.addRuleForField("sep","required",!0,this.trans("validate_rule.required"),this.trans("project.sep")),this.addRuleForField("sep","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.sep")),this.addRuleForField("oct","trim",!0),this.addRuleForField("oct","required",!0,this.trans("validate_rule.required"),this.trans("project.oct")),this.addRuleForField("oct","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.oct")),this.addRuleForField("nov","trim",!0),this.addRuleForField("nov","required",!0,this.trans("validate_rule.required"),this.trans("project.nov")),this.addRuleForField("nov","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.nov")),this.addRuleForField("dec","trim",!0),this.addRuleForField("dec","required",!0,this.trans("validate_rule.required"),this.trans("project.dec")),this.addRuleForField("dec","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.dec"))}},{key:"setAlias",value:function(){this.v.setAlias({yearly_egrade_default:this.trans("project.yearly_egrade_default"),yearly_egrade_two:this.trans("project.yearly_egrade_two"),year:this.trans("project.year"),jan:this.trans("project.jan"),feb:this.trans("project.feb"),mar:this.trans("project.mar"),apr:this.trans("project.apr"),may:this.trans("project.may"),jun:this.trans("project.jun"),jul:this.trans("project.jul"),aug:this.trans("project.aug"),sep:this.trans("project.sep"),oct:this.trans("project.oct"),nov:this.trans("project.nov"),dec:this.trans("project.dec")})}}]),a}(ue),Kt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("config_yi","trim",!0),this.addRuleForField("config_yi","required",!0,this.trans("validate_rule.required"),this.trans("project.config_yi")),this.addRuleForField("config_yi","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.config_yi")),this.addRuleForField("config_po","trim",!0),this.addRuleForField("config_po","required",!0,this.trans("validate_rule.required"),this.trans("project.config_po")),this.addRuleForField("config_po","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.config_po")),this.addRuleForField("total_loss_factor","trim",!0),this.addRuleForField("total_loss_factor","required",!0,this.trans("validate_rule.required"),this.trans("project.total_loss_factor")),this.addRuleForField("total_loss_factor","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.total_loss_factor")),this.addRuleForField("config_yi1","trim",!0),this.addRuleForField("config_yi1","required",!0,this.trans("validate_rule.required"),this.trans("project.config_yi")),this.addRuleForField("config_yi1","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.config_yi")),this.addRuleForField("config_po1","trim",!0),this.addRuleForField("config_po1","required",!0,this.trans("validate_rule.required"),this.trans("project.config_po")),this.addRuleForField("config_po1","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.config_po")),this.addRuleForField("total_loss_factor1","trim",!0),this.addRuleForField("total_loss_factor1","required",!0,this.trans("validate_rule.required"),this.trans("project.total_loss_factor")),this.addRuleForField("total_loss_factor1","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("project.total_loss_factor"))}},{key:"setAlias",value:function(){this.v.setAlias({config_yi:this.trans("project.config_yi"),config_po:this.trans("project.config_po"),total_loss_factor:this.trans("project.total_loss_factor"),config_yi1:this.trans("project.config_yi"),config_po1:this.trans("project.config_po"),total_loss_factor1:this.trans("project.total_loss_factor")})}}]),a}(ue),Jt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).loadConfig=function(){var e=s.props.curItem,t=Object(p.a)(s);b.a.isObjectEmpty(e)||At.instance.getDetailConfig(e,(function(e){e&&t.setState({curItem:e,dataConfigRevenue:b.a.isArrayData(e.dataConfigRevenue)?e.dataConfigRevenue:[]})}),!1)},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.year="";else{var n=e.value;i[t]=n,a.setValidateMessage({year:""},!0)}a.setState({curItem:i})},s.onItemClickDelete=function(e){var t=s.state.dataConfigRevenue;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t.splice(e,1),s.setState({dataConfigRevenue:t}))}},s.addRowConfigRevenue=function(){var e=s.state.dataConfigRevenue;e.push({id:"",id_project:"",config_revenue:"",start_date:"",end_date:"",status:1}),s.setState({dataConfigRevenue:e})},s.state={curItemProject:s.props.curItem,curItem:{},dataYear:s.getListYear(),dataConfigRevenue:[]},s.jsxTemplate=Gt,s.handleInputChangeItem=s.handleInputChangeItem.bind(Object(p.a)(s)),s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadConfig()}},{key:"handleInputChangeItem",value:function(e,t){var a=e.target,i=a.name,s=a.value;if("checkbox"===a.type&&(s=a.checked?1:0),i){var n=this.state.dataConfigRevenue,c=n[t];if("config_revenue"==i){(""==s||/^[0-9\b]+$/.test(s))&&(c[i]=s,n[t]=c,this.setState({dataConfigRevenue:n}))}else c[i]=s,n[t]=c,this.setState({dataConfigRevenue:n})}}},{key:"getListYear",value:function(){var e=[],t=(new Date).getFullYear();if(t>0)for(var a=t;a>=t-20;a--)e.push({id:a,value:a,label:a});return e}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.curItem,i=t.dataConfigRevenue,s=t.curItemProject,n=this,(c=Object.assign({},a)).screen_mode=v.a.SCREEN_MODE.EDIT,c.id_language=this.employee.id_language,c.id_project=s.id,c.dataConfigRevenue=i,r=new $t(this.props),e.next=9,r.FLValidationAll(a);case 9:if(!(l=e.sent)){e.next=13;break}return this.setValidateMessage(l),e.abrupt("return");case 13:this.removeAllValidateMessage(),At.instance.saveConfig(c,(function(e,t,a){e?(n.toast(a,"info"),n.props.onItemClickCloseSetup(!1)):t?n.setValidateMessage(t):b.a.isBlank(a)||n.toast(a,"error")}),!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveEstimationSenSor",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.curItem,i=t.curItemProject,s=this,(n=Object.assign({},a)).screen_mode=v.a.SCREEN_MODE.EDIT,n.id_language=this.employee.id_language,n.id_project=i.id,c=new Kt(this.props),e.next=8,c.FLValidationAll(a);case 8:if(!(r=e.sent)){e.next=12;break}return this.setValidateMessage(r),e.abrupt("return");case 12:this.removeAllValidateMessage(),At.instance.saveConfigEstimationSenSor(n,(function(e,t,a){e?s.toast(a,"info"):t?s.setValidateMessage(t):b.a.isBlank(a)||s.toast(a,"error")}),!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new $t(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateOneEst",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Kt(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(ee),Xt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=this.props.dataListProject;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width10",children:this.props.index+1}),Object(m.jsx)("div",{className:"body-col width30",children:t.id_device}),Object(m.jsx)("div",{className:"body-col width30",children:t.name}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsx)(mt,{instanceId:"id_project_"+this.props.index,className:"id_project_"+this.props.index,name:"id_project_"+this.props.index,optionList:a,value:a.filter((function(e){return e.id==t.id_project})),onChange:function(t){e.props.handleDropdownChange(t,"id_project",e.props.index)}})})]},t.id)}}]),a}(r.Component);function Zt(){var e=this,t=this.state,a=t.curItem,i=t.curItemProject,s=t.dataListProject,n=t.dataList,c=this.props.t,r=null;return console.log("dataList: ",n),b.a.isArrayData(n)&&(r=n.map((function(t,i){return Object(m.jsx)(Xt,{index:i,dataItem:t,dataEmployees:b.a.isArrayData(a.dataEmployees)?a.dataEmployees:[],onItemClickDelete:e.onItemClickDelete,handleInputChangeItem:e.handleInputChangeItem,dataListProject:s,handleDropdownChange:e.handleDropdownChange},"row_item_"+i)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-project-config",dialogClassName:"modal-xl modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[c("project.title"),": ",i.name]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onItemClickCloseMove.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:c("project.move_device")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsx)("div",{className:"project-user-manage",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"No."})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:"Device ID"})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:"Device Name"})}),Object(m.jsx)("div",{className:"header-col width30 text-end"})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:r||Object(m.jsx)("div",{className:"data-empty",children:c("common.data_empty")})})})]})})})]})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onItemClickCloseMove.bind(this,!1),children:c("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:(a.screen_mode,v.a.SCREEN_MODE.EDIT,c("common.save"))})]})]})}var Qt=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleDropdownChange=function(e,t,a){if(!b.a.isObjectEmpty(e)){var i=s.state.dataList;if(b.a.isArrayData(i)){var n=i[a];b.a.isObjectEmpty(n)||(i[a].id_project=e.id,s.setState({dataList:i}))}}},s.state={curItemProject:s.props.curItem,curItem:{},dataList:[],dataListProject:[],searchParam:{}},s.jsxTemplate=Zt,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListDeviceByProject(),this.getDataListProject()}},{key:"getDataListProject",value:function(){var e=this,t={id_language:this.employee.id_language,id_project:null};At.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListProject:t}):e.setState({dataListProject:[]})}))}},{key:"getListDeviceByProject",value:function(){var e=this,t=this.state,a=t.curItemProject,i=t.searchParam;i.id_project=a.id,i.id_language=this.employee.id_language,St.instance.getListDeviceByProject(i,(function(t,a){b.a.isArrayData(t)?e.setState({dataList:t}):e.setState({dataList:[]}),e.forceUpdate()}))}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,a=t.curItem,i=t.dataList,t.curItemProject,s=this,(n=Object.assign({},a)).screen_mode=v.a.SCREEN_MODE.EDIT,n.dataList=i,At.instance.saveMoveDevice(n,(function(e,t,a){e&&(s.toast(a,"info"),s.props.onItemClickCloseMove(!1))}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function ea(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(Nt,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,onClickAddDevice:t.onClickAddDevice,onItemClickSetup:t.onItemClickSetup,onItemClickMove:t.onItemClickMove,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(It,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(Yt,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"",d=this.state.addDevice?Object(m.jsx)(qt,{t:a,curItem:s,onClickCloseAddDevice:this.onClickCloseAddDevice,auth:this.props.auth,actions:this.actions}):"",h=this.state.setup?Object(m.jsx)(Jt,{t:a,curItem:s,onItemClickCloseSetup:this.onItemClickCloseSetup,auth:this.props.auth,actions:this.actions}):"",u=this.state.moveDevice?Object(m.jsx)(Qt,{t:a,curItem:s,onItemClickCloseMove:this.onItemClickCloseMove,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"project-system",children:[l,o,d,h,u,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("project.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("project.name"),inputClass:"form-control",inputId:"keyword",inputName:"keyword",value:r.keyword,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"name")},className:"name"===r.sort_column?"header-col width20 sorting "+r.order_by:"header-col width20 sorting",children:Object(m.jsx)("p",{children:a("project.name")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_group")},className:"id_group"===r.sort_column?"header-col width20 sorting "+r.order_by:"header-col width20 sorting",children:Object(m.jsx)("p",{children:a("project.id_group")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:a("project.device")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"power")},className:"power"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("project.power")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"today")},className:"today"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("project.today")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var ta=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAddDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:a,addDevice:!0}))}},n.onClickCloseAddDevice=function(e){e&&n.getList(),n.setState({addDevice:!1})},n.onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",site_name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id=t.id,At.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.dataEmployees=e.dataEmployees,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(t["name_"+i.iso_code]=i.name,b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onItemClickSetup=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);b.a.isObjectEmpty(t)||a.setState({curItem:t,setup:!0})}},n.onItemClickCloseSetup=function(){n.setState({setup:!1})},n.onItemClickMove=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);b.a.isObjectEmpty(t)||a.setState({curItem:t,moveDevice:!0})}},n.onItemClickCloseMove=function(){n.setState({moveDevice:!1})},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,At.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=ea,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,addDevice:!1,delete:!1,formSearch:!1,setup:!1,moveDevice:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,At.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.keyword=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),aa=Object(f.a)("common")(ta),ia=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[e.id," "]})}),Object(m.jsx)("div",{className:"body-col width40",children:Object(m.jsxs)("p",{children:[e.name," "]})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsx)("p",{children:e.description})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function sa(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=this.props.t,c=null;return s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),c=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:n("project_group.name"),inputClass:"form-control",required:1===e.is_default?"required":"",inputId:"name_"+e.iso_code,inputName:"name_"+e.iso_code,value:i.data[a].name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:n("project_group.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})})]})})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("project_group.edit_title"):n("project_group.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:n("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:n("project_group.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:i.status,onChange:function(e){t.handleInputChange(e)}})})]})})})})]}),Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:c})]})})})})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:n("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("common.update"):n("common.create")})]})]})}var na=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.iso_code_language;return s.trans=n,s.iso_code_language=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){"vi"===this.iso_code_language&&(this.addRuleForField("name_vi","trim",!0),this.addRuleForField("name_vi","required",!0,this.trans("validate_rule.required"),this.trans("project_group.name")),this.addRuleForField("name_vi","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("project_group.name"))),"en"===this.iso_code_language&&(this.addRuleForField("name_en","trim",!0),this.addRuleForField("name_en","required",!0,this.trans("validate_rule.required"),this.trans("project_group.name")),this.addRuleForField("name_en","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("project_group.name")))}},{key:"setAlias",value:function(){"vi"===this.iso_code_language&&this.v.setAlias({name_vi:this.trans("project_group.name")}),"en"===this.iso_code_language&&this.v.setAlias({name_en:this.trans("project_group.name")})}}]),a}(ue),ca=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,4),o=a.substr(0,11);c.map((function(t,a){return r===t.iso_code&&"name"===l&&(n.data[a].name=e.target.validity.valid?i:s.state.curItem.data[a].name),r===t.iso_code&&"description"===o&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage},s.jsxTemplate=sa,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;e.screen_mode===v.a.SCREEN_MODE.ADD&&(e.status=1)}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new na(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new na(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,!b.a.isArrayData(i.data)){e.next=21;break}if(r=b.a.find(i.data,"is_default",1)){e.next=18;break}return e.abrupt("return");case 18:i.data.map((function(e,t){return i.data[t].name=""===e.name?r.name:e.name,i.data[t].description=""===e.description?r.description:e.description,i})),e.next=22;break;case 21:return e.abrupt("return",!1);case 22:wt.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function ra(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.id," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var la=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=ra,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,wt.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function oa(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(ia,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(ca,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(la,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"position",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("project_group.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("project_group.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"name")},className:"name"===r.sort_column?"header-col width40 sorting "+r.order_by:"header-col width40 sorting",children:Object(m.jsx)("p",{children:a("project_group.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:a("project_group.description")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:a("common.action")})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var da=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.status=1,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id=t.id,wt.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(t["name_"+i.iso_code]=i.name,b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,wt.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=oa,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,wt.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ha=Object(f.a)("common")(da),ma=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=e.irradiance,a=e.alerts;this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width5",style:{width:"100px"},children:Object(m.jsx)("div",{className:"project-status text-center",children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsxs)(d.c,{to:"/project/"+e.hash_id+"/activities","data-tip":t.name,"data-type":"warning","data-class":"tooltip-action",children:[Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+t.thumbnail}),Object(m.jsx)("span",{className:"count-alert",children:t.total_alert})]},a)})):Object(m.jsx)(d.c,{to:"/project/"+e.hash_id+"/activities",children:Object(m.jsx)("img",{src:"/greencheck.png"})})})}),Object(m.jsx)("div",{className:"body-col width15",style:{width:"250px"},children:Object(m.jsx)("p",{children:Object(m.jsx)(d.c,{to:"/project/"+e.hash_id,children:Object(m.jsx)("strong",{children:e.name})})})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:e.installed_power_client})}),b.a.isArrayData(t)?t.map((function(e,t){if(t<2)return Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.irradiancePoA)?"":Object(m.jsxs)("span",{children:[e.irradiancePoA," W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})]})},t)})):"",Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.power_now)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.power_now,"#,###.##")," kW"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.energy_today)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.energy_today,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.last_month)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.last_month,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.lifetime)?"":Object(m.jsx)("p",{children:b.a.formatElectricalUnit(e.lifetime,"h")})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:Object(m.jsxs)("p",{children:[b.a.formatNum(e.revenue,"#.###")," VN\u0110"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:e.last_updated})})]},e.id)}}]),a}(r.Component);a(830);function ua(){var e,t=this,a=this.props.t,i=this.state,s=i.dataList,n=i.searchParam;i.dataListSummary;return e=s.map((function(e,i){return Object(m.jsx)(ma,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)})),Object(m.jsxs)("div",{className:"dashboard",children:[Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("dashboard.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"grid"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"grid"),children:Object(m.jsx)("span",{className:"icon-list-unordered"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"map"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"map"),children:Object(m.jsx)("span",{className:"icon-map-streamline-user"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:n.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("dashboard.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:n.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsx)("div",{className:"data-view",children:Object(m.jsxs)("div",{className:"main-dashboard-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5",style:{width:"100px"},children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{style:{width:"250px"},onClick:function(e){return t.onSort(e,"name")},className:"name"===n.sort_column?"header-col width15 sorting "+n.order_by:"header-col width15 sorting",children:Object(m.jsx)("p",{children:a("dashboard.name")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.installed_power")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.irradiance1")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.irradiance2")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.power_now")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.today")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.last_month")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.lifetime")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.revenue")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.last_updated")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var pa=a(78);a(831);function ja(){var e=this,t=this.props.t,a=this.state,i=a.dataList,s=a.showInfoWindow,n=a.showIconHover,c={lat:10.80166,lng:106.647058},r=null;if(b.a.isArrayData(i)){var l=0;r=i.map((function(t,a){if(!b.a.isBlank(t.lat)&&!b.a.isBlank(t.lat)){0==l&&(c.lat=parseFloat(t.lat),c.lng=parseFloat(t.lng)),l++;var i=t.irradiance,r=t.alerts;return Object(m.jsx)(pa.d,{index:a,position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},onClick:e.handleMouseOver.bind(e,t),onMouseOver:e.onMouseoverMarker.bind(e,t),onMouseOut:e.mouseMoveOutOfMarker.bind(e,t),icon:n==t?"/house-place.png":"/house-place-orange.png",zIndex:a,children:s&&s==t&&Object(m.jsx)(pa.b,{onCloseClick:e.handleMouseExit.bind(e,t),children:Object(m.jsxs)("div",{className:"info-window",children:[Object(m.jsx)(d.c,{to:"/project/"+t.hash_id+"/activities",children:Object(m.jsx)("img",{width:"300",src:b.a.isBlank(t.thumbnail)?"/thumbnail.jpg":v.a.SERVER_DATA+"/"+t.thumbnail,alt:t.name,title:t.name})}),Object(m.jsxs)("div",{className:"info-content",children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Project name:"})," ",Object(m.jsx)(d.c,{to:"/project/"+t.hash_id+"/activities",children:t.name})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Site name:"})," ",t.site_name]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Address:"})," ",t.address]}),Object(m.jsx)("hr",{}),b.a.isArrayData(i)?i.map((function(e,t){return Object(m.jsx)("p",{className:"irradiance-item",children:i.length>1?Object(m.jsxs)("span",{children:[Object(m.jsxs)("strong",{children:["Irradiance",++t,": "]}),e.irradiancePoA," W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})," ",Object(m.jsx)("hr",{})," "]}):Object(m.jsxs)("span",{children:[Object(m.jsx)("strong",{children:"Irradiance:"})," ",e.irradiancePoA," W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})]})},t)})):Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Irradiance:"})," 0 W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Today:"})," ",b.a.formatNum(t.energy_today,"#,###.##")," kWh"]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Lifetime:"})," ",b.a.formatNum(t.lifetime,"#,###.##")," kWh"]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Revenue:"})," ",b.a.formatNum(t.revenue,"#,###.##")," vn\u0111"]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Installed power:"})," ",t.installed_power_client]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Commisioning date:"})," ",t.commisioning_date]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Instaled date:"})," ",t.installed_date]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Last updated:"})," ",t.last_updated]}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"project-status text-center",children:b.a.isArrayData(r)?r.map((function(e,a){return Object(m.jsxs)(d.c,{to:"/project/"+t.hash_id+"/activities","data-tip":e.name,"data-type":"warning","data-class":"tooltip-action",children:[Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+e.thumbnail}),Object(m.jsx)("span",{className:"count-alert",children:e.total_alert})]},a)})):Object(m.jsx)(d.c,{to:"/project/"+t.hash_id+"/activities",children:Object(m.jsx)("img",{src:"/greencheck.png"})})})]})]})})},"row_item_"+a)}}))}return Object(m.jsxs)("div",{className:"view-map",children:[Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:t("dashboard.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"grid"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"grid"),children:Object(m.jsx)("span",{className:"icon-list-unordered"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"map"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"map"),children:Object(m.jsx)("span",{className:"icon-map-streamline-user"})})})]})})]})}),Object(m.jsx)("div",{className:"data-view-map",children:Object(m.jsx)(pa.c,{id:"script-loader",googleMapsApiKey:v.a.GOOLGE_APP.KEY,children:Object(m.jsx)(pa.a,{id:"post_view_map",options:{mapTypeControlOptions:{position:"BOTTOM_RIGHT"}},zoom:14,center:c,children:r})})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(t){return e.onClickReload.bind(e)},onSelectPage:function(t){return e.onSelectPage.bind(e,t)}})})]})}var ba=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickChangeMode=function(e){var t=Object(p.a)(n);n.setState({mode:e},(function(){t.jsxTemplate=t.getTemplate(),t.forceUpdate()}))},n.handleMouseOver=function(e,t){n.setState({showInfoWindow:e})},n.handleMouseExit=function(e,t){n.setState({showInfoWindow:!1})},n.onMouseoverMarker=function(e,t){n.setState({showIconHover:e})},n.mouseMoveOutOfMarker=function(e,t){n.setState({showIconHover:!1})},n.state={curItem:{},showInfoWindow:!1,showIconHover:!1,mode:"grid",dataList:[],dataListSummary:[],searchParam:{limit:16,offset:0,index:1},formSearch:!1},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=n.getTemplate(),n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getTemplate",value:function(){switch(this.state.mode){case"map":return ja;default:return ua}}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,t.type="customer",Y.instance.getListProjectByEmplpyee(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),va=Object(f.a)("common")(ba),_a=a(45);function ga(){var e=this,t=this.props.t,a=window.location.pathname,i=localStorage.getItem(v.a.COMMON.ACCESS_PARAM),s=JSON.parse(b.a.base64Decrypt(i));return Object(m.jsx)("div",{className:"sidebar-top",children:Object(m.jsxs)("ul",{children:[b.a.isObjectEmpty(s)||b.a.isBlank(s["/dashboard"])||!_.a.getPermisson(s["/dashboard"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/dashboard",children:t("common.plant")})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/project/:id/dashboard"])||!_.a.getPermisson(s["/project/:id/dashboard"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{isActive:function(){return["/project/"+e.state.hash_id,"/project/"+e.state.hash_id+"/dashboard"].includes(a)},to:"/project/"+this.state.hash_id+"/dashboard",children:t("common.dashboard")})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/project/:id/devices"])||!_.a.getPermisson(s["/project/:id/devices"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/project/"+this.state.hash_id+"/devices",children:t("common.device")})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/project/:id/activities"])||!_.a.getPermisson(s["/project/:id/activities"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/project/"+this.state.hash_id+"/activities",children:t("common.alert")})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/project/:id/analytics"])||!_.a.getPermisson(s["/project/:id/analytics"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/project/"+this.state.hash_id+"/analytics",children:t("common.analytics")})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/project/:id/reports"])||!_.a.getPermisson(s["/project/:id/reports"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/project/"+this.state.hash_id+"/reports",children:t("common.report")})}),b.a.isObjectEmpty(s)||b.a.isBlank(s["/project/:id/config"])||!_.a.getPermisson(s["/project/:id/config"].auth,v.a.AUTH_MODE.VIEW)?"":Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/project/"+this.state.hash_id+"/config",children:t("common.config")})})]})})}a(832);var fa=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=ga,n.state={hash_id:n.props.hash_id,curItem:n.props.curItem,dataList:[]},n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this.state.permissions,t=localStorage.getItem(v.a.COMMON.ACCESS_PARAM),a=JSON.parse(b.a.base64Decrypt(t));e=Object.values(a).filter((function(e){return"system"===e.group_type})),this.setState({permissions:e})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component),xa=Object(f.a)("common")(fa);a(833);function Oa(){var e=this.state;e.curItem,e.allLanguage,e.dataProjectGroup,this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable full-screen",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Single line diagram"}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseSingleLine.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("img",{src:"/demo.jpg"})})]})}var ya=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:{}},s.jsxTemplate=Oa,s}return a}(ee),Ma=a(21),Na=a.n(Ma),Ca=a(29),ka=a.n(Ca),Da=a(38),wa=a.n(Da),Aa=a(39),Ia=a.n(Aa);function Pa(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.chartParams,n=a.dataFilter,c=a.chartOption,r=b.a.isArrayData(i.irradiance)?i.irradiance:[],l=b.a.isArrayData(i.ambient_emperature)?i.ambient_emperature:[],o=b.a.isArrayData(i.humidity)?i.humidity:[],d=b.a.isArrayData(i.wind_speed)?i.wind_speed:[],h=null;b.a.isArrayData(n)&&(h=n.map((function(t,a){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==s.id_filter?"item active":"item",children:t.text},a)})));var u=null;if(!b.a.isObjectEmpty(s))switch(s.id_filter){case"today":u=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})});break;case"3_day":u=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:s.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":u=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})});break;case"12_month":u=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:s.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}var p=this.state.single_line?Object(m.jsx)(ya,{onClickCloseSingleLine:this.onClickCloseSingleLine,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"plant",children:[Object(m.jsx)(xa,{hash_id:this.state.hash_id},Math.random()),p,Object(m.jsx)("div",{className:"main-plant",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-9",children:Object(m.jsxs)("div",{className:"plant-chart",children:[Object(m.jsx)("div",{className:"box-header",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item power",children:[Object(m.jsxs)("h2",{children:[t("plant.power_now")," "]}),Object(m.jsxs)("p",{children:[b.a.formatNum(i.power_now,"#,###.##")," kW"]}),Object(m.jsxs)("h3",{children:[t("plant.installed_power")," ",Object(m.jsx)("strong",{children:i.installed_power_client})]}),Object(m.jsx)("div",{className:"item-icon",children:Object(m.jsx)("img",{src:"/power.png"})})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item energy",children:[Object(m.jsx)("h2",{children:t("plant.today_production")}),Object(m.jsx)("p",{children:b.a.formatElectricalUnit(i.energy_today,"h")}),Object(m.jsxs)("h3",{children:[t("plant.total_production")," ",Object(m.jsxs)("strong",{children:[b.a.formatElectricalUnit(i.lifetime,"h")," "]})]}),Object(m.jsx)("div",{className:"item-icon",children:Object(m.jsx)("img",{src:"/energy.png"})})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item revenue",children:[Object(m.jsx)("h2",{children:t("plant.today_revenue")}),Object(m.jsxs)("p",{children:[b.a.formatNum(i.today_revenue,"#.###")," VN\u0110"]}),Object(m.jsxs)("h3",{children:[t("plant.total_revenue")," ",Object(m.jsxs)("strong",{children:[b.a.formatNum(i.total_revenue,"#.###")," VN\u0110"]})]}),Object(m.jsx)("div",{className:"item-icon",children:Object(m.jsx)("img",{src:"/revenue.png"})})]})})]})}),Object(m.jsxs)("div",{className:"list-device-status",children:[Object(m.jsxs)("h2",{children:[t("plant.energy_flow")," ",Object(m.jsxs)("span",{onClick:this.onClickShowSingleLine.bind(this),children:[Object(m.jsx)("var",{className:"icon-flow-tree"})," Single line diagram"]})]}),Object(m.jsx)("div",{className:1===i.using_meter_consumption?"main-device-status is-meter":"main-device-status",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("img",{src:"/solar-panel.png"}),Object(m.jsx)("div",{className:i.dc_power<=0?"line-energy close":"line-energy",children:Object(m.jsxs)("span",{className:"string",children:[b.a.formatNum(i.dc_power,"#,###.##")," kW"]})}),Object(m.jsx)("div",{className:"text",children:"PV array"})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item",children:[b.a.isBlank(i.totalInverter)?"":Object(m.jsxs)("span",{className:"sum-inverter",children:["Running: ",i.totalInverterOn,"/",i.totalInverter]}),Object(m.jsx)("img",{src:"/inverter.png"}),Object(m.jsxs)("div",{className:i.power_now<=0?"line-energy close":"line-energy",children:[Object(m.jsxs)("span",{children:[b.a.formatNum(i.power_now,"#,###.##")," kW"]}),i.power_now<=0?Object(m.jsx)("span",{className:"close-line",children:Object(m.jsx)("var",{className:"icon-cancel-music"})}):""]}),Object(m.jsx)("div",{className:"text",children:"PV inverter"})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:1===i.using_meter_consumption?"item solar-meter":"item",children:[Object(m.jsx)("img",{src:"/meter.png"}),Object(m.jsxs)("div",{className:"two-line",children:[Object(m.jsxs)("div",{className:i.power_now<=0?"line-energy close":"line-energy",children:[Object(m.jsxs)("span",{children:[b.a.formatNum(i.power_now-i.consumption<0?0:i.power_now-i.consumption,"#,###.##")," kW"]}),i.power_now<=0?Object(m.jsx)("span",{className:"close-line",children:Object(m.jsx)("var",{className:"icon-cancel-music"})}):""]}),1===i.using_meter_consumption?Object(m.jsxs)("div",{className:i.consumption<=0?"line-home close":"line-home",children:[Object(m.jsxs)("span",{children:[b.a.formatNum(i.consumption,"#,###.##")," kW"]}),i.consumption<=0?Object(m.jsx)("span",{className:"close-line",children:Object(m.jsx)("var",{className:"icon-cancel-music"})}):""]}):""]}),Object(m.jsx)("div",{style:{marginLeft:"-30px"},className:"text",children:"Solar production meter"})]})})]})}),Object(m.jsxs)("div",{className:"col-md-2",children:[Object(m.jsxs)("div",{className:"item power-gird",children:[Object(m.jsx)("img",{src:"/power-gird.png"}),Object(m.jsx)("div",{className:"text",children:"Power Grid"})]}),1===i.using_meter_consumption?Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("img",{src:"/consumption.png"}),Object(m.jsx)("div",{className:"text",children:"Consumption"})]}):""]})]})})]}),Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1",children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"download",children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})}),Object(m.jsxs)("div",{className:"col-xl-11 col-lg-11 col-md-11",children:[Object(m.jsxs)("div",{className:s.show_filter?"filter on":"filter",children:["today"==s.id_filter||"3_day"==s.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,1),className:1==s.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==s.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==s.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[s.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:h})]}),Object(m.jsx)("div",{className:"time-filter",children:u})]})]})}),Object(m.jsx)("div",{className:"chart-content",children:b.a.isObjectEmpty(c)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:c})})]})]})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsxs)("div",{className:"site-info",children:[Object(m.jsxs)("div",{className:"info",children:[Object(m.jsx)("div",{className:"info-img",children:b.a.isBlank(i.thumbnail)?Object(m.jsx)("img",{src:"/thumbnail.jpg"}):Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+i.thumbnail})}),b.a.isBlank(i.name)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.project_name")," :"]})," ",i.name]}),b.a.isBlank(i.site_name)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.site_name"),":"]})," ",i.site_name]}),b.a.isBlank(i.address)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.address"),":"]})," ",i.address]}),b.a.isBlank(i.installed_power_client)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.installed_power"),":"]})," ",i.installed_power_client]}),b.a.isBlank(i.commisioning_date)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.commisioning_date"),":"]})," ",i.commisioning_date]}),b.a.isBlank(i.instaled_date)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.instaled_date"),":"]})," ",i.instaled_date]}),b.a.isBlank(i.last_updated)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.last_updated"),":"]})," ",i.last_updated]})]}),Object(m.jsx)("div",{className:"list-item",children:Object(m.jsxs)("ul",{children:[b.a.isArrayData(l)?l.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item temperature",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/temperature.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Ambient Temperature ",l.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.ambientTemp," \u2103"]})]})]})},"ambient_emperature_"+t)})):"",b.a.isArrayData(r)?r.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item irradiance",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/irradiance.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Irradiance ",r.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.irradiancePoA," W/m2"]})]})]})},"irradiance_"+t)})):"",b.a.isArrayData(r)?r.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item temp",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/temperature.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Module Temp ",r.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.panelTemp," \u2103"]})]})]})},"temp_"+t)})):"",b.a.isArrayData(o)?o.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item humidity",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/humidity.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Humidity ",r.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.panelTemp," %"]})]})]})},"humidity_"+t)})):"",b.a.isArrayData(d)?d.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item wind",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/wind.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Wind Speed ",d.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.panelTemp," km/h"]})]})]})},"wind_"+t)})):""]})})]})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Ya=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.PLANT.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDataChart",value:function(e,t){try{new x.a(!0).post(v.a.URL.PLANT.CHART_DATA,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Ea=a(34),La=a(25),Sa=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.getDataChart()}))}}},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.getDataChart()})))},n.onClickShowSingleLine=function(){n.setState({single_line:!0})},n.onClickCloseSingleLine=function(){n.setState({single_line:!1})},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.downloadData=function(){var e=n.state,t=e.dataEnergy,a=e.curItem;n.props.t;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},single_line:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages,dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}],chartParams:{id_filter:"today",text_filter:"Today",show_filter:!1,max_date:b.a.getCurrentDDMMYYYY(),data_send_time:2}},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=Pa,n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside),this.loadConfigDefaultDate(),this.getDetailProject(),this.getDataChart()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getDetailProject(),t.getDataChart()}))}},{key:"loadConfigDefaultDate",value:function(){var e=this.state.chartParams;switch(e.id_filter){case"today":e.max_date=b.a.getCurrentMMDDYYYYHI(),e.end_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":e.end_date=b.a.getCurrentDDMMYYYY(),e.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),e.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY");break;case"this_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");break;case"last_month":e.max_date=Ye()().format("MM/YYYY");var t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).endOf("month").format("MM/YYYY"),e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");var i;t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-12)).format("MM/YYYY"),e.max_start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}this.setState({chartParams:e})}},{key:"getDetailProject",value:function(){var e=this.state.hash_id,t=this;if(!b.a.isBlank(e)){var a={hash_id:e,id_language:this.employee.id_language,id_employee:this.employee.id_employee,type:"customer"};Ya.instance.getDetail(a,(function(e){e&&t.setState({curItem:e})}),!1)}}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=this,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),a){var n=this.state.chartParams;switch(n.id_filter){case"today":case"last_month":case"this_month":n.start_date=s,n[a]=s;break;case"3_day":if("start_date"==a){n.start_date=s;var c=s.split("/");if(c){var r=c[2]+"/"+c[1]+"/"+c[0];n.end_date=Ye()(b.a.addDays(r,2)).format("DD/MM/YYYY")}}if("end_date"==a){n.end_date=s;var l=s.split("/");if(l){var o=l[2]+"/"+l[1]+"/"+l[0];n.start_date=Ye()(b.a.addDays(o,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){n.start_date=s;var d=s.split("/");if(d){var h=d[1]+"/"+d[0]+"/01",m=Ye()(h).startOf("month").format("YYYY-MM-DD");n.end_date=Ye()(b.a.addMonths(m,12)).format("MM/YYYY")}}if("end_date"==a){n.end_date=s;var u=s.split("/");if(u){var p=u[1]+"/"+u[0]+"/01",j=Ye()(p).startOf("month").format("YYYY-MM-DD");n.start_date=Ye()(b.a.addMonths(j,-12)).format("MM/YYYY")}}}this.setState({chartParams:n},(function(){i.getDataChart()}))}}},{key:"getDataChart",value:function(){var e=this.state,t=e.chartParams,a=e.curItem,i=e.hash_id,s=this;if(!b.a.isObjectEmpty(t)){var n={};switch(n.hash_id=i,n.total_year=a.total_year,n.id_employee=this.employee.id_employee,n.id_language=this.employee.id_language,n.filterBy=t.id_filter,n.data_send_time=t.data_send_time,t.id_filter){case"today":n.start_date=b.a.convertAllFormatDate(b.a.dateFormat(t.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),n.end_date=b.a.convertAllFormatDate(b.a.dateFormat(t.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":n.start_date=b.a.dateFormat(t.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",n.end_date=b.a.dateFormat(t.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":n.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.start_date+" 00:00:00",n.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.end_date+" 19:00:00";break;case"lifetime":case"12_month":n.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.start_date+" 00:00:00",n.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.end_date+" 19:00:00"}n.type="customer",Ya.instance.getDataChart(n,(function(e){if(b.a.isArrayData(e)){var i=e,c=[],r=[],l={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},o={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:2,tooltip:{valueSuffix:" kW"},marker:{radius:2.5}},d=[],h=[];if("today"===n.filterBy)switch(t.data_send_time){case 1:a.tickInterval=12,r=["5AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19PM"];for(var m=0,u=0;u<i.length;u++){if(0==u){var p=b.a.dateFormat(i[u].time_format,"HH","YYYY-MM-DD HH:mm:ss"),j=b.a.dateFormat(i[u].time_format,"mm","YYYY-MM-DD HH:mm:ss");if((m=12*(parseInt(p)-5)+Math.round(j/5))>0)for(var v=0;v<m;v++){var _=b.a.dateFormat(b.a.addMinutes(b.a.dateFormat(i[u].time_format,"YYYY-MM-DD 05:00","YYYY-MM-DD HH:mm:ss"),5*v),"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss");d.push([_,null]),h.push([_,null])}}d.push([i[u].time_full,i[u].activeEnergy]),h.push([i[u].time_full,i[u].activePower])}var g=m+i.length;if(g<168&&g>0)for(var f="",x=g;x<168;x++)x==g&&(f=i[i.length-1].time_format),null!=f&&(f=b.a.addMinutes(f,5),d.push([b.a.dateFormat(f,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]),h.push([b.a.dateFormat(f,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]));l.data=d,c.push(l),o.data=h,c.push(o);break;case 2:a.tickInterval=4,r=["5AM","5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM"];for(var O=0,y=0;y<i.length;y++){if(0==y){p=b.a.dateFormat(i[y].time_format,"HH","YYYY-MM-DD HH:mm:ss"),j=b.a.dateFormat(i[y].time_format,"mm","YYYY-MM-DD HH:mm:ss");if((O=4*(parseInt(p)-5)+Math.round(j/15))>0)for(v=0;v<O;v++){_=b.a.dateFormat(b.a.addMinutes(b.a.dateFormat(i[y].time_format,"YYYY-MM-DD 05:00","YYYY-MM-DD HH:mm:ss"),15*v),"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss");d.push([_,null]),h.push([_,null])}}d.push([i[y].time_full,i[y].activeEnergy]),h.push([i[y].time_full,i[y].activePower])}var M=O+i.length;if(M<56&&M>0)for(var N="",C=M;C<56;C++)C==M&&(N=i[i.length-1].time_format),null!=N&&(N=b.a.addMinutes(N,15),d.push([b.a.dateFormat(N,"DD/MM/YYYY","YYYY-MM-DD HH:mm:ss"),null]),h.push([b.a.dateFormat(N,"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss"),null]));l.data=d,c.push(l),o.data=h,c.push(o);break;default:a.tickInterval=1,r=["5AM","6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM"];for(var k=0,D=0;D<i.length;D++){if(0==D){p=b.a.dateFormat(i[D].time_format,"HH","YYYY-MM-DD HH:mm:ss");if((k=parseInt(p)-5)>0)for(v=0;v<k;v++){_=b.a.dateFormat(i[D].time_format,"DD/MM/YYYY","YYYY-MM-DD HH:mm:ss")+" "+(v+5)+":00";d.push([_,null]),h.push([_,null])}}d.push([i[D].time_full,i[D].activeEnergy]),h.push([i[D].time_full,i[D].activePower])}var w=k+i.length;if(w<15&&w>0)for(var A="",I=w;I<15;I++)I==w&&(A=i[i.length-1].time_format),null!=A&&(A=b.a.addMinutes(A,60),d.push([b.a.dateFormat(A,"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss"),null]),h.push([b.a.dateFormat(A,"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss"),null]));l.data=d,c.push(l),o.data=h,c.push(o)}else if("3_day"===n.filterBy){var P=t.start_date.split("/"),Y="",E="",L="",S="";if(!P)return;switch(Y=P[2]+"/"+P[1]+"/"+P[0],E=Ye()(Y).format("DD. MMM"),L=Ye()(b.a.addDays(Y,1)).format("DD. MMM"),S=Ye()(b.a.addDays(Y,2)).format("DD. MMM"),t.data_send_time){case 1:if(a.tickInterval=169,r=[E,"5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13:00 PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14:00 PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15:00 PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16:00 PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17:00 PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18:00 PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19:00 PM",L,"5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13:00 PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14:00 PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15:00 PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16:00 PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17:00 PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18:00 PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19:00 PM",S,"5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13:00 PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14:00 PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15:00 PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16:00 PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17:00 PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18:00 PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19:00 PM"],b.a.isArrayData(e))for(var T=0;T<e.length;T++)d.push([e[T].time_full,e[T].activeEnergy]),h.push([e[T].time_full,e[T].activePower]);l.data=d,c.push(l),o.data=h,c.push(o);break;case 2:if(a.tickInterval=57,r=[E,"5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM",L,"5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM",S,"5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM"],b.a.isArrayData(e))for(var R=0;R<e.length;R++)d.push([e[R].time_full,e[R].activeEnergy]),h.push([e[R].time_full,e[R].activePower]);l.data=d,c.push(l),o.data=h,c.push(o);break;case 3:if(a.tickInterval=15,r=[E,"6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM",L,"6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM",S,"6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM"],b.a.isArrayData(e))for(var F=0;F<e.length;F++)d.push([e[F].time_full,e[F].activeEnergy]),h.push([e[F].time_full,e[F].activePower]);l.data=d,c.push(l),o.data=h,c.push(o)}}else{a.tickInterval=1,r=[];for(var H="",B="",U="",V=0;V<i.length;V++){if(r.push([i[V].category_time_format]),H=i[V].time_format,0===V)B=new Date(i[V].time_format).getMonth()+1;if(V===i.length-1)U=new Date(i[V].time_format).getMonth()+1;d.push([i[V].time_full,i[V].activeEnergy]),h.push([i[V].time_full,i[V].activePower])}switch(n.filterBy){case"this_month":case"last_month":if(!b.a.isBlank(H)){var W=new Date(H),q=W.getDate(),z=new Date(W.getFullYear(),W.getMonth()+1,0);if(q<z.getDate())for(var G=q;G<z.getDate();G++)H=b.a.addDays(H,1),d.push([b.a.dateFormat(H,"DD/MM/YYYY","YYYY-MM-DD"),null]),h.push([b.a.dateFormat(H,"DD/MM/YYYY","YYYY-MM-DD"),null]),r.push([H.getDate()])}break;case"12_month":if(!b.a.isBlank(B)&&!b.a.isBlank(U)){for(var $=[],K=[],J=[],X=new Date(H),Z=1;Z<B;Z++)$.push([(Z<10?"0"+Z:Z)+"/"+X.getFullYear(),null]),K.push([(Z<10?"0"+Z:Z)+"/"+X.getFullYear(),null]),J.push([b.a.getStringMonthNumber(Z)]);J.push.apply(J,Object(_a.a)(r)),$.push.apply($,Object(_a.a)(d)),K.push.apply(K,Object(_a.a)(h));for(var Q=U+1;Q<=12;Q++)$.push([(Q<10?"0"+Q:Q)+"/"+X.getFullYear(),null]),K.push([(Q<10?"0"+Q:Q)+"/"+X.getFullYear(),null]),J.push([b.a.getStringMonthNumber(Q)]);r=J,d=$,h=K}break;case"lifetime":if(!b.a.isBlank(a.total_year)&&a.total_year<2&&!b.a.isBlank(B)&&!b.a.isBlank(U)){for(var ee=[],te=[],ae=[],ie=new Date(H),se=1;se<B;se++)ee.push([(se<10?"0"+se:se)+"/"+ie.getFullYear(),null]),te.push([(se<10?"0"+se:se)+"/"+ie.getFullYear(),null]),ae.push([b.a.getStringMonthNumber(se)]);ae.push.apply(ae,Object(_a.a)(r)),ee.push.apply(ee,Object(_a.a)(d)),te.push.apply(te,Object(_a.a)(h));for(var ne=U+1;ne<=12;ne++)ee.push([(ne<10?"0"+ne:ne)+"/"+ie.getFullYear(),null]),te.push([(ne<10?"0"+ne:ne)+"/"+ie.getFullYear(),null]),ae.push([b.a.getStringMonthNumber(ne)]);r=ae,d=ee,h=te}}l.data=d,c.push(l),o.data=h,c.push(o)}s.setState({dataCategories:r,dataEnergy:e,curItem:a,series:c},(function(){s.loadChartOption()}))}else s.setState({dataCategories:[],dataEnergy:[],curItem:a,series:[]},(function(){s.loadChartOption()}))}))}}},{key:"loadChartOption",value:function(){var e={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:this.state.curItem.tickInterval,visible:!0,categories:this.state.dataCategories},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.series};this.setState({chartOption:e})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ta=Object(f.a)("common")(Sa),Ra=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onClickViewDevice=function(){e.props.onClickViewDevice&&"function"===typeof e.props.onClickViewDevice&&e.props.onClickViewDevice(e.props.index)},e.onClickChartDevice=function(){e.props.onClickViewDevice&&"function"===typeof e.props.onClickChartDevice&&e.props.onClickChartDevice(e.props.index)},e.viewAlertDevice=function(){e.props.viewAlertDevice&&"function"===typeof e.props.viewAlertDevice&&e.props.viewAlertDevice(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=this.props.t,i=t.alerts;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{style:{width:"100px"},className:"body-col width5",children:Object(m.jsx)("div",{className:"device-status text-center",children:b.a.isArrayData(i)?i.map((function(t,a){return Object(m.jsxs)("a",{onClick:e.viewAlertDevice.bind(e),"data-tip":t.name,"data-type":"warning","data-class":"tooltip-action",children:[Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+t.thumbnail}),Object(m.jsx)("span",{className:"count-alert",children:t.total_alert})]},a)})):Object(m.jsx)("a",{onClick:this.viewAlertDevice.bind(this),children:1==t.id_device_type?Object(m.jsx)("img",{src:t.power_now>0&&1==t.id_device_type?"/greencheck.png":"/off.png"}):Object(m.jsx)("img",{src:"/greencheck.png"})})})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10 text-break",children:Object(m.jsx)("p",{style:{cursor:"pointer"},onClick:this.onClickViewDevice.bind(this),children:Object(m.jsx)("strong",{children:t.name})})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10 text-break",children:Object(m.jsxs)("p",{children:[t.model," "]})}),Object(m.jsx)("div",{style:{width:"250px"},className:"body-col width15 text-break",children:Object(m.jsx)("p",{children:t.serial_number})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10 text-break",children:Object(m.jsx)("p",{children:t.device_type_name})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.power_now)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(t.power_now,"#,###.##")," kW"]})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.energy_today)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(t.energy_today,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.last_month)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(t.last_month,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.lifetime)?"":Object(m.jsx)("p",{children:b.a.formatElectricalUnit(t.lifetime,"h")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:Object(m.jsx)("p",{children:t.last_updated})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.VIEW)?this.onClickChartDevice.bind(this):"","data-tip":a("device.chart"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-graph-bar","aria-hidden":"true"})}),Object(m.jsx)("li",{onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.VIEW)?this.onClickViewDevice.bind(this):"","data-tip":a("common.view"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-eye","aria-hidden":"true"})})]})})})]},t.id)}}]),a}(r.Component),Fa=(a(323),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsxs)("p",{children:[e.name," "]})}),Object(m.jsx)("div",{className:"body-col width30 text-break",children:Object(m.jsxs)("p",{children:[e.slug," "]})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.value})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.unit})})]},e.id)}}]),a}(r.Component)),Ha=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail})," "]})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsxs)("p",{children:[e.error_level_name," "]})}),Object(m.jsxs)("div",{className:"body-col width40",children:[Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("device.id_error_type"),": "]}),e.error_type_name]})," ",Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("device.description"),": "]})," ",e.description]})]}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.start_date_format})}),Object(m.jsx)("div",{className:"body-col width15 text-end",children:Object(m.jsxs)("p",{children:[e.times_ago>0?e.times_ago:""," "+t("common."+e.times_ago_unit),e.times_ago>1&&"s"]})})]},e.id)}}]),a}(r.Component);function Ba(){var e,t=this,a=this.state,i=a.searchParam,s=a.dataList,n=a.dataErrorLevel,c=a.dataErrorType,r=this.props.t;return e=s.map((function(e,a){return Object(m.jsx)(Ha,{index:a,dataItem:e,actions:t.actions,t:r},"row_item_"+a)})),Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsx)("div",{className:"device-alarm-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("common.date_from"),value:i.date_from,inputId:"date_from",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_from",minDate:i.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("common.date_to"),value:i.date_to,inputId:"date_to",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_to",minDate:i.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("device.id_level"),instanceId:"id_error_level",className:"id_error_level",name:"id_error_level",value:n.filter((function(e){return e.id===i.id_error_level})),onChange:function(e){t.handleDropdownChange(e,"id_error_level")},optionList:n,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("device.id_error_type"),instanceId:"id_error_type",className:"id_error_type",name:"id_error_type",value:c.filter((function(e){return e.id===i.id_error_type})),onChange:function(e){t.handleDropdownChange(e,"id_error_type")},optionList:c,placeHolder:r("common.choose")})})})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",r("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",r("common.reset")," "]})]})})]})}),Object(m.jsxs)("div",{className:"list-device",children:[Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===i.sort_column?"header-col width10 sorting "+i.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:r("device.alert")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_level")},className:"id_error_level"===i.sort_column?"header-col width15 sorting "+i.order_by:"header-col width15 sorting",children:Object(m.jsx)("p",{children:r("device.level")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"message")},className:"message"===i.sort_column?"header-col width40 sorting "+i.order_by:"header-col width40 sorting",children:Object(m.jsx)("p",{children:r("device.issus")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"start_date")},className:"start_date"===i.sort_column?"header-col width20 sorting "+i.order_by:"header-col width20 sorting",children:Object(m.jsx)("p",{children:r("device.opened")})}),Object(m.jsx)("div",{className:"header-col width15 text-end",children:Object(m.jsx)("p",{children:r("device.open_period")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:r("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})]})}var Ua=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getListDeviceByHashId",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_DEVICE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDataListHardware",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_DEVICE.PARAMETER,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListParameterByDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_DEVICE.PARAMETER,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListAlertByDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_DEVICE.LIST_ALERT,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Va=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_LEVEL.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_LEVEL.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_LEVEL.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_LEVEL.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_LEVEL.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_LEVEL.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_LEVEL.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Wa=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_TYPE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_TYPE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_TYPE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_TYPE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_TYPE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_TYPE.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_TYPE.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),qa=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDropdownChange=function(e,t){if(!b.a.isObjectEmpty(e)){var a=Object(p.a)(n),i=e.value,s=a.state.searchParam;"id_error_level"===t&&b.a.isObjectEmpty(e)&&(s.id_error_level=""),"id_error_type"===t&&b.a.isObjectEmpty(e)&&(s.id_error_type=""),s[t]=i,a.setState({searchParam:s})}},n.jsxTemplate=Ba,n.state={curItem:Object.assign({},n.props.curItem),dataList:[],dataErrorLevel:[],dataErrorType:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList(),this.getListErrorLevel(),this.getListErrorType()}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,this.setState({searchParam:s})}}},{key:"getListErrorType",value:function(){var e=this,t={id_language:this.employee.id_language};Wa.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorType:t}):e.setState({dataErrorType:[]})}))}},{key:"getListErrorLevel",value:function(){var e=this,t={id_language:this.employee.id_language};Va.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorLevel:t}):e.setState({dataErrorLevel:[]})}))}},{key:"getList",value:function(){var e=this,t=this.state.curItem,a=this.state.searchParam;a.id_language=this.employee.id_language,a.id=t.id,a.type="customer",Ua.instance.getListAlertByDevice(a,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.date_from=null,t.date_to=null,t.id_error_level=null,t.id_error_type=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),za=Object(f.a)("common")(qa);a(837);function Ga(){var e=this,t=(this.props.t,this.state),a=t.chartParams,i=t.dataFilter,s=t.chartToolOption,n=t.dataParameter,c=null;b.a.isArrayData(i)&&(c=i.map((function(t,i){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==a.id_filter?"item active":"item",children:t.text},i)})));var r=null;if(!b.a.isObjectEmpty(a))switch(a.id_filter){case"today":r=Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6"}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})]});break;case"3_day":r=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:a.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":r=Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6"}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})})]});break;case"12_month":r=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:a.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}return Object(m.jsx)("div",{className:"device-charting",children:Object(m.jsx)("div",{className:"main-chart-view",children:Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"main-param",children:Object(m.jsxs)("div",{className:"list-parameter",children:[Object(m.jsx)("h2",{children:"Parameter"}),Object(m.jsx)("div",{className:"list-params",children:Object(m.jsx)("ul",{children:b.a.isArrayData(n)?n.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"parameter_"+a,inputName:"parameter",labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleParameterInputChange(t,a)},label:t.name})},a)})):""})})]})}),Object(m.jsxs)("div",{id:"chart-view",className:"chart-view",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadData.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})}),Object(m.jsxs)("div",{className:"col-xl-11 col-lg-11 col-md-11",children:[Object(m.jsxs)("div",{className:a.show_filter?"filter on":"filter",children:["today"==a.id_filter||"3_day"==a.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,1),className:1==a.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==a.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==a.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[a.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:c})]}),r?Object(m.jsx)("div",{className:"time-filter",children:r}):""]})]})}),Object(m.jsx)("div",{className:"chart-content",children:b.a.isObjectEmpty(s)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:s},Math.random())})]})]})})})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var $a=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDataChartProfile",value:function(e,t){try{new x.a(!0).post(v.a.URL.ANALYTICS.CHART_PROFILE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getListDeviceByProject",value:function(e,t){try{new x.a(!0).post(v.a.URL.ANALYTICS.LIST_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getChartByListDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.ANALYTICS.CHART_PARAMETER_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getChartAlarm",value:function(e,t){try{new x.a(!0).post(v.a.URL.ANALYTICS.CHART_ALARM,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Ka=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.start_date=b.a.getCurrentMMDDYYYYHI(),a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.loadDataChart()}))}}},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.loadDataChart()})))},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.downloadData=function(){var e=n.state.dataExport;if(b.a.isArrayData(e)){for(var t=[],a={},i=0;i<e.length;i++){t.push(e[i].name);var s=[],c=e[i].data;b.a.isArrayData(c)&&c.map((function(e,t){s.push(e)}));var r=La.utils.json_to_sheet(s,{skipHeader:!1});a[e[i].name]=r}var l={SheetNames:t,Sheets:a},o=La.write(l,{bookType:"xlsx",type:"array"}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(d,"export-charting-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={curItem:n.props.curItem,dataParameter:[],chartToolOption:{},dataExport:[],chartParams:{id_filter:"today",text_filter:"Today",show_filter:!1,max_date:b.a.getCurrentDDMMYYYY(),data_send_time:1},dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}]},n.jsxTemplate=Ga,n.handleParameterInputChange=n.handleParameterInputChange.bind(Object(p.a)(n)),n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataListHardware(),this.loadConfigDefaultDate(),document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"loadConfigDefaultDate",value:function(){var e=this.state.chartParams;switch(e.id_filter){case"today":e.max_date=b.a.getCurrentMMDDYYYYHI(),e.end_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":e.end_date=b.a.getCurrentDDMMYYYY(),e.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),e.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY");break;case"this_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");break;case"last_month":e.max_date=Ye()().format("MM/YYYY");var t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).endOf("month").format("MM/YYYY"),e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");var i;t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-12)).format("MM/YYYY"),e.max_start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}this.setState({chartParams:e})}},{key:"getDataListHardware",value:function(){var e=this,t=this.state.curItem,a=Object.assign({},t);a.id_language=this.employee.id_language,a.id_employee=this.employee.id_employee,a.type="customer",Ua.instance.getDataListHardware(a,(function(t,a){b.a.isArrayData(t)?e.setState({dataParameter:t}):e.setState({dataParameter:[]})}))}},{key:"handleParameterInputChange",value:function(e,t){var a=this.state,i=a.dataParameter,s=a.curItem,n=this;if(b.a.isArrayData(i)){var c=i[t];b.a.isObjectEmpty(c)||(i[t].is_checked=i[t].is_checked?0:1,i[t].id_device=s.id,this.setState({dataParameter:i},(function(){n.loadDataChart()})))}}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.chartParams;switch(s.id_filter){case"today":case"last_month":case"this_month":s.start_date=i,s[a]=i;break;case"3_day":if("start_date"==a){s.start_date=i;var n=i.split("/");if(n){var c=n[2]+"/"+n[1]+"/"+n[0];s.end_date=Ye()(b.a.addDays(c,2)).format("DD/MM/YYYY")}}if("end_date"==a){s.end_date=i;var r=i.split("/");if(r){var l=r[2]+"/"+r[1]+"/"+r[0];s.start_date=Ye()(b.a.addDays(l,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){s.start_date=i;var o=i.split("/");if(o){var d=o[1]+"/"+o[0]+"/01",h=Ye()(d).startOf("month").format("YYYY-MM-DD");s.end_date=Ye()(b.a.addMonths(h,12)).format("MM/YYYY")}}if("end_date"==a){s.end_date=i;var m=i.split("/");if(m){var u=m[1]+"/"+m[0]+"/01",p=Ye()(u).startOf("month").format("YYYY-MM-DD");s.start_date=Ye()(b.a.addMonths(p,-12)).format("MM/YYYY")}}}this.setState({chartParams:s}),this.loadDataChart()}}},{key:"loadDataChart",value:function(){var e=this,t=this.state,a=t.chartParams,i=t.dataDevice,s=t.dataParameter,n=t.curItem,c=this,r={};i=[];if(b.a.isObjectEmpty(n)||i.push(n),b.a.isArrayData(i)&&b.a.isArrayData(s)){var l={};switch(a.id_filter){case"today":l.start_date=b.a.convertAllFormatDate(b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),l.end_date=b.a.convertAllFormatDate(b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":l.start_date=b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",l.end_date=b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":l.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",l.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00";break;case"lifetime":case"12_month":l.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",l.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00"}l.id_language=this.employee.id_language,l.id_employee=this.employee.id_employee;var o=i.reduce((function(e,t){return e.find((function(e){return e.id===t.id}))?e:e.concat([t])}),[]);l.dataDevice=o,l.filterBy=a.id_filter,l.data_send_time=a.data_send_time;var d=document.getElementById("chart-view").clientHeight-80;r.chart={zoomType:"xy",height:d||null},r.credits={enabled:!1},r.exporting={enabled:!0},r.title={text:null,align:"left"},r.xAxis=[],r.yAxis=[],r.tooltip={shared:!0,crosshairs:!0},r.plotOptions={series:{turboThreshold:5e3},column:{stacking:"normal"}},r.series=[];var h=24;switch(a.id_filter){case"today":1==a.data_send_time?h=24:2==a.data_send_time?h=12:3==a.data_send_time&&(h=2);break;case"3_day":1==a.data_send_time?h=168:2==a.data_send_time?h=57:3==a.data_send_time&&(h=15);break;case"last_month":case"this_month":h=4;break;case"lifetime":case"12_month":h=1}var m=s.filter((function(e){return 1==e.is_checked}));b.a.isArrayData(m)&&$a.instance.getChartByListDevice(l,(function(t,a){if(b.a.isArrayData(t)){for(var i=[],s=[],n=[],l=[],o=0;o<m.length;o++){if(0===o)l.push(m[o]),n.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(m[o].unit)?"":m[o].unit,enabled:!0},opposite:!1});else{var d=b.a.find(l,"unit",m[o].unit);b.a.isObjectEmpty(d)&&(l.push(m[o]),n.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(m[o].unit)?"":m[o].unit,enabled:!0},opposite:!0}))}var u=0;b.a.isArrayData(l)&&l.map((function(e,t){m[o].unit==e.unit&&(u=t)}));for(var p=0,j=t.length;p<j;p++){var v={name:m[o].name,type:"spline",yAxis:u,tooltip:{valueSuffix:" "+(b.a.isBlank(m[o].unit)?"":m[o].unit)},data:[],gridLineWidth:1,lineWidth:1,marker:{radius:1.5,enabled:!1}},_=t[p].data,g=[];if(b.a.isArrayData(_))for(var f=0;f<_.length;f++){var x=!b.a.isBlank(_[f][m[o].slug])&&_[f][m[o].slug]>0?_[f][m[o].slug]:null;g.push([_[f].time_full,x]),0===p&&i.push(_[f].categories_time)}v.data=g,s.push(v)}}b.a.isArrayData(i)&&b.a.isArrayData(s)&&b.a.isArrayData(n)&&(r.xAxis=[{categories:i,alignTicks:!0,tickInterval:h}],r.series=s,r.yAxis=n,e.setState({chartToolOption:r,dataExport:t}),c.forceUpdate())}else c.setState({chartToolOption:{},dataExport:[]})}))}}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ja=Object(f.a)("common")(Ka);function Xa(){var e,t=this,a=this.state,i=a.dataDeviceHardware,s=a.curItem,n=this.props.t;e=i.map((function(e,a){return Object(m.jsx)(Fa,{index:a,dataItem:e,actions:t.actions,t:n},"row_item_"+a)}));var c=null;switch(this.state.show_tab){case 1:break;case 2:c=Object(m.jsx)(za,{curItem:s,actions:this.actions,auth:this.props.auth});break;case 3:c=Object(m.jsx)(Ja,{curItem:s,actions:this.actions,auth:this.props.auth})}return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-device",dialogClassName:"modal-xl modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:s.name}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseViewDevice.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("div",{className:"device-tab",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{onClick:this.onClickShowTab.bind(this,1),className:1==this.state.show_tab?"active":"",children:n("device.hardware")}),Object(m.jsx)("li",{onClick:this.onClickShowTab.bind(this,2),className:2==this.state.show_tab?"active":"",children:n("device.alarms")}),Object(m.jsx)("li",{onClick:this.onClickShowTab.bind(this,3),className:3==this.state.show_tab?"active":"",children:n("device.charting")})]})}),c||Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsx)("div",{className:"device-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-md-4",children:[Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.device_name"),": "]}),s.name]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.model"),": "]}),s.model]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.serial_number"),": "]}),s.serial_number]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.id_device_type"),": "]}),s.device_type_name]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.manufacturer"),": "]}),s.manufacturer]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.installed_at"),": "]}),s.installed_at]})]}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:n("device.last_communication")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:s.last_communication})})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:n("device.last_attempt")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:s.last_attempt})})})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)("div",{onClick:this.reloadLatestData.bind(this),className:"reload-device",children:n("device.reload_latest_data")})})]})}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:n("device.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:n("device.data_name")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:n("device.value")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:n("device.unit")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:n("common.data_empty")}):e})})]})})]})]})})]})}var Za=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickShowTab=function(e){s.setState({show_tab:e})},s.state={curItem:s.props.curItem,dataDeviceType:[],dataList:[],show_tab:s.props.show_tab,dataDeviceHardware:[]},s.jsxTemplate=Xa,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataListHardware()}},{key:"getDataListHardware",value:function(){var e=this,t=this.state.curItem,a=Object.assign({},t);a.id_language=this.employee.id_language,a.id_employee=this.employee.id_employee,Ua.instance.getDataListHardware(a,(function(a,i){b.a.isArrayData(a)?(t.last_communication=a[0].last_communication,t.last_attempt=a[0].last_attempt,e.setState({dataDeviceHardware:a,curItem:t})):e.setState({dataDeviceHardware:[]})}))}},{key:"reloadLatestData",value:function(){this.getDataListHardware()}}]),a}(ee);function Qa(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam,l=i.show_tab;e=n.map((function(e,i){return Object(m.jsx)(Ra,{index:i,dataItem:e,actions:t.actions,onClickViewDevice:t.onClickViewDevice,onClickChartDevice:t.onClickChartDevice,viewAlertDevice:t.viewAlertDevice,t:a},"row_item_"+i)}));var o=this.state.viewDevice?Object(m.jsx)(Za,{t:a,allLanguage:c,curItem:s,onClickCloseViewDevice:this.onClickCloseViewDevice,auth:this.props.auth,actions:this.actions,show_tab:l,iso_code_language:this.employee.lang}):"";return Object(m.jsxs)("div",{className:"devices",children:[Object(m.jsx)(xa,{hash_id:this.state.hash_id},Math.random()),o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("device.title")})}),Object(m.jsxs)("div",{className:"col-md-6 text-end",children:[Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"btn-download",children:Object(m.jsx)("span",{className:"icon-download"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})})]}),Object(m.jsx)("div",{className:"date",children:Object(m.jsx)(Ee,{value:r.current_date,inputId:"current_date",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"current_date",maxDate:r.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})]})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("device.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsx)("div",{className:"data-view",children:Object(m.jsxs)("div",{className:"main-device-scroll",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{style:{width:"100px"},className:"header-col width5",children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{style:{width:"150px"},onClick:function(e){return t.onSort(e,"name")},className:"name"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("device.device_name")})}),Object(m.jsx)("div",{style:{width:"150px"},onClick:function(e){return t.onSort(e,"model")},className:"model"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("device.model")})}),Object(m.jsx)("div",{style:{width:"250px"},onClick:function(e){return t.onSort(e,"serial_number")},className:"serial_number"===r.sort_column?"header-col width15 sorting "+r.order_by:"header-col width15 sorting",children:Object(m.jsx)("p",{children:a("device.serial_number")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.id_device_type")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.power")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.energy")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.last_month")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.lifetime")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.last_updated")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var ei=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).downloadData=function(){var e=n.state.dataList;n.props.t;if(b.a.isArrayData(e)){for(var t=[],a=0,i=e.length;a<i;a++){var s=e[a].alerts,c=0,r=0,l=0,o=0,d=0;if(b.a.isArrayData(s))for(var h=0,m=s.length;h<m;h++)switch(parseInt(s[h].id)){case 1:c=s[h].total_alert;break;case 2:r=s[h].total_alert;break;case 3:l=s[h].total_alert;break;case 4:o=s[h].total_alert;break;case 5:d=s[h].total_alert}t.push({ID:e[a].id,"Device name":e[a].name,Model:e[a].model,"Serial number":e[a].serial_number,"Device type":e[a].device_type_name,"Power now":b.a.formatNum(e[a].power_now,"#,###.##")+" kW","Energy today":b.a.formatNum(e[a].today_energy,"#,###.##")+" kWh",Lifetime:b.a.formatElectricalUnit(e[a].lifetime,"h"),Error:c,Warning:r,Info:l,Fatal:o,Debug:d})}var u={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(t,{skipHeader:!1})}},p=La.write(u,{bookType:"xlsx",type:"array"}),j=new Blob([p],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(j,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.onClickViewDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({show_tab:1,curItem:a,viewDevice:!0}))}},n.onClickChartDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({show_tab:3,curItem:a,viewDevice:!0}))}},n.viewAlertDevice=function(e){var t=n.state,a=t.dataList,i=t.curItem;if(b.a.isArrayData(a)){var s=a[e];b.a.isObjectEmpty(s)||(i.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:Object.assign(i,s),show_tab:2,viewDevice:!0}))}},n.onClickCloseViewDevice=function(e){n.setState({viewDevice:!1})},n.jsxTemplate=Qa,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},dataList:[],show_tab:1,searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1,max_date:b.a.getCurrentDDMMYYYY(),current_date:b.a.getCurrentDDMMYYYY()},viewDevice:!1,formSearch:!1},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getList()}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=this,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),a){var n=this.state.searchParam;n[a]=s,this.setState({searchParam:n},(function(){i.getList()}))}}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,t.hash_id=this.state.hash_id,t.type="customer",Ua.instance.getListDeviceByHashId(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ti=Object(f.a)("common")(ei),ai=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.handleCheckItemInputChange=function(){e.props.handleCheckItemInputChange&&"function"===typeof e.props.handleCheckItemInputChange&&e.props.handleCheckItemInputChange(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsxs)("p",{className:"d-inline-block",children:[" ",Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+t.thumbnail})," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{className:"d-inline-block",children:[t.id," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[t.error_level_name," "]})}),Object(m.jsxs)("div",{className:"body-col width25",children:[Object(m.jsxs)("p",{className:"text-truncate",children:[Object(m.jsxs)("strong",{children:["Device: ",t.name]})," ",Object(m.jsx)("br",{})]}),Object(m.jsx)("p",{"data-for":"tooltip_"+this.props.index,className:"d-inline-block text-truncate",style:{maxWidth:"100%"},"data-tip":"","data-type":"error","data-class":"tooltip-action custom-tooltip",children:b.a.isBlank(t.message)?t.description:t.message}),Object(m.jsx)(Je.a,{id:"tooltip_"+this.props.index,children:Object(m.jsxs)("div",{className:"error-content",children:[Object(m.jsx)("h2",{children:"issue"}),Object(m.jsxs)("div",{className:"content",children:[b.a.isBlank(t.message)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.message"),":"]})," ",t.message]}),b.a.isBlank(t.description)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.description"),":"]})," ",t.description]}),b.a.isBlank(t.solutions)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.solutions"),":"]})," ",t.solutions]})]})]})})]}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:1==t.status?Object(m.jsx)("span",{className:"opened",children:a("activities.opened")}):Object(m.jsx)("span",{className:"closed",children:a("activities.close")})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.start_date_format})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[t.times_ago>0?t.times_ago:""," "+a("common."+t.times_ago_unit),t.times_ago>1&&"s"]})}),Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):"","data-tip":a("common.view"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-eye","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):"","data-tip":a("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})}),Object(m.jsx)("div",{className:"body-col width5 text-end",children:Object(m.jsx)(ne,{inputId:"alert_"+t.id,inputName:"alert",labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleCheckItemInputChange(t,e.props.index)},label:t.label})})]},t.id)}}]),a}(r.Component);function ii(){var e=this,t=this.state,a=t.curItem,i=t.dataErrorLevel,s=t.dataStatus,n=t.dataErrorType,c=t.dataAlertState,r=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:r("activities.alert_detail")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsxs)("h2",{children:[r("activities.device"),": ",a.name]}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"alert-information",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("span",{className:"alert alert-success",children:[r("activities.opened"),": ",a.start_date_format]})}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"alert alert-danger",children:[b.a.isBlank(a.message)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[r("activities.message"),":"]})," ",a.message]}),b.a.isBlank(a.description)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[r("activities.description"),":"]})," ",a.description]})]}),b.a.isBlank(a.solutions)?"":Object(m.jsxs)("div",{className:"solutions",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[r("activities.solutions"),":"]})}),Object(m.jsx)("p",{children:a.solutions})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.id_error_level"),instanceId:"id_error_level",className:"id_error_level",name:"id_error_level",isDisabled:!0,value:i.filter((function(e){return e.id===a.id_error_level})),onChange:function(t){e.handleDropdownChange(t,"id_error_level")},optionList:i,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.id_error_type"),instanceId:"id_error_type",className:"id_error_type",name:"id_error_type",value:n.filter((function(e){return e.id===a.id_error_type})),onChange:function(t){e.handleDropdownChange(t,"id_error_type")},optionList:n,isDisabled:!0,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.status"),instanceId:"status",className:"status",name:"status",value:s.filter((function(e){return e.id===a.status})),onChange:function(t){e.handleDropdownChange(t,"status")},optionList:s,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"reminder",children:Object(m.jsx)("ul",{children:b.a.isArrayData(c)?c.map((function(t,i){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"reminder"+t.id,inputName:"reminder",labelClass:"no-label",checked:a.id_alert_state===t.id?1:0,onChange:function(t){e.handleAlertStateInputChange(i)},label:t.label})},i)})):""})})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:r("activities.note"),inputClass:"form-control",inputId:"note",inputName:"note",value:a.note,onChange:function(t){e.handleInputChange(t)},maxLength:1e3})})})]})]})})]})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:r("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:(a.screen_mode,v.a.SCREEN_MODE.EDIT,r("common.save"))})]})]})}var si=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_ACTIVITIES.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_ACTIVITIES.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"closeAlert",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_ACTIVITIES.CLOSE_ALL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_ACTIVITIES.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),ni=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.ALERT_STATE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.ALERT_STATE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.ALERT_STATE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.ALERT_STATE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.ALERT_STATE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.ALERT_STATE.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.ALERT_STATE.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),ci=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleAlertStateInputChange=function(e){var t=s.state,a=t.dataAlertState,i=t.curItem;if(b.a.isArrayData(a)){var n=a[e];b.a.isObjectEmpty(n)||(i.id_alert_state=n.id,s.setState({curItem:i}))}},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.status="";else{var n=e.value;i[t]=n}a.setState({curItem:i})},s.state={curItem:s.props.curItem,dataErrorType:s.props.dataErrorType,dataErrorLevel:s.props.dataErrorLevel,dataStatus:s.props.dataStatus,dataAlertState:[]},s.jsxTemplate=ii,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListAlertState()}},{key:"getListAlertState",value:function(){var e=this,t={id_language:this.employee.id_language};ni.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataAlertState:t}):e.setState({dataAlertState:[]})}))}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.curItem,a=this,(i=Object.assign({},t)).screen_mode=v.a.SCREEN_MODE.EDIT,i.id_employee=this.employee.id_employee,i.id_language=this.employee.id_language,i.type="customer",si.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function ri(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.id," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var li=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=ri,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,t.type="customer",si.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);a(838);function oi(){var e=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[e("common.delete_all")," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDeleteAll.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:e("common.message_delete_all")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDeleteAll.bind(this),className:"btn btn-cancel",text:" "+e("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:e("common.no")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:e("common.yes"),title:e("common.yes")})]})]})}var di=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem,dataList:s.props.dataList},s.jsxTemplate=oi,s}return Object(s.a)(a,[{key:"onClickCloseDeleteAll",value:function(){this.props.onClickCloseDeleteAll&&"function"===typeof this.props.onClickCloseDeleteAll&&this.props.onClickCloseDeleteAll(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.assign({},this.state.curItem),a=this,i=this.state.dataList,s=[],b.a.isArrayData(i))for(n=0,c=i.length;n<c;n++)i[n].is_checked&&s.push({id:i[n].id,updated_by:this.employee.first_name+" "+this.employee.last_name,status:0});t.dataArr=s,t.type="customer",b.a.isArrayData(s)&&si.instance.closeAlert(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDeleteAll(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function hi(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam,l=i.dataErrorLevel,o=i.dataStatus,d=i.dataErrorType;e=n.map((function(e,i){return Object(m.jsx)(ai,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,actions:t.actions,handleCheckItemInputChange:t.handleCheckItemInputChange,t:a},"row_item_"+i)}));var h=this.state.add?Object(m.jsx)(ci,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang,dataErrorLevel:l,dataStatus:o,dataErrorType:d}):"",u=this.state.delete?Object(m.jsx)(li,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"",p=this.state.deleteAll?Object(m.jsx)(di,{t:a,curItem:s,onClickCloseDeleteAll:this.onClickCloseDeleteAll,auth:this.props.auth,actions:this.actions,dataList:n}):"",j=b.a.find(n,"is_checked",1);return Object(m.jsxs)("div",{className:"activities",children:[Object(m.jsx)(xa,{hash_id:this.state.hash_id},Math.random()),h,u,p,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("activities.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"btn-download",children:Object(m.jsx)("span",{className:"icon-download"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),!b.a.isObjectEmpty(j)&&_.a.getPermisson(this.actions,v.a.AUTH_MODE.DEL)?Object(m.jsx)("li",{children:Object(m.jsx)("div",{"data-tip":a("common.delete_all"),"data-type":"warning","data-class":"tooltip-action",className:"search",onClick:this.onItemClickDeleteAll.bind(this),children:Object(m.jsx)("span",{className:"icon-trash-o"})})}):""]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:a("common.date_from"),value:r.date_from,inputId:"date_from",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_from",minDate:r.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:a("common.date_to"),value:r.date_to,inputId:"date_to",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_to",minDate:r.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Type"}),Object(m.jsx)("ul",{children:b.a.isArrayData(d)?d.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_error_type_"+a,inputName:"id_error_type",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckTypeInputChange(e,a)}})},a)})):""})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Level"}),Object(m.jsx)("ul",{children:b.a.isArrayData(l)?l.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_error_level_"+a,inputName:"id_error_level",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckLevelInputChange(e,a)}})},a)})):""})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Status"}),Object(m.jsx)("ul",{children:b.a.isArrayData(o)?o.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"status_"+a,inputName:"status",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckStatusInputChange(e,a)}})},a)})):""})]})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5"}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:"ID"})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_type")},className:"id_error_type"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.alert_type")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_level")},className:"id_error_level"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.level")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"message")},className:"message"===r.sort_column?"header-col width25 sorting "+r.order_by:"header-col width25 sorting",children:Object(m.jsx)("p",{children:a("activities.issus")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.status")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"start_date_format")},className:"start_date_format"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.opened")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:a("activities.open_period")})}),Object(m.jsx)("div",{className:"header-col width5 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})}),Object(m.jsx)("div",{className:"header-col width5 text-end",children:Object(m.jsx)(ne,{inputId:"checked_all",inputName:"checked_all",labelClass:"no-label",checked:this.state.checked_all,onChange:function(e){t.handleCheckAllInputChange(e)}})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var mi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleCheckStatusInputChange=function(e,t){var a=n.state.dataStatus;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataStatus:a}))},n.handleCheckTypeInputChange=function(e,t){var a=n.state.dataErrorType;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataErrorType:a}))},n.handleCheckLevelInputChange=function(e,t){var a=n.state.dataErrorLevel;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataErrorLevel:a}))},n.downloadData=function(){var e=n.state.dataList,t=n.props.t;if(b.a.isArrayData(e)){for(var a=[],i=0,s=e.length;i<s;i++){var c=e[i].times_ago+" "+t("common."+e[i].times_ago_unit)+(e[i].times_ago>1&&"s");a.push({ID:e[i].id,"Device Name":e[i].name,Type:e[i].error_type_name,Level:e[i].error_level_name,Opened:e[i].start_date_format,"Open period":c,Message:e[i].message,Description:e[i].description,Solutions:e[i].solutions,Note:e[i].note,"Review status":e[i].alert_state_name})}var r={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(a,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.handleCheckItemInputChange=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t[e].is_checked=t[e].is_checked?0:1,n.setState({dataList:t}))}},n.handleCheckAllInputChange=function(){var e=n.state,t=e.dataList,a=e.checked_all;if(b.a.isArrayData(t)){for(var i=0,s=t.length;i<s;i++)t[i].is_checked=a?0:1;n.setState({dataList:t,checked_all:a?0:1})}},n.handleDropdownChange=function(e,t){if(!b.a.isObjectEmpty(e)){var a=Object(p.a)(n),i=e.value,s=a.state.searchParam;"id_error_level"===t&&b.a.isObjectEmpty(e)&&(s.id_error_level=""),"id_error_type"===t&&b.a.isObjectEmpty(e)&&(s.id_error_type=""),"status"===t&&b.a.isObjectEmpty(e)&&(s.status=""),s[t]=i,a.setState({searchParam:s})}},n.onClickCloseDeleteAll=function(e,t){e&&t&&n.getList(),n.setState({deleteAll:!1})},n.onItemClickDeleteAll=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,deleteAll:!0})}},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];if(!b.a.isObjectEmpty(t))n.state.curItem.id=t.id,t.screen_mode=v.a.SCREEN_MODE.EDIT,n.setState({curItem:t,add:!0})}},n.jsxTemplate=hi,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,checked_all:0,curItem:{},dataList:[],dataErrorType:[],dataErrorLevel:[],dataStatus:[{id:1,value:1,label:"Opened",is_checked:0},{id:0,value:0,label:"Closed",is_checked:0}],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},viewActivities:!1,formSearch:!1,delete:!1,deleteAll:!1,add:!1},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListErrorLevel(),this.getListErrorType()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getListErrorLevel(),t.getListErrorType()}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,this.setState({searchParam:s})}}},{key:"getListErrorType",value:function(){var e=this,t={id_language:this.employee.id_language};Wa.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorType:t}):e.setState({dataErrorType:[]})}))}},{key:"getListErrorLevel",value:function(){var e=this,t={id_language:this.employee.id_language};Va.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorLevel:t},(function(){e.getList()})):e.setState({dataErrorLevel:[]})}))}},{key:"getList",value:function(){var e=this,t=this.state,a=t.dataErrorLevel,i=t.dataErrorType,s=t.dataStatus,n=this.state.searchParam;n.id_language=this.employee.id_language,n.id_employee=this.employee.id_employee,n.hash_id=this.state.hash_id,n.errorLevel=a.filter((function(e){return 1==e.is_checked})),n.errorType=i.filter((function(e){return 1==e.is_checked})),n.dataStatus=s.filter((function(e){return 1==e.is_checked})),n.type="customer",si.instance.getList(n,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.date_from=null,t.date_to=null,t.id_error_level=null,t.id_error_type=null,t.status=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ui=Object(f.a)("common")(mi),pi=(a(839),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=t.dataParameter;return Object(m.jsxs)("li",{children:[Object(m.jsx)("div",{className:"item-title",children:t.device_group_name}),Object(m.jsx)("div",{className:"sub-parameter",children:Object(m.jsx)("ul",{children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"parameter_"+e.props.index+"_"+t.id,inputName:"parameter_"+e.props.index+"_"+t.id,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.props.handleParameterInputChange(t,e.props.index,a)},label:t.name})},t.id)})):""})})]},this.props.index)}}]),a}(r.Component));function ji(){var e=this,t=(this.props.t,this.state),a=(t.curItem,t.dataListDevice),i=(t.dataList,t.chartParams,t.dataFilter,t.chartOption,t.dataStatus,t.dataDevice,t.dataParameter),s=null;return b.a.isArrayData(i)&&(s=i.map((function(t,a){return Object(m.jsx)(pi,{dataItem:t,index:a,handleParameterInputChange:e.handleParameterInputChange,auth:e.props.auth,actions:e.props.actions},a)}))),Object(m.jsxs)("div",{className:"list-parameter",children:[Object(m.jsxs)("div",{className:"title",children:[Object(m.jsxs)("h2",{children:["Devices ",Object(m.jsx)("span",{onClick:this.showFilterParameter.bind(this),children:Object(m.jsx)("var",{className:"icon-angle-right"})})]}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsx)("ul",{children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"device_"+a,inputName:"device_"+a,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleDeviceInputChange(t,a)},label:t.name})},a)})):""})})]}),this.state.show_parameter?Object(m.jsxs)("div",{className:"chart-device-param",children:[Object(m.jsxs)("h2",{children:["Parameter ",Object(m.jsx)("span",{onClick:this.closeFilterParameter.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"device-parameter",children:Object(m.jsx)("ul",{children:s})}),Object(m.jsxs)("div",{className:"parameter-footer",children:[Object(m.jsx)("span",{onClick:this.clearFilterParameter.bind(this),className:"remove",children:"Clear"}),Object(m.jsx)("span",{onClick:this.addFilterParameter.bind(this),className:"add",children:"Add"})]})]}):""]})}var bi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).showFilterParameter=function(){n.setState({show_parameter:!0})},n.addFilterParameter=function(){var e=n.state,t=e.dataListDevice,a=e.dataParameter,i=Object(p.a)(n);if(b.a.isArrayData(a)){var s=t.filter((function(e){return 1==e.is_checked}));if(b.a.isArrayData(s)){var c=0;a.map((function(e,t){var a=e.dataParameter,i=b.a.find(a,"is_checked",1);b.a.isObjectEmpty(i)||(c+=1)})),0!=c&&n.setState({show_parameter:!1},(function(){i.props.callBackLoadChart(s,a)}))}}},n.closeFilterParameter=function(){n.setState({show_parameter:!1})},n.clearFilterParameter=function(){var e=n.state.dataParameter;b.a.isArrayData(e)&&(e.map((function(t,a){var i=t.dataParameter;if(b.a.isArrayData(i))for(var s=0,n=i.length;s<n;s++)i[s].is_checked=0;e[a].dataParameter=i})),n.setState({dataParameter:e}))},n.handleParameterInputChange=function(e,t,a){var i=n.state.dataParameter;if(b.a.isArrayData(i)){var s=i[t];if(!b.a.isObjectEmpty(s)){var c=s.dataParameter;b.a.isArrayData(c)&&(i[t].dataParameter[a].is_checked=i[t].dataParameter[a].is_checked?0:1,n.setState({dataParameter:i}))}}},n.handleDeviceInputChange=function(e,t){var a=n.state.dataListDevice;if(b.a.isArrayData(a)){var i=a[t];if(!b.a.isObjectEmpty(i)){if(0==a[t].is_checked){var s=a[t].dataParameter;if(b.a.isArrayData(s))for(var c=0,r=s.length;c<r;c++)s[c].is_checked=0;a[t].dataParameter=s}a[t].is_checked=a[t].is_checked?0:1;var l=a.filter((function(e){return 1==e.is_checked}));n.setState({dataListDevice:a,dataParameter:b.a.getUnique(l,"id_device_group"),show_parameter:!0})}}},n.state={curItem:{},dataListDevice:n.props.dataListDevice,show_parameter:!1,dataParameter:n.props.dataParameter},n.jsxTemplate=ji,n}return Object(s.a)(a,[{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),vi=Object(f.a)("common")(bi);function _i(){var e=this,t=(this.props.t,this.state),a=t.curItem,i=t.dataParameter,s=t.dataListDevice,n=t.chartToolOption,c=t.chartParams,r=t.dataFilter,l=(i=t.dataParameter,null);b.a.isArrayData(r)&&(l=r.map((function(t,a){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==c.id_filter?"item active":"item",children:t.text},a)})));var o=null;if(!b.a.isObjectEmpty(c))switch(c.id_filter){case"today":o=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})});break;case"3_day":o=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:c.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":o=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})});break;case"12_month":o=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:c.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}return Object(m.jsxs)("div",{className:"chart-view",children:[Object(m.jsx)(vi,{dataParameter:i,callBackLoadChart:this.callBackLoadChart,dataListDevice:s,auth:this.props.auth,actions:this.props.actions},Math.random()),Object(m.jsx)("div",{id:"main-chart-view",className:"main-chart-view",children:Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadData.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})}),Object(m.jsxs)("div",{className:"col-xl-11 col-lg-11 col-md-11",children:[Object(m.jsxs)("div",{className:c.show_filter?"filter on":"filter",children:["today"==c.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:2!=a.data_send_time?this.changeViewMinute.bind(this,1):"",className:1!=a.data_send_time?"disabled":1==c.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==c.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==c.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[c.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:l})]}),Object(m.jsx)("div",{className:"time-filter",children:o})]})]})}),Object(m.jsx)("div",{ref:this.myRef,className:"chart-content",children:b.a.isObjectEmpty(n)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:n})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var gi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).callBackLoadChart=function(e,t){var a=Object(p.a)(n);b.a.isArrayData(e)&&b.a.isArrayData(t)&&n.setState({dataDevice:e,dataParameter:t},(function(){a.loadDataChart()}))},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.loadDataChart()})))},n.handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.loadDataChart()}))}}},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.downloadData=function(){var e=n.state.dataExport;if(b.a.isArrayData(e)){for(var t=[],a={},i=0;i<e.length;i++){t.push(e[i].name);var s=[],c=e[i].data;b.a.isArrayData(c)&&c.map((function(e,t){s.push(e)}));var r=La.utils.json_to_sheet(s,{skipHeader:!1});a[e[i].name]=r}var l={SheetNames:t,Sheets:a},o=La.write(l,{bookType:"xlsx",type:"array"}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(d,"export-charting-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:n.props.hash_id,curItem:{data_send_time:1,type:2},dataExport:[],dataListDevice:[],dataChartDevice:[],chartToolOption:{},dataParameter:[],dataDevice:[],dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}],chartParams:{id_filter:"today",text_filter:"Today",show_filter:!1,max_date:b.a.getCurrentDDMMYYYY(),data_send_time:1}},n.jsxTemplate=_i,n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListDeviceByProject(),this.loadConfigDefaultDate(),document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"loadDataChart",value:function(){var e=this,t=this.state,a=t.chartParams,i=t.dataDevice,s=t.dataParameter,n=this;if(b.a.isArrayData(i)&&b.a.isArrayData(s)){var c={},r={};switch(a.id_filter){case"today":r.start_date=b.a.convertAllFormatDate(b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),r.end_date=b.a.convertAllFormatDate(b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":r.start_date=b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",r.end_date=b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":r.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",r.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00";break;case"lifetime":case"12_month":r.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",r.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00"}r.id_language=this.employee.id_language,r.id_employee=this.employee.id_employee,r.dataDevice=i,r.filterBy=a.id_filter,r.data_send_time=a.data_send_time;var l=document.getElementById("main-chart-view").clientHeight-60;c.chart={zoomType:"xy",height:l||null},c.credits={enabled:!1},c.exporting={enabled:!0},c.title={text:null,align:"left"},c.xAxis=[],c.yAxis=[],c.tooltip={shared:!0,crosshairs:!0},c.plotOptions={series:{turboThreshold:5e3},column:{stacking:"normal"}},c.series=[];var o=24;switch(a.id_filter){case"today":1==a.data_send_time?o=24:2==a.data_send_time?o=12:3==a.data_send_time&&(o=2);break;case"3_day":1==a.data_send_time?o=168:2==a.data_send_time?o=57:3==a.data_send_time&&(o=15);break;case"last_month":case"this_month":o=4;break;case"lifetime":case"12_month":o=1}for(var d=[],h=0,m=s.length;h<m;h++){var u=s[h].dataParameter;if(!b.a.isArrayData(u))return;var p=u.filter((function(e){return 1==e.is_checked}));b.a.isArrayData(p)&&d.push.apply(d,Object(_a.a)(p))}b.a.isArrayData(d)&&(r.type="customer",$a.instance.getChartByListDevice(r,(function(t,a){if(b.a.isArrayData(t)){for(var i=[],s=[],r=[],l=[],h=0;h<d.length;h++){if(0===h)l.push(d[h]),r.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(d[h].unit)?"":d[h].unit,enabled:!0},opposite:!1});else{var m=b.a.find(l,"unit",d[h].unit);b.a.isObjectEmpty(m)&&(l.push(d[h]),r.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(d[h].unit)?"":d[h].unit,enabled:!0},opposite:!0}))}var u=0;b.a.isArrayData(l)&&l.map((function(e,t){d[h].unit==e.unit&&(u=t)}));for(var p=0,j=t.length;p<j;p++){for(var v={name:t[p].device_name+" - "+d[h].name,type:"spline",yAxis:u,tooltip:{valueSuffix:" "+(b.a.isBlank(d[h].unit)?"":d[h].unit)},data:[],gridLineWidth:1,lineWidth:1,marker:{radius:1.5,enabled:!1}},_=t[p].data,g=[],f=0;f<_.length;f++){var x=!b.a.isBlank(_[f][d[h].slug])&&_[f][d[h].slug]>0?_[f][d[h].slug]:null;g.push([_[f].time_full,x]),i.push(_[f].categories_time)}v.data=g,s.push(v)}}b.a.isArrayData(i)&&b.a.isArrayData(s)&&b.a.isArrayData(r)&&(c.xAxis=[{categories:i,alignTicks:!0,tickInterval:o}],c.series=s,c.yAxis=r,e.setState({chartToolOption:c,dataChartDevice:t,dataExport:t}))}else n.setState({chartToolOption:{},dataChartDevice:[],dataExport:[]})})))}}},{key:"loadConfigDefaultDate",value:function(){var e=this.state.chartParams;switch(e.id_filter){case"today":e.max_date=b.a.getCurrentMMDDYYYYHI(),e.end_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":e.end_date=b.a.getCurrentDDMMYYYY(),e.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),e.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY");break;case"this_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");break;case"last_month":e.max_date=Ye()().format("MM/YYYY");var t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).endOf("month").format("MM/YYYY"),e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");var i;t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-12)).format("MM/YYYY"),e.max_start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}this.setState({chartParams:e})}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.chartParams;switch(s.id_filter){case"today":case"last_month":case"this_month":s.start_date=i,s[a]=i;break;case"3_day":if("start_date"==a){s.start_date=i;var n=i.split("/");if(n){var c=n[2]+"/"+n[1]+"/"+n[0];s.end_date=Ye()(b.a.addDays(c,2)).format("DD/MM/YYYY")}}if("end_date"==a){s.end_date=i;var r=i.split("/");if(r){var l=r[2]+"/"+r[1]+"/"+r[0];s.start_date=Ye()(b.a.addDays(l,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){s.start_date=i;var o=i.split("/");if(o){var d=o[1]+"/"+o[0]+"/01",h=Ye()(d).startOf("month").format("YYYY-MM-DD");s.end_date=Ye()(b.a.addMonths(h,12)).format("MM/YYYY")}}if("end_date"==a){s.end_date=i;var m=i.split("/");if(m){var u=m[1]+"/"+m[0]+"/01",p=Ye()(u).startOf("month").format("YYYY-MM-DD");s.start_date=Ye()(b.a.addMonths(p,-12)).format("MM/YYYY")}}}this.setState({chartParams:s}),this.loadDataChart()}}},{key:"getListDeviceByProject",value:function(){var e=this,t={hash_id:this.state.hash_id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};$a.instance.getListDeviceByProject(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListDevice:t}):e.setState({dataListDevice:[]}),e.forceUpdate()}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),fi=Object(f.a)("common")(gi);function xi(){var e=this.state,t=e.curItem,a=e.performanceTodayOption,i=e.performance12MonthOption,s=e.performance30DaysOption,n=e.maxPowerOption;return Object(m.jsxs)("div",{className:"chart-view",children:[Object(m.jsx)("div",{className:"chart-view-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4"}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("h2",{children:"Current site Performance"})}),Object(m.jsx)("div",{className:"col-md-4",children:t.current_day?Object(m.jsxs)("p",{children:["Last Updated: ",t.current_day]}):""})]})}),Object(m.jsx)("div",{className:"main-charting-view",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Performance - Today"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataPerformanceToday.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(a)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:a})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Performance - Last 30 days"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataP30Days.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(s)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:s})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Performance - Last 12 months"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataP12Month.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(i)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:i})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Daily Max Power - Last 12 Months"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataMaxPower.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(n)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:n})})]})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Oi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).downloadDataPerformanceToday=function(){var e=n.state,t=e.dataPerformanceToday,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Performance - Today"],Sheets:{"Performance - Today":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-performance-today-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.downloadDataP12Month=function(){var e=n.state,t=e.dataP12Months,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Performance - Last 12 months"],Sheets:{"Performance - Last 12 months":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-performance-12-month-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.downloadDataP30Days=function(){var e=n.state,t=e.dataP30Days,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Performance - Last 30 days"],Sheets:{"Performance - Last 30 days":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-performance-30-days-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.downloadDataMaxPower=function(){var e=n.state,t=e.maxPower12Months,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Max power (kW)":t[s].activePower});var r={SheetNames:["Daily Max Power"],Sheets:{"Daily Max Power":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-max-power-12-months-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:n.props.hash_id,curItem:{},dataPerformanceToday:[],dataP12Months:[],dataP30Days:[],maxPower12Months:[]},n.jsxTemplate=xi,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataChartProfile()}},{key:"getDataChartProfile",value:function(){var e=this.state,t=e.hash_id,a=e.curItem,i=this;if(!b.a.isBlank(t)){var s={hash_id:t,id_language:this.employee.id_language,id_employee:this.employee.id_employee,type:"customer"};$a.instance.getDataChartProfile(s,(function(e){if(e){a.name=e.name,a.current_day=e.current_day;var t=e.dataChartProfile,s=[],n=[],c={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},r={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:1,tooltip:{valueSuffix:" kW"},marker:{radius:1.5}},l=[],o=[];if(b.a.isArrayData(t)){n=["5AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19PM"];for(var d=0,h=0;h<t.length;h++){if(0==h){var m=b.a.dateFormat(t[h].time_format,"HH","YYYY-MM-DD HH:mm:ss"),u=b.a.dateFormat(t[h].time_format,"mm","YYYY-MM-DD HH:mm:ss");if((d=12*(parseInt(m)-5)+Math.round(u/5))>0)for(var p=0;p<d;p++){var j=b.a.dateFormat(b.a.addMinutes(b.a.dateFormat(t[h].time_format,"YYYY-MM-DD 05:00","YYYY-MM-DD HH:mm:ss"),5*p),"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss");l.push([j,null]),o.push([j,null])}}l.push([t[h].time_full,t[h].activeEnergy]),o.push([t[h].time_full,t[h].activePower])}var v=d+t.length;if(v<168&&v>0)for(var _="",g=v;g<168;g++)g==v&&(_=t[t.length-1].time_format),null!=_&&(_=b.a.addMinutes(_,5),l.push([b.a.dateFormat(_,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]),o.push([b.a.dateFormat(_,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]));c.data=l,s.push(c),r.data=o,s.push(r)}var f=[],x=[],O=e.performanceLast12Months,y=[],M=[],N={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},C={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:1,tooltip:{valueSuffix:" kW"},marker:{radius:1.5}};if(b.a.isArrayData(O)){M=[];for(var k="",D="",w="",A=0;A<O.length;A++){if(M.push([O[A].category_time_format]),k=O[A].time_format,0===A)D=new Date(O[A].time_format).getMonth()+1;if(A===O.length-1)w=new Date(O[A].time_format).getMonth()+1;f.push([O[A].time_full,O[A].activeEnergy]),x.push([O[A].time_full,O[A].activePower])}if(!b.a.isBlank(D)&&!b.a.isBlank(w)){for(var I=[],P=[],Y=[],E=new Date(k),L=1;L<D;L++)I.push([(L<10?"0"+L:L)+"/"+E.getFullYear(),null]),P.push([(L<10?"0"+L:L)+"/"+E.getFullYear(),null]),Y.push([b.a.getStringMonthNumber(L)]);Y.push.apply(Y,Object(_a.a)(M)),I.push.apply(I,Object(_a.a)(f)),P.push.apply(P,Object(_a.a)(x));for(var S=w+1;S<=12;S++)I.push([(S<10?"0"+S:S)+"/"+E.getFullYear(),null]),P.push([(S<10?"0"+S:S)+"/"+E.getFullYear(),null]),Y.push([b.a.getStringMonthNumber(S)]);M=Y,f=I,x=P}N.data=f,y.push(N),C.data=x,y.push(C)}var T=e.performanceLast30Days,R=[],F=[],H=[],B=[],U={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},V={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:1,tooltip:{valueSuffix:" kW"},marker:{radius:1.5}};if(b.a.isArrayData(T)){B=[];for(var W=0;W<T.length;W++)B.push([T[W].category_time_format]),R.push([T[W].time_full,T[W].activeEnergy]),F.push([T[W].time_full,T[W].activePower]);U.data=R,H.push(U),V.data=F,H.push(V)}var q=e.maxPower12Months,z=[],G=[],$={data:[],name:"Measured AC Power (max)",tooltip:{valueSuffix:" kW"}};if(b.a.isArrayData(q)){for(var K=0;K<q.length;K++)z.push([Date.UTC(q[K].year,q[K].month,q[K].day),q[K].activePower]);$.data=z,G.push($)}i.setState({curItem:a,dataCategories:n,dataPerformanceToday:t,series:s,dataP12Months:O,dataCategoriesP12Month:M,seriesP12Month:y,dataP30Days:T,categoriesP30Days:B,seriesP30Days:H,maxPower12Months:q,seriesMaxPower:G},(function(){i.performanceTodayOption()}))}}),!1)}}},{key:"performanceTodayOption",value:function(){var e={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f5893b","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:24,visible:!0,categories:this.state.dataCategories},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.series},t={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f5893b","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:1,visible:!0,categories:this.state.dataCategoriesP12Month},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.seriesP12Month},a={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"xy"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f5893b","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:3,visible:!0,categories:this.state.categoriesP30Days,crosshair:!0},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],tooltip:{shared:!1,crosshairs:!0},series:this.state.seriesP30Days},i={credits:{enabled:!1},exporting:{enabled:!0},chart:{zoomType:"xy"},title:{text:null},colors:["#f5893b","#66bc51","#004ec3"],xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%Y"},title:{text:null,enabled:!1}},yAxis:{title:{text:"kW"},min:0,lineWidth:1,gridLineWidth:1},plotOptions:{series:{marker:{enabled:!0}}},series:this.state.seriesMaxPower};this.setState({performanceTodayOption:e,performance12MonthOption:t,performance30DaysOption:a,maxPowerOption:i})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),yi=Object(f.a)("common")(Oi);a(840);function Mi(){var e=this.props.t,t=this.state,a=t.curItem,i=t.chartOption,s=null,n=0;b.a.isArrayData(a.totalFleetAlarm)&&(s=a.totalFleetAlarm.map((function(e,t){return n+=e.total_alarm,Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"item-alarm-sum",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2 text-center",children:Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+e.thumbnail,width:"20"})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("strong",{children:e.name})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("p",{children:e.total_alarm})})]})})},t)})));var c=a.alarmOPened,r=null;return b.a.isArrayData(c)&&(r=c.map((function(t,a){return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+t.thumbnail,alt:t.name})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_level_name})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsxs)("p",{children:["Device: ",t.name]})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:b.a.isBlank(t.message)?t.description:t.message})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("p",{children:t.start_date_format})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsxs)("p",{children:[t.times_ago>0?t.times_ago:""," "+e("common."+t.times_ago_unit),t.times_ago>1&&"s"]})})]},a)}))),Object(m.jsxs)("div",{className:"chart-alarm",children:[Object(m.jsx)("div",{className:"chart-view-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4"}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("h2",{children:e("analytics.alarms")})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("p",{children:[e("analytics.last_updated"),": ",a.current_day]})})]})}),Object(m.jsx)("div",{className:"main-charting-view",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsx)("h2",{children:e("analytics.total_fleet_alerts")})}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsxs)("ul",{children:[s,Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"item-alarm-sum",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2 text-center"}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("strong",{children:e("analytics.total")})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("p",{children:b.a.formatNum(n,"#,###")})})]})})})]})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:e("analytics.alarm_last_12month")})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadData.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(i)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:i})})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsx)("h2",{children:"Open Alerts"})}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsxs)("div",{className:"main-alarm",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5",children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:e("analytics.type")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:e("analytics.level")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:e("analytics.component")})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:e("analytics.isuse")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:e("analytics.opened")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:e("analytics.open_period")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:r})})]})})]})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Ni=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).downloadData=function(){var e=n.state.curItem;if(b.a.isArrayData(e.alarmLast12Month)){for(var t=e.alarmLast12Month,a=[],i=0,s=t.length;i<s;i++)a.push({Time:t[i].time_full,"Project name":e.name,Total:t[i].total_alarm});var c={SheetNames:["Alarms - Last 12 months"],Sheets:{"Alarms - Last 12 months":La.utils.json_to_sheet(a,{skipHeader:!1})}},r=La.write(c,{bookType:"xlsx",type:"array"}),l=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(l,"Export-alarm-12-month-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:n.props.hash_id,curItem:{},dataTotalFleet:[],dataList:[],categories:[],series:[],chartOption:{},searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages,chartParams:{id_site:null,id_filter:"today",text_filter:"Today",show_filter:!1,showNextBtn:!1,current_time:b.a.getCurrentMMDDYYYYHI(),end_date:b.a.getCurrentMMDDYYYYHI(),start_date:b.a.getCurrentMMDDYYYYHI(),data_send_time:2}},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=Mi,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataChartProfile()}},{key:"getDataChartProfile",value:function(){var e=this,t=this.state,a=t.hash_id,i=t.curItem,s=t.categories,n=t.series,c=this;if(!b.a.isBlank(a)){var r={hash_id:a,id_language:this.employee.id_language,id_employee:this.employee.id_employee,type:"customer"};$a.instance.getChartAlarm(r,(function(t){if(t){var a=t.alarmLast12Month;if(b.a.isArrayData(a)){for(var r=[],l=0,o=a.length;l<o;l++)s.push(a[l].time_full),r.push([a[l].time_full,a[l].total_alarm]);n.push({name:"Alarms - Last 12 months",type:"spline",data:r,tooltip:{valueSuffix:""}})}c.setState({curItem:t,series:n,categories:s},(function(){c.loadChartOption()}))}else e.setState({curItem:i})}),!1)}}},{key:"loadChartOption",value:function(){var e=this.state,t={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:380},title:{text:null},colors:["#f5893b","#66bc51","#004ec3"],xAxis:{categories:e.categories,crosshair:!0},yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:"kWh",enabled:!1}}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},series:e.series};this.setState({chartOption:t})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ci=Object(f.a)("common")(Ni);a(841);function ki(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=(a.dataList,a.chartParams),n=a.dataFilter,c=a.chartOption,r=a.dataDiagnostics,l=a.dataStringIndex,o=(a.dataDevice,a.dataParameter,null);b.a.isArrayData(n)&&(o=n.map((function(t,a){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==s.id_filter?"item active":"item",children:t.text},a)})));var d=null;if(!b.a.isObjectEmpty(s))switch(s.id_filter){case"today":d=Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{onClick:this.onClickPrev.bind(this),className:"icon icon-angle-left"}),Object(m.jsx)("label",{className:"start-date",children:Ye()(s.end_date).format("ll")}),Object(m.jsx)("span",{onClick:s.showNextBtn?this.onClickNext.bind(this):null,className:s.showNextBtn?"icon icon-angle-right":"icon icon-angle-right disabled"})]});break;case"12_month":case"last_month":case"this_month":d=Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{onClick:this.onClickPrev.bind(this),className:"icon icon-angle-left"}),Object(m.jsx)("label",{className:"start-date",children:Ye()(s.start_date).format("ll")}),Object(m.jsx)("label",{className:"pad-line",children:"-"}),Object(m.jsx)("label",{className:"start-date",children:Ye()(s.end_date).format("ll")}),Object(m.jsx)("span",{onClick:s.showNextBtn?this.onClickNext.bind(this):null,className:s.showNextBtn?"icon icon-angle-right":"icon icon-angle-right disabled"})]});break;case"lifetime":d=Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{className:"icon icon-angle-left disabled"}),Object(m.jsx)("label",{className:"start-date",children:Ye()(s.start_date).format("ll")}),Object(m.jsx)("label",{className:"pad-line",children:"-"}),Object(m.jsx)("label",{className:"start-date",children:Ye()(s.end_date).format("ll")}),Object(m.jsx)("span",{className:"icon icon-angle-right disabled"})]})}return Object(m.jsx)("div",{className:"chart-view chart-diagnostics",children:Object(m.jsx)("div",{className:"main-chart-view",children:Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2",children:Object(m.jsx)(mt,{instanceId:"type_diagnostics",className:"statype_diagnosticsus",name:"type_diagnostics",value:r.filter((function(e){return e.id===i.type_diagnostics})),onChange:function(t){e.handleDropdownChange(t,"type_diagnostics")},optionList:r,placeHolder:t("common.choose")})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2",children:Object(m.jsx)(mt,{instanceId:"type_string_index",className:"type_string_index",name:"type_string_index",value:l.filter((function(e){return e.id===i.type_string_index})),onChange:function(t){e.handleDropdownChange(t,"type_string_index")},optionList:l,placeHolder:t("common.choose")})}),Object(m.jsxs)("div",{className:"col-xl-8 col-lg-8 col-md-8",children:[Object(m.jsxs)("div",{className:s.show_filter?"filter on":"filter",children:["today"==s.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:2!=i.data_send_time?this.changeViewMinute.bind(this,1):"",className:1!=i.data_send_time?"disabled":1==s.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==s.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==s.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[s.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:o})]}),Object(m.jsx)("div",{className:"time-filter",children:d})]})]})}),Object(m.jsx)("div",{ref:this.myRef,className:"chart-content",children:b.a.isObjectEmpty(c)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:c})})]})})})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Di=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDataChart",value:function(e,t){try{new x.a(!0);t({id:0,id_customer:1,id_country:0,id_time_zone:0,name:null,street:null,lat:0,lng:0,old_data:null,number:null,postal_code:null,city:null,state:null,commissioning:null,emergency_contact:null,ac_capacity:0,dc_capacity:0,status:0,is_delete:0,created_date:null,created_by:null,updated_date:null,updated_by:null,built_since:null,limit:0,offset:0,totalRecord:0,order_by:null,sort_by:null,address_short:null,watts_3ph_total:0,sensor1_data:0,w_hours_total:0,w_hours_received:0,eer_this_month:0,total_energy_this_month:0,today_kwh:0,eer_last_month:0,total_error:0,alert_list:null,kpi_type:null,irradiance:null,power:null,energy:[{total_energy:1967,export_devicename:"RGM-01",data_energy:[{energy_kwh:8109311,last_updated:"2021-08-12 00:00:00 AM",download_time:"2021-08-12 00:00",local_time:"2021-08-12 00:00",chart_energy_kwh:0,full_time:"2021-08-12 00:00",id_device:95,time:"2021-08-12T07:00:00.000+00:00",id:13,timekey:1809696},{energy_kwh:8109311,last_updated:"2021-08-12 00:15:00 AM",download_time:"2021-08-12 00:15",local_time:"2021-08-12 00:15",chart_energy_kwh:0,full_time:"2021-08-12 00:15",id_device:95,time:"2021-08-12T07:15:00.000+00:00",id:13,timekey:1809697},{energy_kwh:8109311,last_updated:"2021-08-12 00:30:00 AM",download_time:"2021-08-12 00:30",local_time:"2021-08-12 00:30",chart_energy_kwh:0,full_time:"2021-08-12 00:30",id_device:95,time:"2021-08-12T07:30:00.000+00:00",id:13,timekey:1809698},{energy_kwh:8109311,last_updated:"2021-08-12 00:45:00 AM",download_time:"2021-08-12 00:45",local_time:"2021-08-12 00:45",chart_energy_kwh:0,full_time:"2021-08-12 00:45",id_device:95,time:"2021-08-12T07:45:00.000+00:00",id:13,timekey:1809699},{energy_kwh:8109311,last_updated:"2021-08-12 01:00:00 AM",download_time:"2021-08-12 01:00",local_time:"2021-08-12 01:00",chart_energy_kwh:0,full_time:"2021-08-12 01:00",id_device:95,time:"2021-08-12T08:00:00.000+00:00",id:13,timekey:1809700},{energy_kwh:8109311,last_updated:"2021-08-12 01:15:00 AM",download_time:"2021-08-12 01:15",local_time:"2021-08-12 01:15",chart_energy_kwh:0,full_time:"2021-08-12 01:15",id_device:95,time:"2021-08-12T08:15:00.000+00:00",id:13,timekey:1809701},{energy_kwh:8109311,last_updated:"2021-08-12 01:30:00 AM",download_time:"2021-08-12 01:30",local_time:"2021-08-12 01:30",chart_energy_kwh:0,full_time:"2021-08-12 01:30",id_device:95,time:"2021-08-12T08:30:00.000+00:00",id:13,timekey:1809702},{energy_kwh:8109311,last_updated:"2021-08-12 01:45:00 AM",download_time:"2021-08-12 01:45",local_time:"2021-08-12 01:45",chart_energy_kwh:0,full_time:"2021-08-12 01:45",id_device:95,time:"2021-08-12T08:45:00.000+00:00",id:13,timekey:1809703},{energy_kwh:8109311,last_updated:"2021-08-12 02:00:00 AM",download_time:"2021-08-12 02:00",local_time:"2021-08-12 02:00",chart_energy_kwh:0,full_time:"2021-08-12 02:00",id_device:95,time:"2021-08-12T09:00:00.000+00:00",id:13,timekey:1809704},{energy_kwh:8109311,last_updated:"2021-08-12 02:15:00 AM",download_time:"2021-08-12 02:15",local_time:"2021-08-12 02:15",chart_energy_kwh:0,full_time:"2021-08-12 02:15",id_device:95,time:"2021-08-12T09:15:00.000+00:00",id:13,timekey:1809705},{energy_kwh:8109311,last_updated:"2021-08-12 02:30:00 AM",download_time:"2021-08-12 02:30",local_time:"2021-08-12 02:30",chart_energy_kwh:0,full_time:"2021-08-12 02:30",id_device:95,time:"2021-08-12T09:30:00.000+00:00",id:13,timekey:1809706},{energy_kwh:8109311,last_updated:"2021-08-12 02:45:00 AM",download_time:"2021-08-12 02:45",local_time:"2021-08-12 02:45",chart_energy_kwh:0,full_time:"2021-08-12 02:45",id_device:95,time:"2021-08-12T09:45:00.000+00:00",id:13,timekey:1809707},{energy_kwh:8109311,last_updated:"2021-08-12 03:00:00 AM",download_time:"2021-08-12 03:00",local_time:"2021-08-12 03:00",chart_energy_kwh:0,full_time:"2021-08-12 03:00",id_device:95,time:"2021-08-12T10:00:00.000+00:00",id:13,timekey:1809708},{energy_kwh:8109311,last_updated:"2021-08-12 03:15:00 AM",download_time:"2021-08-12 03:15",local_time:"2021-08-12 03:15",chart_energy_kwh:0,full_time:"2021-08-12 03:15",id_device:95,time:"2021-08-12T10:15:00.000+00:00",id:13,timekey:1809709},{energy_kwh:8109311,last_updated:"2021-08-12 03:30:00 AM",download_time:"2021-08-12 03:30",local_time:"2021-08-12 03:30",chart_energy_kwh:0,full_time:"2021-08-12 03:30",id_device:95,time:"2021-08-12T10:30:00.000+00:00",id:13,timekey:1809710},{energy_kwh:8109311,last_updated:"2021-08-12 03:45:00 AM",download_time:"2021-08-12 03:45",local_time:"2021-08-12 03:45",chart_energy_kwh:0,full_time:"2021-08-12 03:45",id_device:95,time:"2021-08-12T10:45:00.000+00:00",id:13,timekey:1809711},{energy_kwh:8109311,last_updated:"2021-08-12 04:00:00 AM",download_time:"2021-08-12 04:00",local_time:"2021-08-12 04:00",chart_energy_kwh:0,full_time:"2021-08-12 04:00",id_device:95,time:"2021-08-12T11:00:00.000+00:00",id:13,timekey:1809712},{energy_kwh:8109311,last_updated:"2021-08-12 04:15:00 AM",download_time:"2021-08-12 04:15",local_time:"2021-08-12 04:15",chart_energy_kwh:0,full_time:"2021-08-12 04:15",id_device:95,time:"2021-08-12T11:15:00.000+00:00",id:13,timekey:1809713},{energy_kwh:8109311,last_updated:"2021-08-12 04:30:00 AM",download_time:"2021-08-12 04:30",local_time:"2021-08-12 04:30",chart_energy_kwh:0,full_time:"2021-08-12 04:30",id_device:95,time:"2021-08-12T11:30:00.000+00:00",id:13,timekey:1809714},{energy_kwh:8109311,last_updated:"2021-08-12 04:45:00 AM",download_time:"2021-08-12 04:45",local_time:"2021-08-12 04:45",chart_energy_kwh:0,full_time:"2021-08-12 04:45",id_device:95,time:"2021-08-12T11:45:00.000+00:00",id:13,timekey:1809715},{energy_kwh:8109311,last_updated:"2021-08-12 05:00:00 AM",download_time:"2021-08-12 05:00",local_time:"2021-08-12 05:00",chart_energy_kwh:0,full_time:"2021-08-12 05:00",id_device:95,time:"2021-08-12T12:00:00.000+00:00",id:13,timekey:1809716},{energy_kwh:8109311,last_updated:"2021-08-12 05:15:00 AM",download_time:"2021-08-12 05:15",local_time:"2021-08-12 05:15",chart_energy_kwh:0,full_time:"2021-08-12 05:15",id_device:95,time:"2021-08-12T12:15:00.000+00:00",id:13,timekey:1809717},{energy_kwh:8109311,last_updated:"2021-08-12 05:30:00 AM",download_time:"2021-08-12 05:30",local_time:"2021-08-12 05:30",chart_energy_kwh:0,full_time:"2021-08-12 05:30",id_device:95,time:"2021-08-12T12:30:00.000+00:00",id:13,timekey:1809718},{energy_kwh:8109311,last_updated:"2021-08-12 05:45:00 AM",download_time:"2021-08-12 05:45",local_time:"2021-08-12 05:45",chart_energy_kwh:0,full_time:"2021-08-12 05:45",id_device:95,time:"2021-08-12T12:45:00.000+00:00",id:13,timekey:1809719},{energy_kwh:8109311,last_updated:"2021-08-12 06:00:00 AM",download_time:"2021-08-12 06:00",local_time:"2021-08-12 06:00",chart_energy_kwh:0,full_time:"2021-08-12 06:00",id_device:95,time:"2021-08-12T13:00:00.000+00:00",id:13,timekey:1809720},{energy_kwh:8109311,last_updated:"2021-08-12 06:15:00 AM",download_time:"2021-08-12 06:15",local_time:"2021-08-12 06:15",chart_energy_kwh:0,full_time:"2021-08-12 06:15",id_device:95,time:"2021-08-12T13:15:00.000+00:00",id:13,timekey:1809721},{energy_kwh:8109311,last_updated:"2021-08-12 06:30:00 AM",download_time:"2021-08-12 06:30",local_time:"2021-08-12 06:30",chart_energy_kwh:0,full_time:"2021-08-12 06:30",id_device:95,time:"2021-08-12T13:30:00.000+00:00",id:13,timekey:1809722},{energy_kwh:8109313,last_updated:"2021-08-12 06:45:00 AM",download_time:"2021-08-12 06:45",local_time:"2021-08-12 06:45",chart_energy_kwh:2,full_time:"2021-08-12 06:45",id_device:95,time:"2021-08-12T13:45:00.000+00:00",id:13,timekey:1809723},{energy_kwh:8109317,last_updated:"2021-08-12 07:00:00 AM",download_time:"2021-08-12 07:00",local_time:"2021-08-12 07:00",chart_energy_kwh:4,full_time:"2021-08-12 07:00",id_device:95,time:"2021-08-12T14:00:00.000+00:00",id:13,timekey:1809724},{energy_kwh:8109324,last_updated:"2021-08-12 07:15:00 AM",download_time:"2021-08-12 07:15",local_time:"2021-08-12 07:15",chart_energy_kwh:7,full_time:"2021-08-12 07:15",id_device:95,time:"2021-08-12T14:15:00.000+00:00",id:13,timekey:1809725},{energy_kwh:8109334,last_updated:"2021-08-12 07:30:00 AM",download_time:"2021-08-12 07:30",local_time:"2021-08-12 07:30",chart_energy_kwh:10,full_time:"2021-08-12 07:30",id_device:95,time:"2021-08-12T14:30:00.000+00:00",id:13,timekey:1809726},{energy_kwh:8109347,last_updated:"2021-08-12 07:45:00 AM",download_time:"2021-08-12 07:45",local_time:"2021-08-12 07:45",chart_energy_kwh:13,full_time:"2021-08-12 07:45",id_device:95,time:"2021-08-12T14:45:00.000+00:00",id:13,timekey:1809727},{energy_kwh:8109364,last_updated:"2021-08-12 08:00:00 AM",download_time:"2021-08-12 08:00",local_time:"2021-08-12 08:00",chart_energy_kwh:17,full_time:"2021-08-12 08:00",id_device:95,time:"2021-08-12T15:00:00.000+00:00",id:13,timekey:1809728},{energy_kwh:8109384,last_updated:"2021-08-12 08:15:00 AM",download_time:"2021-08-12 08:15",local_time:"2021-08-12 08:15",chart_energy_kwh:20,full_time:"2021-08-12 08:15",id_device:95,time:"2021-08-12T15:15:00.000+00:00",id:13,timekey:1809729},{energy_kwh:8109407,last_updated:"2021-08-12 08:30:00 AM",download_time:"2021-08-12 08:30",local_time:"2021-08-12 08:30",chart_energy_kwh:23,full_time:"2021-08-12 08:30",id_device:95,time:"2021-08-12T15:30:00.000+00:00",id:13,timekey:1809730},{energy_kwh:8109433,last_updated:"2021-08-12 08:45:00 AM",download_time:"2021-08-12 08:45",local_time:"2021-08-12 08:45",chart_energy_kwh:26,full_time:"2021-08-12 08:45",id_device:95,time:"2021-08-12T15:45:00.000+00:00",id:13,timekey:1809731},{energy_kwh:8109464,last_updated:"2021-08-12 09:00:00 AM",download_time:"2021-08-12 09:00",local_time:"2021-08-12 09:00",chart_energy_kwh:31,full_time:"2021-08-12 09:00",id_device:95,time:"2021-08-12T16:00:00.000+00:00",id:13,timekey:1809732},{energy_kwh:8109501,last_updated:"2021-08-12 09:15:00 AM",download_time:"2021-08-12 09:15",local_time:"2021-08-12 09:15",chart_energy_kwh:37,full_time:"2021-08-12 09:15",id_device:95,time:"2021-08-12T16:15:00.000+00:00",id:13,timekey:1809733},{energy_kwh:8109545,last_updated:"2021-08-12 09:30:00 AM",download_time:"2021-08-12 09:30",local_time:"2021-08-12 09:30",chart_energy_kwh:44,full_time:"2021-08-12 09:30",id_device:95,time:"2021-08-12T16:30:00.000+00:00",id:13,timekey:1809734},{energy_kwh:8109597,last_updated:"2021-08-12 09:45:00 AM",download_time:"2021-08-12 09:45",local_time:"2021-08-12 09:45",chart_energy_kwh:52,full_time:"2021-08-12 09:45",id_device:95,time:"2021-08-12T16:45:00.000+00:00",id:13,timekey:1809735},{energy_kwh:8109652,last_updated:"2021-08-12 10:00:00 AM",download_time:"2021-08-12 10:00",local_time:"2021-08-12 10:00",chart_energy_kwh:55,full_time:"2021-08-12 10:00",id_device:95,time:"2021-08-12T17:00:00.000+00:00",id:13,timekey:1809736},{energy_kwh:8109710,last_updated:"2021-08-12 10:15:00 AM",download_time:"2021-08-12 10:15",local_time:"2021-08-12 10:15",chart_energy_kwh:58,full_time:"2021-08-12 10:15",id_device:95,time:"2021-08-12T17:15:00.000+00:00",id:13,timekey:1809737},{energy_kwh:8109770,last_updated:"2021-08-12 10:30:00 AM",download_time:"2021-08-12 10:30",local_time:"2021-08-12 10:30",chart_energy_kwh:60,full_time:"2021-08-12 10:30",id_device:95,time:"2021-08-12T17:30:00.000+00:00",id:13,timekey:1809738},{energy_kwh:8109830,last_updated:"2021-08-12 10:45:00 AM",download_time:"2021-08-12 10:45",local_time:"2021-08-12 10:45",chart_energy_kwh:60,full_time:"2021-08-12 10:45",id_device:95,time:"2021-08-12T17:45:00.000+00:00",id:13,timekey:1809739},{energy_kwh:8109889,last_updated:"2021-08-12 11:00:00 AM",download_time:"2021-08-12 11:00",local_time:"2021-08-12 11:00",chart_energy_kwh:59,full_time:"2021-08-12 11:00",id_device:95,time:"2021-08-12T18:00:00.000+00:00",id:13,timekey:1809740},{energy_kwh:8109947,last_updated:"2021-08-12 11:15:00 AM",download_time:"2021-08-12 11:15",local_time:"2021-08-12 11:15",chart_energy_kwh:58,full_time:"2021-08-12 11:15",id_device:95,time:"2021-08-12T18:15:00.000+00:00",id:13,timekey:1809741},{energy_kwh:8110004,last_updated:"2021-08-12 11:30:00 AM",download_time:"2021-08-12 11:30",local_time:"2021-08-12 11:30",chart_energy_kwh:57,full_time:"2021-08-12 11:30",id_device:95,time:"2021-08-12T18:30:00.000+00:00",id:13,timekey:1809742},{energy_kwh:8110062,last_updated:"2021-08-12 11:45:00 AM",download_time:"2021-08-12 11:45",local_time:"2021-08-12 11:45",chart_energy_kwh:58,full_time:"2021-08-12 11:45",id_device:95,time:"2021-08-12T18:45:00.000+00:00",id:13,timekey:1809743},{energy_kwh:8110120,last_updated:"2021-08-12 12:00:00 PM",download_time:"2021-08-12 12:00",local_time:"2021-08-12 12:00",chart_energy_kwh:58,full_time:"2021-08-12 12:00",id_device:95,time:"2021-08-12T19:00:00.000+00:00",id:13,timekey:1809744},{energy_kwh:8110178,last_updated:"2021-08-12 12:15:00 PM",download_time:"2021-08-12 12:15",local_time:"2021-08-12 12:15",chart_energy_kwh:58,full_time:"2021-08-12 12:15",id_device:95,time:"2021-08-12T19:15:00.000+00:00",id:13,timekey:1809745},{energy_kwh:8110236,last_updated:"2021-08-12 12:30:00 PM",download_time:"2021-08-12 12:30",local_time:"2021-08-12 12:30",chart_energy_kwh:58,full_time:"2021-08-12 12:30",id_device:95,time:"2021-08-12T19:30:00.000+00:00",id:13,timekey:1809746},{energy_kwh:8110294,last_updated:"2021-08-12 12:45:00 PM",download_time:"2021-08-12 12:45",local_time:"2021-08-12 12:45",chart_energy_kwh:58,full_time:"2021-08-12 12:45",id_device:95,time:"2021-08-12T19:45:00.000+00:00",id:13,timekey:1809747},{energy_kwh:8110352,last_updated:"2021-08-12 13:00:00 PM",download_time:"2021-08-12 13:00",local_time:"2021-08-12 13:00",chart_energy_kwh:58,full_time:"2021-08-12 13:00",id_device:95,time:"2021-08-12T20:00:00.000+00:00",id:13,timekey:1809748},{energy_kwh:8110409,last_updated:"2021-08-12 13:15:00 PM",download_time:"2021-08-12 13:15",local_time:"2021-08-12 13:15",chart_energy_kwh:57,full_time:"2021-08-12 13:15",id_device:95,time:"2021-08-12T20:15:00.000+00:00",id:13,timekey:1809749},{energy_kwh:8110465,last_updated:"2021-08-12 13:30:00 PM",download_time:"2021-08-12 13:30",local_time:"2021-08-12 13:30",chart_energy_kwh:56,full_time:"2021-08-12 13:30",id_device:95,time:"2021-08-12T20:30:00.000+00:00",id:13,timekey:1809750},{energy_kwh:8110520,last_updated:"2021-08-12 13:45:00 PM",download_time:"2021-08-12 13:45",local_time:"2021-08-12 13:45",chart_energy_kwh:55,full_time:"2021-08-12 13:45",id_device:95,time:"2021-08-12T20:45:00.000+00:00",id:13,timekey:1809751},{energy_kwh:8110575,last_updated:"2021-08-12 14:00:00 PM",download_time:"2021-08-12 14:00",local_time:"2021-08-12 14:00",chart_energy_kwh:55,full_time:"2021-08-12 14:00",id_device:95,time:"2021-08-12T21:00:00.000+00:00",id:13,timekey:1809752},{energy_kwh:8110629,last_updated:"2021-08-12 14:15:00 PM",download_time:"2021-08-12 14:15",local_time:"2021-08-12 14:15",chart_energy_kwh:54,full_time:"2021-08-12 14:15",id_device:95,time:"2021-08-12T21:15:00.000+00:00",id:13,timekey:1809753},{energy_kwh:8110682,last_updated:"2021-08-12 14:30:00 PM",download_time:"2021-08-12 14:30",local_time:"2021-08-12 14:30",chart_energy_kwh:53,full_time:"2021-08-12 14:30",id_device:95,time:"2021-08-12T21:30:00.000+00:00",id:13,timekey:1809754},{energy_kwh:8110734,last_updated:"2021-08-12 14:45:00 PM",download_time:"2021-08-12 14:45",local_time:"2021-08-12 14:45",chart_energy_kwh:52,full_time:"2021-08-12 14:45",id_device:95,time:"2021-08-12T21:45:00.000+00:00",id:13,timekey:1809755},{energy_kwh:8110786,last_updated:"2021-08-12 15:00:00 PM",download_time:"2021-08-12 15:00",local_time:"2021-08-12 15:00",chart_energy_kwh:52,full_time:"2021-08-12 15:00",id_device:95,time:"2021-08-12T22:00:00.000+00:00",id:13,timekey:1809756},{energy_kwh:8110840,last_updated:"2021-08-12 15:15:00 PM",download_time:"2021-08-12 15:15",local_time:"2021-08-12 15:15",chart_energy_kwh:54,full_time:"2021-08-12 15:15",id_device:95,time:"2021-08-12T22:15:00.000+00:00",id:13,timekey:1809757},{energy_kwh:8110893,last_updated:"2021-08-12 15:30:00 PM",download_time:"2021-08-12 15:30",local_time:"2021-08-12 15:30",chart_energy_kwh:53,full_time:"2021-08-12 15:30",id_device:95,time:"2021-08-12T22:30:00.000+00:00",id:13,timekey:1809758},{energy_kwh:8110949,last_updated:"2021-08-12 15:45:00 PM",download_time:"2021-08-12 15:45",local_time:"2021-08-12 15:45",chart_energy_kwh:56,full_time:"2021-08-12 15:45",id_device:95,time:"2021-08-12T22:45:00.000+00:00",id:13,timekey:1809759},{energy_kwh:8111002,last_updated:"2021-08-12 16:00:00 PM",download_time:"2021-08-12 16:00",local_time:"2021-08-12 16:00",chart_energy_kwh:53,full_time:"2021-08-12 16:00",id_device:95,time:"2021-08-12T23:00:00.000+00:00",id:13,timekey:1809760},{energy_kwh:8111052,last_updated:"2021-08-12 16:15:00 PM",download_time:"2021-08-12 16:15",local_time:"2021-08-12 16:15",chart_energy_kwh:50,full_time:"2021-08-12 16:15",id_device:95,time:"2021-08-12T23:15:00.000+00:00",id:13,timekey:1809761},{energy_kwh:8111099,last_updated:"2021-08-12 16:30:00 PM",download_time:"2021-08-12 16:30",local_time:"2021-08-12 16:30",chart_energy_kwh:47,full_time:"2021-08-12 16:30",id_device:95,time:"2021-08-12T23:30:00.000+00:00",id:13,timekey:1809762},{energy_kwh:8111140,last_updated:"2021-08-12 16:45:00 PM",download_time:"2021-08-12 16:45",local_time:"2021-08-12 16:45",chart_energy_kwh:41,full_time:"2021-08-12 16:45",id_device:95,time:"2021-08-12T23:45:00.000+00:00",id:13,timekey:1809763},{energy_kwh:8111175,last_updated:"2021-08-12 17:00:00 PM",download_time:"2021-08-12 17:00",local_time:"2021-08-12 17:00",chart_energy_kwh:35,full_time:"2021-08-12 17:00",id_device:95,time:"2021-08-13T00:00:00.000+00:00",id:13,timekey:1809764},{energy_kwh:8111204,last_updated:"2021-08-12 17:15:00 PM",download_time:"2021-08-12 17:15",local_time:"2021-08-12 17:15",chart_energy_kwh:29,full_time:"2021-08-12 17:15",id_device:95,time:"2021-08-13T00:15:00.000+00:00",id:13,timekey:1809765},{energy_kwh:8111227,last_updated:"2021-08-12 17:30:00 PM",download_time:"2021-08-12 17:30",local_time:"2021-08-12 17:30",chart_energy_kwh:23,full_time:"2021-08-12 17:30",id_device:95,time:"2021-08-13T00:30:00.000+00:00",id:13,timekey:1809766},{energy_kwh:8111240,last_updated:"2021-08-12 17:45:00 PM",download_time:"2021-08-12 17:45",local_time:"2021-08-12 17:45",chart_energy_kwh:13,full_time:"2021-08-12 17:45",id_device:95,time:"2021-08-13T00:45:00.000+00:00",id:13,timekey:1809767},{energy_kwh:8111252,last_updated:"2021-08-12 18:00:00 PM",download_time:"2021-08-12 18:00",local_time:"2021-08-12 18:00",chart_energy_kwh:12,full_time:"2021-08-12 18:00",id_device:95,time:"2021-08-13T01:00:00.000+00:00",id:13,timekey:1809768},{energy_kwh:8111260,last_updated:"2021-08-12 18:15:00 PM",download_time:"2021-08-12 18:15",local_time:"2021-08-12 18:15",chart_energy_kwh:8,full_time:"2021-08-12 18:15",id_device:95,time:"2021-08-13T01:15:00.000+00:00",id:13,timekey:1809769},{energy_kwh:8111267,last_updated:"2021-08-12 18:30:00 PM",download_time:"2021-08-12 18:30",local_time:"2021-08-12 18:30",chart_energy_kwh:7,full_time:"2021-08-12 18:30",id_device:95,time:"2021-08-13T01:30:00.000+00:00",id:13,timekey:1809770},{energy_kwh:8111272,last_updated:"2021-08-12 18:45:00 PM",download_time:"2021-08-12 18:45",local_time:"2021-08-12 18:45",chart_energy_kwh:5,full_time:"2021-08-12 18:45",id_device:95,time:"2021-08-13T01:45:00.000+00:00",id:13,timekey:1809771},{energy_kwh:8111275,last_updated:"2021-08-12 19:00:00 PM",download_time:"2021-08-12 19:00",local_time:"2021-08-12 19:00",chart_energy_kwh:3,full_time:"2021-08-12 19:00",id_device:95,time:"2021-08-13T02:00:00.000+00:00",id:13,timekey:1809772},{energy_kwh:8111277,last_updated:"2021-08-12 19:15:00 PM",download_time:"2021-08-12 19:15",local_time:"2021-08-12 19:15",chart_energy_kwh:2,full_time:"2021-08-12 19:15",id_device:95,time:"2021-08-13T02:15:00.000+00:00",id:13,timekey:1809773},{energy_kwh:8111278,last_updated:"2021-08-12 19:30:00 PM",download_time:"2021-08-12 19:30",local_time:"2021-08-12 19:30",chart_energy_kwh:1,full_time:"2021-08-12 19:30",id_device:95,time:"2021-08-13T02:30:00.000+00:00",id:13,timekey:1809774},{energy_kwh:8111278,last_updated:"2021-08-12 19:45:00 PM",download_time:"2021-08-12 19:45",local_time:"2021-08-12 19:45",chart_energy_kwh:0,full_time:"2021-08-12 19:45",id_device:95,time:"2021-08-13T02:45:00.000+00:00",id:13,timekey:1809775},{energy_kwh:8111278,last_updated:"2021-08-12 20:00:00 PM",download_time:"2021-08-12 20:00",local_time:"2021-08-12 20:00",chart_energy_kwh:0,full_time:"2021-08-12 20:00",id_device:95,time:"2021-08-13T03:00:00.000+00:00",id:13,timekey:1809776},{energy_kwh:8111278,last_updated:"2021-08-12 20:15:00 PM",download_time:"2021-08-12 20:15",local_time:"2021-08-12 20:15",chart_energy_kwh:0,full_time:"2021-08-12 20:15",id_device:95,time:"2021-08-13T03:15:00.000+00:00",id:13,timekey:1809777},{energy_kwh:8111278,last_updated:"2021-08-12 20:30:00 PM",download_time:"2021-08-12 20:30",local_time:"2021-08-12 20:30",chart_energy_kwh:0,full_time:"2021-08-12 20:30",id_device:95,time:"2021-08-13T03:30:00.000+00:00",id:13,timekey:1809778},{energy_kwh:8111278,last_updated:"2021-08-12 20:45:00 PM",download_time:"2021-08-12 20:45",local_time:"2021-08-12 20:45",chart_energy_kwh:0,full_time:"2021-08-12 20:45",id_device:95,time:"2021-08-13T03:45:00.000+00:00",id:13,timekey:1809779},{energy_kwh:8111278,last_updated:"2021-08-12 21:00:00 PM",download_time:"2021-08-12 21:00",local_time:"2021-08-12 21:00",chart_energy_kwh:0,full_time:"2021-08-12 21:00",id_device:95,time:"2021-08-13T04:00:00.000+00:00",id:13,timekey:1809780},{energy_kwh:8111278,last_updated:"2021-08-12 21:15:00 PM",download_time:"2021-08-12 21:15",local_time:"2021-08-12 21:15",chart_energy_kwh:0,full_time:"2021-08-12 21:15",id_device:95,time:"2021-08-13T04:15:00.000+00:00",id:13,timekey:1809781},{energy_kwh:8111278,last_updated:"2021-08-12 21:30:00 PM",download_time:"2021-08-12 21:30",local_time:"2021-08-12 21:30",chart_energy_kwh:0,full_time:"2021-08-12 21:30",id_device:95,time:"2021-08-13T04:30:00.000+00:00",id:13,timekey:1809782},{energy_kwh:8111278,last_updated:"2021-08-12 21:45:00 PM",download_time:"2021-08-12 21:45",local_time:"2021-08-12 21:45",chart_energy_kwh:0,full_time:"2021-08-12 21:45",id_device:95,time:"2021-08-13T04:45:00.000+00:00",id:13,timekey:1809783},{energy_kwh:8111278,last_updated:"2021-08-12 22:00:00 PM",download_time:"2021-08-12 22:00",local_time:"2021-08-12 22:00",chart_energy_kwh:0,full_time:"2021-08-12 22:00",id_device:95,time:"2021-08-13T05:00:00.000+00:00",id:13,timekey:1809784},{energy_kwh:8111278,last_updated:"2021-08-12 22:15:00 PM",download_time:"2021-08-12 22:15",local_time:"2021-08-12 22:15",chart_energy_kwh:0,full_time:"2021-08-12 22:15",id_device:95,time:"2021-08-13T05:15:00.000+00:00",id:13,timekey:1809785},{energy_kwh:8111278,last_updated:"2021-08-12 22:30:00 PM",download_time:"2021-08-12 22:30",local_time:"2021-08-12 22:30",chart_energy_kwh:0,full_time:"2021-08-12 22:30",id_device:95,time:"2021-08-13T05:30:00.000+00:00",id:13,timekey:1809786},{energy_kwh:8111278,last_updated:"2021-08-12 22:45:00 PM",download_time:"2021-08-12 22:45",local_time:"2021-08-12 22:45",chart_energy_kwh:0,full_time:"2021-08-12 22:45",id_device:95,time:"2021-08-13T05:45:00.000+00:00",id:13,timekey:1809787},{energy_kwh:8111278,last_updated:"2021-08-12 23:00:00 PM",download_time:"2021-08-12 23:00",local_time:"2021-08-12 23:00",chart_energy_kwh:0,full_time:"2021-08-12 23:00",id_device:95,time:"2021-08-13T06:00:00.000+00:00",id:13,timekey:1809788},{energy_kwh:8111278,last_updated:"2021-08-12 23:15:00 PM",download_time:"2021-08-12 23:15",local_time:"2021-08-12 23:15",chart_energy_kwh:0,full_time:"2021-08-12 23:15",id_device:95,time:"2021-08-13T06:15:00.000+00:00",id:13,timekey:1809789},{energy_kwh:8111278,last_updated:"2021-08-12 23:30:00 PM",download_time:"2021-08-12 23:30",local_time:"2021-08-12 23:30",chart_energy_kwh:0,full_time:"2021-08-12 23:30",id_device:95,time:"2021-08-13T06:30:00.000+00:00",id:13,timekey:1809790},{energy_kwh:8111278,last_updated:"2021-08-12 23:45:00 PM",download_time:"2021-08-12 23:45",local_time:"2021-08-12 23:45",chart_energy_kwh:0,full_time:"2021-08-12 23:45",id_device:95,time:"2021-08-13T06:45:00.000+00:00",id:13,timekey:1809791}],devicename:"PVS - 100",id:95,type:"energy"},{total_energy:0,export_devicename:"RT1",data_energy:[{download_time:"2021-08-12 00:00",utc_time:"2021-08-12 07:00:00",chart_energy_kwh:0,full_time:"2021-08-12 00:00",id_device:96,time_day:"00:00",id:13,timekey:1809696,id_time_zone:129},{download_time:"2021-08-12 00:15",utc_time:"2021-08-12 07:15:00",chart_energy_kwh:0,full_time:"2021-08-12 00:15",id_device:96,time_day:"00:15",id:13,timekey:1809697,id_time_zone:129},{download_time:"2021-08-12 00:30",utc_time:"2021-08-12 07:30:00",chart_energy_kwh:0,full_time:"2021-08-12 00:30",id_device:96,time_day:"00:30",id:13,timekey:1809698,id_time_zone:129},{download_time:"2021-08-12 00:45",utc_time:"2021-08-12 07:45:00",chart_energy_kwh:0,full_time:"2021-08-12 00:45",id_device:96,time_day:"00:45",id:13,timekey:1809699,id_time_zone:129},{download_time:"2021-08-12 01:00",utc_time:"2021-08-12 08:00:00",chart_energy_kwh:0,full_time:"2021-08-12 01:00",id_device:96,time_day:"01:00",id:13,timekey:1809700,id_time_zone:129},{download_time:"2021-08-12 01:15",utc_time:"2021-08-12 08:15:00",chart_energy_kwh:0,full_time:"2021-08-12 01:15",id_device:96,time_day:"01:15",id:13,timekey:1809701,id_time_zone:129},{download_time:"2021-08-12 01:30",utc_time:"2021-08-12 08:30:00",chart_energy_kwh:0,full_time:"2021-08-12 01:30",id_device:96,time_day:"01:30",id:13,timekey:1809702,id_time_zone:129},{download_time:"2021-08-12 01:45",utc_time:"2021-08-12 08:45:00",chart_energy_kwh:0,full_time:"2021-08-12 01:45",id_device:96,time_day:"01:45",id:13,timekey:1809703,id_time_zone:129},{download_time:"2021-08-12 02:00",utc_time:"2021-08-12 09:00:00",chart_energy_kwh:0,full_time:"2021-08-12 02:00",id_device:96,time_day:"02:00",id:13,timekey:1809704,id_time_zone:129},{download_time:"2021-08-12 02:15",utc_time:"2021-08-12 09:15:00",chart_energy_kwh:0,full_time:"2021-08-12 02:15",id_device:96,time_day:"02:15",id:13,timekey:1809705,id_time_zone:129},{download_time:"2021-08-12 02:30",utc_time:"2021-08-12 09:30:00",chart_energy_kwh:0,full_time:"2021-08-12 02:30",id_device:96,time_day:"02:30",id:13,timekey:1809706,id_time_zone:129},{download_time:"2021-08-12 02:45",utc_time:"2021-08-12 09:45:00",chart_energy_kwh:0,full_time:"2021-08-12 02:45",id_device:96,time_day:"02:45",id:13,timekey:1809707,id_time_zone:129},{download_time:"2021-08-12 03:00",utc_time:"2021-08-12 10:00:00",chart_energy_kwh:0,full_time:"2021-08-12 03:00",id_device:96,time_day:"03:00",id:13,timekey:1809708,id_time_zone:129},{download_time:"2021-08-12 03:15",utc_time:"2021-08-12 10:15:00",chart_energy_kwh:0,full_time:"2021-08-12 03:15",id_device:96,time_day:"03:15",id:13,timekey:1809709,id_time_zone:129},{download_time:"2021-08-12 03:30",utc_time:"2021-08-12 10:30:00",chart_energy_kwh:0,full_time:"2021-08-12 03:30",id_device:96,time_day:"03:30",id:13,timekey:1809710,id_time_zone:129},{download_time:"2021-08-12 03:45",utc_time:"2021-08-12 10:45:00",chart_energy_kwh:0,full_time:"2021-08-12 03:45",id_device:96,time_day:"03:45",id:13,timekey:1809711,id_time_zone:129},{download_time:"2021-08-12 04:00",utc_time:"2021-08-12 11:00:00",chart_energy_kwh:0,full_time:"2021-08-12 04:00",id_device:96,time_day:"04:00",id:13,timekey:1809712,id_time_zone:129},{download_time:"2021-08-12 04:15",utc_time:"2021-08-12 11:15:00",chart_energy_kwh:0,full_time:"2021-08-12 04:15",id_device:96,time_day:"04:15",id:13,timekey:1809713,id_time_zone:129},{download_time:"2021-08-12 04:30",utc_time:"2021-08-12 11:30:00",chart_energy_kwh:0,full_time:"2021-08-12 04:30",id_device:96,time_day:"04:30",id:13,timekey:1809714,id_time_zone:129},{download_time:"2021-08-12 04:45",utc_time:"2021-08-12 11:45:00",chart_energy_kwh:0,full_time:"2021-08-12 04:45",id_device:96,time_day:"04:45",id:13,timekey:1809715,id_time_zone:129},{download_time:"2021-08-12 05:00",utc_time:"2021-08-12 12:00:00",chart_energy_kwh:0,full_time:"2021-08-12 05:00",id_device:96,time_day:"05:00",id:13,timekey:1809716,id_time_zone:129},{download_time:"2021-08-12 05:15",utc_time:"2021-08-12 12:15:00",chart_energy_kwh:0,full_time:"2021-08-12 05:15",id_device:96,time_day:"05:15",id:13,timekey:1809717,id_time_zone:129},{download_time:"2021-08-12 05:30",utc_time:"2021-08-12 12:30:00",chart_energy_kwh:0,full_time:"2021-08-12 05:30",id_device:96,time_day:"05:30",id:13,timekey:1809718,id_time_zone:129},{download_time:"2021-08-12 05:45",utc_time:"2021-08-12 12:45:00",chart_energy_kwh:0,full_time:"2021-08-12 05:45",id_device:96,time_day:"05:45",id:13,timekey:1809719,id_time_zone:129},{download_time:"2021-08-12 06:00",utc_time:"2021-08-12 13:00:00",chart_energy_kwh:0,full_time:"2021-08-12 06:00",id_device:96,time_day:"06:00",id:13,timekey:1809720,id_time_zone:129},{download_time:"2021-08-12 06:15",utc_time:"2021-08-12 13:15:00",chart_energy_kwh:3,full_time:"2021-08-12 06:15",id_device:96,time_day:"06:15",id:13,timekey:1809721,id_time_zone:129},{download_time:"2021-08-12 06:30",utc_time:"2021-08-12 13:30:00",chart_energy_kwh:18,full_time:"2021-08-12 06:30",id_device:96,time_day:"06:30",id:13,timekey:1809722,id_time_zone:129},{download_time:"2021-08-12 06:45",utc_time:"2021-08-12 13:45:00",chart_energy_kwh:36,full_time:"2021-08-12 06:45",id_device:96,time_day:"06:45",id:13,timekey:1809723,id_time_zone:129},{download_time:"2021-08-12 07:00",utc_time:"2021-08-12 14:00:00",chart_energy_kwh:57,full_time:"2021-08-12 07:00",id_device:96,time_day:"07:00",id:13,timekey:1809724,id_time_zone:129},{download_time:"2021-08-12 07:15",utc_time:"2021-08-12 14:15:00",chart_energy_kwh:83,full_time:"2021-08-12 07:15",id_device:96,time_day:"07:15",id:13,timekey:1809725,id_time_zone:129},{download_time:"2021-08-12 07:30",utc_time:"2021-08-12 14:30:00",chart_energy_kwh:111,full_time:"2021-08-12 07:30",id_device:96,time_day:"07:30",id:13,timekey:1809726,id_time_zone:129},{download_time:"2021-08-12 07:45",utc_time:"2021-08-12 14:45:00",chart_energy_kwh:142,full_time:"2021-08-12 07:45",id_device:96,time_day:"07:45",id:13,timekey:1809727,id_time_zone:129},{download_time:"2021-08-12 08:00",utc_time:"2021-08-12 15:00:00",chart_energy_kwh:177,full_time:"2021-08-12 08:00",id_device:96,time_day:"08:00",id:13,timekey:1809728,id_time_zone:129},{download_time:"2021-08-12 08:15",utc_time:"2021-08-12 15:15:00",chart_energy_kwh:217,full_time:"2021-08-12 08:15",id_device:96,time_day:"08:15",id:13,timekey:1809729,id_time_zone:129},{download_time:"2021-08-12 08:30",utc_time:"2021-08-12 15:30:00",chart_energy_kwh:260,full_time:"2021-08-12 08:30",id_device:96,time_day:"08:30",id:13,timekey:1809730,id_time_zone:129},{download_time:"2021-08-12 08:45",utc_time:"2021-08-12 15:45:00",chart_energy_kwh:299,full_time:"2021-08-12 08:45",id_device:96,time_day:"08:45",id:13,timekey:1809731,id_time_zone:129},{download_time:"2021-08-12 09:00",utc_time:"2021-08-12 16:00:00",chart_energy_kwh:362,full_time:"2021-08-12 09:00",id_device:96,time_day:"09:00",id:13,timekey:1809732,id_time_zone:129},{download_time:"2021-08-12 09:15",utc_time:"2021-08-12 16:15:00",chart_energy_kwh:410,full_time:"2021-08-12 09:15",id_device:96,time_day:"09:15",id:13,timekey:1809733,id_time_zone:129},{download_time:"2021-08-12 09:30",utc_time:"2021-08-12 16:30:00",chart_energy_kwh:591,full_time:"2021-08-12 09:30",id_device:96,time_day:"09:30",id:13,timekey:1809734,id_time_zone:129},{download_time:"2021-08-12 09:45",utc_time:"2021-08-12 16:45:00",chart_energy_kwh:644,full_time:"2021-08-12 09:45",id_device:96,time_day:"09:45",id:13,timekey:1809735,id_time_zone:129},{download_time:"2021-08-12 10:00",utc_time:"2021-08-12 17:00:00",chart_energy_kwh:737,full_time:"2021-08-12 10:00",id_device:96,time_day:"10:00",id:13,timekey:1809736,id_time_zone:129},{download_time:"2021-08-12 10:15",utc_time:"2021-08-12 17:15:00",chart_energy_kwh:805,full_time:"2021-08-12 10:15",id_device:96,time_day:"10:15",id:13,timekey:1809737,id_time_zone:129},{download_time:"2021-08-12 10:30",utc_time:"2021-08-12 17:30:00",chart_energy_kwh:809,full_time:"2021-08-12 10:30",id_device:96,time_day:"10:30",id:13,timekey:1809738,id_time_zone:129},{download_time:"2021-08-12 10:45",utc_time:"2021-08-12 17:45:00",chart_energy_kwh:803,full_time:"2021-08-12 10:45",id_device:96,time_day:"10:45",id:13,timekey:1809739,id_time_zone:129},{download_time:"2021-08-12 11:00",utc_time:"2021-08-12 18:00:00",chart_energy_kwh:805,full_time:"2021-08-12 11:00",id_device:96,time_day:"11:00",id:13,timekey:1809740,id_time_zone:129},{download_time:"2021-08-12 11:15",utc_time:"2021-08-12 18:15:00",chart_energy_kwh:804,full_time:"2021-08-12 11:15",id_device:96,time_day:"11:15",id:13,timekey:1809741,id_time_zone:129},{download_time:"2021-08-12 11:30",utc_time:"2021-08-12 18:30:00",chart_energy_kwh:807,full_time:"2021-08-12 11:30",id_device:96,time_day:"11:30",id:13,timekey:1809742,id_time_zone:129},{download_time:"2021-08-12 11:45",utc_time:"2021-08-12 18:45:00",chart_energy_kwh:813,full_time:"2021-08-12 11:45",id_device:96,time_day:"11:45",id:13,timekey:1809743,id_time_zone:129},{download_time:"2021-08-12 12:00",utc_time:"2021-08-12 19:00:00",chart_energy_kwh:812,full_time:"2021-08-12 12:00",id_device:96,time_day:"12:00",id:13,timekey:1809744,id_time_zone:129},{download_time:"2021-08-12 12:15",utc_time:"2021-08-12 19:15:00",chart_energy_kwh:808,full_time:"2021-08-12 12:15",id_device:96,time_day:"12:15",id:13,timekey:1809745,id_time_zone:129},{download_time:"2021-08-12 12:30",utc_time:"2021-08-12 19:30:00",chart_energy_kwh:808,full_time:"2021-08-12 12:30",id_device:96,time_day:"12:30",id:13,timekey:1809746,id_time_zone:129},{download_time:"2021-08-12 12:45",utc_time:"2021-08-12 19:45:00",chart_energy_kwh:806,full_time:"2021-08-12 12:45",id_device:96,time_day:"12:45",id:13,timekey:1809747,id_time_zone:129},{download_time:"2021-08-12 13:00",utc_time:"2021-08-12 20:00:00",chart_energy_kwh:800,full_time:"2021-08-12 13:00",id_device:96,time_day:"13:00",id:13,timekey:1809748,id_time_zone:129},{download_time:"2021-08-12 13:15",utc_time:"2021-08-12 20:15:00",chart_energy_kwh:797,full_time:"2021-08-12 13:15",id_device:96,time_day:"13:15",id:13,timekey:1809749,id_time_zone:129},{download_time:"2021-08-12 13:30",utc_time:"2021-08-12 20:30:00",chart_energy_kwh:791,full_time:"2021-08-12 13:30",id_device:96,time_day:"13:30",id:13,timekey:1809750,id_time_zone:129},{download_time:"2021-08-12 13:45",utc_time:"2021-08-12 20:45:00",chart_energy_kwh:782,full_time:"2021-08-12 13:45",id_device:96,time_day:"13:45",id:13,timekey:1809751,id_time_zone:129},{download_time:"2021-08-12 14:00",utc_time:"2021-08-12 21:00:00",chart_energy_kwh:775,full_time:"2021-08-12 14:00",id_device:96,time_day:"14:00",id:13,timekey:1809752,id_time_zone:129},{download_time:"2021-08-12 14:15",utc_time:"2021-08-12 21:15:00",chart_energy_kwh:763,full_time:"2021-08-12 14:15",id_device:96,time_day:"14:15",id:13,timekey:1809753,id_time_zone:129},{download_time:"2021-08-12 14:30",utc_time:"2021-08-12 21:30:00",chart_energy_kwh:755,full_time:"2021-08-12 14:30",id_device:96,time_day:"14:30",id:13,timekey:1809754,id_time_zone:129},{download_time:"2021-08-12 14:45",utc_time:"2021-08-12 21:45:00",chart_energy_kwh:719,full_time:"2021-08-12 14:45",id_device:96,time_day:"14:45",id:13,timekey:1809755,id_time_zone:129},{download_time:"2021-08-12 15:00",utc_time:"2021-08-12 22:00:00",chart_energy_kwh:759,full_time:"2021-08-12 15:00",id_device:96,time_day:"15:00",id:13,timekey:1809756,id_time_zone:129},{download_time:"2021-08-12 15:15",utc_time:"2021-08-12 22:15:00",chart_energy_kwh:783,full_time:"2021-08-12 15:15",id_device:96,time_day:"15:15",id:13,timekey:1809757,id_time_zone:129},{download_time:"2021-08-12 15:30",utc_time:"2021-08-12 22:30:00",chart_energy_kwh:856,full_time:"2021-08-12 15:30",id_device:96,time_day:"15:30",id:13,timekey:1809758,id_time_zone:129},{download_time:"2021-08-12 15:45",utc_time:"2021-08-12 22:45:00",chart_energy_kwh:842,full_time:"2021-08-12 15:45",id_device:96,time_day:"15:45",id:13,timekey:1809759,id_time_zone:129},{download_time:"2021-08-12 16:00",utc_time:"2021-08-12 23:00:00",chart_energy_kwh:772,full_time:"2021-08-12 16:00",id_device:96,time_day:"16:00",id:13,timekey:1809760,id_time_zone:129},{download_time:"2021-08-12 16:15",utc_time:"2021-08-12 23:15:00",chart_energy_kwh:775,full_time:"2021-08-12 16:15",id_device:96,time_day:"16:15",id:13,timekey:1809761,id_time_zone:129},{download_time:"2021-08-12 16:30",utc_time:"2021-08-12 23:30:00",chart_energy_kwh:711,full_time:"2021-08-12 16:30",id_device:96,time_day:"16:30",id:13,timekey:1809762,id_time_zone:129},{download_time:"2021-08-12 16:45",utc_time:"2021-08-12 23:45:00",chart_energy_kwh:650,full_time:"2021-08-12 16:45",id_device:96,time_day:"16:45",id:13,timekey:1809763,id_time_zone:129},{download_time:"2021-08-12 17:00",utc_time:"2021-08-13 00:00:00",chart_energy_kwh:560,full_time:"2021-08-12 17:00",id_device:96,time_day:"17:00",id:13,timekey:1809764,id_time_zone:129},{download_time:"2021-08-12 17:15",utc_time:"2021-08-13 00:15:00",chart_energy_kwh:489,full_time:"2021-08-12 17:15",id_device:96,time_day:"17:15",id:13,timekey:1809765,id_time_zone:129},{download_time:"2021-08-12 17:30",utc_time:"2021-08-13 00:30:00",chart_energy_kwh:357,full_time:"2021-08-12 17:30",id_device:96,time_day:"17:30",id:13,timekey:1809766,id_time_zone:129},{download_time:"2021-08-12 17:45",utc_time:"2021-08-13 00:45:00",chart_energy_kwh:306,full_time:"2021-08-12 17:45",id_device:96,time_day:"17:45",id:13,timekey:1809767,id_time_zone:129},{download_time:"2021-08-12 18:00",utc_time:"2021-08-13 01:00:00",chart_energy_kwh:264,full_time:"2021-08-12 18:00",id_device:96,time_day:"18:00",id:13,timekey:1809768,id_time_zone:129},{download_time:"2021-08-12 18:15",utc_time:"2021-08-13 01:15:00",chart_energy_kwh:212,full_time:"2021-08-12 18:15",id_device:96,time_day:"18:15",id:13,timekey:1809769,id_time_zone:129},{download_time:"2021-08-12 18:30",utc_time:"2021-08-13 01:30:00",chart_energy_kwh:171,full_time:"2021-08-12 18:30",id_device:96,time_day:"18:30",id:13,timekey:1809770,id_time_zone:129},{download_time:"2021-08-12 18:45",utc_time:"2021-08-13 01:45:00",chart_energy_kwh:122,full_time:"2021-08-12 18:45",id_device:96,time_day:"18:45",id:13,timekey:1809771,id_time_zone:129},{download_time:"2021-08-12 19:00",utc_time:"2021-08-13 02:00:00",chart_energy_kwh:88,full_time:"2021-08-12 19:00",id_device:96,time_day:"19:00",id:13,timekey:1809772,id_time_zone:129},{download_time:"2021-08-12 19:15",utc_time:"2021-08-13 02:15:00",chart_energy_kwh:53,full_time:"2021-08-12 19:15",id_device:96,time_day:"19:15",id:13,timekey:1809773,id_time_zone:129},{download_time:"2021-08-12 19:30",utc_time:"2021-08-13 02:30:00",chart_energy_kwh:21,full_time:"2021-08-12 19:30",id_device:96,time_day:"19:30",id:13,timekey:1809774,id_time_zone:129},{download_time:"2021-08-12 19:45",utc_time:"2021-08-13 02:45:00",chart_energy_kwh:7,full_time:"2021-08-12 19:45",id_device:96,time_day:"19:45",id:13,timekey:1809775,id_time_zone:129},{download_time:"2021-08-12 20:00",utc_time:"2021-08-13 03:00:00",chart_energy_kwh:1,full_time:"2021-08-12 20:00",id_device:96,time_day:"20:00",id:13,timekey:1809776,id_time_zone:129},{download_time:"2021-08-12 20:15",utc_time:"2021-08-13 03:15:00",chart_energy_kwh:0,full_time:"2021-08-12 20:15",id_device:96,time_day:"20:15",id:13,timekey:1809777,id_time_zone:129},{download_time:"2021-08-12 20:30",utc_time:"2021-08-13 03:30:00",chart_energy_kwh:0,full_time:"2021-08-12 20:30",id_device:96,time_day:"20:30",id:13,timekey:1809778,id_time_zone:129},{download_time:"2021-08-12 20:45",utc_time:"2021-08-13 03:45:00",chart_energy_kwh:0,full_time:"2021-08-12 20:45",id_device:96,time_day:"20:45",id:13,timekey:1809779,id_time_zone:129},{download_time:"2021-08-12 21:00",utc_time:"2021-08-13 04:00:00",chart_energy_kwh:0,full_time:"2021-08-12 21:00",id_device:96,time_day:"21:00",id:13,timekey:1809780,id_time_zone:129},{download_time:"2021-08-12 21:15",utc_time:"2021-08-13 04:15:00",chart_energy_kwh:0,full_time:"2021-08-12 21:15",id_device:96,time_day:"21:15",id:13,timekey:1809781,id_time_zone:129},{download_time:"2021-08-12 21:30",utc_time:"2021-08-13 04:30:00",chart_energy_kwh:0,full_time:"2021-08-12 21:30",id_device:96,time_day:"21:30",id:13,timekey:1809782,id_time_zone:129},{download_time:"2021-08-12 21:45",utc_time:"2021-08-13 04:45:00",chart_energy_kwh:0,full_time:"2021-08-12 21:45",id_device:96,time_day:"21:45",id:13,timekey:1809783,id_time_zone:129},{download_time:"2021-08-12 22:00",utc_time:"2021-08-13 05:00:00",chart_energy_kwh:0,full_time:"2021-08-12 22:00",id_device:96,time_day:"22:00",id:13,timekey:1809784,id_time_zone:129},{download_time:"2021-08-12 22:15",utc_time:"2021-08-13 05:15:00",chart_energy_kwh:0,full_time:"2021-08-12 22:15",id_device:96,time_day:"22:15",id:13,timekey:1809785,id_time_zone:129},{download_time:"2021-08-12 22:30",utc_time:"2021-08-13 05:30:00",chart_energy_kwh:0,full_time:"2021-08-12 22:30",id_device:96,time_day:"22:30",id:13,timekey:1809786,id_time_zone:129},{download_time:"2021-08-12 22:45",utc_time:"2021-08-13 05:45:00",chart_energy_kwh:0,full_time:"2021-08-12 22:45",id_device:96,time_day:"22:45",id:13,timekey:1809787,id_time_zone:129},{download_time:"2021-08-12 23:00",utc_time:"2021-08-13 06:00:00",chart_energy_kwh:0,full_time:"2021-08-12 23:00",id_device:96,time_day:"23:00",id:13,timekey:1809788,id_time_zone:129},{download_time:"2021-08-12 23:15",utc_time:"2021-08-13 06:15:00",chart_energy_kwh:0,full_time:"2021-08-12 23:15",id_device:96,time_day:"23:15",id:13,timekey:1809789,id_time_zone:129},{download_time:"2021-08-12 23:30",utc_time:"2021-08-13 06:30:00",chart_energy_kwh:0,full_time:"2021-08-12 23:30",id_device:96,time_day:"23:30",id:13,timekey:1809790,id_time_zone:129},{download_time:"2021-08-12 23:45",utc_time:"2021-08-13 06:45:00",chart_energy_kwh:0,full_time:"2021-08-12 23:45",id_device:96,time_day:"23:45",id:13,timekey:1809791,id_time_zone:129}],devicename:"PVS - 200",id:96,type:"irradiance"}],kpi_filter:null,offset_timezone:"+07:00",activeAlarm:null,total_site:0,installed_capacity:0,expected_last_month:0,expected_this_month:0,measured_today:0,measured_this_month:0,measured_last_month:0,err_this_month:null,err_last_month:null,err_today:0,expected_today:0,today:null,this_month:null,last_month:null,gallery:null,id_site_type:1,street_ws:null,file_upload:null,current_time:null,energy_this_year:0,energy_this_month:0,energy_today:0,ac_power:0,energy_lifetime:0,filterBy:"today",start_date:"2021-08-12 00:00:00",end_date:"2021-08-12 23:59:59",device_type:0,id_site:13,id_device:96,localization_format:null,format_sql_short:null,format_sql_long:"%Y-%m-%d %H:%i:%s %p",format_sql_string_short:null,format_sql_string_long:null,format_sql_string_mdy:null,offset_from:null,typeView:"month",keyword:null,sort_column:null,screen_mode:0,is_manage:0,id_employee:0,id_sites:null,hash_id:null,view_minute:null,data_send_time:2,setup_send_time:1,start_date_time:0,end_date_time:0,customer_type:"4ed69755138c0dde957520f6b995a98b",dataCustomer:null,label:null,value:0})}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),wi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e)&&"statype_diagnosticsus"==t)i.statype_diagnosticsus="";else if(b.a.isObjectEmpty(e)&&"type_string_index"==t)i.type_string_index="";else{var s=e.value;i[t]=s}a.setState({curItem:i})},n.handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);b.a.isBlank(n.wrapperRef.current)||n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=t.curItem;Object(p.a)(n);if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.start_date=b.a.getCurrentMMDDYYYYHI(),a.end_date=b.a.getCurrentMMDDYYYYHI();break;case"lifetime":a.start_date=Ye()(s.commissioning).format("MM/DD/YYYY HH:mm:ss"),a.end_date=b.a.getCurrentMMDDYYYYHI();break;case"this_month":a.end_date=b.a.getCurrentMMDDYYYYHI();var r=new Date(a.end_date),l=r.getFullYear(),o=r.getMonth();a.start_date=Ye()(new Date(l,o,1)).format("MM/DD/YYYY HH:mm");break;case"last_month":var d=new Date(b.a.getCurrentMMDDYYYYHI()),h=d.getFullYear(),m=d.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(h,m,1),-1)).endOf("month").format("MM/DD/YYYY HH:mm"),a.start_date=Ye()(b.a.addMonths(new Date(h,m,1),-1)).format("MM/DD/YYYY HH:mm");break;case"12_month":a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/DD/YYYY HH:mm:ss"),a.end_date=b.a.getCurrentMMDDYYYYHI()}n.setState({chartParams:a},(function(){}))}}},n.changeViewMinute=function(e){var t=n.state.chartParams;Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){})))},n.onClickAdd=function(){var e=n.state.curItem,t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=(Object(p.a)(n),n.state.curItem);a.id_company=t.id_company,a.id=t.id}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_company=n.employee.id_company,t.id_language=n.employee.id_language;var a=t.status;a=1*a===1?0:1,t.status=a,t.updated_by=n.employee.first_name+" "+n.employee.last_name}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.state={curItem:{data_send_time:1,type:2,type_diagnostics:2,type_string_index:1},dataDevice:[{id:1,name:"Satcon PVS-375 Inverter",is_active:0},{id:2,name:"Shark 100",is_active:0},{id:3,name:"Inverter 1",is_active:0}],dataDiagnostics:[{id:1,value:1,label:"AC Output"},{id:2,value:2,label:"DC Input"},{id:3,value:3,label:"DC Input Channel"}],dataStringIndex:[{id:1,value:1,label:"Power"},{id:2,value:2,label:"Voltage"},{id:3,value:3,label:"Current"}],dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages,dataFilter:[{id:"today",text:"Today"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}],chartParams:{id_site:null,id_filter:"today",text_filter:"Today",show_filter:!1,showNextBtn:!1,current_time:b.a.getCurrentMMDDYYYYHI(),end_date:b.a.getCurrentMMDDYYYYHI(),start_date:b.a.getCurrentMMDDYYYYHI(),data_send_time:2}},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=ki,n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n.wrapperRef=l.a.createRef(),n.myRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside),this.getDataChart()}},{key:"componentWillUnmount",value:function(){}},{key:"getDataChart",value:function(){var e=this.state,t=e.chartParams,a=e.curItem,i=this;if(!b.a.isObjectEmpty(t)){var s={};s.start_date=b.a.convertAllFormatDate(b.a.dateFormat(t.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),b.a.dateFormat(t.current_time,"MM/DD/YYYY","MM/DD/YYYY")==b.a.dateFormat(t.end_date,"MM/DD/YYYY","MM/DD/YYYY")?s.end_date=b.a.convertAllFormatDate(t.end_date):s.end_date=b.a.convertAllFormatDate(b.a.dateFormat(t.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 23:59:59"),s.id_site=a.id,s.id_customer=a.id_customer,s.customer_type=b.a.isBlank(this.user)?null:this.user.customer_type,s.filterBy=t.id_filter,s.id_site_type=a.id_site_type,s.setup_send_time=a.data_send_time,s.typeView=Ye()(a.commissioning).format("YYYY")-Ye()(t.end_date).format("YYYY")>3?null:"month",s.data_send_time=t.data_send_time,Di.instance.getDataChart(s,(function(e){if(!b.a.isObjectEmpty(e)){var n=e.energy,c=[],r=[],l=[],o=0,d=[],h=Ye()().format("LLL");if("today"==s.filterBy)switch(t.data_send_time){case 1:a.tickInterval=24,c=["0AM","0:05 AM","0:10 AM","0:15 AM","0:20 AM","0:25 AM","0:30 AM","0:35 AM","0:40 AM","0:45 AM","0:50 AM","0:55 AM","1AM","1:05 AM","1:10 AM","1:15 AM","1:20 AM","1:25 AM","1:30 AM","1:35 AM","1:40 AM","1:45 AM","1:50 AM","1:55 AM","2AM","2:05 AM","2:10 AM","2:15 AM","2:20 AM","2:25 AM","2:30 AM","2:35 AM","2:40 AM","2:45 AM","2:50 AM","2:55 AM","3AM","3:05 AM","3:10 AM","3:15 AM","3:20 AM","3:25 AM","3:30 AM","3:35 AM","3:40 AM","3:45 AM","3:50 AM","3:55 AM","4AM","4:05 AM","4:10 AM","4:15 AM","4:20 AM","4:25 AM","4:30 AM","4:35 AM","4:40 AM","4:45 AM","4:50 AM","4:55 AM","5AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","1PM","1:05 PM","1:10 PM","1:15 PM","1:20 PM","1:25 PM","1:30 PM","1:35 PM","1:40 PM","1:45 PM","1:50 PM","1:55 PM","2PM","2:05 PM","2:10 PM","2:15 PM","2:20 PM","2:25 PM","2:30 PM","2:35 PM","2:40 PM","2:45 PM","2:50 PM","2:55 PM","3PM","3:05 PM","3:10 PM","3:15 PM","3:20 PM","3:25 PM","3:30 PM","3:35 PM","3:40 PM","3:45 PM","3:50 PM","3:55 PM","4PM","4:05 PM","4:10 PM","4:15 PM","4:20 PM","4:25 PM","4:30 PM","4:35 PM","4:40 PM","4:45 PM","4:50 PM","4:55 PM","5PM","5:05 PM","5:10 PM","5:15 PM","5:20 PM","5:25 PM","5:30 PM","5:35 PM","5:40 PM","5:45 PM","5:50 PM","5:55 PM","6PM","6:05 PM","6:10 PM","6:15 PM","6:20 PM","6:25 PM","6:30 PM","6:35 PM","6:40 PM","6:45 PM","6:50 PM","6:55 PM","7PM","7:05 PM","7:10 PM","7:15 PM","7:20 PM","7:25 PM","7:30 PM","7:35 PM","7:40 PM","7:45 PM","7:50 PM","7:55 PM","8PM","8:05 PM","8:10 PM","8:15 PM","8:20 PM","8:25 PM","8:30 PM","8:35 PM","8:40 PM","8:45 PM","8:50 PM","8:55 PM","9PM","9:05 PM","9:10 PM","9:15 PM","9:20 PM","9:25 PM","9:30 PM","9:35 PM","9:40 PM","9:45 PM","9:50 PM","9:55 PM","10PM","10:05 PM","10:10 PM","10:15 PM","10:20 PM","10:25 PM","10:30 PM","10:35 PM","10:40 PM","10:45 PM","10:50 PM","10:55 PM","11PM","11:05 PM","11:10 PM","11:15 PM","11:20 PM","11:25 PM","11:30 PM","11:35 PM","11:40 PM","11:45 PM","11:50 PM","11:55 PM"];for(var m=0;m<n.length;m++){var u={};u.name=n[m].devicename,u.data=[],u.zIndex=m,"energy"==n[m].type?(u.type="spline",u.tooltip={valueSuffix:" kW"},u.lineWidth=3,u.marker={radius:1.5}):"irradiance"==n[m].type&&(u.type="spline",u.xAxis=1,u.yAxis=1,u.lineWidth=3,u.tooltip={valueSuffix:" kW"},u.id="s1",u.marker={radius:1.5});var p=n[m].data_energy,j=[];if(b.a.isArrayData(p)){for(var v=0;v<p.length;v++)"energy"==n[m].type?(r.push({ID:m+1+"_"+v+1,DateTime:p[v].download_time,"Device Name":n[m].export_devicename,"Power (kW)":p[v].chart_energy_kwh}),o+=p[v].chart_energy_kwh):l.push({ID:m+1+"_"+v+1,DateTime:p[v].download_time,"Device Name":n[m].export_devicename,"Measured Irradiance (w/m2)":p[v].chart_energy_kwh}),j.push([p[v].full_time,p[v].chart_energy_kwh]);if(p.length<288&&p.length>0)for(var _="",g=p.length;g<288;g++)g==p.length&&(_=p[p.length-1].full_time),null!=_&&(_=b.a.addMinutes(_,5),j.push([b.a.dateFormat(_,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),0]))}u.data=j,d.push(u)}break;case 2:a.tickInterval=8,c=["0AM","0:15AM","0:30AM","0:45AM","1AM","1:15AM","1:30AM","1:45AM","2AM","2:15AM","2:30AM","2:45AM","3AM","3:15AM","3:30AM","3:45AM","4AM","4:15AM","4:30AM","4:45AM","5AM","5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","1PM","1:15PM","1:30PM","1:45PM","2PM","2:15PM","2:30PM","2:45PM","3PM","3:15PM","3:30PM","3:45PM","4PM","4:15PM","4:30PM","4:45PM","5PM","5:15PM","5:30PM","5:45PM","6PM","6:15PM","6:30PM","6:45PM","7PM","7:15PM","7:30PM","7:45PM","8PM","8:15PM","8:30PM","8:45PM","9PM","9:15PM","9:30PM","9:45PM","10PM","10:15PM","10:30PM","10:45PM","11PM","11:15PM","11:30PM","11:45PM"];for(var f=0;f<n.length;f++){var x={};x.name=n[f].devicename,x.data=[],x.zIndex=f,"energy"==n[f].type?(x.type="spline",x.tooltip={valueSuffix:" kW"},x.yAxis=1,x.lineWidth=3):"irradiance"==n[f].type&&(x.type="spline",x.lineWidth=3,x.tooltip={valueSuffix:" kW"},x.id="s1",x.marker={radius:1.5});var O=n[f].data_energy,y=[];if(b.a.isArrayData(O)){for(var M=0;M<O.length;M++)"energy"==n[f].type?(r.push({ID:f+1+"_"+M+1,DateTime:O[M].download_time,"Device Name":n[f].export_devicename,"Power (kW)":O[M].chart_energy_kwh}),o+=O[M].chart_energy_kwh):l.push({ID:f+1+"_"+M+1,DateTime:O[M].download_time,"Device Name":n[f].export_devicename,"Measured Irradiance (w/m2)":O[M].chart_energy_kwh}),y.push([O[M].full_time,O[M].chart_energy_kwh]);if(O.length<96&&O.length>0)for(var N="",C=O.length;C<96;C++)C==O.length&&(N=O[O.length-1].full_time),null!=N&&(N=b.a.addMinutes(N,5),y.push([b.a.dateFormat(N,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),0]))}x.data=y,d.push(x)}break;default:a.tickInterval=2,c=[];for(var k=0;k<n.length;k++){var D={};D.name=n[k].devicename,D.data=[],D.zIndex=k,"energy"==n[k].type?(D.type="spline",D.tooltip={valueSuffix:" kW"}):"irradiance"==n[k].type&&(D.type="spline",D.xAxis=1,D.yAxis=1,D.lineWidth=3,D.tooltip={valueSuffix:" kW"},D.id="s1",D.marker={radius:1.5});var w=n[k].data_energy,A=[];if(b.a.isArrayData(w)){for(var I=0;I<w.length;I++)c.push([w[I].categories_time]),"energy"==n[k].type?(r.push({ID:k+1+"_"+I+1,DateTime:w[I].download_time,"Device Name":n[k].export_devicename,"Power (kW)":w[I].chart_energy_kwh}),o+=w[I].chart_energy_kwh):l.push({ID:k+1+"_"+I+1,DateTime:w[I].download_time,"Device Name":n[k].export_devicename,"Measured Irradiance (w/m2)":w[I].chart_energy_kwh}),A.push([w[I].full_time,w[I].chart_energy_kwh]);if("today"==t.id_filter&&w.length<24)for(var P=w.length;P<24;P++)if(P<=11)c.push([P+"AM"]),A.push([P+"AM",0]);else{var Y=null;Y=P<12||12==P?P:P-12,A.push([Y+"PM",0]),c.push([Y+"PM"])}}D.data=A,d.push(D)}}else{a.tickInterval=1,c=[];for(var E=0;E<n.length;E++){var L={};L.name=n[E].devicename,L.data=[],L.zIndex=E,"energy"==n[E].type?(L.type="spline",L.tooltip={valueSuffix:" kW"}):"irradiance"==n[E].type&&(L.type="spline",L.xAxis=1,L.yAxis=1,L.lineWidth=3,L.tooltip={valueSuffix:" kW"},L.id="s1",L.marker={radius:1.5});var S=n[E].data_energy,T=[];if(b.a.isArrayData(S)){for(var R=0;R<S.length;R++)c.push([S[R].categories_time]),"energy"==n[E].type?(r.push({ID:E+1+"_"+R+1,DateTime:S[R].download_time,"Device Name":n[E].export_devicename,"Power (kW)":S[R].chart_energy_kwh}),o+=S[R].chart_energy_kwh):l.push({ID:E+1+"_"+R+1,DateTime:S[R].download_time,"Device Name":n[E].export_devicename,"Measured Irradiance (w/m2)":S[R].chart_energy_kwh}),T.push([S[R].full_time,S[R].chart_energy_kwh]);if("today"==t.id_filter&&S.length<24)for(var F=S.length;F<24;F++)if(F<=11)c.push([F+"AM"]),T.push([F+"AM",0]);else{var H=null;H=P<12||12==F?F:F-12,T.push([H+"PM",0]),c.push([H+"PM"])}}L.data=T,d.push(L)}}a.generation_total=o,a.lastUpdated=h,i.setState({dataCategories:c,dataEnergy:[],dataIrradiance:[],curItem:a,dataEnergyExport:r,dataMeasureExport:l,series:d},(function(){i.loadChartOption()}))}}))}}},{key:"loadChartOption",value:function(){var e=this.myRef.current.clientHeight,t={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column",height:e?e-15:null},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:this.state.curItem.tickInterval,visible:!0,categories:this.state.dataCategories},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kW",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"Watts/meter\xb2",enabled:!1},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!1}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.series};this.setState({chartOption:t})}},{key:"onClickNext",value:function(){var e=this.state.chartParams,t=e.showNextBtn,a=b.a.compareDate(b.a.addDays(e.end_date,1),"MM/DD/YYYY",e.current_time);switch(e.id_filter){case"today":a>=0?(t=!1,e.end_date=b.a.addDays(e.end_date,1),e.start_date=e.end_date):(e.end_date=b.a.addDays(e.end_date,1),e.start_date=e.end_date,t=!0);break;case"this_month":var i=new Date(e.end_date),s=i.getFullYear(),n=i.getMonth();a>0?(t=!1,e.end_date=b.a.getCurrentMMDDYYYYHI(),e.start_date=Ye()(new Date(s,n,1)).format("MM/DD/YYYY HH:mm")):(e.end_date=Ye()(b.a.addMonths(new Date(s,n,1),1)).endOf("month").format("MM/DD/YYYY HH:mm"),e.start_date=Ye()(b.a.addMonths(new Date(s,n,1),1)).format("MM/DD/YYYY HH:mm"),t=!0);break;case"last_month":var c=new Date(b.a.getCurrentMMDDYYYYHI()),r=c.getFullYear(),l=c.getMonth();if(Ye()(e.current_time).format("MM/YYYY")==Ye()(e.end_date).format("MM/YYYY"))t=!1,e.end_date=Ye()(b.a.addMonths(new Date(r,l,1),-1)).endOf("month").format("MM/DD/YYYY HH:mm"),e.start_date=Ye()(b.a.addMonths(new Date(r,l,1),-1)).format("MM/DD/YYYY HH:mm");else{var o=new Date(e.end_date),d=o.getFullYear(),h=o.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(d,h,1),1)).endOf("month").format("MM/DD/YYYY HH:mm"),e.start_date=Ye()(b.a.addMonths(new Date(d,h,1),1)).format("MM/DD/YYYY HH:mm"),t=!0}break;case"12_month":var m=new Date(e.end_date),u=m.getFullYear(),p=m.getMonth(),j=Ye()(b.a.addMonths(new Date(u,p,1),12)).format("YYYY");if(Ye()(e.current_time).format("YYYY")<=j){e.end_date=b.a.getCurrentMMDDYYYYHI();var v=new Date(e.end_date),_=v.getFullYear(),g=v.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(_,g,1),-12)).format("MM/DD/YYYY HH:mm"),t=!1}else{var f=new Date(e.end_date),x=f.getFullYear(),O=f.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(x,O,1),12)).endOf("month").format("MM/DD/YYYY HH:mm");var y=new Date(e.start_date),M=y.getFullYear(),N=y.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(M,N,1),12)).format("MM/DD/YYYY HH:mm"),t=!0}}e.showNextBtn=t,this.setState({chartParams:e},(function(){}))}},{key:"onClickPrev",value:function(){var e=this.state.chartParams;e.showNextBtn=!0;var t=new Date(e.end_date),a=t.getFullYear(),i=t.getMonth();switch(e.id_filter){case"today":e.end_date=Ye()(b.a.addDays(e.end_date,-1)).format("MM/DD/YYYY HH:mm:ss"),e.start_date=e.end_date;break;case"last_month":case"this_month":e.end_date=Ye()(b.a.addMonths(new Date(a,i,1),-1)).endOf("month").format("MM/DD/YYYY HH:mm"),e.start_date=Ye()(b.a.addMonths(new Date(a,i,1),-1)).format("MM/DD/YYYY HH:mm");break;case"12_month":e.end_date=Ye()(b.a.addMonths(new Date(a,i,1),-12)).endOf("month").format("MM/DD/YYYY HH:mm");var s=new Date(e.start_date),n=s.getFullYear(),c=s.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(n,c,1),-12)).format("MM/DD/YYYY HH:mm")}this.setState({chartParams:e},(function(){}))}},{key:"getList",value:function(){var e=this.state.searchParam;e.id_language=this.employee.id_language,e.id_company=this.employee.id_company}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ai=Object(f.a)("common")(wi);function Ii(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.dataStatus,n=null;switch(i.type){case 1:n=Object(m.jsx)(yi,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random());break;case 2:n=Object(m.jsx)(fi,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random());break;case 3:n=Object(m.jsx)(Ci,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random());break;case 4:n=Object(m.jsx)(Ai,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random())}return Object(m.jsxs)("div",{className:"analytics",children:[Object(m.jsx)(xa,{hash_id:this.state.hash_id},Math.random()),Object(m.jsx)("div",{className:"header-title",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"group-header",children:[Object(m.jsx)(mt,{instanceId:"status",className:"status",name:"status",required:"required",value:s.filter((function(e){return e.id===i.type})),onChange:function(t){e.handleDropdownChange(t,"type")},optionList:s,placeHolder:t("common.choose")}),Object(m.jsx)("div",{className:"reload-chart",onClick:this.reloadData.bind(this),children:Object(m.jsx)("span",{className:"icon-arrows-ccw"})})]})})})}),n]})}var Pi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).reloadData=function(){n.forceUpdate()},n.handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.type=2;else{var s=e.value;i[t]=s}a.setState({curItem:i})},n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{data_send_time:1,type:3},dataStatus:[{id:1,value:1,label:"Performance analytics"},{id:2,value:2,label:"Device analytics"}],dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1}},n.jsxTemplate=Ii,n}return Object(s.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Yi=Object(f.a)("common")(Pi),Ei=(a(842),a(152)),Li=a.n(Ei);function Si(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.searchParam,n=a.chartMonthOption,c=a.dataType,r=a.chartOptionAlarm,l=a.chartOption1,o=a.chartOption2,d=i.totalFeetAlarms,h=i.dataAlarms,u=null,p=0;b.a.isArrayData(d)&&(u=d.map((function(e,t){return p+=e.total_alarm,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{className:"text-center",children:Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+e.thumbnail,width:"20"})}),Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:e.name})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:e.total_alarm})})]},t)})));var j=null,_=null,g=i.dataEnergyMonth;b.a.isArrayData(g)&&(_=g.map((function(e,t){return Object(m.jsx)("th",{children:e.day},t)})),j=g.map((function(e,t){return Object(m.jsx)("td",{children:e.activeEnergy},t)})));var f=i.alarmOPened,x=null;b.a.isArrayData(f)&&(x=f.map((function(e,t){return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail,alt:e.name})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.error_level_name})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:e.name})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:b.a.isBlank(e.message)?e.description:e.message})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("p",{children:e.start_date_format})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.status_name})})]},t)})));g=i.dataEnergyMonth;var O=null,y=0,M=0,N=0,C=0;b.a.isArrayData(g)&&(O=g.map((function(e,t){var a=e.activeEnergy/e.estimate_energy;return y+=e.estimate_energy,M+=e.activeEnergy,N+=e.diff_energy,C+=a,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-start",children:e.time_full})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-first text-center",children:b.a.formatNum(e.estimate_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-two text-center",children:b.a.formatNum(e.activeEnergy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.diff_energy<0?"error text-center":"text-center",children:b.a.formatNum(e.diff_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.diff_percent<0?"error text-center":"text-center",children:b.a.formatNum(e.diff_percent,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:a<0?"error text-center":"text-center",children:b.a.formatNum(a,"#,###.##")})})]},t)})));var k=null,D=0,w=0,A=0;b.a.isArrayData(g)&&(k=g.map((function(e,t){return D=!b.a.isBlank(e.sum_estimate_energy)&&e.sum_estimate_energy>0?e.sum_estimate_energy:D,w=!b.a.isBlank(e.sum_activeEnergy)&&e.sum_activeEnergy>0?e.sum_activeEnergy:w,A=b.a.isBlank(e.sum_diff_energy)||0==e.sum_diff_energy?A:e.sum_diff_energy,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-start",children:e.time_full})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-first text-center",children:b.a.formatNum(e.sum_estimate_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-two text-center",children:b.a.formatNum(e.sum_activeEnergy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.sum_diff_energy<0?"error text-center":"text-center",children:b.a.formatNum(e.sum_diff_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.sum_diff_percent<0?"error text-center":"text-center",children:b.a.formatNum(e.sum_diff_percent,"#,###")})})]},t)})));return Object(m.jsxs)("div",{className:"reports",children:[2==s.type?Object(m.jsx)("style",{children:"@media print { @page { size: ".concat("landscape"," }}")}):"",Object(m.jsx)(xa,{hash_id:this.state.hash_id},Math.random()),Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("h2",{children:t("reports.title")})}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsx)("div",{className:"report-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3",children:1==s.type?Object(m.jsx)(Ee,{value:s.start_date,inputId:"start_date",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1},Math.random()):""}),Object(m.jsx)("div",{className:"col-md-1 text-center",children:1==s.type?Object(m.jsx)("p",{className:"to",children:"to"}):""}),Object(m.jsx)("div",{className:"col-md-3",children:(s.type,Object(m.jsx)(Ee,{value:s.end_date,inputId:"end_date",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1},Math.random()))}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)(mt,{instanceId:"type",className:"type",name:"type",value:c.filter((function(e){return e.id===s.type})),onChange:function(t){e.handleDropdownChange(t,"type")},optionList:c,placeHolder:t("common.choose")})}),Object(m.jsx)("div",{className:"col-md-3 text-end",children:Object(m.jsx)(Li.a,{trigger:function(){return Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"icon-print"})," Print"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"icon-file-text-o"})," Pdf"]})]})},content:function(){return e.componentRef}})})]})})})]})}),Object(m.jsxs)("div",{className:"main-export",ref:function(t){return e.componentRef=t},children:[Object(m.jsx)("div",{className:"report-header",children:Object(m.jsx)("table",{className:"table table-borderless",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{rowSpan:"3",children:Object(m.jsx)("img",{src:"/logo.png",style:{width:"200px"},alt:"Logo"})}),Object(m.jsx)("td",{children:Object(m.jsx)("h1",{children:i.site_name})})]}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsxs)("h2",{children:["Project: ",i.name]})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsxs)("p",{children:["Address: ",i.address]})})})]})})}),1==s.type?Object(m.jsxs)("div",{className:"export-year",children:[Object(m.jsx)("div",{className:"report-header-info",children:Object(m.jsx)("table",{className:"table",children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{style:{width:"60%"},children:[Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.estimation_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",children:"PVSYST"})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.report_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",style:{borderTop:"none"},children:"Solarmon"})})]})]})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.report_period")})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",children:[Object(m.jsx)("span",{style:{borderRight:"1px solid #DDD"},children:i.start_string}),Object(m.jsx)("span",{children:i.end_string})]})})]})})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.reporter")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:this.employee.full_name})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsxs)("p",{className:"text",children:[t("reports.report_time")," "]})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{borderTop:"none",textAlign:"left",paddingLeft:"5px"},children:[" ",i.current_day]})})]})]})})]}),Object(m.jsx)("td",{style:{width:"40%",paddingLeft:"30px"},children:Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Installed power:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:i.installed_power_client})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Commissioning date:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:i.commisioning_date})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy start of year:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.min_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy end of year:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.max_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy yield in year:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.energyMonth,"#,###")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Revenue:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[i.revenue," VN\u0110"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"PR:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:b.a.formatNum(C/12,"#,###.##")})})]})]})})})]})})})}),Object(m.jsxs)("div",{className:"report-year-content",children:[Object(m.jsx)("div",{className:"section-table",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsx)("div",{className:"title",children:t("reports.monthly_engery_yield")}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsx)("thead",{className:"table-light",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{}),Object(m.jsxs)("th",{children:[Object(m.jsxs)("p",{className:"text-center",children:[t("reports.PVSyst_energy_yield")," "]}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("reports.energy_yield")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsxs)("p",{className:"text-center",children:[t("reports.diff_Energy")," "]}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("reports.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(%)"})]}),Object(m.jsx)("th",{children:Object(m.jsx)("p",{className:"text-center",children:"PR"})})]})}),Object(m.jsx)("tbody",{children:O}),Object(m.jsx)("tfoot",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:t("reports.total")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(y,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(M,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(M-y,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(N/M*100,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(C/12,"#,###.##")})})})]})})]})})]}),Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsx)("div",{className:"page-break"}),Object(m.jsxs)("div",{className:"main-break-page",children:[Object(m.jsx)("div",{className:"title",children:t("reports.monthly_accumulated")}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsx)("thead",{className:"table-light",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{}),Object(m.jsxs)("th",{children:[Object(m.jsxs)("p",{className:"text-center",children:[t("reports.PVSyst_energy_yield")," "]}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("reports.energy_yield")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("reports.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("reports.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(%)"})]})]})}),Object(m.jsx)("tbody",{children:k}),Object(m.jsx)("tfoot",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:t("reports.total")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(D,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(w,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(w-D,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(A/w*100,"#,###")})})})]})})]})})]})]})]})}),Object(m.jsx)("div",{className:"section-chart",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:t("reports.measured_vs_calculated")}),Object(m.jsx)("div",{className:"content-chart",children:!b.a.isObjectEmpty(l)&&b.a.isArrayData(g)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:l}):""})]}),Object(m.jsx)("div",{className:"page-break"})]}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"main-break-page",children:Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:t("reports.monthly_accumulated_chart")}),Object(m.jsx)("div",{className:"content-chart",children:!b.a.isObjectEmpty(o)&&b.a.isArrayData(g)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:o}):""})]})})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"main-break-page",children:Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:t("reports.chart_error")}),Object(m.jsx)("div",{className:"content-chart",children:!b.a.isObjectEmpty(r)&&b.a.isArrayData(h)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:r}):""})]})})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:"Total Fleet Alerts"}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsx)("div",{className:"item-alarm-sum",children:Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[u,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{}),Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Total"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:p})})]})]})})})})]})})]})})]})]}):Object(m.jsxs)("div",{className:"export-month",children:[Object(m.jsx)("div",{className:"report-header-info",children:Object(m.jsx)("table",{className:"table",children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{style:{width:"50%"},children:[Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.estimation_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",children:"PVSYST"})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.report_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",style:{borderTop:"none"},children:"Solarmon"})})]})]})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.report_month")})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",children:[Object(m.jsx)("span",{style:{borderRight:"1px solid #DDD"},children:i.month_string}),Object(m.jsx)("span",{children:i.year})]})})]})})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("reports.reporter")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:this.employee.full_name})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsxs)("p",{className:"text",children:[t("reports.report_time")," "]})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{borderTop:"none",textAlign:"left",paddingLeft:"5px"},children:[" ",i.current_day]})})]})]})})]}),Object(m.jsx)("td",{style:{width:"50%"},children:Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Installed power:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:i.installed_power_client})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Commissioning date:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:i.commisioning_date})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy start of month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.min_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy end of month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.max_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy yield in month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.energyMonth,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Revenue in month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[i.revenue," VN\u0110"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"PR:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:b.a.formatNum(C/12,"#,###.##")})})]})]})})})]})})})}),Object(m.jsxs)("div",{className:"report-month-content",children:[Object(m.jsx)("div",{className:"title",children:t("reports.energy_yield_today")}),Object(m.jsx)("div",{className:"chart-month",children:!b.a.isObjectEmpty(n)&&b.a.isArrayData(i.dataEnergyMonth)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:n},Math.random()):""}),Object(m.jsx)("div",{className:"month-table",children:Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsxs)("thead",{className:"table-light",children:[Object(m.jsx)("tr",{children:Object(m.jsx)("th",{colSpan:"32",children:Object(m.jsx)("p",{className:"text-center",children:i.month_year})})}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Day"}),_]})]}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"kWh"}),j]})})]})})}),Object(m.jsxs)("div",{className:"report-alarm-open",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsx)("h2",{children:"Alarms"})}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsxs)("div",{className:"main-alarm",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5",children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"Type"})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"Level"})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:"Component"})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:"Issues"})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:"Opened"})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"Status"})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(x)?Object(m.jsx)("div",{className:"data-empty",children:t("common.data_empty")}):x})})]})})]})]})]})]})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Ti=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDataReportMonth",value:function(e,t){try{new x.a(!0).post(v.a.URL.REPORT.MOTNH,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDataReportYear",value:function(e,t){try{new x.a(!0).post(v.a.URL.REPORT.YEAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Ri=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.searchParam;if(b.a.isObjectEmpty(e))i.type="";else{var s=e.value;i[t]=s}a.setState({searchParam:i},(function(){1==i.type?a.getDataReportYear():a.getDataReportMonth()}))},n.jsxTemplate=Si,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},dataList:[],dataType:[{id:1,value:1,label:"Year"},{id:2,value:2,label:"Month"}],searchParam:{type:2,max_date:Ye()().format("MM/YYYY"),start_date:Ye()().add(-11,"M").format("MM/YYYY"),end_date:Ye()().format("MM/YYYY")},chartMonthOption:{},chartOptionAlarm:{},chartOption1:{},chartOption2:{}},n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){2==this.state.searchParam.type?this.getDataReportMonth():this.getDataReportYear()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.searchParam;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){2==a.type?t.getDataReportMonth():t.getDataReportYear()}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=this,i=t.name,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),i){var n=this.state.searchParam;if(1===n.type&&"start_date"===i){var c=s.split("/"),r=null;if(c.length>0&&(r=c[0]+"/01/"+c[1]),b.a.isBlank(r))return;var l=Ye()(b.a.addMonths(r,11)).isAfter(Ye()());n.end_date=l?Ye()().format("MM/YYYY"):Ye()(b.a.addMonths(r,11)).format("MM/YYYY")}n[i]=s,this.setState({searchParam:n},(function(){1===n.type?a.getDataReportYear():a.getDataReportMonth()}))}}},{key:"getDataReportMonth",value:function(){var e=this,t=this.state,a=t.hash_id,i=t.searchParam,s=this;if(!b.a.isBlank(a)){var n=Object.assign({},i);n.start_date="01/"+i.start_date,n.end_date="01/"+i.end_date,n.hash_id=a,n.id_employee=this.employee.id_employee,n.id_language=this.employee.id_language,n.type="customer",Ti.instance.getDataReportMonth(n,(function(t){if(t){var a={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy"},title:{text:null},colors:["#78c1f5","#e2a76c"],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:"kWh",enabled:!0}}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1,enabled:!1},plotOptions:{column:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[]},i=t.dataEnergyMonth;if(b.a.isArrayData(i)){var n=[],c=[],r=[],l=[];i.map((function(e,t){n.push(parseInt(e.day)),c.push(e.activeEnergy)})),l.push({categories:n,crosshair:!0}),r.push({name:"",type:"column",data:c,tooltip:{valueSuffix:" kWh"}}),a.xAxis=l,a.series=r}e.setState({curItem:t,chartMonthOption:a},(function(){s.forceUpdate()}))}}),!1)}}},{key:"getDataReportYear",value:function(){var e=this,t=this.state,a=t.hash_id,i=t.searchParam,s=(t.chartOptionAlarm,this.props.t);if(!b.a.isBlank(a)){var n=Object.assign({},i);n.start_date="01/"+i.start_date,n.end_date="01/"+i.end_date,n.hash_id=a,n.id_employee=this.employee.id_employee,n.id_language=this.employee.id_language,n.type="customer",Ti.instance.getDataReportYear(n,(function(t){if(t){var a=t.dataAlarms,i={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:340},title:{text:null},colors:["#f5893b","#66bc51","#004ec3"],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:"kWh",enabled:!1}}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},plotOptions:{stacking:"normal",spline:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[]},n={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:340},title:{text:null},colors:["#78c1f5","#f58634"],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:s("report.energy_yield"),enabled:!1}},{title:{text:s("report.PVSyst_energy_yield"),enabled:!1},labels:{format:"{value}"},opposite:!0}],tooltip:{},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},plotOptions:{stacking:"normal",line:{dataLabels:{enabled:!0},enableMouseTracking:!1},column:{dataLabels:{enabled:!0,rotation:270,x:0,y:100,style:{fontSize:"8px"}},enableMouseTracking:!1}},series:[]},c={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:340},title:{text:null},colors:["#78c1f5","#f58634"],xAxis:[{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],crosshair:!0}],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:s("report.energy_yield"),enabled:!1}},{title:{text:s("report.PVSyst_energy_yield"),enabled:!1},labels:{format:"{value}"},opposite:!0}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},series:[]};if(b.a.isArrayData(a)){for(var r=[],l=[],o=[],d=[],h=0,m=a.length;h<m;h++)l.push(a[h].time_full),r.push([a[h].time_full,a[h].total_alarm]);d.push({categories:l,crosshair:!0}),o.push({name:"Alarms",type:"spline",data:r,tooltip:{valueSuffix:""}}),i.xAxis=d,i.series=o}else i.xAxis=[],i.series=[],t.dataAlarms=[];var u=t.dataEnergyMonth,p=[],j=[],v=[],_=[],g=[],f=[],x=[],O=[],y=[],M=[];if(b.a.isArrayData(u)){for(h=0,m=u.length;h<m;h++)_.push(u[h].time_full),p.push([u[h].time_full,u[h].estimate_energy]),j.push([u[h].time_full,u[h].activeEnergy]),y.push(u[h].time_full),f.push([u[h].time_full,0==u[h].sum_estimate_energy?null:u[h].sum_estimate_energy]),x.push([u[h].time_full,0==u[h].sum_activeEnergy?null:u[h].sum_activeEnergy]);g.push({categories:_,crosshair:!0}),v.push({name:s("report.PVSyst_energy_yield")+" (kWh)",type:"column",zIndex:1,data:p,tooltip:{valueSuffix:"kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),v.push({name:s("report.energy_yield")+" (kWh)",type:"column",yAxis:0,zIndex:2,data:j,tooltip:{valueSuffix:" kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),n.series=v,n.xAxis=g,M.push({categories:y,crosshair:!0}),O.push({name:s("report.PVSyst_energy_yield")+" (kWh)",type:"column",zIndex:2,data:f,tooltip:{valueSuffix:"kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),O.push({name:s("report.energy_yield")+" (kWh)",type:"column",yAxis:0,zIndex:1,data:x,tooltip:{valueSuffix:" kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),c.series=O,c.xAxis=M}else t.dataEnergyMonth=[];e.setState({curItem:t,chartOptionAlarm:i,chartOption1:n,chartOption2:c},(function(){}))}}),!1)}}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Fi=Object(f.a)("common")(Ri),Hi=(a(843),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleDeviceInputChange=function(){e.props.handleDeviceInputChange&&"function"===typeof e.props.handleDeviceInputChange&&e.props.handleDeviceInputChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem;return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_device_"+this.props.index+"_"+t.id,inputName:"id_device_"+this.props.index+"_"+t.id,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleDeviceInputChange(t,e.props.index)},label:t.name})},t.id)}}]),a}(r.Component));function Bi(){var e=this,t=this.props.t,a=this.state,i=a.itemDevice,s=a.curItem,n=!1;switch(parseInt(i.id_device_type)){case 1:case 4:n=!0;break;default:n=!1}return Object(m.jsxs)("div",{className:"setting",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("h2",{children:["Component: ",i.name]})}),Object(m.jsx)("div",{className:"main-setting",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/system-disconnect.png"})," System Disconnect"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable System Disconnect Alerts",inputId:"enable_system_disconnect",inputName:"enable_system_disconnect",labelClass:"no-label",disabled:!0,checked:s.enable_system_disconnect,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sd_time_threshold",inputName:"sd_time_threshold",value:s.sd_time_threshold,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sd_sunrise_sunset",inputName:"sd_sunrise_sunset",pattern:"^[0-9-.]*$",value:s.sd_sunrise_sunset,disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/device-faults.png"})," Device Faults"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable Device Faults",inputId:"enable_device_faults",inputName:"enable_device_faults",labelClass:"no-label",disabled:!0,checked:s.enable_device_faults,onChange:function(t){e.handleInputChange(t)}})})})})]})}),n?Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/zero-generation.png"})," Zero Generation"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable Zero Generation Alerts",inputId:"enable_zeo_generation",inputName:"enable_zeo_generation",labelClass:"no-label",disabled:!0,checked:s.enable_zeo_generation,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"zg_time_threshold",inputName:"zg_time_threshold",value:s.zg_time_threshold,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"daylight hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"emazg_sunrise_sunsetil",inputName:"zg_sunrise_sunset",value:s.zg_sunrise_sunset,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/string-performance.png"})," String Performance"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable String Performance Alerts",inputId:"enable_string_performance",inputName:"enable_string_performance",labelClass:"no-label",disabled:!0,checked:s.enable_string_performance,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"String Performance Ratio"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_ratio",inputName:"sp_ratio",value:s.sp_ratio,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_time_threshold",inputName:"sp_time_threshold",value:s.sp_time_threshold,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"daylight hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"DC Current Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_dc_current_threshold",inputName:"sp_dc_current_threshold",value:s.sp_dc_current_threshold,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"amps"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_sunrise_sunset",inputName:"sp_sunrise_sunset",value:s.sp_sunrise_sunset,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/performance-index.png"})," Performance Index"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable Performance Index Alerts",inputId:"enable_performance_index",inputName:"enable_performance_index",labelClass:"no-label",disabled:!0,checked:s.enable_performance_index,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Performance Index Value"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"pi_index_value",inputName:"pi_index_value",value:s.pi_index_value,pattern:"^[0-9-.]*$",disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"pi_time_threshold",inputName:"pi_time_threshold",pattern:"^[0-9-.]*$",disabled:!0,value:s.pi_time_threshold,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"daylight hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",pattern:"^[0-9-.]*$",inputId:"pi_sunrise_sunset",inputName:"pi_sunrise_sunset",value:s.pi_sunrise_sunset,disabled:!0,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})})]})}):"",Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("button",{type:"button",disabled:!0,className:"btn btn-save",onClick:this.onSave.bind(this),children:t("common.save")})})})]})})]})}var Ui=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getListAllDeviceByProject",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_CONFIG.LIST_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDeviceDetail",value:function(e,t){try{new x.a(!1).post(v.a.URL.CLIENT_CONFIG.DEVICE_DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"updateDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.CLIENT_CONFIG.UPDATE_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Vi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},itemDevice:n.props.itemDevice},n.jsxTemplate=Bi,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeviceDetail()}},{key:"getDeviceDetail",value:function(){var e=this,t={id:this.props.itemDevice.id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Ui.instance.getDeviceDetail(t,(function(t){t&&e.setState({curItem:t})}),!1)}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,(a=Object.assign({},this.state.curItem)).screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=this.employee.id_language,Ui.instance.updateDevice(a,(function(e,a,i){e?t.toast(i,"info"):a?t.setValidateMessage(a):b.a.isBlank(i)||t.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.itemDevice;return b.a.isObjectEmpty(e)?Object(m.jsx)("div",{className:"data-empty",children:"Device is not selected "}):this.jsxTemplate.call(this)}}]),a}(ee),Wi=Object(f.a)("common")(Vi);function qi(){var e=this,t=this.props.t,a=this.state,i=a.itemDevice,s=a.curItem;return Object(m.jsxs)("div",{className:"setting",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("h2",{children:["Component: ",i.name]})}),Object(m.jsx)("div",{className:"main-setting",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-7",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"item",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"DC Size"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"dc_size",inputName:"dc_size",value:s.dc_size,disabled:!0,onChange:function(t){e.handleInputChange(t)},pattern:"^[0-9-.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"kW"})})]})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("h3",{children:"PV Model"})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Data Input for POA Irradiance"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"poa_irradiance",inputName:"poa_irradiance",disabled:!0,value:s.poa_irradiance,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Data Input for Panel Temperature"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"panel_temperature",inputName:"panel_temperature",disabled:!0,value:s.panel_temperature,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Temperature Coefficient"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"temperature_coefficient",inputName:"temperature_coefficient",disabled:!0,value:s.temperature_coefficient,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:" % / \xb0C"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"System Losses"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"system_losses",inputName:"system_losses",disabled:!0,value:s.system_losses,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5"})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Inverter Efficiency"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"inverter_efficiency",inputName:"inverter_efficiency",disabled:!0,value:s.inverter_efficiency,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5"})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Max AC Output"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"max_ac_output",inputName:"max_ac_output",disabled:!0,value:s.max_ac_output,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"kW AC"})})]}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("button",{type:"button",disabled:!0,className:"btn btn-save",onClick:this.onSave.bind(this),children:t("common.save")})})})})]})})]})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("img",{src:"/pv-model-setting.png"})})]})})]})}var zi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},itemDevice:n.props.itemDevice},n.jsxTemplate=qi,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeviceDetail()}},{key:"getDeviceDetail",value:function(){var e=this,t={id:this.props.itemDevice.id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Ui.instance.getDeviceDetail(t,(function(t){t&&e.setState({curItem:t})}),!1)}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,(a=Object.assign({},this.state.curItem)).screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=this.employee.id_language,Ui.instance.updateDevice(a,(function(e,a,i){e?t.toast(i,"info"):a?t.setValidateMessage(a):b.a.isBlank(i)||t.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.itemDevice;switch(parseInt(e.id_device_group)){case 18:case 19:case 20:case 21:case 22:case 28:case 29:case 30:return this.jsxTemplate.call(this);default:return b.a.isObjectEmpty(e)?Object(m.jsx)("div",{className:"data-empty",children:"Device is not selected "}):Object(m.jsx)("div",{className:"data-empty",children:"There is no configuration for this device"})}}}]),a}(ee),Gi=Object(f.a)("common")(zi);function $i(){var e=this,t=this.props.t,a=this.state,i=a.itemDevice,s=a.curItem,n=a.dataFields,c=24;switch(parseInt(i.id_device_group)){case 18:case 21:c=6;break;case 28:c=12;break;default:c=24}return Object(m.jsxs)("div",{className:"setting",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("h2",{children:["Component: ",i.name]})}),Object(m.jsx)("div",{className:"main-setting",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("h3",{children:"Measured"})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("div",{className:"mb-3",children:"Field"})}),Object(m.jsx)("div",{className:"col-md-8",children:"Enable"})]}),b.a.isArrayData(n)?n.slice(0,c).map((function(t,a){return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:t.name}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsx)(ne,{inputId:t.key,inputName:t.key,labelClass:"no-label",disabled:!0,checked:s[t.key],onChange:function(t){e.handleInputChange(t,a)}})})]},a)})):"",Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("button",{type:"button",disabled:!0,className:"btn btn-save",onClick:this.onSave.bind(this),children:t("common.save")})})})})]})})})})]})}var Ki=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},itemDevice:n.props.itemDevice,dataFields:[{id:1,key:"dc_current_string01",dc_current_string01:0,name:"DC Current String 01"},{id:2,key:"dc_current_string02",dc_current_string02:0,name:"DC Current String 02"},{id:3,key:"dc_current_string03",dc_current_string03:0,name:"DC Current String 03"},{id:4,key:"dc_current_string04",dc_current_string04:0,name:"DC Current String 04"},{id:5,key:"dc_current_string05",dc_current_string05:0,name:"DC Current String 05"},{id:6,key:"dc_current_string06",dc_current_string06:0,name:"DC Current String 06"},{id:7,key:"dc_current_string07",dc_current_string07:0,name:"DC Current String 07"},{id:8,key:"dc_current_string08",dc_current_string08:0,name:"DC Current String 08"},{id:9,key:"dc_current_string09",dc_current_string09:0,name:"DC Current String 09"},{id:10,key:"dc_current_string10",dc_current_string10:0,name:"DC Current String 10"},{id:11,key:"dc_current_string11",dc_current_string11:0,name:"DC Current String 11"},{id:12,key:"dc_current_string12",dc_current_string12:0,name:"DC Current String 12"},{id:13,key:"dc_current_string13",dc_current_string13:0,name:"DC Current String 13"},{id:14,key:"dc_current_string14",dc_current_string14:0,name:"DC Current String 14"},{id:15,key:"dc_current_string15",dc_current_string15:0,name:"DC Current String 15"},{id:16,key:"dc_current_string16",dc_current_string16:0,name:"DC Current String 16"},{id:17,key:"dc_current_string17",dc_current_string17:0,name:"DC Current String 17"},{id:18,key:"dc_current_string18",dc_current_string18:0,name:"DC Current String 18"},{id:19,key:"dc_current_string19",dc_current_string19:0,name:"DC Current String 19"},{id:20,key:"dc_current_string20",dc_current_string20:0,name:"DC Current String 20"},{id:21,key:"dc_current_string21",dc_current_string21:0,name:"DC Current String 21"},{id:22,key:"dc_current_string22",dc_current_string22:0,name:"DC Current String 22"},{id:23,key:"dc_current_string23",dc_current_string23:0,name:"DC Current String 23"},{id:24,key:"dc_current_string24",dc_current_string24:0,name:"DC Current String 24"}]},n.jsxTemplate=$i,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeviceDetail()}},{key:"getDeviceDetail",value:function(){var e=this,t={id:this.props.itemDevice.id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Ui.instance.getDeviceDetail(t,(function(t){t&&e.setState({curItem:t})}),!1)}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,(a=Object.assign({},this.state.curItem)).screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=this.employee.id_language,Ui.instance.updateDevice(a,(function(e,a,i){e?t.toast(i,"info"):a?t.setValidateMessage(a):b.a.isBlank(i)||t.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.itemDevice;switch(parseInt(e.id_device_group)){case 18:case 21:case 28:return this.jsxTemplate.call(this);default:return b.a.isObjectEmpty(e)?Object(m.jsx)("div",{className:"data-empty",children:"Device is not selected "}):Object(m.jsx)("div",{className:"data-empty",children:"There is no configuration for this device"})}}}]),a}(ee),Ji=Object(f.a)("common")(Ki);function Xi(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.dataListDevice,n=a.itemDevice,c=null;b.a.isArrayData(s)&&(c=s.map((function(t,a){return Object(m.jsx)(Hi,{dataItem:t,index:a,handleDeviceInputChange:e.handleDeviceInputChange,auth:e.props.auth,actions:e.props.actions},a)})));var r=null;switch(i.type){case 1:r=Object(m.jsx)(Wi,{hash_id:this.state.hash_id,t:t,curItem:i,itemDevice:n,auth:this.props.auth,actions:this.actions},Math.random());break;case 2:r=Object(m.jsx)(Gi,{hash_id:this.state.hash_id,t:t,curItem:i,itemDevice:n,auth:this.props.auth,actions:this.actions},Math.random());break;case 3:r=Object(m.jsx)(Ji,{hash_id:this.state.hash_id,t:t,curItem:i,itemDevice:n,auth:this.props.auth,actions:this.actions},Math.random())}return Object(m.jsxs)("div",{className:"config",children:[Object(m.jsx)(xa,{hash_id:this.state.hash_id},Math.random()),Object(m.jsxs)("div",{className:"list-device",children:[Object(m.jsx)("h2",{children:t("config.device")}),Object(m.jsx)("div",{className:"content-list-device",children:Object(m.jsx)("ul",{children:c})})]}),Object(m.jsxs)("div",{className:"main-config",children:[Object(m.jsx)("div",{className:"header-title",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"group-header",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:1==i.type?"active":"",onClick:this.onTabSetting.bind(this,1),children:t("config.alert_trigger")}),Object(m.jsx)("li",{className:2==i.type?"active":"",onClick:this.onTabSetting.bind(this,2),children:t("config.pv_model_setting")}),Object(m.jsx)("li",{className:3==i.type?"active":"",onClick:this.onTabSetting.bind(this,3),children:t("config.data_field")})]})})})})}),Object(m.jsx)("div",{className:"main-layout",children:r})]})]})}var Zi=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDeviceInputChange=function(e){var t=n.state,a=t.dataListDevice,i=t.curItem;if(b.a.isArrayData(a)){var s=a[e];if(!b.a.isObjectEmpty(s)){for(var c=0;c<a.length;c++)a[c].is_checked=0;a[e].is_checked=1,n.setState({dataListDevice:a,itemDevice:s,curItem:i})}}},n.onTabSetting=function(e){var t=n.state.curItem;t.type=e,n.setState({curItem:t})},n.reloadData=function(){n.forceUpdate()},n.handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.type=2;else{var s=e.value;i[t]=s}a.setState({curItem:i})},n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{type:1},itemDevice:{},dataListDevice:[],dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1}},n.jsxTemplate=Xi,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListAllDeviceByProject()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getListAllDeviceByProject()}))}},{key:"getListAllDeviceByProject",value:function(){var e=this,t={hash_id:this.state.hash_id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Ui.instance.getListAllDeviceByProject(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListDevice:t,itemDevice:{}}):e.setState({dataListDevice:[],itemDevice:{}}),e.forceUpdate()}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Qi=Object(f.a)("common")(Zi),es=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=e.irradiance,a=e.alerts;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width5",style:{width:"100px"},children:Object(m.jsx)("div",{className:"project-status text-center",children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsxs)(d.c,{to:"/private/"+e.hash_id+"/activities","data-tip":t.name,"data-type":"warning","data-class":"tooltip-action",children:[Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+t.thumbnail}),Object(m.jsx)("span",{className:"count-alert",children:t.total_alert})]},a)})):Object(m.jsx)(d.c,{to:"/private/"+e.hash_id+"/activities",children:Object(m.jsx)("img",{src:"/greencheck.png"})})})}),Object(m.jsx)("div",{className:"body-col width15",style:{width:"250px"},children:Object(m.jsx)("p",{children:Object(m.jsx)(d.c,{to:"/private/"+e.hash_id,children:Object(m.jsx)("strong",{children:e.name})})})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:e.installed_power})}),b.a.isArrayData(t)?t.map((function(e,t){if(t<2)return Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.irradiancePoA)?"":Object(m.jsxs)("span",{children:[e.irradiancePoA," W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})]})},t)})):"",Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.power_now)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.power_now,"#,###.##")," kW"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.energy_today)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.energy_today,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.last_month)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.last_month,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.lifetime)?"":Object(m.jsx)("p",{children:b.a.formatElectricalUnit(e.lifetime,"h")})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:Object(m.jsxs)("p",{children:[b.a.formatNum(e.revenue,"#.###")," VN\u0110"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:e.last_updated})})]},e.id)}}]),a}(r.Component);function ts(){var e,t=this,a=this.props.t,i=this.state,s=i.dataList,n=i.searchParam;return e=s.map((function(e,i){return Object(m.jsx)(es,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)})),Object(m.jsxs)("div",{className:"view-list",children:[Object(m.jsx)("div",{className:"data-view",children:Object(m.jsxs)("div",{className:"main-dashboard-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5",style:{width:"100px"},children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{style:{width:"250px"},onClick:function(e){return t.onSort(e,"name")},className:"name"===n.sort_column?"header-col width15 sorting "+n.order_by:"header-col width15 sorting",children:Object(m.jsx)("p",{children:a("dashboard.name")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.installed_power")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.irradiance1")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.irradiance2")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.power_now")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.today")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.last_month")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.lifetime")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.revenue")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.last_updated")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var as=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getProjectSideBar",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_PROJECT.PROJECT_SIDEBAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListProjectByEmplpyee",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_PROJECT.LIST_PROJECT_BY_EMPLOYEE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListMeterByEmplpyee",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_PROJECT.LIST_METER_BY_EMPLOYEE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListPlantSummary",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_PROJECT.LIST_PLANT_SUMMARY,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getAllProjectByEmployeeId",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_PROJECT.LIST_SCOPE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),is=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleMouseOver=function(e,t){n.setState({showInfoWindow:e})},n.handleMouseExit=function(e,t){n.setState({showInfoWindow:!1})},n.onMouseoverMarker=function(e,t){n.setState({showIconHover:e})},n.mouseMoveOutOfMarker=function(e,t){n.setState({showIconHover:!1})},n.state={curItem:{},showInfoWindow:!1,showIconHover:!1,mode:"grid",dataList:[],dataListSummary:[],searchParam:{limit:16,offset:0,index:1},formSearch:!1},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=ts,n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getListPlantSummary",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,as.instance.getListPlantSummary(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListSummary:t}):e.setState({dataList:[]})}))}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,as.instance.getListProjectByEmplpyee(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ss=Object(f.a)("common")(is);a(844);function ns(){this.props.t;var e=this.state,t=e.chartOption,a=e.dataListSummary;return Object(m.jsxs)("div",{className:"chart-alarm",children:[Object(m.jsx)("div",{className:"data-chart",children:b.a.isObjectEmpty(t)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:t})}),b.a.isArrayData(a)?Object(m.jsx)("div",{className:"plant-sum",children:Object(m.jsx)("div",{className:"row",children:a.map((function(e,t){return Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("h2",{children:e.name}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"sub-item",children:[Object(m.jsx)("p",{children:"Today's Production"}),Object(m.jsxs)("p",{className:"today",children:[b.a.formatNum(e.energy_today,"#,###.##")," kWh"]}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"Total Production"}),Object(m.jsx)("p",{className:"total",children:Object(m.jsx)("strong",{children:b.a.formatElectricalUnit(e.lifetime,"h")})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"sub-item",children:[Object(m.jsx)("p",{children:"Today's Revenue"}),Object(m.jsxs)("p",{className:"total-money",children:[b.a.formatNum(e.today_revenue,"#.###")," VN\u0110"]}),Object(m.jsx)("hr",{}),Object(m.jsx)("p",{children:"Total Revenue"}),Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[b.a.formatNum(e.lifetime_revenue,"#.###")," VN\u0110"]})})]})})]})]})},t)}))})}):""]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var cs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},searchParam:n.props.searchParam,chartOption:{}},n.jsxTemplate=ns,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListPlantSummary()}},{key:"getListPlantSummary",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee;var a={credits:{enabled:!1},exporting:{enabled:!0},chart:{zoomType:"xy"},title:{text:""},colors:["#66bc51","#f5893b","#004ec3"],xAxis:[{categories:[],crosshair:!0}],yAxis:[{title:{text:"Today (kWh)"}},{title:{text:"Lifetime (kWh)"},opposite:!0}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"top",borderWidth:0,showInLegend:!1},series:[]},i=[],s=[],n=[],c=[];as.instance.getListPlantSummary(t,(function(t,r){if(b.a.isArrayData(t)){for(var l=0;l<t.length;l++)i.push(t[l].energy_today),s.push(t[l].lifetime),n.push(t[l].name);c.push({name:"Today's Production",type:"column",data:i,tooltip:{valueSuffix:" kWh"}}),c.push({name:"Total Production",type:"spline",yAxis:1,data:s,tooltip:{valueSuffix:" kWh"}}),a.series=c,a.xAxis[0].categories=n,e.setState({dataListSummary:t,chartOption:a})}else e.setState({dataList:[],chartOption:{}})}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),rs=Object(f.a)("common")(cs),ls=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;e.irradiance,e.alerts,this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width15",style:{width:"250px"},children:Object(m.jsx)("p",{children:Object(m.jsx)(d.c,{to:"/private/"+e.hash_id,children:Object(m.jsx)("strong",{children:e.project_name})})})}),Object(m.jsx)("div",{className:"body-col width10",style:{width:"250px"},children:Object(m.jsx)("p",{children:e.name})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.activePower)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.activePower,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.activeEnergy)?"":Object(m.jsx)("p",{children:b.a.formatElectricalUnit(e.activeEnergy,"h")})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.currentPhaseA)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.currentPhaseA,"#,###.##")," A"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.currentPhaseB)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.currentPhaseB,"#,###.##")," A"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.currentPhaseC)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.currentPhaseC,"#,###.##")," A"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"200px"},children:b.a.isBlank(e.activeEnergyRate1)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.activeEnergyRate1,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"200px"},children:b.a.isBlank(e.activeEnergyRate2)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.activeEnergyRate2,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"200px"},children:b.a.isBlank(e.activeEnergyRate3)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.activeEnergyRate3,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{className:"body-col width10 text-end",style:{width:"150px"},children:b.a.isBlank(e.powerFactor)?"":Object(m.jsxs)("p",{children:[b.a.formatNum(e.powerFactor,"#,###.##")," "]})})]},e.id)}}]),a}(r.Component);function os(){var e,t=this,a=this.props.t,i=this.state,s=i.dataList;i.searchParam;return e=s.map((function(e,i){return Object(m.jsx)(ls,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)})),Object(m.jsxs)("div",{className:"view-list",children:[Object(m.jsx)("div",{className:"data-view",children:Object(m.jsxs)("div",{className:"main-dashboard-view meter-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width15",style:{width:"250px"},children:Object(m.jsx)("p",{children:a("dashboard.name")})}),Object(m.jsx)("div",{className:"header-col width10",style:{width:"250px"},children:Object(m.jsx)("p",{children:a("dashboard.device_name")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.activePower")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.activeEnergy")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.currentPhaseA")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.currentPhaseB")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.currentPhaseC")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"200px"},children:Object(m.jsx)("p",{children:a("dashboard.activeEnergyRate1")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"200px"},children:Object(m.jsx)("p",{children:a("dashboard.activeEnergyRate2")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"200px"},children:Object(m.jsx)("p",{children:a("dashboard.activeEnergyRate3")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",style:{width:"150px"},children:Object(m.jsx)("p",{children:a("dashboard.powerFactor")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var ds=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},showInfoWindow:!1,showIconHover:!1,mode:"grid",dataList:[],dataListSummary:[],searchParam:{limit:16,offset:0,index:1},formSearch:!1},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=os,n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListMeterByEmplpyee()}},{key:"getListMeterByEmplpyee",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,as.instance.getListMeterByEmplpyee(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getListMeterByEmplpyee()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getListMeterByEmplpyee()}},{key:"onClickReload",value:function(){this.getListMeterByEmplpyee()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getListMeterByEmplpyee()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getListMeterByEmplpyee()}))}},{key:"handleSearch",value:function(){this.getListMeterByEmplpyee()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),hs=Object(f.a)("common")(ds);a(845),a(846);function ms(){var e=this,t=(this.props.t,this.state),a=t.dataList,i=t.showInfoWindow,s=t.showIconHover;console.log("dataList99: ",a);var n={lat:10.80166,lng:106.647058},c=null;if(b.a.isArrayData(a)){var r=0;c=a.map((function(t,a){if(!b.a.isBlank(t.lat)&&!b.a.isBlank(t.lat)){0==r&&(n.lat=parseFloat(t.lat),n.lng=parseFloat(t.lng)),r++;var c=t.irradiance,l=t.alerts;return Object(m.jsx)(pa.d,{index:a,position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},onClick:e.handleMouseOver.bind(e,t),onMouseOver:e.onMouseoverMarker.bind(e,t),onMouseOut:e.mouseMoveOutOfMarker.bind(e,t),icon:s==t?"/house-place.png":"/house-place-orange.png",zIndex:a,children:i&&i==t&&Object(m.jsx)(pa.b,{onCloseClick:e.handleMouseExit.bind(e,t),children:Object(m.jsxs)("div",{className:"info-window",children:[Object(m.jsx)(d.c,{to:"/private/"+t.hash_id+"/activities",children:Object(m.jsx)("img",{width:"300",src:b.a.isBlank(t.thumbnail)?"/energy.jpeg":v.a.SERVER_DATA+"/"+t.thumbnail,alt:t.name,title:t.name})}),Object(m.jsxs)("div",{className:"info-content",children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Project name:"})," ",Object(m.jsx)(d.c,{to:"/private/"+t.hash_id+"/activities",children:t.name})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Site name:"})," ",t.site_name]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Address:"})," ",t.address]}),Object(m.jsx)("hr",{}),b.a.isArrayData(c)?c.map((function(e,t){return Object(m.jsx)("p",{className:"irradiance-item",children:c.length>1?Object(m.jsxs)("span",{children:[Object(m.jsxs)("strong",{children:["Irradiance",++t,": "]}),e.irradiancePoA," W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})," ",Object(m.jsx)("hr",{})," "]}):Object(m.jsxs)("span",{children:[Object(m.jsx)("strong",{children:"Irradiance:"})," ",e.irradiancePoA," W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})]})},t)})):Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Irradiance:"})," 0 W/m",Object(m.jsx)("sup",{className:"sub",children:"2"})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Today:"})," ",b.a.formatNum(t.energy_today,"#,###.##")," kWh"]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Lifetime:"})," ",b.a.formatNum(t.lifetime,"#,###.##")," kWh"]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Revenue:"})," ",b.a.formatNum(t.revenue,"#,###.##")," vn\u0111"]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Installed power:"})," ",t.installed_power]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Commisioning date:"})," ",t.commisioning_date]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Instaled date:"})," ",t.installed_date]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Last updated:"})," ",t.last_updated]}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:"project-status text-center",children:b.a.isArrayData(l)?l.map((function(e,a){return Object(m.jsxs)(d.c,{to:"/private/"+t.hash_id+"/activities","data-tip":e.name,"data-type":"warning","data-class":"tooltip-action",children:[Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+e.thumbnail}),Object(m.jsx)("span",{className:"count-alert",children:e.total_alert})]},a)})):Object(m.jsx)(d.c,{to:"/private/"+t.hash_id+"/activities",children:Object(m.jsx)("img",{src:"/greencheck.png"})})})]})]})})},"row_item_"+a)}}))}return Object(m.jsxs)("div",{className:"view-map",children:[Object(m.jsx)("div",{className:"data-view-map",children:Object(m.jsx)(pa.c,{id:"script-loader",googleMapsApiKey:v.a.GOOLGE_APP.KEY,children:Object(m.jsx)(pa.a,{id:"post_view_map",options:{mapTypeControlOptions:{position:"BOTTOM_RIGHT"}},zoom:14,center:n,children:c})})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(t){return e.onClickReload.bind(e)},onSelectPage:function(t){return e.onSelectPage.bind(e,t)}})})]})}var us=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleMouseOver=function(e,t){n.setState({showInfoWindow:e})},n.handleMouseExit=function(e,t){n.setState({showInfoWindow:!1})},n.onMouseoverMarker=function(e,t){n.setState({showIconHover:e})},n.mouseMoveOutOfMarker=function(e,t){n.setState({showIconHover:!1})},n.state={showInfoWindow:!1,showIconHover:!1,dataList:[],searchParam:n.props.searchParam},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=ms,n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,as.instance.getListProjectByEmplpyee(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ps=Object(f.a)("common")(us);function js(){var e=this,t=this.props.t,a=this.state,i=a.dataList,s=a.searchParam,n=a.mode,c=null;switch(n){case"map":c=Object(m.jsx)(ps,{dataList:i,searchParam:s,auth:this.props.auth,actions:this.actions});break;case"summary":c=Object(m.jsx)(rs,{dataList:i,searchParam:s,auth:this.props.auth,actions:this.actions});break;case"meter":c=Object(m.jsx)(hs,{dataList:i,searchParam:s,auth:this.props.auth,actions:this.actions});break;default:c=Object(m.jsx)(ss,{dataList:i,searchParam:s,auth:this.props.auth,actions:this.actions})}return Object(m.jsxs)("div",{className:"dashboard",children:[Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:t("dashboard.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[b.a.isBlank(n)||"grid"!=n?"":Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"grid"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"grid"),children:Object(m.jsx)("span",{className:"icon-list-unordered"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"map"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"map"),children:Object(m.jsx)("span",{className:"icon-map-streamline-user"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"summary"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"summary"),children:Object(m.jsx)("span",{className:"icon-graph-bar"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"meter"===this.state.mode?"active":"",onClick:this.onClickChangeMode.bind(this,"meter"),children:Object(m.jsx)("span",{className:"icon-gauge"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:s.id,onChange:function(t){e.handleSearchInputChange(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:t("dashboard.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:s.name,onChange:function(t){e.handleSearchInputChange(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",t("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",t("common.reset")," "]})]})})]})}):"",c]})}var bs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickChangeMode=function(e){Object(p.a)(n);n.setState({mode:e})},n.state={curItem:{},showInfoWindow:!1,showIconHover:!1,mode:"grid",dataList:[],searchParam:{limit:16,offset:0,index:1},formSearch:!1},n.jsxTemplate=js,n}return Object(s.a)(a,[{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t})}},{key:"handleSearch",value:function(){var e=this.state.searchParam;this.setState({searchParam:e})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),vs=Object(f.a)("common")(bs);function _s(){var e=this,t=this.props.t,a=window.location.pathname;return console.log("this.props.hash_id",this.props.hash_id),Object(m.jsx)("div",{className:"sidebar-top",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/main",children:t("common.plant")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{isActive:function(){return["/private/"+e.state.hash_id,"/private/"+e.state.hash_id+"/dashboard"].includes(a)},to:"/private/"+this.state.hash_id+"/dashboard",children:t("common.dashboard")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/private/"+this.state.hash_id+"/devices",children:t("common.device")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{onClick:this.setActivePage.bind(this),to:"/private/"+this.state.hash_id+"/activities",children:t("common.alert")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/private/"+this.state.hash_id+"/analytics",children:t("common.analytics")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/private/"+this.state.hash_id+"/reports",children:t("common.report")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/private/"+this.state.hash_id+"/config",children:t("common.config")})}),Object(m.jsx)("li",{children:Object(m.jsx)(d.c,{to:"/private/"+this.state.hash_id+"/control",children:t("common.control")})})]})})}a(847);var gs,fs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).setActivePage=function(){},n.jsxTemplate=_s,n.state={hash_id:n.props.hash_id,curItem:n.props.curItem,dataList:[]},n}return Object(s.a)(a,[{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(r.Component),xs=Object(f.a)("common")(fs),Os=(a(848),a(334)),ys=a(51),Ms=a(335);function Ns(){var e=this.state,t=(e.curItem,e.allLanguage,e.dataProjectGroup,this.props.t,Ms.a.div(gs||(gs=Object(Os.a)(["\n        padding: 5px;\n        border-radius: 8px;\n        display: inline-block;\n        border: 1px solid red;\n    "]))));return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable full-screen",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Single line diagram"}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseSingleLine.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)(ys.a,{lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px",lineHeight:"50px",label:Object(m.jsx)(t,{children:"Power Grid"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Revenue Meter"}),children:Object(m.jsxs)(ys.b,{label:Object(m.jsx)(t,{children:"AMI Meter"}),children:[Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 1"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 2"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 3"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 4"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 5"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 6"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 7"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 8"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})}),Object(m.jsx)(ys.b,{label:Object(m.jsx)(t,{children:"Inverter 9"}),children:Object(m.jsx)(ys.b,{label:Object(m.jsxs)(t,{children:[Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"80px"},src:"/solar-panel.png"})}),Object(m.jsx)("p",{children:"String 1 to 192.1.1.1"})]})})})]})})})})]})}var Cs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:{}},s.jsxTemplate=Ns,s}return a}(ee);function ks(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.chartParams,n=a.dataFilter,c=a.chartOption,r=b.a.isArrayData(i.irradiance)?i.irradiance:[],l=b.a.isArrayData(i.ambient_emperature)?i.ambient_emperature:[],o=b.a.isArrayData(i.humidity)?i.humidity:[],d=b.a.isArrayData(i.wind_speed)?i.wind_speed:[],h=null;b.a.isArrayData(n)&&(h=n.map((function(t,a){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==s.id_filter?"item active":"item",children:t.text},a)})));var u=null;if(!b.a.isObjectEmpty(s))switch(s.id_filter){case"today":u=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})});break;case"3_day":u=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:s.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":u=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})});break;case"12_month":u=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:s.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:s.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}var p=this.state.single_line?Object(m.jsx)(Cs,{onClickCloseSingleLine:this.onClickCloseSingleLine,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"plant",children:[Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random()),p,Object(m.jsx)("div",{className:"main-plant",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-9",children:Object(m.jsxs)("div",{className:"plant-chart",children:[Object(m.jsx)("div",{className:"box-header",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item power",children:[Object(m.jsxs)("h2",{children:[t("plant.power_now")," "]}),Object(m.jsxs)("p",{children:[b.a.formatNum(i.power_now,"#,###.##")," kW"]}),Object(m.jsxs)("h3",{children:[t("plant.installed_power")," ",Object(m.jsx)("strong",{children:i.installed_power})]}),Object(m.jsx)("div",{className:"item-icon",children:Object(m.jsx)("img",{src:"/power.png"})})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item energy",children:[Object(m.jsx)("h2",{children:t("plant.today_production")}),Object(m.jsx)("p",{children:b.a.formatElectricalUnit(i.energy_today,"h")}),Object(m.jsxs)("h3",{children:[t("plant.total_production")," ",Object(m.jsxs)("strong",{children:[b.a.formatElectricalUnit(i.lifetime,"h")," "]})]}),Object(m.jsx)("div",{className:"item-icon",children:Object(m.jsx)("img",{src:"/energy.png"})})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item revenue",children:[Object(m.jsx)("h2",{children:t("plant.today_revenue")}),Object(m.jsxs)("p",{children:[b.a.formatNum(i.today_revenue,"#.###")," VN\u0110"]}),Object(m.jsxs)("h3",{children:[t("plant.total_revenue")," ",Object(m.jsxs)("strong",{children:[b.a.formatNum(i.total_revenue,"#.###")," VN\u0110"]})]}),Object(m.jsx)("div",{className:"item-icon",children:Object(m.jsx)("img",{src:"/revenue.png"})})]})})]})}),Object(m.jsxs)("div",{className:"list-device-status",children:[Object(m.jsx)("h2",{children:t("plant.energy_flow")}),Object(m.jsx)("div",{className:1===i.using_meter_consumption?"main-device-status is-meter":"main-device-status",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("img",{src:"/solar-panel.png"}),Object(m.jsx)("div",{className:i.dc_power<=0?"line-energy close":"line-energy",children:Object(m.jsxs)("span",{className:"string",children:[b.a.formatNum(i.dc_power,"#,###.##")," kW"]})}),Object(m.jsx)("div",{className:"text",children:"PV array"})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:"item",children:[b.a.isBlank(i.totalInverter)?"":Object(m.jsxs)("span",{className:"sum-inverter",children:["Running: ",i.totalInverterOn,"/",i.totalInverter]}),Object(m.jsx)("img",{src:"/inverter.png"}),Object(m.jsxs)("div",{className:i.power_now<=0?"line-energy close":"line-energy",children:[Object(m.jsxs)("span",{children:[b.a.formatNum(i.power_now,"#,###.##")," kW"]}),i.power_now<=0?Object(m.jsx)("span",{className:"close-line",children:Object(m.jsx)("var",{className:"icon-cancel-music"})}):""]}),Object(m.jsx)("div",{className:"text",children:"PV inverter"})]})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("div",{className:1===i.using_meter_consumption?"item solar-meter":"item",children:[Object(m.jsx)("img",{src:"/meter.png"}),Object(m.jsxs)("div",{className:"two-line",children:[Object(m.jsxs)("div",{className:i.power_now<=0?"line-energy close":"line-energy",children:[Object(m.jsxs)("span",{children:[b.a.formatNum(i.power_now-i.consumption<0?0:i.power_now-i.consumption,"#,###.##")," kW"]}),i.power_now<=0?Object(m.jsx)("span",{className:"close-line",children:Object(m.jsx)("var",{className:"icon-cancel-music"})}):""]}),1===i.using_meter_consumption?Object(m.jsxs)("div",{className:i.consumption<=0?"line-home close":"line-home",children:[Object(m.jsxs)("span",{children:[b.a.formatNum(i.consumption,"#,###.##")," kW"]}),i.consumption<=0?Object(m.jsx)("span",{className:"close-line",children:Object(m.jsx)("var",{className:"icon-cancel-music"})}):""]}):""]}),Object(m.jsx)("div",{style:{marginLeft:"-30px"},className:"text",children:"Solar production meter"})]})})]})}),Object(m.jsxs)("div",{className:"col-md-2",children:[Object(m.jsxs)("div",{className:"item power-gird",children:[Object(m.jsx)("img",{src:"/power-gird.png"}),Object(m.jsx)("div",{className:"text",children:"Power Grid"})]}),1===i.using_meter_consumption?Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("img",{src:"/consumption.png"}),Object(m.jsx)("div",{className:"text",children:"Consumption"})]}):""]})]})})]}),Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1",children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"download",children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})}),Object(m.jsxs)("div",{className:"col-xl-11 col-lg-11 col-md-11",children:[Object(m.jsxs)("div",{className:s.show_filter?"filter on":"filter",children:["today"==s.id_filter||"3_day"==s.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,1),className:1==s.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==s.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==s.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[s.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:h})]}),Object(m.jsx)("div",{className:"time-filter",children:u})]})]})}),Object(m.jsx)("div",{className:"chart-content",children:b.a.isObjectEmpty(c)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:c})})]})]})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsxs)("div",{className:"site-info",children:[Object(m.jsxs)("div",{className:"info",children:[Object(m.jsx)("div",{className:"info-img",children:b.a.isBlank(i.thumbnail)?Object(m.jsx)("img",{src:"/thumbnail.jpg"}):Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+i.thumbnail})}),b.a.isBlank(i.name)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.project_name")," :"]})," ",i.name]}),b.a.isBlank(i.site_name)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.site_name"),":"]})," ",i.site_name]}),b.a.isBlank(i.address)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.address"),":"]})," ",i.address]}),b.a.isBlank(i.installed_power)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.installed_power"),":"]})," ",i.installed_power]}),b.a.isBlank(i.commisioning_date)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.commisioning_date"),":"]})," ",i.commisioning_date]}),b.a.isBlank(i.instaled_date)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.instaled_date"),":"]})," ",i.instaled_date]}),b.a.isBlank(i.last_updated)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("plant.last_updated"),":"]})," ",i.last_updated]})]}),Object(m.jsx)("div",{className:"list-item",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item humidity",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/tree.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("p",{className:"text",children:"Equivalent Trees Planted"}),Object(m.jsx)("p",{className:"value",children:b.a.formatNum(i.lifetime/1e3*.0117,"#,###")})]})]})}),Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item irradiance",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/co2.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("p",{className:"text",children:"Tons of CO2 Avoided"}),Object(m.jsx)("p",{className:"value",children:b.a.formatNum(i.lifetime/1e6*392,"#,###")})]})]})}),b.a.isArrayData(l)?l.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item temperature",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/temperature.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Ambient Temperature ",l.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.ambientTemp," \u2103"]})]})]})},"ambient_emperature_"+t)})):"",b.a.isArrayData(r)?r.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item irradiance",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/irradiance.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Irradiance ",r.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.irradiancePoA," W/m2"]})]})]})},"irradiance_"+t)})):"",b.a.isArrayData(r)?r.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item temp",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/temperature.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Module Temp ",r.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.panelTemp," \u2103"]})]})]})},"temp_"+t)})):"",b.a.isArrayData(o)?o.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item humidity",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/humidity.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Humidity ",r.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.panelTemp," %"]})]})]})},"humidity_"+t)})):"",b.a.isArrayData(d)?d.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"item wind",children:[Object(m.jsx)("div",{className:"view-icon",children:Object(m.jsx)("img",{src:"/wind.png"})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("p",{className:"text",children:["Wind Speed ",d.length>1?++t:""]}),Object(m.jsxs)("p",{className:"value",children:[e.panelTemp," km/h"]})]})]})},"wind_"+t)})):""]})})]})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Ds=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_PLANT.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDataChart",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_PLANT.CHART_DATA,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),ws=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.getDataChart()}))}}},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.getDataChart()})))},n.onClickShowSingleLine=function(){n.setState({single_line:!0})},n.onClickCloseSingleLine=function(){n.setState({single_line:!1})},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.downloadData=function(){var e=n.state,t=e.dataEnergy,a=e.curItem;n.props.t;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},single_line:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages,dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}],chartParams:{id_filter:"today",text_filter:"Today",show_filter:!1,max_date:b.a.getCurrentDDMMYYYY(),data_send_time:2}},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=ks,n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside),this.loadConfigDefaultDate(),this.getDetailProject(),this.getDataChart()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getDetailProject(),t.getDataChart()}))}},{key:"loadConfigDefaultDate",value:function(){var e=this.state.chartParams;switch(e.id_filter){case"today":e.max_date=b.a.getCurrentMMDDYYYYHI(),e.end_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":e.end_date=b.a.getCurrentDDMMYYYY(),e.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),e.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY");break;case"this_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");break;case"last_month":e.max_date=Ye()().format("MM/YYYY");var t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).endOf("month").format("MM/YYYY"),e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");var i;t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-12)).format("MM/YYYY"),e.max_start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}this.setState({chartParams:e})}},{key:"getDetailProject",value:function(){var e=this.state.hash_id,t=this;if(!b.a.isBlank(e)){var a={hash_id:e,id_language:this.employee.id_language,id_employee:this.employee.id_employee,type:"private"};Ds.instance.getDetail(a,(function(e){e&&t.setState({curItem:e})}),!1)}}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=this,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),a){var n=this.state.chartParams;switch(n.id_filter){case"today":case"last_month":case"this_month":n.start_date=s,n[a]=s;break;case"3_day":if("start_date"==a){n.start_date=s;var c=s.split("/");if(c){var r=c[2]+"/"+c[1]+"/"+c[0];n.end_date=Ye()(b.a.addDays(r,2)).format("DD/MM/YYYY")}}if("end_date"==a){n.end_date=s;var l=s.split("/");if(l){var o=l[2]+"/"+l[1]+"/"+l[0];n.start_date=Ye()(b.a.addDays(o,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){n.start_date=s;var d=s.split("/");if(d){var h=d[1]+"/"+d[0]+"/01",m=Ye()(h).startOf("month").format("YYYY-MM-DD");n.end_date=Ye()(b.a.addMonths(m,12)).format("MM/YYYY")}}if("end_date"==a){n.end_date=s;var u=s.split("/");if(u){var p=u[1]+"/"+u[0]+"/01",j=Ye()(p).startOf("month").format("YYYY-MM-DD");n.start_date=Ye()(b.a.addMonths(j,-12)).format("MM/YYYY")}}}this.setState({chartParams:n},(function(){i.getDataChart()}))}}},{key:"getDataChart",value:function(){var e=this.state,t=e.chartParams,a=e.curItem,i=e.hash_id,s=this;if(!b.a.isObjectEmpty(t)){var n={};switch(n.hash_id=i,n.total_year=a.total_year,n.id_employee=this.employee.id_employee,n.id_language=this.employee.id_language,n.filterBy=t.id_filter,n.data_send_time=t.data_send_time,n.type="private",t.id_filter){case"today":n.start_date=b.a.convertAllFormatDate(b.a.dateFormat(t.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),n.end_date=b.a.convertAllFormatDate(b.a.dateFormat(t.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":n.start_date=b.a.dateFormat(t.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",n.end_date=b.a.dateFormat(t.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":n.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.start_date+" 00:00:00",n.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.end_date+" 19:00:00";break;case"lifetime":case"12_month":n.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.start_date+" 00:00:00",n.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+t.end_date+" 19:00:00"}Ds.instance.getDataChart(n,(function(e){if(b.a.isArrayData(e)){var i=e,c=[],r=[],l={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},o={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:2,tooltip:{valueSuffix:" kW"},marker:{radius:2.5}},d=[],h=[];if("today"===n.filterBy)switch(t.data_send_time){case 1:a.tickInterval=12,r=["5AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19PM"];for(var m=0,u=0;u<i.length;u++){if(0==u){var p=b.a.dateFormat(i[u].time_format,"HH","YYYY-MM-DD HH:mm:ss"),j=b.a.dateFormat(i[u].time_format,"mm","YYYY-MM-DD HH:mm:ss");if((m=12*(parseInt(p)-5)+Math.round(j/5))>0)for(var v=0;v<m;v++){var _=b.a.dateFormat(b.a.addMinutes(b.a.dateFormat(i[u].time_format,"YYYY-MM-DD 05:00","YYYY-MM-DD HH:mm:ss"),5*v),"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss");d.push([_,null]),h.push([_,null])}}d.push([i[u].time_full,i[u].activeEnergy]),h.push([i[u].time_full,i[u].activePower])}var g=m+i.length;if(g<168&&g>0)for(var f="",x=g;x<168;x++)x==g&&(f=i[i.length-1].time_format),null!=f&&(f=b.a.addMinutes(f,5),d.push([b.a.dateFormat(f,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]),h.push([b.a.dateFormat(f,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]));l.data=d,c.push(l),o.data=h,c.push(o);break;case 2:a.tickInterval=4,r=["5AM","5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM"];for(var O=0,y=0;y<i.length;y++){if(0==y){p=b.a.dateFormat(i[y].time_format,"HH","YYYY-MM-DD HH:mm:ss"),j=b.a.dateFormat(i[y].time_format,"mm","YYYY-MM-DD HH:mm:ss");if((O=4*(parseInt(p)-5)+Math.round(j/15))>0)for(v=0;v<O;v++){_=b.a.dateFormat(b.a.addMinutes(b.a.dateFormat(i[y].time_format,"YYYY-MM-DD 05:00","YYYY-MM-DD HH:mm:ss"),15*v),"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss");d.push([_,null]),h.push([_,null])}}d.push([i[y].time_full,i[y].activeEnergy]),h.push([i[y].time_full,i[y].activePower])}var M=O+i.length;if(M<56&&M>0)for(var N="",C=M;C<56;C++)C==M&&(N=i[i.length-1].time_format),null!=N&&(N=b.a.addMinutes(N,15),d.push([b.a.dateFormat(N,"DD/MM/YYYY","YYYY-MM-DD HH:mm:ss"),null]),h.push([b.a.dateFormat(N,"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss"),null]));l.data=d,c.push(l),o.data=h,c.push(o);break;default:a.tickInterval=1,r=["5AM","6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM"];for(var k=0,D=0;D<i.length;D++){if(0==D){p=b.a.dateFormat(i[D].time_format,"HH","YYYY-MM-DD HH:mm:ss");if((k=parseInt(p)-5)>0)for(v=0;v<k;v++){_=b.a.dateFormat(i[D].time_format,"DD/MM/YYYY","YYYY-MM-DD HH:mm:ss")+" "+(v+5)+":00";d.push([_,null]),h.push([_,null])}}d.push([i[D].time_full,i[D].activeEnergy]),h.push([i[D].time_full,i[D].activePower])}var w=k+i.length;if(w<15&&w>0)for(var A="",I=w;I<15;I++)I==w&&(A=i[i.length-1].time_format),null!=A&&(A=b.a.addMinutes(A,60),d.push([b.a.dateFormat(A,"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss"),null]),h.push([b.a.dateFormat(A,"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss"),null]));l.data=d,c.push(l),o.data=h,c.push(o)}else if("3_day"===n.filterBy){var P=t.start_date.split("/"),Y="",E="",L="",S="";if(!P)return;switch(Y=P[2]+"/"+P[1]+"/"+P[0],E=Ye()(Y).format("DD. MMM"),L=Ye()(b.a.addDays(Y,1)).format("DD. MMM"),S=Ye()(b.a.addDays(Y,2)).format("DD. MMM"),t.data_send_time){case 1:if(a.tickInterval=169,r=[E,"5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13:00 PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14:00 PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15:00 PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16:00 PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17:00 PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18:00 PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19:00 PM",L,"5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13:00 PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14:00 PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15:00 PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16:00 PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17:00 PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18:00 PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19:00 PM",S,"5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6:00 AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7:00 AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8:00 AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9:00 AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10:00 AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11:00 AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12:00 PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13:00 PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14:00 PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15:00 PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16:00 PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17:00 PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18:00 PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19:00 PM"],b.a.isArrayData(e))for(var T=0;T<e.length;T++)d.push([e[T].time_full,e[T].activeEnergy]),h.push([e[T].time_full,e[T].activePower]);l.data=d,c.push(l),o.data=h,c.push(o);break;case 2:if(a.tickInterval=57,r=[E,"5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM",L,"5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM",S,"5:15AM","5:30AM","5:45AM","6AM","6:15AM","6:30AM","6:45AM","7AM","7:15AM","7:30AM","7:45AM","8AM","8:15AM","8:30AM","8:45AM","9AM","9:15AM","9:30AM","9:45AM","10AM","10:15AM","10:30AM","10:45AM","11AM","11:15AM","11:30AM","11:45AM","12PM","12:15PM","12:30PM","12:45PM","13PM","13:15PM","13:30PM","13:45PM","14PM","14:15PM","14:30PM","14:45PM","15PM","15:15PM","15:30PM","15:45PM","16PM","16:15PM","16:30PM","16:45PM","17PM","17:15PM","17:30PM","17:45PM","18PM","18:15PM","18:30PM","18:45PM","19PM"],b.a.isArrayData(e))for(var R=0;R<e.length;R++)d.push([e[R].time_full,e[R].activeEnergy]),h.push([e[R].time_full,e[R].activePower]);l.data=d,c.push(l),o.data=h,c.push(o);break;case 3:if(a.tickInterval=15,r=[E,"6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM",L,"6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM",S,"6AM","7AM","8AM","9AM","10AM","11AM","12PM","13PM","14PM","15PM","16PM","17PM","18PM","19PM"],b.a.isArrayData(e))for(var F=0;F<e.length;F++)d.push([e[F].time_full,e[F].activeEnergy]),h.push([e[F].time_full,e[F].activePower]);l.data=d,c.push(l),o.data=h,c.push(o)}}else{a.tickInterval=1,r=[];for(var H="",B="",U="",V=0;V<i.length;V++){if(r.push([i[V].category_time_format]),H=i[V].time_format,0===V)B=new Date(i[V].time_format).getMonth()+1;if(V===i.length-1)U=new Date(i[V].time_format).getMonth()+1;d.push([i[V].time_full,i[V].activeEnergy]),h.push([i[V].time_full,i[V].activePower])}switch(n.filterBy){case"this_month":case"last_month":if(!b.a.isBlank(H)){var W=new Date(H),q=W.getDate(),z=new Date(W.getFullYear(),W.getMonth()+1,0);if(q<z.getDate())for(var G=q;G<z.getDate();G++)H=b.a.addDays(H,1),d.push([b.a.dateFormat(H,"DD/MM/YYYY","YYYY-MM-DD"),null]),h.push([b.a.dateFormat(H,"DD/MM/YYYY","YYYY-MM-DD"),null]),r.push([H.getDate()])}break;case"12_month":if(!b.a.isBlank(B)&&!b.a.isBlank(U)){for(var $=[],K=[],J=[],X=new Date(H),Z=1;Z<B;Z++)$.push([(Z<10?"0"+Z:Z)+"/"+X.getFullYear(),null]),K.push([(Z<10?"0"+Z:Z)+"/"+X.getFullYear(),null]),J.push([b.a.getStringMonthNumber(Z)]);J.push.apply(J,Object(_a.a)(r)),$.push.apply($,Object(_a.a)(d)),K.push.apply(K,Object(_a.a)(h));for(var Q=U+1;Q<=12;Q++)$.push([(Q<10?"0"+Q:Q)+"/"+X.getFullYear(),null]),K.push([(Q<10?"0"+Q:Q)+"/"+X.getFullYear(),null]),J.push([b.a.getStringMonthNumber(Q)]);r=J,d=$,h=K}break;case"lifetime":if(!b.a.isBlank(a.total_year)&&a.total_year<2&&!b.a.isBlank(B)&&!b.a.isBlank(U)){for(var ee=[],te=[],ae=[],ie=new Date(H),se=1;se<B;se++)ee.push([(se<10?"0"+se:se)+"/"+ie.getFullYear(),null]),te.push([(se<10?"0"+se:se)+"/"+ie.getFullYear(),null]),ae.push([b.a.getStringMonthNumber(se)]);ae.push.apply(ae,Object(_a.a)(r)),ee.push.apply(ee,Object(_a.a)(d)),te.push.apply(te,Object(_a.a)(h));for(var ne=U+1;ne<=12;ne++)ee.push([(ne<10?"0"+ne:ne)+"/"+ie.getFullYear(),null]),te.push([(ne<10?"0"+ne:ne)+"/"+ie.getFullYear(),null]),ae.push([b.a.getStringMonthNumber(ne)]);r=ae,d=ee,h=te}}l.data=d,c.push(l),o.data=h,c.push(o)}s.setState({dataCategories:r,dataEnergy:e,curItem:a,series:c},(function(){s.loadChartOption()}))}else s.setState({dataCategories:[],dataEnergy:[],curItem:a,series:[]},(function(){s.loadChartOption()}))}))}}},{key:"loadChartOption",value:function(){var e={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:this.state.curItem.tickInterval,visible:!0,categories:this.state.dataCategories},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.series};this.setState({chartOption:e})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),As=Object(f.a)("common")(ws),Is=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onClickViewDevice=function(){e.props.onClickViewDevice&&"function"===typeof e.props.onClickViewDevice&&e.props.onClickViewDevice(e.props.index)},e.onClickChartDevice=function(){e.props.onClickViewDevice&&"function"===typeof e.props.onClickChartDevice&&e.props.onClickChartDevice(e.props.index)},e.viewAlertDevice=function(){e.props.viewAlertDevice&&"function"===typeof e.props.viewAlertDevice&&e.props.viewAlertDevice(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=this.props.t,i=t.alerts;return console.log(t),Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{style:{width:"100px"},className:"body-col width5",children:Object(m.jsx)("div",{className:"device-status text-center",children:b.a.isArrayData(i)?i.map((function(t,a){return Object(m.jsxs)("a",{onClick:e.viewAlertDevice.bind(e),"data-tip":t.name,"data-type":"warning","data-class":"tooltip-action",children:[Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+t.thumbnail}),Object(m.jsx)("span",{className:"count-alert",children:t.total_alert})]},a)})):Object(m.jsx)("a",{onClick:this.viewAlertDevice.bind(this),children:1==t.id_device_type?Object(m.jsx)("img",{src:t.power_now>0&&1==t.id_device_type?"/greencheck.png":"/off.png"}):Object(m.jsx)("img",{src:"/greencheck.png"})})})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10 text-break",children:Object(m.jsx)("p",{style:{cursor:"pointer"},onClick:this.onClickViewDevice.bind(this),children:Object(m.jsx)("strong",{children:t.name})})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10 text-break",children:Object(m.jsxs)("p",{children:[t.model," "]})}),Object(m.jsx)("div",{style:{width:"250px"},className:"body-col width15 text-break",children:Object(m.jsx)("p",{children:t.serial_number})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10 text-break",children:Object(m.jsx)("p",{children:t.device_type_name})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.power_now)?"N/A":Object(m.jsxs)("p",{children:[b.a.formatNum(t.power_now,"#,###.##")," kW"]})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.energy_today)?"N/A":Object(m.jsxs)("p",{children:[b.a.formatNum(t.energy_today,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.last_month)?"N/A":Object(m.jsxs)("p",{children:[b.a.formatNum(t.last_month,"#,###.##")," kWh"]})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:b.a.isBlank(t.lifetime)?"N/A":Object(m.jsx)("p",{children:b.a.formatElectricalUnit(t.lifetime,"h")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:Object(m.jsx)("p",{children:t.last_updated})}),Object(m.jsx)("div",{style:{width:"150px"},className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.VIEW)?this.onClickChartDevice.bind(this):"","data-tip":a("device.chart"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-graph-bar","aria-hidden":"true"})}),Object(m.jsx)("li",{onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.VIEW)?this.onClickViewDevice.bind(this):"","data-tip":a("common.view"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-eye","aria-hidden":"true"})})]})})})]},t.id)}}]),a}(r.Component),Ps=(a(324),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsxs)("p",{children:[e.name," "]})}),Object(m.jsx)("div",{className:"body-col width30 text-break",children:Object(m.jsxs)("p",{children:[e.slug," "]})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.value})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.unit})})]},e.id)}}]),a}(r.Component)),Ys=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail})," "]})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsxs)("p",{children:[e.error_level_name," "]})}),Object(m.jsxs)("div",{className:"body-col width40",children:[Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("device.id_error_type"),": "]}),e.error_type_name]})," ",Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("device.description"),": "]})," ",e.description]})]}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.start_date_format})}),Object(m.jsx)("div",{className:"body-col width15 text-end",children:Object(m.jsxs)("p",{children:[e.times_ago>0?e.times_ago:""," "+t("common."+e.times_ago_unit),e.times_ago>1&&"s"]})})]},e.id)}}]),a}(r.Component);function Es(){var e,t=this,a=this.state,i=a.searchParam,s=a.dataList,n=a.dataErrorLevel,c=a.dataErrorType,r=this.props.t;return e=s.map((function(e,a){return Object(m.jsx)(Ys,{index:a,dataItem:e,actions:t.actions,t:r},"row_item_"+a)})),Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsx)("div",{className:"device-alarm-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("common.date_from"),value:i.date_from,inputId:"date_from",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_from",minDate:i.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:r("common.date_to"),value:i.date_to,inputId:"date_to",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_to",minDate:i.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("device.id_level"),instanceId:"id_error_level",className:"id_error_level",name:"id_error_level",value:n.filter((function(e){return e.id===i.id_error_level})),onChange:function(e){t.handleDropdownChange(e,"id_error_level")},optionList:n,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("device.id_error_type"),instanceId:"id_error_type",className:"id_error_type",name:"id_error_type",value:c.filter((function(e){return e.id===i.id_error_type})),onChange:function(e){t.handleDropdownChange(e,"id_error_type")},optionList:c,placeHolder:r("common.choose")})})})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",r("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",r("common.reset")," "]})]})})]})}),Object(m.jsxs)("div",{className:"list-device",children:[Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===i.sort_column?"header-col width10 sorting "+i.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:r("device.alert")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_level")},className:"id_error_level"===i.sort_column?"header-col width15 sorting "+i.order_by:"header-col width15 sorting",children:Object(m.jsx)("p",{children:r("device.level")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"message")},className:"message"===i.sort_column?"header-col width40 sorting "+i.order_by:"header-col width40 sorting",children:Object(m.jsx)("p",{children:r("device.issus")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"start_date")},className:"start_date"===i.sort_column?"header-col width20 sorting "+i.order_by:"header-col width20 sorting",children:Object(m.jsx)("p",{children:r("device.opened")})}),Object(m.jsx)("div",{className:"header-col width15 text-end",children:Object(m.jsx)("p",{children:r("device.open_period")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:r("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})]})}var Ls=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getListInverter",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.LIST_INVERTER,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListDeviceByHashId",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDataListHardware",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.PARAMETER,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListParameterByDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.PARAMETER,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListAlertByDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.LIST_ALERT,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateOnOff",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_DEVICE.UPDATE_ON_OFF,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"saveControlCalendar",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.SAVE_CONTROL_CALENDAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"saveArrControlCalendar",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.SAVE_ARR_CONTROL_CALENDAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"getListControlCalendar",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.LIST_CONTROL_CALENDAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListBySiteControlCalendar",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.LIST_BY_SITE_CONTROL_CALENDAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"deleteListCalendarControl",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_DEVICE.DELETE_LIST_CALENDAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"deleteItemCalendarControl",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_DEVICE.DELETE_ITEM_CALENDAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"updateControlMode",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_DEVICE.UPDATE_MODE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"getProjectDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_DEVICE.PROJECT_DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"updateModePowerAndEnergy",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_DEVICE.UPDATE_MODE_POWER_ENERGY,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"getPowerNowByDay",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_DEVICE.POWER_NOW_BY_DAY,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Ss=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDropdownChange=function(e,t){if(!b.a.isObjectEmpty(e)){var a=Object(p.a)(n),i=e.value,s=a.state.searchParam;"id_error_level"===t&&b.a.isObjectEmpty(e)&&(s.id_error_level=""),"id_error_type"===t&&b.a.isObjectEmpty(e)&&(s.id_error_type=""),s[t]=i,a.setState({searchParam:s})}},n.jsxTemplate=Es,n.state={curItem:Object.assign({},n.props.curItem),dataList:[],dataErrorLevel:[],dataErrorType:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList(),this.getListErrorLevel(),this.getListErrorType()}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,this.setState({searchParam:s})}}},{key:"getListErrorType",value:function(){var e=this,t={id_language:this.employee.id_language};Wa.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorType:t}):e.setState({dataErrorType:[]})}))}},{key:"getListErrorLevel",value:function(){var e=this,t={id_language:this.employee.id_language};Va.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorLevel:t}):e.setState({dataErrorLevel:[]})}))}},{key:"getList",value:function(){var e=this,t=this.state.curItem,a=this.state.searchParam;a.id_language=this.employee.id_language,a.id=t.id,a.type="private",Ls.instance.getListAlertByDevice(a,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.date_from=null,t.date_to=null,t.id_error_level=null,t.id_error_type=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ts=Object(f.a)("common")(Ss);a(849);function Rs(){var e=this,t=(this.props.t,this.state),a=t.chartParams,i=t.dataFilter,s=t.chartToolOption,n=t.dataParameter,c=null;b.a.isArrayData(i)&&(c=i.map((function(t,i){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==a.id_filter?"item active":"item",children:t.text},i)})));var r=null;if(!b.a.isObjectEmpty(a))switch(a.id_filter){case"today":r=Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6"}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})]});break;case"3_day":r=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:a.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":r=Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6"}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})})]});break;case"12_month":r=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:a.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:a.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:a.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}return Object(m.jsx)("div",{className:"device-charting",children:Object(m.jsx)("div",{className:"main-chart-view",children:Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"main-param",children:Object(m.jsxs)("div",{className:"list-parameter",children:[Object(m.jsx)("h2",{children:"Parameter"}),Object(m.jsx)("div",{className:"list-params",children:Object(m.jsx)("ul",{children:b.a.isArrayData(n)?n.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"parameter_"+a,inputName:"parameter",labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleParameterInputChange(t,a)},label:t.name})},a)})):""})})]})}),Object(m.jsxs)("div",{id:"chart-view",className:"chart-view",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadData.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})}),Object(m.jsxs)("div",{className:"col-xl-11 col-lg-11 col-md-11",children:[Object(m.jsxs)("div",{className:a.show_filter?"filter on":"filter",children:["today"==a.id_filter||"3_day"==a.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,1),className:1==a.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==a.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==a.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[a.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:c})]}),r?Object(m.jsx)("div",{className:"time-filter",children:r}):""]})]})}),Object(m.jsx)("div",{className:"chart-content",children:b.a.isObjectEmpty(s)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:s},Math.random())})]})]})})})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Fs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.start_date=b.a.getCurrentMMDDYYYYHI(),a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.loadDataChart()}))}}},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.loadDataChart()})))},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.downloadData=function(){var e=n.state.dataExport;if(b.a.isArrayData(e)){for(var t=[],a={},i=0;i<e.length;i++){t.push(e[i].name);var s=[],c=e[i].data;b.a.isArrayData(c)&&c.map((function(e,t){s.push(e)}));var r=La.utils.json_to_sheet(s,{skipHeader:!1});a[e[i].name]=r}var l={SheetNames:t,Sheets:a},o=La.write(l,{bookType:"xlsx",type:"array"}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(d,"export-charting-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={curItem:n.props.curItem,dataParameter:[],chartToolOption:{},dataExport:[],chartParams:{id_filter:"today",text_filter:"Today",show_filter:!1,max_date:b.a.getCurrentDDMMYYYY(),data_send_time:1},dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}]},n.jsxTemplate=Rs,n.handleParameterInputChange=n.handleParameterInputChange.bind(Object(p.a)(n)),n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataListHardware(),this.loadConfigDefaultDate(),document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"loadConfigDefaultDate",value:function(){var e=this.state.chartParams;switch(e.id_filter){case"today":e.max_date=b.a.getCurrentMMDDYYYYHI(),e.end_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":e.end_date=b.a.getCurrentDDMMYYYY(),e.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),e.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY");break;case"this_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");break;case"last_month":e.max_date=Ye()().format("MM/YYYY");var t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).endOf("month").format("MM/YYYY"),e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");var i;t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-12)).format("MM/YYYY"),e.max_start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}this.setState({chartParams:e})}},{key:"getDataListHardware",value:function(){var e=this,t=this.state.curItem,a=Object.assign({},t);a.id_language=this.employee.id_language,a.id_employee=this.employee.id_employee,a.type="private",Ls.instance.getDataListHardware(a,(function(t,a){b.a.isArrayData(t)?e.setState({dataParameter:t}):e.setState({dataParameter:[]})}))}},{key:"handleParameterInputChange",value:function(e,t){var a=this.state,i=a.dataParameter,s=a.curItem,n=this;if(b.a.isArrayData(i)){var c=i[t];b.a.isObjectEmpty(c)||(i[t].is_checked=i[t].is_checked?0:1,i[t].id_device=s.id,this.setState({dataParameter:i},(function(){n.loadDataChart()})))}}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.chartParams;switch(s.id_filter){case"today":case"last_month":case"this_month":s.start_date=i,s[a]=i;break;case"3_day":if("start_date"==a){s.start_date=i;var n=i.split("/");if(n){var c=n[2]+"/"+n[1]+"/"+n[0];s.end_date=Ye()(b.a.addDays(c,2)).format("DD/MM/YYYY")}}if("end_date"==a){s.end_date=i;var r=i.split("/");if(r){var l=r[2]+"/"+r[1]+"/"+r[0];s.start_date=Ye()(b.a.addDays(l,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){s.start_date=i;var o=i.split("/");if(o){var d=o[1]+"/"+o[0]+"/01",h=Ye()(d).startOf("month").format("YYYY-MM-DD");s.end_date=Ye()(b.a.addMonths(h,12)).format("MM/YYYY")}}if("end_date"==a){s.end_date=i;var m=i.split("/");if(m){var u=m[1]+"/"+m[0]+"/01",p=Ye()(u).startOf("month").format("YYYY-MM-DD");s.start_date=Ye()(b.a.addMonths(p,-12)).format("MM/YYYY")}}}this.setState({chartParams:s}),this.loadDataChart()}}},{key:"loadDataChart",value:function(){var e=this,t=this.state,a=t.chartParams,i=t.dataDevice,s=t.dataParameter,n=t.curItem,c=this,r={};i=[];if(b.a.isObjectEmpty(n)||i.push(n),b.a.isArrayData(i)&&b.a.isArrayData(s)){var l={};switch(a.id_filter){case"today":l.start_date=b.a.convertAllFormatDate(b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),l.end_date=b.a.convertAllFormatDate(b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":l.start_date=b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",l.end_date=b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":l.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",l.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00";break;case"lifetime":case"12_month":l.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",l.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00"}l.id_language=this.employee.id_language,l.id_employee=this.employee.id_employee;var o=i.reduce((function(e,t){return e.find((function(e){return e.id===t.id}))?e:e.concat([t])}),[]);l.dataDevice=o,l.filterBy=a.id_filter,l.data_send_time=a.data_send_time,l.type="private";var d=document.getElementById("chart-view").clientHeight-80;r.chart={zoomType:"xy",height:d||null},r.credits={enabled:!1},r.exporting={enabled:!0},r.title={text:null,align:"left"},r.xAxis=[],r.yAxis=[],r.tooltip={shared:!0,crosshairs:!0},r.plotOptions={series:{turboThreshold:5e3},column:{stacking:"normal"}},r.series=[];var h=24;switch(a.id_filter){case"today":1==a.data_send_time?h=24:2==a.data_send_time?h=12:3==a.data_send_time&&(h=2);break;case"3_day":1==a.data_send_time?h=168:2==a.data_send_time?h=57:3==a.data_send_time&&(h=15);break;case"last_month":case"this_month":h=4;break;case"lifetime":case"12_month":h=1}var m=s.filter((function(e){return 1==e.is_checked}));b.a.isArrayData(m)&&$a.instance.getChartByListDevice(l,(function(t,a){if(b.a.isArrayData(t)){for(var i=[],s=[],n=[],l=[],o=0;o<m.length;o++){if(0===o)l.push(m[o]),n.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(m[o].unit)?"":m[o].unit,enabled:!0},opposite:!1});else{var d=b.a.find(l,"unit",m[o].unit);b.a.isObjectEmpty(d)&&(l.push(m[o]),n.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(m[o].unit)?"":m[o].unit,enabled:!0},opposite:!0}))}var u=0;b.a.isArrayData(l)&&l.map((function(e,t){m[o].unit==e.unit&&(u=t)}));for(var p=0,j=t.length;p<j;p++){var v={name:m[o].name,type:"spline",yAxis:u,tooltip:{valueSuffix:" "+(b.a.isBlank(m[o].unit)?"":m[o].unit)},data:[],gridLineWidth:1,lineWidth:1,marker:{radius:1.5,enabled:!1}},_=t[p].data,g=[];if(b.a.isArrayData(_))for(var f=0;f<_.length;f++){var x=!b.a.isBlank(_[f][m[o].slug])&&_[f][m[o].slug]>0?_[f][m[o].slug]:null;g.push([_[f].time_full,x]),0===p&&i.push(_[f].categories_time)}v.data=g,s.push(v)}}b.a.isArrayData(i)&&b.a.isArrayData(s)&&b.a.isArrayData(n)&&(r.xAxis=[{categories:i,alignTicks:!0,tickInterval:h}],r.series=s,r.yAxis=n,e.setState({chartToolOption:r,dataExport:t}),c.forceUpdate())}else c.setState({chartToolOption:{},dataExport:[]})}))}}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Hs=Object(f.a)("common")(Fs);function Bs(){var e,t=this,a=this.state,i=a.dataDeviceHardware,s=a.curItem,n=this.props.t;e=i.map((function(e,a){return Object(m.jsx)(Ps,{index:a,dataItem:e,actions:t.actions,t:n},"row_item_"+a)}));var c=null;switch(this.state.show_tab){case 1:break;case 2:c=Object(m.jsx)(Ts,{curItem:s,actions:this.actions,auth:this.props.auth});break;case 3:c=Object(m.jsx)(Hs,{curItem:s,actions:this.actions,auth:this.props.auth})}return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-device",dialogClassName:"modal-xl modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:s.name}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseViewDevice.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("div",{className:"device-tab",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{onClick:this.onClickShowTab.bind(this,1),className:1==this.state.show_tab?"active":"",children:n("device.hardware")}),Object(m.jsx)("li",{onClick:this.onClickShowTab.bind(this,2),className:2==this.state.show_tab?"active":"",children:n("device.alarms")}),Object(m.jsx)("li",{onClick:this.onClickShowTab.bind(this,3),className:3==this.state.show_tab?"active":"",children:n("device.charting")})]})}),c||Object(m.jsxs)("div",{className:"box-info-content",children:[Object(m.jsx)("div",{className:"device-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-md-4",children:[Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.device_name"),": "]}),s.name]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.model"),": "]}),s.model]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.serial_number"),": "]}),s.serial_number]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.id_device_type"),": "]}),s.device_type_name]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.manufacturer"),": "]}),s.manufacturer]}),Object(m.jsxs)("p",{className:"name",children:[Object(m.jsxs)("strong",{children:[n("device.installed_at"),": "]}),s.installed_at]})]}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:n("device.last_communication")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:s.last_communication})})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:n("device.last_attempt")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:s.last_attempt})})})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)("div",{onClick:this.reloadLatestData.bind(this),className:"reload-device",children:n("device.reload_latest_data")})})]})}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:n("device.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:n("device.data_name")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:n("device.value")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:n("device.unit")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:n("common.data_empty")}):e})})]})})]})]})})]})}var Us=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickShowTab=function(e){s.setState({show_tab:e})},s.state={curItem:s.props.curItem,dataDeviceType:[],dataList:[],show_tab:s.props.show_tab,dataDeviceHardware:[]},s.jsxTemplate=Bs,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataListHardware()}},{key:"getDataListHardware",value:function(){var e=this,t=this.state.curItem,a=Object.assign({},t);a.id_language=this.employee.id_language,a.id_employee=this.employee.id_employee,Ua.instance.getDataListHardware(a,(function(a,i){b.a.isArrayData(a)?(t.last_communication=a[0].last_communication,t.last_attempt=a[0].last_attempt,e.setState({dataDeviceHardware:a,curItem:t})):e.setState({dataDeviceHardware:[]})}))}},{key:"reloadLatestData",value:function(){this.getDataListHardware()}}]),a}(ee);function Vs(){var e=this.state.curItem;console.log(e);var t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("device.device"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseOnOff.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:1==e.status?Object(m.jsx)("p",{children:t("device.message_off")}):Object(m.jsx)("p",{children:t("device.message_on")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.onClickCloseOnOff.bind(this,!1),className:"btn btn-cancel",text:" "+t("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickOnOffAction.bind(this),className:"btn btn-save",text:t("common.yes"),title:t("common.yes")})]})]})}var Ws=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=Vs,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onClickOnOffAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=1==t.status?0:1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Ls.instance.updateOnOff(t,(function(e,t){e?(a.toast(t,"info"),a.props.onClickCloseOnOff(!0)):b.a.isBlank(t)||a.toast(t,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee),qs=a(84);function zs(){var e=this,t=this.state,a=t.curItem,i=t.eventsList,s=t.searchParam;Ye.a.locale("en-GB"),console.log(a);var n=this.props.t,c=Object(qs.b)(Ye.a);return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-control-calendar",dialogClassName:"modal-xl modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[n("device.control_calendar"),": Device ",a.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onCloseControlCalender.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("div",{className:"add-date",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{value:s.date_from,inputId:"date_from",format:"DD/MM/YYYY HH:mm",dateFormat:"dd/MM/yyyy HH:mm",inputClass:"form-control",inputName:"date_from",minDate:s.min_date,handleChange:function(t){e.handleInputDateChange(t),e.validateOne(t)},maxLength:20,showIconCalendar:!0,timeIntervals:60,showTimeSelect:!0})})}),Object(m.jsx)("div",{className:"col-md-1 text-center",children:Object(m.jsx)("span",{className:"to",children:"To"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{value:s.date_to,inputId:"date_to",format:"DD/MM/YYYY HH:mm",dateFormat:"dd/MM/yyyy HH:mm",inputClass:"form-control",inputName:"date_to",minDate:s.date_from,handleChange:function(t){e.handleInputDateChange(t),e.validateOne(t)},maxLength:20,showIconCalendar:!0,timeIntervals:60,showTimeSelect:!0,S:!0})})}),Object(m.jsx)("div",{className:"col-md-1",children:Object(m.jsx)(oe,{onClick:this.onClickAddControlCalendarAction.bind(this),className:"btn btn-save",text:n("device.add"),title:n("device.add")})})]})}),Object(m.jsx)(qs.a,{localizer:c,events:i,startAccessor:"start",endAccessor:"end",step:60,style:{height:500},defaultView:"week"})]})]})}var Gs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("date_from","trim",!0),this.addRuleForField("date_from","required",!0,this.trans("validate_rule.required"),this.trans("device.date_from")),this.addRuleForField("date_from","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.date_from")),this.addRuleForField("date_to","trim",!0),this.addRuleForField("date_to","required",!0,this.trans("validate_rule.required"),this.trans("device.date_to")),this.addRuleForField("date_to","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.date_to"))}},{key:"setAlias",value:function(){this.v.setAlias({date_from:this.trans("device.date_from"),date_to:this.trans("device.date_to")})}}]),a}(ue),$s=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onSelectEvent=function(e){console.log(e)},s.state={curItem:s.props.curItem,searchParam:{date_from:Ye()().format("DD/MM/YYYY HH:mm"),min_date:Ye()().format("DD/MM/YYYY HH:mm")},eventsList:[]},s.jsxTemplate=zs,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListControlCalendar()}},{key:"getListControlCalendar",value:function(){var e=this,t=this.state.curItem,a=Object.assign({},t);a.id_device=t.id;var i=[];Ls.instance.getListControlCalendar(a,(function(t,a){console.log(t),b.a.isArrayData(t)?(t.map((function(e,t){i.push({title:e.title,start:new Date(e.start),end:new Date(e.end),index:t,id:e.id,id_device:e.id_device})})),e.setState({eventsList:i})):e.setState({eventsList:[]})}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,"date_from"==a&&(s.date_to=Ye()(b.a.dateFormat(i,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm")).add(2,"hours").format("DD/MM/YYYY HH:mm")),this.setState({searchParam:s})}}},{key:"onClickAddControlCalendarAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.curItem,i=t.searchParam,s=this,n=Object.assign({},i),c=new Gs(this.props),e.next=5,c.FLValidationAll(n);case 5:if(!(r=e.sent)){e.next=9;break}return this.setValidateMessage(r),e.abrupt("return");case 9:if(this.removeAllValidateMessage(),n.screen_mode=v.a.SCREEN_MODE.ADD,!b.a.isBlank(a.id)){e.next=13;break}return e.abrupt("return");case 13:n.id_device=a.id,n.date_from=b.a.dateFormat(i.date_from,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),n.date_to=b.a.dateFormat(i.date_to,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),Ls.instance.saveControlCalendar(n,(function(e,t,a){e?(s.toast(a,"info"),i.date_from=null,i.date_to=null,s.setState({searchParam:i})):t?s.setValidateMessage(t):b.a.isBlank(a)||s.toast(a,"error")}),!0);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Gs(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(ee),Ks=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onClickOnOff=function(){e.props.onClickOnOff&&"function"===typeof e.props.onClickOnOff&&e.props.onClickOnOff(e.props.index)},e.onClickControlCalender=function(){e.props.onClickControlCalender&&"function"===typeof e.props.onClickControlCalender&&e.props.onClickControlCalender(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsx)("li",{className:"col-md-3",children:Object(m.jsxs)("div",{className:"inverter-item",children:[Object(m.jsx)("div",{className:"title",children:e.name}),Object(m.jsx)("div",{className:"iv-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("img",{src:"/inverter.png",className:1==e.status?"on":"off"})}),Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsx)("div",{className:"mccb",children:"MCCB"}),Object(m.jsx)("div",{onClick:this.onClickOnOff.bind(this),className:1==e.status?"action-on-off on":"action-on-off off",children:1==e.status?"ON":"OFF"})]})]})}),Object(m.jsxs)("div",{className:"iv-content",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Power"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.activePower})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"kW"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"PF"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.powerFactor})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Temp"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.internalTemperature})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"\u2103"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Efficiency"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"90"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"%"})})]})]}),Object(m.jsx)("div",{className:"calendar-onoff",children:Object(m.jsx)("span",{onClick:this.onClickControlCalender.bind(this),children:"Control Calendar"})})]})},this.props.index)}}]),a}(r.Component);function Js(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam,l=i.show_tab,o=i.tab_on_off,d=i.dataListInverter;e=n.map((function(e,i){return Object(m.jsx)(Is,{index:i,dataItem:e,actions:t.actions,onClickViewDevice:t.onClickViewDevice,onClickChartDevice:t.onClickChartDevice,viewAlertDevice:t.viewAlertDevice,t:a},"row_item_"+i)}));var h=this.state.viewDevice?Object(m.jsx)(Us,{t:a,allLanguage:c,curItem:s,onClickCloseViewDevice:this.onClickCloseViewDevice,auth:this.props.auth,actions:this.actions,show_tab:l,iso_code_language:this.employee.lang}):"",u=this.state.showOnOffPopup?Object(m.jsx)(Ws,{t:a,curItem:s,onClickCloseOnOff:this.onClickCloseOnOff,auth:this.props.auth,actions:this.actions}):"",p=this.state.showControlCalendar?Object(m.jsx)($s,{t:a,curItem:s,onCloseControlCalender:this.onCloseControlCalender,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"devices",children:[Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random()),h,u,p,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"device-tab-scada",children:Object(m.jsx)("ol",{children:Object(m.jsx)("li",{onClick:this.setTabOnOff.bind(this,1),className:1==o?"active":"",children:a("device.title")})})})}),1==o?Object(m.jsxs)("div",{className:"col-md-6 text-end",children:[Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"btn-download",children:Object(m.jsx)("span",{className:"icon-download"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})})]}),Object(m.jsx)("div",{className:"date",children:Object(m.jsx)(Ee,{value:r.current_date,inputId:"current_date",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"current_date",maxDate:r.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})]}):""]})}),2==o?Object(m.jsx)("div",{className:"tab-control",children:Object(m.jsx)("ul",{className:"row",children:b.a.isArrayData(d)?d.map((function(e,i){return Object(m.jsx)(Ks,{index:i,dataItem:e,actions:t.actions,onClickOnOff:t.onClickOnOff,onClickControlCalender:t.onClickControlCalender,t:a},"row_item_"+i)})):""})}):Object(m.jsxs)("div",{className:"main-device-tab",children:[this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("device.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsx)("div",{className:"data-view",children:Object(m.jsxs)("div",{className:"main-device-scroll",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{style:{width:"100px"},className:"header-col width5",children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{style:{width:"150px"},onClick:function(e){return t.onSort(e,"name")},className:"name"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("device.device_name")})}),Object(m.jsx)("div",{style:{width:"150px"},onClick:function(e){return t.onSort(e,"model")},className:"model"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("device.model")})}),Object(m.jsx)("div",{style:{width:"250px"},onClick:function(e){return t.onSort(e,"serial_number")},className:"serial_number"===r.sort_column?"header-col width15 sorting "+r.order_by:"header-col width15 sorting",children:Object(m.jsx)("p",{children:a("device.serial_number")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.id_device_type")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.power")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.energy")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.last_month")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.lifetime")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10",children:Object(m.jsx)("p",{children:a("device.last_updated")})}),Object(m.jsx)("div",{style:{width:"150px"},className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]})}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})]})}var Xs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickControlCalender=function(e){var t=n.state.dataListInverter;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||n.setState({showControlCalendar:!0,curItem:a})}},n.onCloseControlCalender=function(){n.setState({showControlCalendar:!1})},n.onClickOnOff=function(e){var t=n.state.dataListInverter;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||n.setState({showOnOffPopup:!0,curItem:a})}},n.onClickCloseOnOff=function(e){e&&n.getListInverter(),n.setState({showOnOffPopup:!1})},n.downloadData=function(){var e=n.state.dataList;n.props.t;if(b.a.isArrayData(e)){for(var t=[],a=0,i=e.length;a<i;a++){var s=e[a].alerts,c=0,r=0,l=0,o=0,d=0;if(b.a.isArrayData(s))for(var h=0,m=s.length;h<m;h++)switch(parseInt(s[h].id)){case 1:c=s[h].total_alert;break;case 2:r=s[h].total_alert;break;case 3:l=s[h].total_alert;break;case 4:o=s[h].total_alert;break;case 5:d=s[h].total_alert}t.push({ID:e[a].id,"Device name":e[a].name,Model:e[a].model,"Serial number":e[a].serial_number,"Device type":e[a].device_type_name,"Power now":b.a.isBlank(e[a].power_now)?"N/A":b.a.formatNum(e[a].power_now,"#,###.##")+" kW","Energy today":b.a.isBlank(e[a].energy_today)?"N/A":b.a.formatNum(e[a].energy_today,"#,###.##")+" kWh",Lifetime:b.a.isBlank(e[a].lifetime)?"N/A":b.a.formatElectricalUnit(e[a].lifetime,"h"),Error:c,Warning:r,Info:l,Fatal:o,Debug:d})}var u={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(t,{skipHeader:!1})}},p=La.write(u,{bookType:"xlsx",type:"array"}),j=new Blob([p],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(j,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.onClickViewDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({show_tab:1,curItem:a,viewDevice:!0}))}},n.onClickChartDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({show_tab:3,curItem:a,viewDevice:!0}))}},n.viewAlertDevice=function(e){var t=n.state,a=t.dataList,i=t.curItem;if(b.a.isArrayData(a)){var s=a[e];b.a.isObjectEmpty(s)||(i.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:Object.assign(i,s),show_tab:2,viewDevice:!0}))}},n.onClickCloseViewDevice=function(e){n.setState({viewDevice:!1})},n.jsxTemplate=Js,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},dataList:[],dataListInverter:[],show_tab:1,tab_on_off:1,showOnOffPopup:!1,showControlCalendar:!1,searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1,max_date:b.a.getCurrentDDMMYYYY(),current_date:b.a.getCurrentDDMMYYYY()},viewDevice:!1,formSearch:!1},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){2==this.state.tab_on_off?this.getListInverter():this.getList()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.tab_on_off;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){2==a?t.getListInverter():t.getList()}))}},{key:"setTabOnOff",value:function(e){var t=this;this.setState({tab_on_off:e},(function(){2==e?t.getListInverter():t.getList()}))}},{key:"getListInverter",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,t.hash_id=this.state.hash_id,t.type="private",Ls.instance.getListInverter(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListInverter:t}):e.setState({dataListInverter:[]}),e.forceUpdate()}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=this,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),a){var n=this.state.searchParam;n[a]=s,this.setState({searchParam:n},(function(){i.getPowerNowByDay()}))}}},{key:"getPowerNowByDay",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.dataList,i=t.searchParam,s=this,b.a.isArrayData(a)){e.next=3;break}return e.abrupt("return");case 3:return(i=Object.assign({},i)).current_date=b.a.dateFormat(i.current_date,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),i.dataList=a,e.next=8,Ls.instance.getPowerNowByDay(i,(function(e){e&&s.setState({dataList:e.dataList})}),!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,t.hash_id=this.state.hash_id,t.type="private",Ls.instance.getListDeviceByHashId(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Zs=Object(f.a)("common")(Xs),Qs=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.handleCheckItemInputChange=function(){e.props.handleCheckItemInputChange&&"function"===typeof e.props.handleCheckItemInputChange&&e.props.handleCheckItemInputChange(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsxs)("p",{className:"d-inline-block",children:[" ",Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+t.thumbnail})," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{className:"d-inline-block",children:[t.id," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[t.error_level_name," "]})}),Object(m.jsxs)("div",{className:"body-col width25",children:[Object(m.jsxs)("p",{className:"text-truncate",children:[Object(m.jsxs)("strong",{children:["Device: ",t.name]})," ",Object(m.jsx)("br",{})]}),Object(m.jsx)("p",{"data-for":"tooltip_"+this.props.index,className:"d-inline-block text-truncate",style:{maxWidth:"100%"},"data-tip":"","data-type":"error","data-class":"tooltip-action custom-tooltip",children:b.a.isBlank(t.message)?t.description:t.message}),Object(m.jsx)(Je.a,{id:"tooltip_"+this.props.index,children:Object(m.jsxs)("div",{className:"error-content",children:[Object(m.jsx)("h2",{children:"issue"}),Object(m.jsxs)("div",{className:"content",children:[b.a.isBlank(t.message)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.message"),":"]})," ",t.message]}),b.a.isBlank(t.description)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.description"),":"]})," ",t.description]}),b.a.isBlank(t.solutions)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.solutions"),":"]})," ",t.solutions]})]})]})})]}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:1==t.status?Object(m.jsx)("span",{className:"opened",children:a("activities.opened")}):Object(m.jsx)("span",{className:"closed",children:a("activities.close")})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.start_date_format})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[t.times_ago>0?t.times_ago:""," "+a("common."+t.times_ago_unit),t.times_ago>1&&"s"]})}),Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):"","data-tip":a("common.view"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-eye","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):"","data-tip":a("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})}),Object(m.jsx)("div",{className:"body-col width5 text-end",children:Object(m.jsx)(ne,{inputId:"alert_"+t.id,inputName:"alert",labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleCheckItemInputChange(t,e.props.index)},label:t.label})})]},t.id)}}]),a}(r.Component);function en(){var e=this,t=this.state,a=t.curItem,i=t.dataErrorLevel,s=t.dataStatus,n=t.dataErrorType,c=t.dataAlertState,r=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:r("activities.alert_detail")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsxs)("h2",{children:[r("activities.device"),": ",a.name]}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"alert-information",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("span",{className:"alert alert-success",children:[r("activities.opened"),": ",a.start_date_format]})}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"alert alert-danger",children:[b.a.isBlank(a.message)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[r("activities.message"),":"]})," ",a.message]}),b.a.isBlank(a.description)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[r("activities.description"),":"]})," ",a.description]})]}),b.a.isBlank(a.solutions)?"":Object(m.jsxs)("div",{className:"solutions",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[r("activities.solutions"),":"]})}),Object(m.jsx)("p",{children:a.solutions})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{inputId:"is_follow",inputName:"is_follow",labelClass:"no-label",checked:a.is_follow,onChange:function(t){e.handleInputChange(t)},label:"Follow Alert"})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.id_error_level"),instanceId:"id_error_level",className:"id_error_level",name:"id_error_level",isDisabled:!0,value:i.filter((function(e){return e.id===a.id_error_level})),onChange:function(t){e.handleDropdownChange(t,"id_error_level")},optionList:i,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.id_error_type"),instanceId:"id_error_type",className:"id_error_type",name:"id_error_type",value:n.filter((function(e){return e.id===a.id_error_type})),onChange:function(t){e.handleDropdownChange(t,"id_error_type")},optionList:n,isDisabled:!0,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.status"),instanceId:"status",className:"status",name:"status",value:s.filter((function(e){return e.id===a.status})),onChange:function(t){e.handleDropdownChange(t,"status")},optionList:s,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"reminder",children:Object(m.jsx)("ul",{children:b.a.isArrayData(c)?c.map((function(t,i){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"reminder"+t.id,inputName:"reminder",labelClass:"no-label",checked:a.id_alert_state===t.id?1:0,onChange:function(t){e.handleAlertStateInputChange(i)},label:t.label})},i)})):""})})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:r("activities.note"),inputClass:"form-control",inputId:"note",inputName:"note",value:a.note,onChange:function(t){e.handleInputChange(t)},maxLength:1e3})})})]})]})})]})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:r("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:(a.screen_mode,v.a.SCREEN_MODE.EDIT,r("common.save"))})]})]})}var tn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleAlertStateInputChange=function(e){var t=s.state,a=t.dataAlertState,i=t.curItem;if(b.a.isArrayData(a)){var n=a[e];b.a.isObjectEmpty(n)||(i.id_alert_state=n.id,s.setState({curItem:i}))}},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.status="";else{var n=e.value;i[t]=n}a.setState({curItem:i})},s.state={curItem:s.props.curItem,dataErrorType:s.props.dataErrorType,dataErrorLevel:s.props.dataErrorLevel,dataStatus:s.props.dataStatus,dataAlertState:[]},s.jsxTemplate=en,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListAlertState()}},{key:"getListAlertState",value:function(){var e=this,t={id_language:this.employee.id_language};ni.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataAlertState:t}):e.setState({dataAlertState:[]})}))}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.curItem,a=this,(i=Object.assign({},t)).screen_mode=v.a.SCREEN_MODE.EDIT,i.id_employee=this.employee.id_employee,i.id_language=this.employee.id_language,i.type="private",s=[],i.is_follow&&s.push({id_employee:this.employee.id_employee,id_error:i.id_error,id_device:i.id_device}),i.dataFollow=s,si.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function an(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.id," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var sn=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ACTIVITIES.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ACTIVITIES.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"closeAlert",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ACTIVITIES.CLOSE_ALL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ACTIVITIES.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),nn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=an,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,t.type="private",sn.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);a(850);function cn(){var e=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[e("common.delete_all")," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDeleteAll.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:e("common.message_delete_all")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDeleteAll.bind(this),className:"btn btn-cancel",text:" "+e("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:e("common.no")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:e("common.yes"),title:e("common.yes")})]})]})}var rn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem,dataList:s.props.dataList},s.jsxTemplate=cn,s}return Object(s.a)(a,[{key:"onClickCloseDeleteAll",value:function(){this.props.onClickCloseDeleteAll&&"function"===typeof this.props.onClickCloseDeleteAll&&this.props.onClickCloseDeleteAll(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.assign({},this.state.curItem),a=this,i=this.state.dataList,s=[],b.a.isArrayData(i))for(n=0,c=i.length;n<c;n++)i[n].is_checked&&s.push({id:i[n].id,updated_by:this.employee.first_name+" "+this.employee.last_name,status:-1});t.dataArr=s,t.type="private",b.a.isArrayData(s)&&sn.instance.closeAlert(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDeleteAll(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function ln(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam,l=i.dataErrorLevel,o=i.dataStatus,d=i.dataErrorType;e=n.map((function(e,i){return Object(m.jsx)(Qs,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,actions:t.actions,handleCheckItemInputChange:t.handleCheckItemInputChange,t:a},"row_item_"+i)}));var h=this.state.add?Object(m.jsx)(tn,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang,dataErrorLevel:l,dataStatus:o,dataErrorType:d}):"",u=this.state.delete?Object(m.jsx)(nn,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"",p=this.state.deleteAll?Object(m.jsx)(rn,{t:a,curItem:s,onClickCloseDeleteAll:this.onClickCloseDeleteAll,auth:this.props.auth,actions:this.actions,dataList:n}):"",j=b.a.find(n,"is_checked",1);return Object(m.jsxs)("div",{className:"activities",children:[Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random()),h,u,p,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("activities.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"btn-download",children:Object(m.jsx)("span",{className:"icon-download"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),!b.a.isObjectEmpty(j)&&_.a.getPermisson(this.actions,v.a.AUTH_MODE.DEL)?Object(m.jsx)("li",{children:Object(m.jsx)("div",{"data-tip":a("common.delete_all"),"data-type":"warning","data-class":"tooltip-action",className:"search",onClick:this.onItemClickDeleteAll.bind(this),children:Object(m.jsx)("span",{className:"icon-trash-o"})})}):""]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:a("common.date_from"),value:r.date_from,inputId:"date_from",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_from",minDate:r.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:a("common.date_to"),value:r.date_to,inputId:"date_to",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_to",minDate:r.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{inputId:"is_follow",inputName:"is_follow",labelClass:"no-label",checked:r.is_follow,label:"Follow Alert",onChange:function(e){t.handleInputDateChange(e)}})})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Type"}),Object(m.jsx)("ul",{children:b.a.isArrayData(d)?d.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_error_type_"+a,inputName:"id_error_type",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckTypeInputChange(e,a)}})},a)})):""})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Level"}),Object(m.jsx)("ul",{children:b.a.isArrayData(l)?l.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_error_level_"+a,inputName:"id_error_level",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckLevelInputChange(e,a)}})},a)})):""})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Status"}),Object(m.jsx)("ul",{children:b.a.isArrayData(o)?o.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"status_"+a,inputName:"status",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckStatusInputChange(e,a)}})},a)})):""})]})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5"}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:"ID"})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_type")},className:"id_error_type"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.alert_type")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_level")},className:"id_error_level"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.level")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"message")},className:"message"===r.sort_column?"header-col width25 sorting "+r.order_by:"header-col width25 sorting",children:Object(m.jsx)("p",{children:a("activities.issus")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.status")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"start_date_format")},className:"start_date_format"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.opened")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:a("activities.open_period")})}),Object(m.jsx)("div",{className:"header-col width5 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})}),Object(m.jsx)("div",{className:"header-col width5 text-end",children:Object(m.jsx)(ne,{inputId:"checked_all",inputName:"checked_all",labelClass:"no-label",checked:this.state.checked_all,onChange:function(e){t.handleCheckAllInputChange(e)}})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var on=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleCheckStatusInputChange=function(e,t){var a=n.state.dataStatus;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataStatus:a}))},n.handleCheckTypeInputChange=function(e,t){var a=n.state.dataErrorType;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataErrorType:a}))},n.handleCheckLevelInputChange=function(e,t){var a=n.state.dataErrorLevel;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataErrorLevel:a}))},n.downloadData=function(){var e=n.state.dataList,t=n.props.t;if(b.a.isArrayData(e)){for(var a=[],i=0,s=e.length;i<s;i++){var c=e[i].times_ago+" "+t("common."+e[i].times_ago_unit)+(e[i].times_ago>1&&"s");a.push({ID:e[i].id,"Device Name":e[i].name,Type:e[i].error_type_name,Level:e[i].error_level_name,Opened:e[i].start_date_format,"Open period":c,Message:e[i].message,Description:e[i].description,Solutions:e[i].solutions,Note:e[i].note,"Review status":e[i].alert_state_name})}var r={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(a,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.handleCheckItemInputChange=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t[e].is_checked=t[e].is_checked?0:1,n.setState({dataList:t}))}},n.handleCheckAllInputChange=function(){var e=n.state,t=e.dataList,a=e.checked_all;if(b.a.isArrayData(t)){for(var i=0,s=t.length;i<s;i++)t[i].is_checked=a?0:1;n.setState({dataList:t,checked_all:a?0:1})}},n.handleDropdownChange=function(e,t){if(!b.a.isObjectEmpty(e)){var a=Object(p.a)(n),i=e.value,s=a.state.searchParam;"id_error_level"===t&&b.a.isObjectEmpty(e)&&(s.id_error_level=""),"id_error_type"===t&&b.a.isObjectEmpty(e)&&(s.id_error_type=""),"status"===t&&b.a.isObjectEmpty(e)&&(s.status=""),s[t]=i,a.setState({searchParam:s})}},n.onClickCloseDeleteAll=function(e,t){e&&t&&n.getList(),n.setState({deleteAll:!1})},n.onItemClickDeleteAll=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,deleteAll:!0})}},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];if(!b.a.isObjectEmpty(t))n.state.curItem.id=t.id,t.screen_mode=v.a.SCREEN_MODE.EDIT,n.setState({curItem:t,add:!0})}},n.jsxTemplate=ln,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,checked_all:0,curItem:{},dataList:[],dataErrorType:[],dataErrorLevel:[],dataStatus:[{id:1,value:1,label:"Opened",is_checked:0},{id:0,value:0,label:"Closed",is_checked:0}],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},viewActivities:!1,formSearch:!1,delete:!1,deleteAll:!1,add:!1},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListErrorLevel(),this.getListErrorType()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getListErrorLevel(),t.getListErrorType()}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,this.setState({searchParam:s})}}},{key:"getListErrorType",value:function(){var e=this,t={id_language:this.employee.id_language};Wa.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorType:t}):e.setState({dataErrorType:[]})}))}},{key:"getListErrorLevel",value:function(){var e=this,t={id_language:this.employee.id_language};Va.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorLevel:t},(function(){e.getList()})):e.setState({dataErrorLevel:[]})}))}},{key:"getList",value:function(){var e=this,t=this.state,a=t.dataErrorLevel,i=t.dataErrorType,s=t.dataStatus,n=this.state.searchParam;n.id_language=this.employee.id_language,n.id_employee=this.employee.id_employee,n.hash_id=this.state.hash_id,n.errorLevel=a.filter((function(e){return 1==e.is_checked})),n.errorType=i.filter((function(e){return 1==e.is_checked})),n.dataStatus=s.filter((function(e){return 1==e.is_checked})),n.type="private",sn.instance.getList(n,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.date_from=null,t.date_to=null,t.id_error_level=null,t.id_error_type=null,t.status=null,t.is_follow=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),dn=Object(f.a)("common")(on),hn=(a(851),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=t.dataParameter;return Object(m.jsxs)("li",{children:[Object(m.jsx)("div",{className:"item-title",children:t.device_group_name}),Object(m.jsx)("div",{className:"sub-parameter",children:Object(m.jsx)("ul",{children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"parameter_"+e.props.index+"_"+t.id,inputName:"parameter_"+e.props.index+"_"+t.id,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.props.handleParameterInputChange(t,e.props.index,a)},label:t.name})},t.id)})):""})})]},this.props.index)}}]),a}(r.Component));function mn(){var e=this,t=(this.props.t,this.state),a=(t.curItem,t.dataListDevice),i=(t.dataList,t.chartParams,t.dataFilter,t.chartOption,t.dataStatus,t.dataDevice,t.dataParameter),s=null;return b.a.isArrayData(i)&&(s=i.map((function(t,a){return Object(m.jsx)(hn,{dataItem:t,index:a,handleParameterInputChange:e.handleParameterInputChange,auth:e.props.auth,actions:e.props.actions},a)}))),Object(m.jsxs)("div",{className:"list-parameter",children:[Object(m.jsxs)("div",{className:"title",children:[Object(m.jsxs)("h2",{children:["Devices ",Object(m.jsx)("span",{onClick:this.showFilterParameter.bind(this),children:Object(m.jsx)("var",{className:"icon-angle-right"})})]}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsx)("ul",{children:b.a.isArrayData(a)?a.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"device_"+a,inputName:"device_"+a,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleDeviceInputChange(t,a)},label:t.name})},a)})):""})})]}),this.state.show_parameter?Object(m.jsxs)("div",{className:"chart-device-param",children:[Object(m.jsxs)("h2",{children:["Parameter ",Object(m.jsx)("span",{onClick:this.closeFilterParameter.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"device-parameter",children:Object(m.jsx)("ul",{children:s})}),Object(m.jsxs)("div",{className:"parameter-footer",children:[Object(m.jsx)("span",{onClick:this.clearFilterParameter.bind(this),className:"remove",children:"Clear"}),Object(m.jsx)("span",{onClick:this.addFilterParameter.bind(this),className:"add",children:"Add"})]})]}):""]})}var un=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).showFilterParameter=function(){n.setState({show_parameter:!0})},n.addFilterParameter=function(){var e=n.state,t=e.dataListDevice,a=e.dataParameter,i=Object(p.a)(n);if(b.a.isArrayData(a)){var s=t.filter((function(e){return 1==e.is_checked}));if(b.a.isArrayData(s)){var c=0;a.map((function(e,t){var a=e.dataParameter,i=b.a.find(a,"is_checked",1);b.a.isObjectEmpty(i)||(c+=1)})),0!=c&&n.setState({show_parameter:!1},(function(){i.props.callBackLoadChart(s,a)}))}}},n.closeFilterParameter=function(){n.setState({show_parameter:!1})},n.clearFilterParameter=function(){var e=n.state.dataParameter;b.a.isArrayData(e)&&(e.map((function(t,a){var i=t.dataParameter;if(b.a.isArrayData(i))for(var s=0,n=i.length;s<n;s++)i[s].is_checked=0;e[a].dataParameter=i})),n.setState({dataParameter:e}))},n.handleParameterInputChange=function(e,t,a){var i=n.state.dataParameter;if(b.a.isArrayData(i)){var s=i[t];if(!b.a.isObjectEmpty(s)){var c=s.dataParameter;b.a.isArrayData(c)&&(i[t].dataParameter[a].is_checked=i[t].dataParameter[a].is_checked?0:1,n.setState({dataParameter:i}))}}},n.handleDeviceInputChange=function(e,t){var a=n.state.dataListDevice;if(b.a.isArrayData(a)){var i=a[t];if(!b.a.isObjectEmpty(i)){if(0==a[t].is_checked){var s=a[t].dataParameter;if(b.a.isArrayData(s))for(var c=0,r=s.length;c<r;c++)s[c].is_checked=0;a[t].dataParameter=s}a[t].is_checked=a[t].is_checked?0:1;var l=a.filter((function(e){return 1==e.is_checked}));n.setState({dataListDevice:a,dataParameter:b.a.getUnique(l,"id_device_group"),show_parameter:!0})}}},n.state={curItem:{},dataListDevice:n.props.dataListDevice,show_parameter:!1,dataParameter:n.props.dataParameter},n.jsxTemplate=mn,n}return Object(s.a)(a,[{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),pn=Object(f.a)("common")(un);function jn(){var e=this,t=(this.props.t,this.state),a=t.curItem,i=t.dataParameter,s=t.dataListDevice,n=t.chartToolOption,c=t.chartParams,r=t.dataFilter,l=(i=t.dataParameter,null);b.a.isArrayData(r)&&(l=r.map((function(t,a){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==c.id_filter?"item active":"item",children:t.text},a)})));var o=null;if(!b.a.isObjectEmpty(c))switch(c.id_filter){case"today":o=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})});break;case"3_day":o=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:c.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":o=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})});break;case"12_month":o=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:c.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:c.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:c.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}return Object(m.jsxs)("div",{className:"chart-view",children:[Object(m.jsx)(pn,{dataParameter:i,callBackLoadChart:this.callBackLoadChart,dataListDevice:s,auth:this.props.auth,actions:this.props.actions},Math.random()),Object(m.jsx)("div",{id:"main-chart-view",className:"main-chart-view",children:Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-1 col-lg-1 col-md-1",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadData.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})}),Object(m.jsxs)("div",{className:"col-xl-11 col-lg-11 col-md-11",children:[Object(m.jsxs)("div",{className:c.show_filter?"filter on":"filter",children:["today"==c.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:2!=a.data_send_time?this.changeViewMinute.bind(this,1):"",className:1!=a.data_send_time?"disabled":1==c.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==c.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==c.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[c.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:l})]}),Object(m.jsx)("div",{className:"time-filter",children:o})]})]})}),Object(m.jsx)("div",{ref:this.myRef,className:"chart-content",children:b.a.isObjectEmpty(n)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:n})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var bn=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDataChartProfile",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ANALYTICS.CHART_PROFILE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getListDeviceByProject",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ANALYTICS.LIST_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getChartByListDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ANALYTICS.CHART_PARAMETER_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getChartAlarm",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_ANALYTICS.CHART_ALARM,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),vn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).callBackLoadChart=function(e,t){var a=Object(p.a)(n);b.a.isArrayData(e)&&b.a.isArrayData(t)&&n.setState({dataDevice:e,dataParameter:t},(function(){a.loadDataChart()}))},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.loadDataChart()})))},n.handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.loadDataChart()}))}}},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.downloadData=function(){var e=n.state.dataExport;if(b.a.isArrayData(e)){for(var t=[],a={},i=0;i<e.length;i++){t.push(e[i].name);var s=[],c=e[i].data;b.a.isArrayData(c)&&c.map((function(e,t){s.push(e)}));var r=La.utils.json_to_sheet(s,{skipHeader:!1});a[e[i].name]=r}var l={SheetNames:t,Sheets:a},o=La.write(l,{bookType:"xlsx",type:"array"}),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(d,"export-charting-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:n.props.hash_id,curItem:{data_send_time:1,type:2},dataExport:[],dataListDevice:[],dataChartDevice:[],chartToolOption:{},dataParameter:[],dataDevice:[],dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}],chartParams:{id_filter:"today",text_filter:"Today",show_filter:!1,max_date:b.a.getCurrentDDMMYYYY(),data_send_time:1}},n.jsxTemplate=jn,n.wrapperRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListDeviceByProject(),this.loadConfigDefaultDate(),document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"loadDataChart",value:function(){var e=this,t=this.state,a=t.chartParams,i=t.dataDevice,s=t.dataParameter,n=this;if(b.a.isArrayData(i)&&b.a.isArrayData(s)){var c={},r={};switch(a.id_filter){case"today":r.start_date=b.a.convertAllFormatDate(b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),r.end_date=b.a.convertAllFormatDate(b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":r.start_date=b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",r.end_date=b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":r.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",r.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00";break;case"lifetime":case"12_month":r.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",r.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00"}r.id_language=this.employee.id_language,r.id_employee=this.employee.id_employee,r.dataDevice=i,r.filterBy=a.id_filter,r.data_send_time=a.data_send_time;var l=document.getElementById("main-chart-view").clientHeight-60;c.chart={zoomType:"xy",height:l||null},c.credits={enabled:!1},c.exporting={enabled:!0},c.title={text:null,align:"left"},c.xAxis=[],c.yAxis=[],c.tooltip={shared:!0,crosshairs:!0},c.plotOptions={series:{turboThreshold:5e3},column:{stacking:"normal"}},c.series=[];var o=24;switch(a.id_filter){case"today":1==a.data_send_time?o=24:2==a.data_send_time?o=12:3==a.data_send_time&&(o=2);break;case"3_day":1==a.data_send_time?o=168:2==a.data_send_time?o=57:3==a.data_send_time&&(o=15);break;case"last_month":case"this_month":o=4;break;case"lifetime":case"12_month":o=1}for(var d=[],h=0,m=s.length;h<m;h++){var u=s[h].dataParameter;if(!b.a.isArrayData(u))return;var p=u.filter((function(e){return 1==e.is_checked}));b.a.isArrayData(p)&&d.push.apply(d,Object(_a.a)(p))}console.log("paramerter: ",d),b.a.isArrayData(d)&&(r.type="private",bn.instance.getChartByListDevice(r,(function(t,a){if(b.a.isArrayData(t)){for(var i=[],s=[],r=[],l=[],h=0;h<d.length;h++){if(0===h)l.push(d[h]),r.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(d[h].unit)?"":d[h].unit,enabled:!0},opposite:!1});else{var m=b.a.find(l,"unit",d[h].unit);b.a.isObjectEmpty(m)&&(l.push(d[h]),r.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(d[h].unit)?"":d[h].unit,enabled:!0},opposite:!0}))}var u=0;b.a.isArrayData(l)&&l.map((function(e,t){d[h].unit==e.unit&&(u=t)}));for(var p=0,j=t.length;p<j;p++){for(var v={name:t[p].device_name+" - "+d[h].name,type:"spline",yAxis:u,tooltip:{valueSuffix:" "+(b.a.isBlank(d[h].unit)?"":d[h].unit)},data:[],gridLineWidth:1,lineWidth:1,marker:{radius:1.5,enabled:!1}},_=t[p].data,g=[],f=0;f<_.length;f++){var x=!b.a.isBlank(_[f][d[h].slug])&&_[f][d[h].slug]>0?_[f][d[h].slug]:null;g.push([_[f].time_full,x]),i.push(_[f].categories_time)}v.data=g,s.push(v)}}b.a.isArrayData(i)&&b.a.isArrayData(s)&&b.a.isArrayData(r)&&(c.xAxis=[{categories:i,alignTicks:!0,tickInterval:o}],c.series=s,c.yAxis=r,e.setState({chartToolOption:c,dataChartDevice:t,dataExport:t}))}else n.setState({chartToolOption:{},dataChartDevice:[],dataExport:[]})})))}}},{key:"loadConfigDefaultDate",value:function(){var e=this.state.chartParams;switch(e.id_filter){case"today":e.max_date=b.a.getCurrentMMDDYYYYHI(),e.end_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":e.end_date=b.a.getCurrentDDMMYYYY(),e.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),e.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY");break;case"this_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");break;case"last_month":e.max_date=Ye()().format("MM/YYYY");var t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.end_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).endOf("month").format("MM/YYYY"),e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":e.max_date=Ye()().format("MM/YYYY"),e.end_date=Ye()().format("MM/YYYY");var i;t=(i=new Date(b.a.getCurrentMMDDYYYYHI())).getFullYear(),a=i.getMonth();e.start_date=Ye()(b.a.addMonths(new Date(t,a,1),-12)).format("MM/YYYY"),e.max_start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}this.setState({chartParams:e})}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.chartParams;switch(s.id_filter){case"today":case"last_month":case"this_month":s.start_date=i,s[a]=i;break;case"3_day":if("start_date"==a){s.start_date=i;var n=i.split("/");if(n){var c=n[2]+"/"+n[1]+"/"+n[0];s.end_date=Ye()(b.a.addDays(c,2)).format("DD/MM/YYYY")}}if("end_date"==a){s.end_date=i;var r=i.split("/");if(r){var l=r[2]+"/"+r[1]+"/"+r[0];s.start_date=Ye()(b.a.addDays(l,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){s.start_date=i;var o=i.split("/");if(o){var d=o[1]+"/"+o[0]+"/01",h=Ye()(d).startOf("month").format("YYYY-MM-DD");s.end_date=Ye()(b.a.addMonths(h,12)).format("MM/YYYY")}}if("end_date"==a){s.end_date=i;var m=i.split("/");if(m){var u=m[1]+"/"+m[0]+"/01",p=Ye()(u).startOf("month").format("YYYY-MM-DD");s.start_date=Ye()(b.a.addMonths(p,-12)).format("MM/YYYY")}}}this.setState({chartParams:s}),this.loadDataChart()}}},{key:"getListDeviceByProject",value:function(){var e=this,t={hash_id:this.state.hash_id,id_employee:this.employee.id_employee,id_language:this.employee.id_language,type:"private"};bn.instance.getListDeviceByProject(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListDevice:t}):e.setState({dataListDevice:[]}),e.forceUpdate()}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),_n=Object(f.a)("common")(vn);function gn(){var e=this.state,t=e.curItem,a=e.performanceTodayOption,i=e.performance12MonthOption,s=e.performance30DaysOption,n=e.maxPowerOption;return Object(m.jsxs)("div",{className:"chart-view",children:[Object(m.jsx)("div",{className:"chart-view-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4"}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("h2",{children:"Current site Performance"})}),Object(m.jsx)("div",{className:"col-md-4",children:t.current_day?Object(m.jsxs)("p",{children:["Last Updated: ",t.current_day]}):""})]})}),Object(m.jsx)("div",{className:"main-charting-view",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Performance - Today"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataPerformanceToday.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(a)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:a})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Performance - Last 30 days"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataP30Days.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(s)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:s})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Performance - Last 12 months"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataP12Month.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(i)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:i})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:"Daily Max Power - Last 12 Months"})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadDataMaxPower.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(n)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:n})})]})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var fn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).downloadDataPerformanceToday=function(){var e=n.state,t=e.dataPerformanceToday,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Performance - Today"],Sheets:{"Performance - Today":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-performance-today-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.downloadDataP12Month=function(){var e=n.state,t=e.dataP12Months,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Performance - Last 12 months"],Sheets:{"Performance - Last 12 months":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-performance-12-month-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.downloadDataP30Days=function(){var e=n.state,t=e.dataP30Days,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Energy now (kWh)":t[s].activeEnergy,"Power now (kW)":t[s].activePower});var r={SheetNames:["Performance - Last 30 days"],Sheets:{"Performance - Last 30 days":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-performance-30-days-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.downloadDataMaxPower=function(){var e=n.state,t=e.maxPower12Months,a=e.curItem;if(b.a.isArrayData(t)){for(var i=[],s=0,c=t.length;s<c;s++)i.push({Time:t[s].time_full,"Project name":a.name,"Max power (kW)":t[s].activePower});var r={SheetNames:["Daily Max Power"],Sheets:{"Daily Max Power":La.utils.json_to_sheet(i,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-max-power-12-months-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:n.props.hash_id,curItem:{},dataPerformanceToday:[],dataP12Months:[],dataP30Days:[],maxPower12Months:[]},n.jsxTemplate=gn,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataChartProfile()}},{key:"getDataChartProfile",value:function(){var e=this.state,t=e.hash_id,a=e.curItem,i=this;if(!b.a.isBlank(t)){var s={hash_id:t,id_language:this.employee.id_language,id_employee:this.employee.id_employee,type:"private"};bn.instance.getDataChartProfile(s,(function(e){if(e){a.name=e.name,a.current_day=e.current_day;var t=e.dataChartProfile,s=[],n=[],c={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},r={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:1,tooltip:{valueSuffix:" kW"},marker:{radius:1.5}},l=[],o=[];if(b.a.isArrayData(t)){n=["5AM","5:05 AM","5:10 AM","5:15 AM","5:20 AM","5:25 AM","5:30 AM","5:35 AM","5:40 AM","5:45 AM","5:50 AM","5:55 AM","6AM","6:05 AM","6:10 AM","6:15 AM","6:20 AM","6:25 AM","6:30 AM","6:35 AM","6:40 AM","6:45 AM","6:50 AM","6:55 AM","7AM","7:05 AM","7:10 AM","7:15 AM","7:20 AM","7:25 AM","7:30 AM","7:35 AM","7:40 AM","7:45 AM","7:50 AM","7:55 AM","8AM","8:05 AM","8:10 AM","8:15 AM","8:20 AM","8:25 AM","8:30 AM","8:35 AM","8:40 AM","8:45 AM","8:50 AM","8:55 AM","9AM","9:05 AM","9:10 AM","9:15 AM","9:20 AM","9:25 AM","9:30 AM","9:35 AM","9:40 AM","9:45 AM","9:50 AM","9:55 AM","10AM","10:05 AM","10:10 AM","10:15 AM","10:20 AM","10:25 AM","10:30 AM","10:35 AM","10:40 AM","10:45 AM","10:50 AM","10:55 AM","11AM","11:05 AM","11:10 AM","11:15 AM","11:20 AM","11:25 AM","11:30 AM","11:35 AM","11:40 AM","11:45 AM","11:50 AM","11:55 AM","12PM","12:05 PM","12:10 PM","12:15 PM","12:20 PM","12:25 PM","12:30 PM","12:35 PM","12:40 PM","12:45 PM","12:50 PM","12:55 PM","13PM","13:05 PM","13:10 PM","13:15 PM","13:20 PM","13:25 PM","13:30 PM","13:35 PM","13:40 PM","13:45 PM","13:50 PM","13:55 PM","14PM","14:05 PM","14:10 PM","14:15 PM","14:20 PM","14:25 PM","14:30 PM","14:35 PM","14:40 PM","14:45 PM","14:50 PM","14:55 PM","15PM","15:05 PM","15:10 PM","15:15 PM","15:20 PM","15:25 PM","15:30 PM","15:35 PM","15:40 PM","15:45 PM","15:50 PM","15:55 PM","16PM","16:05 PM","16:10 PM","16:15 PM","16:20 PM","16:25 PM","16:30 PM","16:35 PM","16:40 PM","16:45 PM","16:50 PM","16:55 PM","17PM","17:05 PM","17:10 PM","17:15 PM","17:20 PM","17:25 PM","17:30 PM","17:35 PM","17:40 PM","17:45 PM","17:50 PM","17:55 PM","18PM","18:05 PM","18:10 PM","18:15 PM","18:20 PM","18:25 PM","18:30 PM","18:35 PM","18:40 PM","18:45 PM","18:50 PM","18:55 PM","19PM"];for(var d=0,h=0;h<t.length;h++){if(0==h){var m=b.a.dateFormat(t[h].time_format,"HH","YYYY-MM-DD HH:mm:ss"),u=b.a.dateFormat(t[h].time_format,"mm","YYYY-MM-DD HH:mm:ss");if((d=12*(parseInt(m)-5)+Math.round(u/5))>0)for(var p=0;p<d;p++){var j=b.a.dateFormat(b.a.addMinutes(b.a.dateFormat(t[h].time_format,"YYYY-MM-DD 05:00","YYYY-MM-DD HH:mm:ss"),5*p),"DD/MM/YYYY HH:mm","YYYY-MM-DD HH:mm:ss");l.push([j,null]),o.push([j,null])}}l.push([t[h].time_full,t[h].activeEnergy]),o.push([t[h].time_full,t[h].activePower])}var v=d+t.length;if(v<168&&v>0)for(var _="",g=v;g<168;g++)g==v&&(_=t[t.length-1].time_format),null!=_&&(_=b.a.addMinutes(_,5),l.push([b.a.dateFormat(_,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]),o.push([b.a.dateFormat(_,"YYYY-MM-DD HH:mm","YYYY-MM-DD HH:mm:ss"),null]));c.data=l,s.push(c),r.data=o,s.push(r)}var f=[],x=[],O=e.performanceLast12Months,y=[],M=[],N={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},C={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:1,tooltip:{valueSuffix:" kW"},marker:{radius:1.5}};if(b.a.isArrayData(O)){M=[];for(var k="",D="",w="",A=0;A<O.length;A++){if(M.push([O[A].category_time_format]),k=O[A].time_format,0===A)D=new Date(O[A].time_format).getMonth()+1;if(A===O.length-1)w=new Date(O[A].time_format).getMonth()+1;f.push([O[A].time_full,O[A].activeEnergy]),x.push([O[A].time_full,O[A].activePower])}if(!b.a.isBlank(D)&&!b.a.isBlank(w)){for(var I=[],P=[],Y=[],E=new Date(k),L=1;L<D;L++)I.push([(L<10?"0"+L:L)+"/"+E.getFullYear(),null]),P.push([(L<10?"0"+L:L)+"/"+E.getFullYear(),null]),Y.push([b.a.getStringMonthNumber(L)]);Y.push.apply(Y,Object(_a.a)(M)),I.push.apply(I,Object(_a.a)(f)),P.push.apply(P,Object(_a.a)(x));for(var S=w+1;S<=12;S++)I.push([(S<10?"0"+S:S)+"/"+E.getFullYear(),null]),P.push([(S<10?"0"+S:S)+"/"+E.getFullYear(),null]),Y.push([b.a.getStringMonthNumber(S)]);M=Y,f=I,x=P}N.data=f,y.push(N),C.data=x,y.push(C)}var T=e.performanceLast30Days,R=[],F=[],H=[],B=[],U={data:[],name:"Energy yield",zIndex:1,type:"column",tooltip:{valueSuffix:" kWh"}},V={data:[],name:"Power",zIndex:1,type:"spline",xAxis:1,yAxis:1,id:"s1",lineWidth:1,tooltip:{valueSuffix:" kW"},marker:{radius:1.5}};if(b.a.isArrayData(T)){B=[];for(var W=0;W<T.length;W++)B.push([T[W].category_time_format]),R.push([T[W].time_full,T[W].activeEnergy]),F.push([T[W].time_full,T[W].activePower]);U.data=R,H.push(U),V.data=F,H.push(V)}var q=e.maxPower12Months,z=[],G=[],$={data:[],name:"Measured AC Power (max)",tooltip:{valueSuffix:" kW"}};if(b.a.isArrayData(q)){for(var K=0;K<q.length;K++)z.push([Date.UTC(q[K].year,q[K].month,q[K].day),q[K].activePower]);$.data=z,G.push($)}i.setState({curItem:a,dataCategories:n,dataPerformanceToday:t,series:s,dataP12Months:O,dataCategoriesP12Month:M,seriesP12Month:y,dataP30Days:T,categoriesP30Days:B,seriesP30Days:H,maxPower12Months:q,seriesMaxPower:G},(function(){i.performanceTodayOption()}))}}),!1)}}},{key:"performanceTodayOption",value:function(){var e={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f5893b","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:24,visible:!0,categories:this.state.dataCategories},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.series},t={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"column"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f5893b","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:1,visible:!0,categories:this.state.dataCategoriesP12Month},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],plotOptions:{column:{stacking:"normal"}},tooltip:{shared:!1,crosshairs:!0},series:this.state.seriesP12Month},a={credits:{enabled:!1},exporting:{enabled:!0},title:{text:null},chart:{type:"xy"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},colors:["#82cdff","#f5893b","#f2ae1b","#1e477f","#e68600","#00b767","#ffc300"],xAxis:[{title:{text:"Power",enabled:!1},alignTicks:!0,gridLineWidth:1,tickInterval:3,visible:!0,categories:this.state.categoriesP30Days,crosshair:!0},{title:{text:"Data",enabled:!1},tickInterval:1,opposite:!0,visible:!1}],yAxis:[{min:0,title:{text:"kWh",enabled:!0},lineWidth:1,gridLineWidth:1,labels:{enabled:!0}},{title:{text:"kW",enabled:!0},lineWidth:1,opposite:!0,gridLineWidth:1,labels:{enabled:!0}}],tooltip:{shared:!1,crosshairs:!0},series:this.state.seriesP30Days},i={credits:{enabled:!1},exporting:{enabled:!0},chart:{zoomType:"xy"},title:{text:null},colors:["#f5893b","#66bc51","#004ec3"],xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%Y"},title:{text:null,enabled:!1}},yAxis:{title:{text:"kW"},min:0,lineWidth:1,gridLineWidth:1},plotOptions:{series:{marker:{enabled:!0}}},series:this.state.seriesMaxPower};this.setState({performanceTodayOption:e,performance12MonthOption:t,performance30DaysOption:a,maxPowerOption:i})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),xn=Object(f.a)("common")(fn);a(852);function On(){var e=this.props.t,t=this.state,a=t.curItem,i=t.chartOption,s=null,n=0;b.a.isArrayData(a.totalFleetAlarm)&&(s=a.totalFleetAlarm.map((function(e,t){return n+=e.total_alarm,Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"item-alarm-sum",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2 text-center",children:Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+e.thumbnail,width:"20"})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("strong",{children:e.name})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("p",{children:e.total_alarm})})]})})},t)})));var c=a.alarmOPened,r=null;return b.a.isArrayData(c)&&(r=c.map((function(t,a){return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+t.thumbnail,alt:t.name})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_level_name})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsxs)("p",{children:["Device: ",t.name]})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:b.a.isBlank(t.message)?t.description:t.message})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("p",{children:t.start_date_format})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsxs)("p",{children:[t.times_ago>0?t.times_ago:""," "+e("common."+t.times_ago_unit),t.times_ago>1&&"s"]})})]},a)}))),Object(m.jsxs)("div",{className:"chart-alarm",children:[Object(m.jsx)("div",{className:"chart-view-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4"}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("h2",{children:e("analytics.alarms")})}),Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsxs)("p",{children:[e("analytics.last_updated"),": ",a.current_day]})})]})}),Object(m.jsx)("div",{className:"main-charting-view",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsx)("h2",{children:e("analytics.total_fleet_alerts")})}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsxs)("ul",{children:[s,Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"item-alarm-sum",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2 text-center"}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("strong",{children:e("analytics.total")})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("p",{children:b.a.formatNum(n,"#,###")})})]})})})]})})]})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:e("analytics.alarm_last_12month")})}),Object(m.jsx)("div",{className:"col-md-6 text-end",children:Object(m.jsx)("div",{className:"download",onClick:this.downloadData.bind(this),children:Object(m.jsx)("span",{children:Object(m.jsx)("var",{className:"icon-download"})})})})]})}),Object(m.jsx)("div",{className:"box-item-chart",children:b.a.isObjectEmpty(i)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:i})})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"box-item",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsx)("h2",{children:"Open Alerts"})}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsxs)("div",{className:"main-alarm",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5",children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:e("analytics.type")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:e("analytics.level")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:e("analytics.component")})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:e("analytics.isuse")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:e("analytics.opened")})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:e("analytics.open_period")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:r})})]})})]})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var yn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).downloadData=function(){var e=n.state.curItem;if(b.a.isArrayData(e.alarmLast12Month)){for(var t=e.alarmLast12Month,a=[],i=0,s=t.length;i<s;i++)a.push({Time:t[i].time_full,"Project name":e.name,Total:t[i].total_alarm});var c={SheetNames:["Alarms - Last 12 months"],Sheets:{"Alarms - Last 12 months":La.utils.json_to_sheet(a,{skipHeader:!1})}},r=La.write(c,{bookType:"xlsx",type:"array"}),l=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(l,"Export-alarm-12-month-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.state={hash_id:n.props.hash_id,curItem:{},dataTotalFleet:[],dataList:[],categories:[],series:[],chartOption:{},searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages,chartParams:{id_site:null,id_filter:"today",text_filter:"Today",show_filter:!1,showNextBtn:!1,current_time:b.a.getCurrentMMDDYYYYHI(),end_date:b.a.getCurrentMMDDYYYYHI(),start_date:b.a.getCurrentMMDDYYYYHI(),data_send_time:2}},n.paging={total:0,current:1,currentInput:1},n.jsxTemplate=On,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDataChartProfile()}},{key:"getDataChartProfile",value:function(){var e=this,t=this.state,a=t.hash_id,i=t.curItem,s=t.categories,n=t.series,c=this;if(!b.a.isBlank(a)){var r={hash_id:a,id_language:this.employee.id_language,id_employee:this.employee.id_employee,type:"private"};bn.instance.getChartAlarm(r,(function(t){if(t){var a=t.alarmLast12Month;if(b.a.isArrayData(a)){for(var r=[],l=0,o=a.length;l<o;l++)s.push(a[l].time_full),r.push([a[l].time_full,a[l].total_alarm]);n.push({name:"Alarms - Last 12 months",type:"spline",data:r,tooltip:{valueSuffix:""}})}c.setState({curItem:t,series:n,categories:s},(function(){c.loadChartOption()}))}else e.setState({curItem:i})}),!1)}}},{key:"loadChartOption",value:function(){var e=this.state,t={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:380},title:{text:null},colors:["#f5893b","#66bc51","#004ec3"],xAxis:{categories:e.categories,crosshair:!0},yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:"kWh",enabled:!1}}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},series:e.series};this.setState({chartOption:t})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Mn=Object(f.a)("common")(yn);a(853);function Nn(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.dataListDevice,n=a.chartParams,c=a.dataFilter,r=a.chartToolOption,l=a.dataDiagnostics,o=a.dataStringIndex,d=null;b.a.isArrayData(c)&&(d=c.map((function(t,a){return Object(m.jsx)("a",{onClick:e.onClickFilter.bind(e,t.id),className:t.id==n.id_filter?"item active":"item",children:t.text},a)})));var h=null;if(!b.a.isObjectEmpty(n))switch(n.id_filter){case"today":h=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:n.end_date,inputId:"today",format:"MM/DD/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:n.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})});break;case"3_day":h=Object(m.jsx)("div",{className:"show-3day",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:n.start_date,inputId:"start_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:n.start_max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:n.end_date,inputId:"end_3day",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:n.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1})})]})});break;case"last_month":case"this_month":h=Object(m.jsx)("div",{children:Object(m.jsx)(Ee,{value:n.end_date,inputId:"this_month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:n.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1})});break;case"12_month":h=Object(m.jsx)("div",{className:"show-12month",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-1"}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:n.start_date,inputId:"start_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:n.max_start_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})}),Object(m.jsx)("div",{className:"col-md-1 line-date text-center",children:Object(m.jsx)("span",{children:" - "})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)(Ee,{value:n.end_date,inputId:"end_12month",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:n.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!1,showCustomMonth:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0})})]})})}return Object(m.jsxs)("div",{id:"main-chart-view",className:"chart-view chart-diagnostics",children:[Object(m.jsx)("div",{className:"list-parameter",children:Object(m.jsxs)("div",{className:"title",children:[Object(m.jsx)("h2",{children:"Devices"}),Object(m.jsx)("div",{className:"list-device",children:Object(m.jsx)("ul",{children:b.a.isArrayData(s)?s.map((function(t,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"device_"+a,inputName:"device_"+a,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleDeviceInputChange(t,a)},label:t.name})},a)})):""})})]})}),Object(m.jsx)("div",{className:"main-chart-view",children:Object(m.jsxs)("div",{className:"box-chart",children:[Object(m.jsx)("div",{className:"chart-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2",children:Object(m.jsx)(mt,{instanceId:"type_diagnostics",className:"type_diagnostics",name:"type_diagnostics",value:l.filter((function(e){return e.id===i.type_diagnostics})),onChange:function(t){e.handleDropdownChange(t,"type_diagnostics")},optionList:l,placeHolder:t("common.choose")})}),Object(m.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-2",children:Object(m.jsx)(mt,{instanceId:"type_string_index",className:"type_string_index",name:"type_string_index",value:o.filter((function(e){return e.id===i.type_string_index})),onChange:function(t){e.handleDropdownChange(t,"type_string_index")},optionList:o,placeHolder:t("common.choose")})}),Object(m.jsxs)("div",{className:"col-xl-8 col-lg-8 col-md-8",children:[Object(m.jsxs)("div",{className:n.show_filter?"filter on":"filter",children:["today"==n.id_filter?Object(m.jsx)("div",{className:"filter-raw",children:Object(m.jsxs)("div",{className:"main-raw",children:[Object(m.jsx)("span",{onClick:2!=i.data_send_time?this.changeViewMinute.bind(this,1):"",className:1!=i.data_send_time?"disabled":1==n.data_send_time?"active":"",children:"5 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,2),className:2==n.data_send_time?"active":"",children:"15 Minutes"}),Object(m.jsx)("span",{onClick:this.changeViewMinute.bind(this,3),className:3==n.data_send_time?"active":"",children:"1 hour"})]})}):"",Object(m.jsxs)("a",{ref:this.wrapperRef,onClick:this.onClickShowFilter.bind(this),className:"view",children:[n.text_filter," ",Object(m.jsx)("span",{className:"icon-down-open-big"})]}),Object(m.jsx)("div",{className:"filter-dropdown",children:d})]}),Object(m.jsx)("div",{className:"time-filter",children:h})]})]})}),Object(m.jsx)("div",{ref:this.myRef,className:"chart-content",children:b.a.isObjectEmpty(r)?"":Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:r})})]})})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Cn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleClickOutside=function(e){var t=e.target,a=n.state.chartParams,i=Object(p.a)(n);n.wrapperRef.current.contains(t)||a.show_filter&&(a.show_filter=!1,i.setState({chartParams:a}))},n.onClickShowFilter=function(){var e=n.state.chartParams;e.show_filter=!0,n.setState({chartParams:e})},n.changeViewMinute=function(e){var t=n.state.chartParams,a=Object(p.a)(n);b.a.isBlank(e)||(t.data_send_time=e,n.setState({chartParams:t},(function(){a.loadDataChart()})))},n.onClickFilter=function(e){var t=n.state,a=t.chartParams,i=t.dataFilter,s=(t.curItem,Object(p.a)(n));if(b.a.isArrayData(i)){var c=b.a.find(i,"id",e);if(!b.a.isObjectEmpty(c)){switch(a.id_filter=c.id,a.text_filter=c.text,a.show_filter=!1,a.showNextBtn=!1,e){case"today":a.end_date=b.a.getCurrentMMDDYYYYHI(),a.max_date=b.a.getCurrentMMDDYYYYHI();break;case"3_day":a.end_date=b.a.getCurrentDDMMYYYY(),a.start_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.start_max_date=Ye()(b.a.addDays(b.a.getCurrentMMDDYYYYHI(),-2)).format("DD/MM/YYYY"),a.max_date=b.a.getCurrentDDMMYYYY();break;case"this_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY");break;case"last_month":a.max_date=Ye()().format("MM/YYYY");var r=new Date(b.a.getCurrentMMDDYYYYHI()),l=r.getFullYear(),o=r.getMonth();a.end_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).endOf("month").format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(new Date(l,o,1),-1)).format("MM/YYYY");break;case"lifetime":case"12_month":a.max_date=Ye()().format("MM/YYYY"),a.end_date=Ye()().format("MM/YYYY"),a.start_date=Ye()(b.a.addMonths(b.a.getCurrentMMDDYYYYHI(),-12)).format("MM/YYYY")}n.setState({chartParams:a},(function(){s.loadDataChart()}))}}},n.handleDeviceInputChange=function(e,t){var a=n.state.dataListDevice,i=Object(p.a)(n);if(b.a.isArrayData(a)){var s=a[t];b.a.isObjectEmpty(s)||(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataListDevice:a},(function(){i.loadDataChart()})))}},n.handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e)&&"type_diagnostics"==t)i.type_diagnostics="";else if(b.a.isObjectEmpty(e)&&"type_string_index"==t)i.type_string_index="";else{var s=e.value;i[t]=s}var c=[];"type_diagnostics"==t?(1==s?(c=[{id:1,value:1,label:"Power"},{id:2,value:2,label:"Voltage"},{id:3,value:3,label:"Current"},{id:4,value:4,label:"Energy"}],i.type_string_index=1):2==s?(c=[{id:1,value:1,label:"Power"},{id:2,value:2,label:"Voltage"}],i.type_string_index=1):3==s&&(c=[{id:1,value:1,label:"Power"},{id:2,value:2,label:"Voltage"},{id:3,value:3,label:"Current"}],i.type_string_index=1),a.setState({curItem:i,dataStringIndex:c},(function(){a.loadDataChart()}))):a.setState({curItem:i},(function(){a.loadDataChart()}))},n.state={hash_id:n.props.hash_id,curItem:{data_send_time:1,type:2,type_diagnostics:1,type_string_index:1},dataParameter:[],chartToolOption:{},dataFilter:[{id:"today",text:"Today"},{id:"3_day",text:"3 days"},{id:"this_month",text:"This month"},{id:"last_month",text:"Last month"},{id:"12_month",text:"Last 12 months"},{id:"lifetime",text:"Lifetime"}],dataListDevice:[],dataDiagnostics:[{id:1,value:1,label:"AC Output"},{id:2,value:2,label:"DC Input"},{id:3,value:3,label:"DC Input Channel"}],dataStringIndex:[{id:1,value:1,label:"Power"},{id:2,value:2,label:"Voltage"},{id:3,value:3,label:"Current"},{id:4,value:4,label:"Energy"}],dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages,chartParams:{id_site:null,id_filter:"today",text_filter:"Today",show_filter:!1,showNextBtn:!1,current_time:b.a.getCurrentMMDDYYYYHI(),end_date:b.a.getCurrentMMDDYYYYHI(),start_date:b.a.getCurrentMMDDYYYYHI(),data_send_time:2}},n.jsxTemplate=Nn,n.wrapperRef=l.a.createRef(),n.myRef=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListDeviceByProject(),document.addEventListener("click",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"getListDeviceByProject",value:function(){var e=this,t=this,a={hash_id:this.state.hash_id,id_employee:this.employee.id_employee,id_language:this.employee.id_language,type:"private"};bn.instance.getListDeviceByProject(a,(function(a,i){if(b.a.isArrayData(a)){for(var s in a)a[s].is_checked=1;t.setState({dataListDevice:a.filter((function(e){return 1==e.id_device_type}))})}else t.setState({dataListDevice:[]});t.forceUpdate(),e.loadDataChart()}))}},{key:"loadDataChart",value:function(){var e=this,t=this.state,a=t.chartParams,i=t.dataListDevice,s=t.curItem,n=this,c=[];if(b.a.isArrayData(i)){var r=i.filter((function(e){return 1==e.is_checked}));switch(parseInt(s.type_diagnostics)){case 1:for(var l=0;l<r.length;l++){var o=r[l].dataParameter;if(b.a.isArrayData(o))for(var d=0;d<o.length;d++)o[d].is_checked=0,1==s.type_string_index&&"activePower"==o[d].slug&&(o[d].is_checked=1),2==s.type_string_index&&"dcVoltage"==o[d].slug&&(o[d].is_checked=1),3==s.type_string_index&&"acCurrent"==o[d].slug&&(o[d].is_checked=1),4==s.type_string_index&&"activeEnergy"==o[d].slug&&(o[d].is_checked=1);r[l].dataParameter=o;var h=b.a.find(c,"id_device_group",r[l].id_device_group);b.a.isObjectEmpty(h)&&c.push(r[l])}break;case 2:for(var m=0;m<r.length;m++){o=r[m].dataParameter;if(b.a.isArrayData(o))for(var u=0;u<o.length;u++)o[u].is_checked=0,1==s.type_string_index&&"dcPower"==o[u].slug&&(o[u].is_checked=1),2==s.type_string_index&&"dcVoltage"==o[u].slug&&(o[u].is_checked=1),3==s.type_string_index&&"dcCurrent"==o[u].slug&&(o[u].is_checked=1);r[m].dataParameter=o;var p=b.a.find(c,"id_device_group",r[m].id_device_group);b.a.isObjectEmpty(p)&&c.push(r[m])}break;case 3:for(var j=0;j<r.length;j++){o=r[j].dataParameter;if(b.a.isArrayData(o))for(var v=0;v<o.length;v++)o[v].is_checked=0,1==s.type_string_index&&"activePower"==o[v].slug&&(o[v].is_checked=1),2==s.type_string_index&&"dcVoltage"==o[v].slug&&(o[v].is_checked=1),3==s.type_string_index&&"acCurrent"==o[v].slug&&(o[v].is_checked=1);r[j].dataParameter=o;var _=b.a.find(c,"id_device_group",r[j].id_device_group);b.a.isObjectEmpty(_)&&c.push(r[j])}}if(b.a.isArrayData(c)){var g={},f={};switch(a.id_filter){case"today":f.start_date=b.a.convertAllFormatDate(b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00"),f.end_date=b.a.convertAllFormatDate(b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00");break;case"3_day":f.start_date=b.a.dateFormat(a.start_date,"MM/DD/YYYY","MM/DD/YYYY")+" 00:00:00",f.end_date=b.a.dateFormat(a.end_date,"MM/DD/YYYY","MM/DD/YYYY")+" 19:00:00";break;case"last_month":case"this_month":f.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",f.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00";break;case"lifetime":case"12_month":f.start_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.start_date+" 00:00:00",f.end_date=b.a.dateFormat(b.a.getCurrentMMDDYYYYHI(),"DD","MM/DD/YYYY")+"/"+a.end_date+" 19:00:00"}f.id_language=this.employee.id_language,f.id_employee=this.employee.id_employee,f.dataDevice=r,f.filterBy=a.id_filter,f.data_send_time=a.data_send_time;var x=document.getElementById("main-chart-view").clientHeight-60;g.chart={zoomType:"xy",height:x||null},g.credits={enabled:!1},g.exporting={enabled:!0},g.title={text:null,align:"left"},g.xAxis=[],g.yAxis=[],g.tooltip={shared:!0,crosshairs:!0},g.plotOptions={series:{turboThreshold:5e3},column:{stacking:"normal"}},g.series=[];var O=24;switch(a.id_filter){case"today":1==a.data_send_time?O=24:2==a.data_send_time?O=12:3==a.data_send_time&&(O=2);break;case"3_day":1==a.data_send_time?O=168:2==a.data_send_time?O=57:3==a.data_send_time&&(O=15);break;case"last_month":case"this_month":O=4;break;case"lifetime":case"12_month":O=1}for(var y=[],M=0,N=c.length;M<N;M++){var C=c[M].dataParameter;if(!b.a.isArrayData(C))return;var k=C.filter((function(e){return 1==e.is_checked}));b.a.isArrayData(k)&&y.push.apply(y,Object(_a.a)(k))}b.a.isArrayData(y)&&(f.type="private",bn.instance.getChartByListDevice(f,(function(t,a){if(b.a.isArrayData(t)){for(var i=[],s=[],c=[],r=[],l=0;l<y.length;l++){if(0===l)r.push(y[l]),c.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(y[l].unit)?"":y[l].unit,enabled:!0},opposite:!1});else{var o=b.a.find(r,"unit",y[l].unit);b.a.isObjectEmpty(o)&&(r.push(y[l]),c.push({gridLineWidth:1,lineWidth:1,labels:{enabled:!0},title:{text:b.a.isBlank(y[l].unit)?"":y[l].unit,enabled:!0},opposite:!0}))}var d=0;b.a.isArrayData(r)&&r.map((function(e,t){y[l].unit==e.unit&&(d=t)}));for(var h=0,m=t.length;h<m;h++){var u=b.a.find(s,"id",t[h].id);if(b.a.isObjectEmpty(u)){for(var p={id:t[h].id,name:t[h].device_name+" - "+y[l].name,type:"spline",yAxis:d,tooltip:{valueSuffix:" "+(b.a.isBlank(y[l].unit)?"":y[l].unit)},data:[],gridLineWidth:1,lineWidth:1,marker:{radius:1.5,enabled:!1}},j=t[h].data,v=[],_=0;_<j.length;_++){var f=!b.a.isBlank(j[_][y[l].slug])&&j[_][y[l].slug]>0?j[_][y[l].slug]:null;v.push([j[_].time_full,f]),i.push(j[_].categories_time)}p.data=v,s.push(p)}}}b.a.isArrayData(i)&&b.a.isArrayData(s)&&b.a.isArrayData(c)&&(g.xAxis=[{categories:i,alignTicks:!0,tickInterval:O}],g.series=s,g.yAxis=c,e.setState({chartToolOption:g,dataChartDevice:t,dataExport:t}))}else n.setState({chartToolOption:{},dataChartDevice:[],dataExport:[]})})))}}}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.chartParams;switch(s.id_filter){case"today":case"last_month":case"this_month":s.start_date=i,s[a]=i;break;case"3_day":if("start_date"==a){s.start_date=i;var n=i.split("/");if(n){var c=n[2]+"/"+n[1]+"/"+n[0];s.end_date=Ye()(b.a.addDays(c,2)).format("DD/MM/YYYY")}}if("end_date"==a){s.end_date=i;var r=i.split("/");if(r){var l=r[2]+"/"+r[1]+"/"+r[0];s.start_date=Ye()(b.a.addDays(l,-2)).format("DD/MM/YYYY")}}break;case"12_month":if("start_date"==a){s.start_date=i;var o=i.split("/");if(o){var d=o[1]+"/"+o[0]+"/01",h=Ye()(d).startOf("month").format("YYYY-MM-DD");s.end_date=Ye()(b.a.addMonths(h,12)).format("MM/YYYY")}}if("end_date"==a){s.end_date=i;var m=i.split("/");if(m){var u=m[1]+"/"+m[0]+"/01",p=Ye()(u).startOf("month").format("YYYY-MM-DD");s.start_date=Ye()(b.a.addMonths(p,-12)).format("MM/YYYY")}}}this.setState({chartParams:s}),this.loadDataChart()}}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),kn=Object(f.a)("common")(Cn);function Dn(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.dataStatus,n=null;switch(i.type){case 1:n=Object(m.jsx)(xn,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random());break;case 2:n=Object(m.jsx)(_n,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random());break;case 3:n=Object(m.jsx)(Mn,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random());break;case 4:n=Object(m.jsx)(kn,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random())}return Object(m.jsxs)("div",{className:"analytics",children:[Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random()),Object(m.jsx)("div",{className:"header-title",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"group-header",children:[Object(m.jsx)(mt,{instanceId:"status",className:"status",name:"status",required:"required",value:s.filter((function(e){return e.id===i.type})),onChange:function(t){e.handleDropdownChange(t,"type")},optionList:s,placeHolder:t("common.choose")}),Object(m.jsx)("div",{className:"reload-chart",onClick:this.reloadData.bind(this),children:Object(m.jsx)("span",{className:"icon-arrows-ccw"})})]})})})}),n]})}var wn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).reloadData=function(){n.forceUpdate()},n.handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.type=2;else{var s=e.value;i[t]=s}a.setState({curItem:i})},n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{data_send_time:1,type:4},dataStatus:[{id:1,value:1,label:"Performance analytics"},{id:2,value:2,label:"Device analytics"},{id:4,value:4,label:"Inverter diagnostic"}],dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1}},n.jsxTemplate=Dn,n}return Object(s.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),An=Object(f.a)("common")(wn);a(854);function In(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.searchParam,n=a.chartMonthOption,c=a.dataType,r=a.chartOptionAlarm,l=a.chartOption1,o=a.chartOption2,d=i.totalFeetAlarms,h=i.dataAlarms,u=null,p=0;b.a.isArrayData(d)&&(u=d.map((function(e,t){return p+=e.total_alarm,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{className:"text-center",children:Object(m.jsx)("img",{src:v.a.SERVER_DATA+"/"+e.thumbnail,width:"20"})}),Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:e.name})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:e.total_alarm})})]},t)})));var j=[],_=[],g=[],f=[],x=i.dataEnergyMonth;if(b.a.isArrayData(x))for(var O=0;O<x.length;O++)O<15?(_.push(Object(m.jsx)("th",{children:x[O].day},O)),j.push(Object(m.jsx)("td",{children:x[O].activeEnergy},O))):(f.push(Object(m.jsx)("th",{children:x[O].day},O)),g.push(Object(m.jsx)("td",{children:x[O].activeEnergy},O)));var y=i.alarmOPened,M=null;b.a.isArrayData(y)&&(M=y.map((function(e,t){return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("p",{children:Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail,alt:e.name})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.error_level_name})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:e.name})}),Object(m.jsx)("div",{className:"body-col width25",children:Object(m.jsx)("p",{children:b.a.isBlank(e.message)?e.description:e.message})}),Object(m.jsx)("div",{className:"body-col width15",children:Object(m.jsx)("p",{children:e.start_date_format})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.status_name})})]},t)})));x=i.dataEnergyMonth;var N=null,C=0,k=0,D=0,w=0;b.a.isArrayData(x)&&(N=x.map((function(e,t){var a=e.activeEnergy/e.estimate_energy;return C+=e.estimate_energy,k+=e.activeEnergy,D+=e.diff_energy,w+=a,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-start",children:e.time_full})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-first text-center",children:b.a.formatNum(e.estimate_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-two text-center",children:b.a.formatNum(e.activeEnergy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.diff_energy<0?"error text-center":"text-center",children:b.a.formatNum(e.diff_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.diff_percent<0?"error text-center":"text-center",children:b.a.formatNum(e.diff_percent,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:a<0?"error text-center":"text-center",children:b.a.formatNum(a,"#,###.##")})})]},t)})));var A=null,I=0,P=0,Y=0;b.a.isArrayData(x)&&(A=x.map((function(e,t){return I=!b.a.isBlank(e.sum_estimate_energy)&&e.sum_estimate_energy>0?e.sum_estimate_energy:I,P=!b.a.isBlank(e.sum_activeEnergy)&&e.sum_activeEnergy>0?e.sum_activeEnergy:P,Y=b.a.isBlank(e.sum_diff_energy)||0==e.sum_diff_energy?Y:e.sum_diff_energy,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-start",children:e.time_full})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-first text-center",children:b.a.formatNum(e.sum_estimate_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"bg-two text-center",children:b.a.formatNum(e.sum_activeEnergy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.sum_diff_energy<0?"error text-center":"text-center",children:b.a.formatNum(e.sum_diff_energy,"#,###")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:e.sum_diff_percent<0?"error text-center":"text-center",children:b.a.formatNum(e.sum_diff_percent,"#,###")})})]},t)})));return Object(m.jsxs)("div",{className:"reports",children:[2==s.type?Object(m.jsx)("style",{children:"@media print { @page { size: ".concat("landscape"," }}")}):"",Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random(0)),Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)(mt,{instanceId:"type",className:"type",name:"type",value:c.filter((function(e){return e.id===s.type})),onChange:function(t){e.handleDropdownChange(t,"type")},optionList:c,placeHolder:t("common.choose")})}),Object(m.jsx)("div",{className:"col-md-10",children:3==s.type?"":Object(m.jsx)("div",{className:"report-filter",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-9",children:Object(m.jsxs)("div",{className:"row",children:[1==s.type?Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)(Ee,{value:s.start_date,inputId:"start_date",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"start_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1},Math.random())}):"",1==s.type?Object(m.jsx)("div",{className:"col-md-1 text-center",children:Object(m.jsx)("p",{className:"to",children:"to"})}):"",Object(m.jsx)("div",{className:"col-md-3",children:(s.type,Object(m.jsx)(Ee,{value:s.end_date,inputId:"end_date",format:"MM/yyyy",dateFormat:"MM/yyyy",inputClass:"form-control",inputName:"end_date",maxDate:s.max_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0,showMonthYearPicker:!0,showFullMonthYearPicker:!0,showTwoColumnMonthYearPicker:!0,showCustomMonth:!1},Math.random()))})]})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)(Li.a,{trigger:function(){return Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"icon-print"})," Print"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("span",{className:"icon-file-text-o"})," Pdf"]})]})},onBeforePrint:this.onBeforePrint,onAfterPrint:this.onAfterPrint,content:function(){return e.componentRef}})})]})})})]})}),3==s.type?Object(m.jsx)(Mn,{hash_id:this.state.hash_id,t:t,curItem:i,auth:this.props.auth,actions:this.actions},Math.random()):Object(m.jsxs)("div",{className:"main-export",ref:function(t){return e.componentRef=t},children:[Object(m.jsx)("div",{className:"report-header",children:Object(m.jsx)("table",{className:"table table-borderless",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{rowSpan:"3",children:Object(m.jsx)("img",{src:"/logo.png",style:{width:"200px"},alt:"Logo"})}),Object(m.jsx)("td",{children:Object(m.jsx)("h1",{children:i.site_name})})]}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsxs)("h2",{children:["Project: ",i.name]})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsxs)("p",{children:["Address: ",i.address]})})})]})})}),1==s.type?Object(m.jsxs)("div",{className:"export-year",children:[Object(m.jsx)("div",{className:"report-header-info",children:Object(m.jsx)("table",{className:"table",children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{style:{width:"60%"},children:[Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsxs)("p",{className:"text",children:[" ",t("report.estimation_data")]})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",children:"PVSYST"})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.report_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",style:{borderTop:"none"},children:"Solarmon"})})]})]})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.report_period")})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",children:[Object(m.jsx)("span",{style:{borderRight:"1px solid #DDD"},children:i.start_string}),Object(m.jsx)("span",{children:i.end_string})]})})]})})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.reporter")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:this.employee.full_name})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsxs)("p",{className:"text",children:[t("report.report_time")," "]})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{borderTop:"none",textAlign:"left",paddingLeft:"5px"},children:[" ",i.current_day]})})]})]})})]}),Object(m.jsx)("td",{style:{width:"40%",paddingLeft:"30px"},children:Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Installed power:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:i.installed_power})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Commissioning date:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:i.commisioning_date})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy start of year:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.min_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy end of year:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.max_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy yield in year:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.energyMonth,"#,###")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Revenue:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[i.revenue," VN\u0110"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"PR:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:b.a.formatNum(w/12,"#,###.##")})})]})]})})})]})})})}),Object(m.jsxs)("div",{className:"report-year-content",children:[Object(m.jsx)("div",{className:"section-table",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsx)("div",{className:"title",children:t("report.monthly_engery_yield")}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsx)("thead",{className:"table-light",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.PVSyst_energy_yield")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.energy_yield")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(%)"})]}),Object(m.jsx)("th",{children:Object(m.jsx)("p",{className:"text-center",children:"PR"})})]})}),Object(m.jsx)("tbody",{children:N}),Object(m.jsx)("tfoot",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:t("report.total")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(C,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(k,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(k-C,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(D/k*100,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(w/12,"#,###.##")})})})]})})]})})]}),Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsx)("div",{className:"page-break"}),Object(m.jsxs)("div",{className:"main-break-page",children:[Object(m.jsx)("div",{className:"title",children:t("report.monthly_accumulated")}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsx)("thead",{className:"table-light",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.PVSyst_energy_yield")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.energy_yield")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(kWh)"})]}),Object(m.jsxs)("th",{children:[Object(m.jsx)("p",{className:"text-center",children:t("report.diff_Energy")}),Object(m.jsx)("p",{className:"text-center",children:"(%)"})]})]})}),Object(m.jsx)("tbody",{children:A}),Object(m.jsx)("tfoot",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:t("report.total")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(I,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(P,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(P-I,"#,###")})})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:Object(m.jsx)("strong",{children:b.a.formatNum(Y/P*100,"#,###")})})})]})})]})})]})]})]})}),Object(m.jsx)("div",{className:"section-chart",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-md-6",children:[Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:t("report.measured_vs_calculated")}),Object(m.jsx)("div",{className:"content-chart",children:!b.a.isObjectEmpty(l)&&b.a.isArrayData(x)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:l}):""})]}),Object(m.jsx)("div",{className:"page-break"})]}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"main-break-page",children:Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:t("report.monthly_accumulated_chart")}),Object(m.jsx)("div",{className:"content-chart",children:!b.a.isObjectEmpty(o)&&b.a.isArrayData(x)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:o}):""})]})})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"main-break-page",children:Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:t("report.chart_error")}),Object(m.jsx)("div",{className:"content-chart",children:!b.a.isObjectEmpty(r)&&b.a.isArrayData(h)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:r}):""})]})})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"report-chart-section",children:[Object(m.jsx)("div",{className:"title",children:"Total Fleet Alerts"}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsx)("div",{className:"item-alarm-sum",children:Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[u,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{}),Object(m.jsx)("td",{children:Object(m.jsx)("strong",{children:"Total"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"text-center",children:p})})]})]})})})})]})})]})})]})]}):Object(m.jsxs)("div",{className:"export-month",children:[Object(m.jsx)("div",{className:"report-header-info",children:Object(m.jsx)("table",{className:"table",children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{style:{width:"50%"},children:[Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.estimation_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",children:"PVSYST"})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.report_data")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value",style:{borderTop:"none"},children:"Solarmon"})})]})]})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.report_month")})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",children:[Object(m.jsx)("span",{style:{borderRight:"1px solid #DDD"},children:i.month_string}),Object(m.jsx)("span",{children:i.year})]})})]})})}),Object(m.jsx)("table",{className:"table",style:{marginTop:"15px"},children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:t("report.reporter")})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:this.employee.full_name})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsxs)("p",{className:"text",children:[t("report.report_time")," "]})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{borderTop:"none",textAlign:"left",paddingLeft:"5px"},children:[" ",i.current_day]})})]})]})})]}),Object(m.jsx)("td",{style:{width:"50%"},children:Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Installed power:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px"},children:i.installed_power})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Commissioning date:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:i.commisioning_date})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy start of month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.min_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy end of month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.max_activeEnergy,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Energy yield in month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[b.a.formatNum(i.energyMonth,"#,###.#")," kWh"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"Revenue in month:"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:[i.revenue," VN\u0110"]})})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{width:"200px"},children:Object(m.jsx)("p",{className:"text",children:"PR:"})}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{className:"value double",style:{textAlign:"left",paddingLeft:"5px",borderTop:"none"},children:b.a.formatNum(w/12,"#,###.##")})})]})]})})})]})})})}),Object(m.jsxs)("div",{className:"report-month-content",children:[Object(m.jsx)("div",{className:"title",children:t("report.energy_yield_today")}),Object(m.jsx)("div",{className:"chart-month",style:{width:this.state.statusPrint?"1200px":"100%"},children:!b.a.isObjectEmpty(n)&&b.a.isArrayData(i.dataEnergyMonth)?Object(m.jsx)(ka.a,{highcharts:Na.a,allowChartUpdate:!0,immutable:!0,options:n},Math.random()):""}),Object(m.jsx)("div",{className:"month-table",children:Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsxs)("table",{className:"table table-bordered",children:[Object(m.jsxs)("thead",{className:"table-light",children:[Object(m.jsx)("tr",{children:Object(m.jsx)("th",{colSpan:"32",children:Object(m.jsx)("p",{className:"text-center",children:i.month_year})})}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Day"}),_]})]}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"kWh"}),j]})}),Object(m.jsx)("thead",{className:"table-light",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Day"}),f]})}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"kWh"}),g]})})]})})}),Object(m.jsxs)("div",{className:"report-alarm-open",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsx)("h2",{children:"Alarms"})}),Object(m.jsx)("div",{className:"box-item-chart",children:Object(m.jsxs)("div",{className:"main-alarm",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5",children:Object(m.jsx)("p",{})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"Type"})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"Level"})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:"Component"})}),Object(m.jsx)("div",{className:"header-col width25",children:Object(m.jsx)("p",{children:"Issue"})}),Object(m.jsx)("div",{className:"header-col width15",children:Object(m.jsx)("p",{children:"Opened"})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:"Status"})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(M)?Object(m.jsx)("div",{className:"data-empty",children:t("common.data_empty")}):M})})]})})]})]})]})]})]})}Ia()(Na.a),"object"===typeof Na.a&&wa()(Na.a);var Pn=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getDataReportMonth",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_REPORT.MOTNH,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDataReportYear",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_REPORT.YEAR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Yn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onBeforePrint=function(){n.setState({statusPrint:!0})},n.onAfterPrint=function(){n.setState({statusPrint:!1})},n.handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.searchParam;if(b.a.isObjectEmpty(e))i.type="";else{var s=e.value;i[t]=s}a.setState({searchParam:i},(function(){1==i.type?a.getDataReportYear():a.getDataReportMonth()}))},n.jsxTemplate=In,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},dataList:[],statusPrint:!1,dataType:[{id:1,value:1,label:"Year Report"},{id:2,value:2,label:"Month Report"},{id:3,value:3,label:"Alarm Report"}],searchParam:{type:2,max_date:Ye()().format("MM/YYYY"),start_date:Ye()().add(-11,"M").format("MM/YYYY"),end_date:Ye()().format("MM/YYYY")},chartMonthOption:{},chartOptionAlarm:{},chartOption1:{},chartOption2:{}},n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.searchParam;e.view;2==t.type?this.getDataReportMonth():1==t.type&&this.getDataReportYear()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.searchParam;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){2==a.type?t.getDataReportMonth():1==a.type&&t.getDataReportYear()}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=this,i=t.name,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),i){var n=this.state.searchParam;if(1===n.type&&"start_date"===i){var c=s.split("/"),r=null;if(c.length>0&&(r=c[0]+"/01/"+c[1]),b.a.isBlank(r))return;var l=Ye()(b.a.addMonths(r,11)).isAfter(Ye()());n.end_date=l?Ye()().format("MM/YYYY"):Ye()(b.a.addMonths(r,11)).format("MM/YYYY")}n[i]=s,this.setState({searchParam:n},(function(){1===n.type?a.getDataReportYear():a.getDataReportMonth()}))}}},{key:"getDataReportMonth",value:function(){var e=this,t=this.state,a=t.hash_id,i=t.searchParam,s=this;if(!b.a.isBlank(a)){var n=Object.assign({},i);n.start_date="01/"+i.start_date,n.end_date="01/"+i.end_date,n.hash_id=a,n.id_employee=this.employee.id_employee,n.id_language=this.employee.id_language,n.type="private",Pn.instance.getDataReportMonth(n,(function(t){if(t){var a={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:360},title:{text:null},colors:["#78c1f5","#e2a76c"],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:"kWh",enabled:!0}}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1,enabled:!1},plotOptions:{column:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[]},i=t.dataEnergyMonth;if(b.a.isArrayData(i)){var n=[],c=[],r=[],l=[];i.map((function(e,t){n.push(parseInt(e.day)),c.push(e.activeEnergy)})),l.push({categories:n,crosshair:!0}),r.push({name:"",type:"column",data:c,tooltip:{valueSuffix:" kWh"}}),a.xAxis=l,a.series=r}e.setState({curItem:t,chartMonthOption:a},(function(){s.forceUpdate()}))}}),!1)}}},{key:"getDataReportYear",value:function(){var e=this,t=this.state,a=t.hash_id,i=t.searchParam;t.chartOptionAlarm;if(!b.a.isBlank(a)){var s=this.props.t,n=Object.assign({},i);n.start_date="01/"+i.start_date,n.end_date="01/"+i.end_date,n.hash_id=a,n.id_employee=this.employee.id_employee,n.id_language=this.employee.id_language,Pn.instance.getDataReportYear(n,(function(t){if(t){var a=t.dataAlarms,i={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:360},title:{text:null},colors:["#f5893b","#66bc51","#004ec3"],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:"kWh",enabled:!1}}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},plotOptions:{stacking:"normal",spline:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[]},n={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:360},title:{text:null},colors:["#78c1f5","#f58634"],xAxis:[],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:s("report.energy_yield"),enabled:!1}},{title:{text:s("report.PVSyst_energy_yield"),enabled:!1},labels:{format:"{value}"},opposite:!0}],tooltip:{},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},plotOptions:{stacking:"normal",line:{dataLabels:{enabled:!0},enableMouseTracking:!1},column:{dataLabels:{enabled:!0,rotation:270,x:0,y:100,style:{fontSize:"8px"}},enableMouseTracking:!1}},series:[]},c={credits:{enabled:!1},exporting:{enabled:!1},chart:{zoomType:"xy",height:360},title:{text:null},colors:["#78c1f5","#f58634"],xAxis:[{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],crosshair:!0}],yAxis:[{min:0,lineWidth:1,gridLineWidth:1,labels:{format:"{value}",enabled:!0},title:{text:s("report.energy_yield"),enabled:!1}},{title:{text:s("report.PVSyst_energy_yield"),enabled:!1},labels:{format:"{value}"},opposite:!0}],tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},series:[]};if(b.a.isArrayData(a)){for(var r=[],l=[],o=[],d=[],h=0,m=a.length;h<m;h++)l.push(a[h].time_full),r.push([a[h].time_full,a[h].total_alarm]);d.push({categories:l,crosshair:!0}),o.push({name:"Alarms",type:"spline",data:r,tooltip:{valueSuffix:""}}),i.xAxis=d,i.series=o}else i.xAxis=[],i.series=[],t.dataAlarms=[];var u=t.dataEnergyMonth,p=[],j=[],v=[],_=[],g=[],f=[],x=[],O=[],y=[],M=[];if(b.a.isArrayData(u)){for(h=0,m=u.length;h<m;h++)_.push(u[h].time_full),p.push([u[h].time_full,u[h].estimate_energy]),j.push([u[h].time_full,u[h].activeEnergy]),y.push(u[h].time_full),f.push([u[h].time_full,0==u[h].sum_estimate_energy?null:u[h].sum_estimate_energy]),x.push([u[h].time_full,0==u[h].sum_activeEnergy?null:u[h].sum_activeEnergy]);g.push({categories:_,crosshair:!0}),v.push({name:s("report.PVSyst_energy_yield")+" kWh",type:"column",zIndex:1,data:p,tooltip:{valueSuffix:"kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),v.push({name:s("report.energy_yield")+" (kWh)",type:"column",yAxis:0,zIndex:2,data:j,tooltip:{valueSuffix:" kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),n.series=v,n.xAxis=g,M.push({categories:y,crosshair:!0}),O.push({name:s("report.PVSyst_energy_yield")+" kWh",type:"column",zIndex:2,data:f,tooltip:{valueSuffix:"kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),O.push({name:s("report.energy_yield")+" (kWh)",type:"column",yAxis:0,zIndex:1,data:x,tooltip:{valueSuffix:" kWh"},dataLabels:{enabled:!0,rotation:-90,color:"#000",align:"center",format:"{point.y}",y:20,style:{fontSize:"8px",fontFamily:"Verdana, sans-serif"}}}),c.series=O,c.xAxis=M}else t.dataEnergyMonth=[];e.setState({curItem:t,chartOptionAlarm:i,chartOption1:n,chartOption2:c},(function(){}))}}),!1)}}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),En=Object(f.a)("common")(Yn),Ln=(a(855),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleDeviceInputChange=function(){e.props.handleDeviceInputChange&&"function"===typeof e.props.handleDeviceInputChange&&e.props.handleDeviceInputChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem;return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_device_"+this.props.index+"_"+t.id,inputName:"id_device_"+this.props.index+"_"+t.id,labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleDeviceInputChange(t,e.props.index)},label:t.name})},t.id)}}]),a}(r.Component));function Sn(){var e=this,t=this.props.t,a=this.state,i=a.itemDevice,s=a.curItem,n=!1;switch(parseInt(i.id_device_type)){case 1:case 4:n=!0;break;default:n=!1}return Object(m.jsxs)("div",{className:"setting",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("h2",{children:["Component: ",i.name]})}),Object(m.jsx)("div",{className:"main-setting",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/system-disconnect.png"})," System Disconnect"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable System Disconnect Alerts",inputId:"enable_system_disconnect",inputName:"enable_system_disconnect",labelClass:"no-label",disabled:!i.id,checked:s.enable_system_disconnect,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sd_time_threshold",inputName:"sd_time_threshold",value:s.sd_time_threshold,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sd_sunrise_sunset",inputName:"sd_sunrise_sunset",pattern:"^[0-9-.]*$",value:s.sd_sunrise_sunset,disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/device-faults.png"})," Device Faults"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable Device Faults",inputId:"enable_device_faults",inputName:"enable_device_faults",labelClass:"no-label",disabled:!i.id,checked:s.enable_device_faults,onChange:function(t){e.handleInputChange(t)}})})})})]})}),n?Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/zero-generation.png"})," Zero Generation"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable Zero Generation Alerts",inputId:"enable_zeo_generation",inputName:"enable_zeo_generation",labelClass:"no-label",disabled:!i.id,checked:s.enable_zeo_generation,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"zg_time_threshold",inputName:"zg_time_threshold",value:s.zg_time_threshold,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"daylight hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"emazg_sunrise_sunsetil",inputName:"zg_sunrise_sunset",value:s.zg_sunrise_sunset,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/string-performance.png"})," String Performance"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable String Performance Alerts",inputId:"enable_string_performance",inputName:"enable_string_performance",labelClass:"no-label",disabled:!i.id,checked:s.enable_string_performance,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Type"})}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"sp_type",value:1,checked:1==parseInt(s.sp_type)?1:0,onChange:function(t){e.handleInputChange(t)}}),Object(m.jsx)("span",{style:{paddingLeft:"5px"},children:"From today production"})]})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"sp_type",value:2,checked:2==parseInt(s.sp_type)?1:0,onChange:function(t){e.handleInputChange(t)}}),Object(m.jsx)("span",{style:{paddingLeft:"5px"},children:"From sensor"})]})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"sp_type",value:3,checked:3==parseInt(s.sp_type)?1:0,onChange:function(t){e.handleInputChange(t)}}),Object(m.jsx)("span",{style:{paddingLeft:"5px"},children:"From AI"})]})})})]})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"String Performance Ratio"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_ratio",inputName:"sp_ratio",value:s.sp_ratio,pattern:"^[0-9-.]*$",disabled:1!=parseInt(s.sp_type),onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_time_threshold",inputName:"sp_time_threshold",value:s.sp_time_threshold,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"daylight hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"DC Current Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_dc_current_threshold",inputName:"sp_dc_current_threshold",value:s.sp_dc_current_threshold,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"amps"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"sp_sunrise_sunset",inputName:"sp_sunrise_sunset",value:s.sp_sunrise_sunset,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("h3",{children:[Object(m.jsx)("img",{src:"/performance-index.png"})," Performance Index"]})})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ne,{label:"Enable Performance Index Alerts",inputId:"enable_performance_index",inputName:"enable_performance_index",labelClass:"no-label",disabled:!i.id,checked:s.enable_performance_index,onChange:function(t){e.handleInputChange(t)}})})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Type"})}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"pi_type",value:1,checked:1==parseInt(s.pi_type)?1:0,onChange:function(t){e.handleInputChange(t)}}),Object(m.jsx)("span",{style:{paddingLeft:"5px"},children:"From today production"})]})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"pi_type",value:2,checked:2==parseInt(s.pi_type)?1:0,onChange:function(t){e.handleInputChange(t)}}),Object(m.jsx)("span",{style:{paddingLeft:"5px"},children:"From sensor"})]})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"radio",name:"pi_type",value:3,checked:3==parseInt(s.pi_type)?1:0,onChange:function(t){e.handleInputChange(t)}}),Object(m.jsx)("span",{style:{paddingLeft:"5px"},children:"From AI"})]})})})]})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Performance Index Value"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"pi_index_value",inputName:"pi_index_value",value:s.pi_index_value,pattern:"^[0-9-.]*$",disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Time Threshold"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"pi_time_threshold",inputName:"pi_time_threshold",pattern:"^[0-9-.]*$",disabled:!i.id,value:s.pi_time_threshold,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"daylight hours"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Sunrise/Sunset Buffer"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",pattern:"^[0-9-.]*$",inputId:"pi_sunrise_sunset",inputName:"pi_sunrise_sunset",value:s.pi_sunrise_sunset,disabled:!i.id,onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("label",{children:"hours"})})]})]})})]})}):"",Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("button",{type:"button",disabled:!i.id,className:"btn btn-save",onClick:this.onSave.bind(this),children:t("common.save")})})})]})})]})}var Tn=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getListDeviceSensor",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_CONFIG.LIST_DEVICE_SENSOR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getListAllDeviceByProject",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_CONFIG.LIST_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDeviceDetail",value:function(e,t){try{new x.a(!1).post(v.a.URL.MAIN_CONFIG.DEVICE_DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"updateDevice",value:function(e,t){try{new x.a(!0).post(v.a.URL.MAIN_CONFIG.UPDATE_DEVICE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Rn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},itemDevice:n.props.itemDevice},n.jsxTemplate=Sn,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeviceDetail()}},{key:"getDeviceDetail",value:function(){var e=this,t={id:this.props.itemDevice.id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Tn.instance.getDeviceDetail(t,(function(t){t&&e.setState({curItem:t})}),!1)}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,(a=Object.assign({},this.state.curItem)).screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=this.employee.id_language,Tn.instance.updateDevice(a,(function(e,a,i){e?t.toast(i,"info"):a?t.setValidateMessage(a):b.a.isBlank(i)||t.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.itemDevice;return b.a.isObjectEmpty(e)?Object(m.jsx)("div",{className:"data-empty",children:"Device is not selected "}):this.jsxTemplate.call(this)}}]),a}(ee),Fn=Object(f.a)("common")(Rn);function Hn(){var e=this,t=this.props.t,a=this.state,i=a.itemDevice,s=a.curItem,n=a.dataListSensor;return Object(m.jsxs)("div",{className:"setting",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("h2",{children:["Component: ",i.name]})}),Object(m.jsx)("div",{className:"main-setting",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-7",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"item",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"DC Size"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"dc_size",inputName:"dc_size",value:s.dc_size,disabled:!i.id,onChange:function(t){e.handleInputChange(t)},pattern:"^[0-9-.]*$",maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("label",{children:"kW"})})]})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("h3",{children:"PV Model"})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Data Input for POA Irradiance"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{instanceId:"poa_irradiance",className:"poa_irradiance",name:"poa_irradiance",required:"required",value:n.filter((function(e){return e.id==s.poa_irradiance})),onChange:function(t){e.handleDropdownChange(t,"poa_irradiance")},optionList:n,placeHolder:t("common.choose")})})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Data Input for Panel Temperature"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{instanceId:"panel_temperature",className:"panel_temperature",name:"panel_temperature",required:"required",value:n.filter((function(e){return e.id==s.panel_temperature})),onChange:function(t){e.handleDropdownChange(t,"panel_temperature")},optionList:n,placeHolder:t("common.choose")})})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Temperature Coefficient"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"temperature_coefficient",inputName:"temperature_coefficient",disabled:!i.id,value:s.temperature_coefficient,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("label",{children:" % / \xb0C"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"System Losses"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"system_losses",inputName:"system_losses",disabled:!i.id,value:s.system_losses,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5"})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Inverter Efficiency"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"inverter_efficiency",inputName:"inverter_efficiency",disabled:!i.id,value:s.inverter_efficiency,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-5"})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("label",{children:"Max AC Output"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{inputClass:"form-control",inputId:"max_ac_output",inputName:"max_ac_output",disabled:!i.id,value:s.max_ac_output,pattern:"^[0-9-.]*$",onChange:function(t){e.handleInputChange(t)},maxLength:20})})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("label",{children:"kW AC"})})]}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("button",{type:"button",disabled:!i.id,className:"btn btn-save",onClick:this.onSave.bind(this),children:t("common.save")})})})})]})})]})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("img",{src:"/pv-model-setting.png"})})]})})]})}var Bn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e))"poa_irradiance"==t?i.poa_irradiance=null:"panel_temperature"==t&&(i.panel_temperature=null);else{var s=e.value;i[t]=s}a.setState({curItem:i})},n.state={curItem:{},itemDevice:n.props.itemDevice,dataListSensor:[]},n.jsxTemplate=Hn,n.handleDropdownChange=n.handleDropdownChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListDeviceSensor(),this.getDeviceDetail()}},{key:"getListDeviceSensor",value:function(){var e=this,t={hash_id:this.state.hash_id};Tn.instance.getListDeviceSensor(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListSensor:t}):e.setState({dataListSensor:[]})}))}},{key:"getDeviceDetail",value:function(){var e=this,t={id:this.props.itemDevice.id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Tn.instance.getDeviceDetail(t,(function(t){t&&e.setState({curItem:t})}),!1)}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,(a=Object.assign({},this.state.curItem)).screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=this.employee.id_language,Tn.instance.updateDevice(a,(function(e,a,i){e?t.toast(i,"info"):a?t.setValidateMessage(a):b.a.isBlank(i)||t.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.itemDevice;switch(parseInt(e.id_device_group)){case 18:case 19:case 20:case 21:case 22:case 28:case 29:case 30:return this.jsxTemplate.call(this);default:return b.a.isObjectEmpty(e)?Object(m.jsx)("div",{className:"data-empty",children:"Device is not selected "}):Object(m.jsx)("div",{className:"data-empty",children:"There is no configuration for this device"})}}}]),a}(ee),Un=Object(f.a)("common")(Bn);function Vn(){var e=this,t=this.props.t,a=this.state,i=a.itemDevice,s=a.curItem,n=a.dataFields,c=24;switch(parseInt(i.id_device_group)){case 18:case 21:c=6;break;case 28:c=12;break;default:c=24}return Object(m.jsxs)("div",{className:"setting",children:[Object(m.jsx)("div",{className:"title",children:Object(m.jsxs)("h2",{children:["Component: ",i.name]})}),Object(m.jsx)("div",{className:"main-setting",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("h3",{children:"Measured"})})}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("div",{className:"mb-3",children:"Field"})}),Object(m.jsx)("div",{className:"col-md-8",children:"Enable"})]}),b.a.isArrayData(n)?n.slice(0,c).map((function(t,a){return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:t.name}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsx)(ne,{inputId:t.key,inputName:t.key,labelClass:"no-label",disabled:!i.id,checked:s[t.key],onChange:function(t){e.handleInputChange(t,a)}})})]},a)})):"",Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("button",{type:"button",disabled:!i.id,className:"btn btn-save",onClick:this.onSave.bind(this),children:t("common.save")})})})})]})})})})]})}var Wn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).state={curItem:{},itemDevice:n.props.itemDevice,dataFields:[{id:1,key:"dc_current_string01",dc_current_string01:0,name:"DC Current String 01"},{id:2,key:"dc_current_string02",dc_current_string02:0,name:"DC Current String 02"},{id:3,key:"dc_current_string03",dc_current_string03:0,name:"DC Current String 03"},{id:4,key:"dc_current_string04",dc_current_string04:0,name:"DC Current String 04"},{id:5,key:"dc_current_string05",dc_current_string05:0,name:"DC Current String 05"},{id:6,key:"dc_current_string06",dc_current_string06:0,name:"DC Current String 06"},{id:7,key:"dc_current_string07",dc_current_string07:0,name:"DC Current String 07"},{id:8,key:"dc_current_string08",dc_current_string08:0,name:"DC Current String 08"},{id:9,key:"dc_current_string09",dc_current_string09:0,name:"DC Current String 09"},{id:10,key:"dc_current_string10",dc_current_string10:0,name:"DC Current String 10"},{id:11,key:"dc_current_string11",dc_current_string11:0,name:"DC Current String 11"},{id:12,key:"dc_current_string12",dc_current_string12:0,name:"DC Current String 12"},{id:13,key:"dc_current_string13",dc_current_string13:0,name:"DC Current String 13"},{id:14,key:"dc_current_string14",dc_current_string14:0,name:"DC Current String 14"},{id:15,key:"dc_current_string15",dc_current_string15:0,name:"DC Current String 15"},{id:16,key:"dc_current_string16",dc_current_string16:0,name:"DC Current String 16"},{id:17,key:"dc_current_string17",dc_current_string17:0,name:"DC Current String 17"},{id:18,key:"dc_current_string18",dc_current_string18:0,name:"DC Current String 18"},{id:19,key:"dc_current_string19",dc_current_string19:0,name:"DC Current String 19"},{id:20,key:"dc_current_string20",dc_current_string20:0,name:"DC Current String 20"},{id:21,key:"dc_current_string21",dc_current_string21:0,name:"DC Current String 21"},{id:22,key:"dc_current_string22",dc_current_string22:0,name:"DC Current String 22"},{id:23,key:"dc_current_string23",dc_current_string23:0,name:"DC Current String 23"},{id:24,key:"dc_current_string24",dc_current_string24:0,name:"DC Current String 24"}]},n.jsxTemplate=Vn,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getDeviceDetail()}},{key:"getDeviceDetail",value:function(){var e=this,t={id:this.props.itemDevice.id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Tn.instance.getDeviceDetail(t,(function(t){t&&e.setState({curItem:t})}),!1)}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,(a=Object.assign({},this.state.curItem)).screen_mode=v.a.SCREEN_MODE.EDIT,a.id_language=this.employee.id_language,Tn.instance.updateDevice(a,(function(e,a,i){e?t.toast(i,"info"):a?t.setValidateMessage(a):b.a.isBlank(i)||t.toast(i,"error")}),!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.itemDevice;switch(parseInt(e.id_device_group)){case 18:case 21:case 28:return this.jsxTemplate.call(this);default:return b.a.isObjectEmpty(e)?Object(m.jsx)("div",{className:"data-empty",children:"Device is not selected "}):Object(m.jsx)("div",{className:"data-empty",children:"There is no configuration for this device"})}}}]),a}(ee),qn=Object(f.a)("common")(Wn);function zn(){var e=this,t=this.props.t,a=this.state,i=a.curItem,s=a.dataListDevice,n=a.itemDevice,c=null;b.a.isArrayData(s)&&(c=s.map((function(t,a){return Object(m.jsx)(Ln,{dataItem:t,index:a,handleDeviceInputChange:e.handleDeviceInputChange,auth:e.props.auth,actions:e.props.actions},a)})));var r=null;switch(i.type){case 1:r=Object(m.jsx)(Fn,{hash_id:this.state.hash_id,t:t,curItem:i,itemDevice:n,auth:this.props.auth,actions:this.actions},Math.random());break;case 2:r=Object(m.jsx)(Un,{hash_id:this.state.hash_id,t:t,curItem:i,itemDevice:n,auth:this.props.auth,actions:this.actions},Math.random());break;case 3:r=Object(m.jsx)(qn,{hash_id:this.state.hash_id,t:t,curItem:i,itemDevice:n,auth:this.props.auth,actions:this.actions},Math.random())}return Object(m.jsxs)("div",{className:"config",children:[Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random()),Object(m.jsxs)("div",{className:"list-device",children:[Object(m.jsx)("h2",{children:t("config.device")}),Object(m.jsx)("div",{className:"content-list-device",children:Object(m.jsx)("ul",{children:c})})]}),Object(m.jsxs)("div",{className:"main-config",children:[Object(m.jsx)("div",{className:"header-title",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"group-header",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:1==i.type?"active":"",onClick:this.onTabSetting.bind(this,1),children:t("config.alert_trigger")}),Object(m.jsx)("li",{className:2==i.type?"active":"",onClick:this.onTabSetting.bind(this,2),children:t("config.pv_model_setting")}),Object(m.jsx)("li",{className:3==i.type?"active":"",onClick:this.onTabSetting.bind(this,3),children:t("config.data_field")})]})})})})}),Object(m.jsx)("div",{className:"main-layout",children:r})]})]})}var Gn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleDeviceInputChange=function(e){var t=n.state,a=t.dataListDevice,i=t.curItem;if(b.a.isArrayData(a)){var s=a[e];if(!b.a.isObjectEmpty(s)){for(var c=0;c<a.length;c++)a[c].is_checked=0;a[e].is_checked=1,n.setState({dataListDevice:a,itemDevice:s,curItem:i})}}},n.onTabSetting=function(e){var t=n.state.curItem;t.type=e,n.setState({curItem:t})},n.reloadData=function(){n.forceUpdate()},n.handleDropdownChange=function(e,t){var a=Object(p.a)(n),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.type=2;else{var s=e.value;i[t]=s}a.setState({curItem:i})},n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{type:2},itemDevice:{},dataListDevice:[],dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1}},n.jsxTemplate=zn,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListAllDeviceByProject()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){t.getListAllDeviceByProject()}))}},{key:"getListAllDeviceByProject",value:function(){var e=this,t={hash_id:this.state.hash_id,id_employee:this.employee.id_employee,id_language:this.employee.id_language};Tn.instance.getListAllDeviceByProject(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListDevice:t,itemDevice:{}}):e.setState({dataListDevice:[],itemDevice:{}}),e.forceUpdate()}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),$n=Object(f.a)("common")(Gn),Kn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.handleCheckItemInputChange=function(){e.props.handleCheckItemInputChange&&"function"===typeof e.props.handleCheckItemInputChange&&e.props.handleCheckItemInputChange(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dataItem,a=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsxs)("p",{className:"d-inline-block",children:[" ",Object(m.jsx)("img",{style:{width:"20px",height:"20px"},src:v.a.SERVER_DATA+"/"+t.thumbnail})," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{className:"d-inline-block",children:[t.id," "]})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.error_type_name})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[t.error_level_name," "]})}),Object(m.jsxs)("div",{className:"body-col width25",children:[Object(m.jsx)("p",{className:"text-truncate",children:Object(m.jsx)(d.c,{to:(b.a.isBlank(this.props.employee)||"main"!=this.props.employee.type?"/project/":"/private/")+t.hash_id+"/activities",children:Object(m.jsxs)("strong",{children:["Project: ",t.project_name]})})}),Object(m.jsxs)("p",{className:"text-truncate",children:["Device: ",t.name]}),Object(m.jsx)("p",{"data-for":"tooltip_"+this.props.index,className:"d-inline-block text-truncate",style:{maxWidth:"100%"},"data-tip":"","data-type":"error","data-class":"tooltip-action custom-tooltip",children:b.a.isBlank(t.message)?t.description:t.message}),Object(m.jsx)(Je.a,{id:"tooltip_"+this.props.index,children:Object(m.jsxs)("div",{className:"error-content",children:[Object(m.jsx)("h2",{children:"issue"}),Object(m.jsxs)("div",{className:"content",children:[b.a.isBlank(t.message)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.message"),":"]})," ",t.message]}),b.a.isBlank(t.description)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.description"),":"]})," ",t.description]}),b.a.isBlank(t.solutions)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[a("activities.solutions"),":"]})," ",t.solutions]})]})]})})]}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:1==t.status?Object(m.jsx)("span",{className:"opened",children:a("activities.opened")}):Object(m.jsx)("span",{className:"closed",children:a("activities.close")})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:t.start_date_format})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[t.times_ago>0?t.times_ago:""," "+a("common."+t.times_ago_unit),t.times_ago>1&&"s"]})}),Object(m.jsx)("div",{className:"body-col width5",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):"","data-tip":a("common.view"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-eye","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):"","data-tip":a("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})}),Object(m.jsx)("div",{className:"body-col width5 text-end",children:Object(m.jsx)(ne,{inputId:"alert_"+t.id,inputName:"alert",labelClass:"no-label",checked:t.is_checked,onChange:function(t){e.handleCheckItemInputChange(t,e.props.index)},label:t.label})})]},t.id)}}]),a}(r.Component);function Jn(){var e=this,t=this.state,a=t.curItem,i=t.dataErrorLevel,s=t.dataStatus,n=t.dataErrorType,c=t.dataAlertState,r=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:r("activities.alert_detail")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsxs)("h2",{children:[r("activities.device"),": ",a.name]}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"alert-information",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("span",{className:"alert alert-success",children:[r("activities.opened"),": ",a.start_date_format]})}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"alert alert-danger",children:[b.a.isBlank(a.message)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[r("activities.message"),":"]})," ",a.message]}),b.a.isBlank(a.description)?"":Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[r("activities.description"),":"]})," ",a.description]})]}),b.a.isBlank(a.solutions)?"":Object(m.jsxs)("div",{className:"solutions",children:[Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[r("activities.solutions"),":"]})}),Object(m.jsx)("p",{children:a.solutions})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.id_error_level"),instanceId:"id_error_level",className:"id_error_level",name:"id_error_level",isDisabled:!0,value:i.filter((function(e){return e.id===a.id_error_level})),onChange:function(t){e.handleDropdownChange(t,"id_error_level")},optionList:i,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.id_error_type"),instanceId:"id_error_type",className:"id_error_type",name:"id_error_type",value:n.filter((function(e){return e.id==a.id_error_type})),onChange:function(t){e.handleDropdownChange(t,"id_error_type")},optionList:n,isDisabled:!0,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-4 col-lg-4 col-md-4 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:r("activities.status"),instanceId:"status",className:"status",name:"status",value:s.filter((function(e){return e.id===a.status})),onChange:function(t){e.handleDropdownChange(t,"status")},optionList:s,placeHolder:r("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"reminder",children:Object(m.jsx)("ul",{children:b.a.isArrayData(c)?c.map((function(t,i){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"reminder"+t.id,inputName:"reminder",labelClass:"no-label",checked:a.id_alert_state==t.id?1:0,onChange:function(t){e.handleAlertStateInputChange(i)},label:t.label})},i)})):""})})})}),Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:r("activities.note"),inputClass:"form-control",inputId:"note",inputName:"note",value:a.note,onChange:function(t){e.handleInputChange(t)},maxLength:1e3})})})]})]})})]})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:r("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:(a.screen_mode,v.a.SCREEN_MODE.EDIT,r("common.save"))})]})]})}var Xn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleAlertStateInputChange=function(e){var t=s.state,a=t.dataAlertState,i=t.curItem;if(b.a.isArrayData(a)){var n=a[e];b.a.isObjectEmpty(n)||(i.id_alert_state=n.id,s.setState({curItem:i}))}},s.handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if(b.a.isObjectEmpty(e))i.status="";else{var n=e.value;i[t]=n}a.setState({curItem:i})},s.state={curItem:s.props.curItem,dataErrorType:s.props.dataErrorType,dataErrorLevel:s.props.dataErrorLevel,dataStatus:s.props.dataStatus,dataAlertState:[]},s.jsxTemplate=Jn,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListAlertState()}},{key:"getListAlertState",value:function(){var e=this,t={id_language:this.employee.id_language};ni.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataAlertState:t}):e.setState({dataAlertState:[]})}))}},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.curItem,a=this,(i=Object.assign({},t)).screen_mode=v.a.SCREEN_MODE.EDIT,i.id_employee=this.employee.id_employee,i.id_language=this.employee.id_language,O.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Zn(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.id," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var Qn=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=Zn,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,O.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);a(856);function ec(){var e=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-product",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[e("common.delete_all")," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDeleteAll.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:e("common.message_delete_all")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDeleteAll.bind(this),className:"btn btn-cancel",text:" "+e("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:e("common.no")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:e("common.yes"),title:e("common.yes")})]})]})}var tc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem,dataList:s.props.dataList},s.jsxTemplate=ec,s}return Object(s.a)(a,[{key:"onClickCloseDeleteAll",value:function(){this.props.onClickCloseDeleteAll&&"function"===typeof this.props.onClickCloseDeleteAll&&this.props.onClickCloseDeleteAll(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.assign({},this.state.curItem),a=this,i=this.state.dataList,s=[],b.a.isArrayData(i))for(n=0,c=i.length;n<c;n++)i[n].is_checked&&s.push({id:i[n].id,updated_by:this.employee.first_name+" "+this.employee.last_name,status:0});t.dataArr=s,b.a.isArrayData(s)&&O.instance.closeAlert(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDeleteAll(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function ac(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam,l=i.dataErrorLevel,o=i.dataStatus,d=i.dataErrorType;e=n.map((function(e,i){return Object(m.jsx)(Kn,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,actions:t.actions,handleCheckItemInputChange:t.handleCheckItemInputChange,employee:t.employee,t:a},"row_item_"+i)}));var h=this.state.add?Object(m.jsx)(Xn,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang,dataErrorLevel:l,dataStatus:o,dataErrorType:d}):"",u=this.state.delete?Object(m.jsx)(Qn,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"",p=this.state.deleteAll?Object(m.jsx)(tc,{t:a,curItem:s,onClickCloseDeleteAll:this.onClickCloseDeleteAll,auth:this.props.auth,actions:this.actions,dataList:n}):"",j=b.a.find(n,"is_checked",1);return Object(m.jsxs)("div",{className:"activities",children:[h,u,p,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("activities.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{onClick:this.downloadData.bind(this),className:"btn-download",children:Object(m.jsx)("span",{className:"icon-download"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),!b.a.isObjectEmpty(j)&&_.a.getPermisson(this.actions,v.a.AUTH_MODE.DEL)?Object(m.jsx)("li",{children:Object(m.jsx)("div",{"data-tip":a("common.delete_all"),"data-type":"warning","data-class":"tooltip-action",className:"search",onClick:this.onItemClickDeleteAll.bind(this),children:Object(m.jsx)("span",{className:"icon-trash-o"})})}):""]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-10",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:a("common.date_from"),value:r.date_from,inputId:"date_from",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_from",minDate:r.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{label:a("common.date_to"),value:r.date_to,inputId:"date_to",format:"DD/MM/YYYY",dateFormat:"dd/MM/yyyy",inputClass:"form-control",inputName:"date_to",minDate:r.min_date,handleChange:this.handleInputDateChange.bind(this),maxLength:20,showIconCalendar:!0})})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Type"}),Object(m.jsx)("ul",{children:b.a.isArrayData(d)?d.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_error_type_"+a,inputName:"id_error_type",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckTypeInputChange(e,a)}})},a)})):""})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Level"}),Object(m.jsx)("ul",{children:b.a.isArrayData(l)?l.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"id_error_level_"+a,inputName:"id_error_level",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckLevelInputChange(e,a)}})},a)})):""})]}),Object(m.jsxs)("div",{className:"col-xl-3 col-lg-3 col-md-3 col-6",children:[Object(m.jsx)("h2",{children:"Status"}),Object(m.jsx)("ul",{children:b.a.isArrayData(o)?o.map((function(e,a){return Object(m.jsx)("li",{children:Object(m.jsx)(ne,{inputId:"status_"+a,inputName:"status",labelClass:"no-label",checked:e.is_checked,label:e.label,onChange:function(e){t.handleCheckStatusInputChange(e,a)}})},a)})):""})]})]})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{className:"header-col width5"}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:"ID"})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_type")},className:"id_error_type"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.alert_type")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id_error_level")},className:"id_error_level"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.level")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"message")},className:"message"===r.sort_column?"header-col width25 sorting "+r.order_by:"header-col width25 sorting",children:Object(m.jsx)("p",{children:a("activities.issus")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.status")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"start_date_format")},className:"start_date_format"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("activities.opened")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:a("activities.open_period")})}),Object(m.jsx)("div",{className:"header-col width5 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})}),Object(m.jsx)("div",{className:"header-col width5 text-end",children:Object(m.jsx)(ne,{inputId:"checked_all",inputName:"checked_all",labelClass:"no-label",checked:this.state.checked_all,onChange:function(e){t.handleCheckAllInputChange(e)}})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var ic=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).handleCheckStatusInputChange=function(e,t){var a=n.state.dataStatus;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataStatus:a}))},n.handleCheckTypeInputChange=function(e,t){var a=n.state.dataErrorType;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataErrorType:a}))},n.handleCheckLevelInputChange=function(e,t){var a=n.state.dataErrorLevel;b.a.isArrayData(a)&&(a[t].is_checked=a[t].is_checked?0:1,n.setState({dataErrorLevel:a}))},n.downloadData=function(){var e=n.state.dataList,t=n.props.t;if(b.a.isArrayData(e)){for(var a=[],i=0,s=e.length;i<s;i++){var c=e[i].times_ago+" "+t("common."+e[i].times_ago_unit)+(e[i].times_ago>1&&"s");a.push({ID:e[i].id,"Device Name":e[i].name,Type:e[i].error_type_name,Level:e[i].error_level_name,Opened:e[i].start_date_format,"Open period":c,Message:e[i].message,Description:e[i].description,Solutions:e[i].solutions,Note:e[i].note,"Review status":e[i].alert_state_name})}var r={SheetNames:["Alerts"],Sheets:{Alerts:La.utils.json_to_sheet(a,{skipHeader:!1})}},l=La.write(r,{bookType:"xlsx",type:"array"}),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Ea.saveAs(o,"Export-alerts-"+Ye()().format("YYYY-MM-DD_hh:mm:ss")+".xlsx")}},n.handleCheckItemInputChange=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t[e].is_checked=t[e].is_checked?0:1,n.setState({dataList:t}))}},n.handleCheckAllInputChange=function(){var e=n.state,t=e.dataList,a=e.checked_all;if(b.a.isArrayData(t)){for(var i=0,s=t.length;i<s;i++)t[i].is_checked=a?0:1;n.setState({dataList:t,checked_all:a?0:1})}},n.handleDropdownChange=function(e,t){if(!b.a.isObjectEmpty(e)){var a=Object(p.a)(n),i=e.value,s=a.state.searchParam;"id_error_level"===t&&b.a.isObjectEmpty(e)&&(s.id_error_level=""),"id_error_type"===t&&b.a.isObjectEmpty(e)&&(s.id_error_type=""),"status"===t&&b.a.isObjectEmpty(e)&&(s.status=""),s[t]=i,a.setState({searchParam:s})}},n.onClickCloseDeleteAll=function(e,t){e&&t&&n.getList(),n.setState({deleteAll:!1})},n.onItemClickDeleteAll=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,deleteAll:!0})}},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];if(!b.a.isObjectEmpty(t))n.state.curItem.id=t.id,t.screen_mode=v.a.SCREEN_MODE.EDIT,n.setState({curItem:t,add:!0})}},n.jsxTemplate=ac,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,checked_all:0,curItem:{},dataList:[],dataErrorType:[],dataErrorLevel:[],dataStatus:[{id:1,value:1,label:"Opened",is_checked:0},{id:0,value:0,label:"Closed",is_checked:0}],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},viewActivities:!1,formSearch:!1,delete:!1,deleteAll:!1,add:!1},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListErrorLevel(),this.getListErrorType()}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,this.setState({searchParam:s})}}},{key:"getListErrorType",value:function(){var e=this,t={id_language:this.employee.id_language};Wa.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorType:t}):e.setState({dataErrorType:[]})}))}},{key:"getListErrorLevel",value:function(){var e=this,t={id_language:this.employee.id_language};Va.instance.getDropdownList(t,(function(t,a){if(b.a.isArrayData(t)){for(var i=0;i<t.length;i++)1!=t[i].id&&4!=t[i].id||(t[i].is_checked=1);e.setState({dataErrorLevel:t},(function(){e.getList()}))}else e.setState({dataErrorLevel:[]})}))}},{key:"getList",value:function(){var e=this,t=this.state,a=t.dataErrorLevel,i=t.dataErrorType,s=t.dataStatus,n=this.state.searchParam;n.id_language=this.employee.id_language,n.id_employee=this.employee.id_employee,n.hash_id=this.state.hash_id,n.errorLevel=a.filter((function(e){return 1==e.is_checked})),n.errorType=i.filter((function(e){return 1==e.is_checked})),n.dataStatus=s.filter((function(e){return 1==e.is_checked})),O.instance.getList(n,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state,a=t.dataErrorLevel,i=t.dataErrorType,s=t.dataStatus;if(b.a.isArrayData(a))for(var n=0;n<a.length;n++)a[n].is_checked=0;if(b.a.isArrayData(i))for(var c=0;c<i.length;c++)i[c].is_checked=0;if(b.a.isArrayData(s))for(var r=0;r<s.length;r++)s[r].is_checked=0;var l=this.state.searchParam;l.date_from=null,l.date_to=null,l.index=1,l.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:l},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),sc=Object(f.a)("common")(ic),nc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.id," "]})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:b.a.isBlank(e.thumbnail)?"":Object(m.jsx)("img",{style:{maxHeight:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail})})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.name," "]})})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsxs)("p",{children:[e.description," "]})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function cc(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=this.props.t,c=null;return s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),c=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:n("error_level.name"),inputClass:"form-control",required:1===e.is_default?"required":"",inputId:"name_"+e.iso_code,inputName:"name_"+e.iso_code,value:i.data[a].name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:n("error_level.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})})]})})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("error_level.edit_title"):n("error_level.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:n("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12vcol-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:n("employee.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:i.status,onChange:function(e){t.handleInputChange(e)}})})]})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"file-upload",children:[Object(m.jsx)("label",{children:n("error_level.avatar")}),Object(m.jsx)("ul",{className:"row",children:Object(m.jsx)("li",{className:"col-md-12 col-12",children:Object(m.jsxs)("div",{className:"item-add-file-upload",children:[Object(m.jsx)("input",{onChange:function(e){return t.onFileAvatarChange(e)},type:"file",id:"upload_thumbnail",name:"upload_thumbnail"}),i.upload_thumbnail?"":Object(m.jsx)("div",{className:"add-file-upload",children:Object(m.jsxs)("label",{htmlFor:"upload_thumbnail",className:"file-upload",children:[Object(m.jsx)("i",{className:"icon-picture-o"})," ",Object(m.jsx)("span",{children:n("common.upload_image")})]})}),b.a.isBlank(i.upload_thumbnail)?b.a.isBlank(i.thumbnail)?"":Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:v.a.SERVER_DATA+"/"+i.thumbnail}),Object(m.jsxs)("div",{className:"file-upload-action",children:[Object(m.jsx)("label",{className:"edit",htmlFor:"upload_thumbnail",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})}),Object(m.jsx)("span",{className:"delete",onClick:function(e){return t.onClickDeleteAvatar(e)},children:Object(m.jsx)("var",{className:"icon-trash-o"})})]})]}):Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:i.upload_thumbnail}),Object(m.jsx)("div",{className:"file-upload-action",children:Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})})})]})]})})}),b.a.isBlank(i.thumbnail_message)?"":Object(m.jsx)("div",{className:"alert alert-danger",children:i.thumbnail_message})]})})})]})})]}),Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:c})]})})})})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:n("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("common.update"):n("common.create")})]})]})}var rc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.iso_code_language;return s.trans=n,s.iso_code_language=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){"vi"===this.iso_code_language&&(this.addRuleForField("name_vi","trim",!0),this.addRuleForField("name_vi","required",!0,this.trans("validate_rule.required"),this.trans("error_level.name")),this.addRuleForField("name_vi","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("error_level.name"))),"en"===this.iso_code_language&&(this.addRuleForField("name_en","trim",!0),this.addRuleForField("name_en","required",!0,this.trans("validate_rule.required"),this.trans("error_level.name")),this.addRuleForField("name_en","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("error_level.name")))}},{key:"setAlias",value:function(){"vi"===this.iso_code_language&&this.v.setAlias({name_vi:this.trans("error_level.name")}),"en"===this.iso_code_language&&this.v.setAlias({name_en:this.trans("error_level.name")})}}]),a}(ue),lc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onFileAvatarChange=function(e){var t=s.props.t,a=e.target.files[0];if(a&&void 0!==a&&null!==a){var i=a.name,n=a.size,c=null;b.a.checkExtensionFile(i,1)?n<=0?c=t("message.msg_err_file_size"):n>v.a.COMMON.MAX_IMAGE_SIZE&&(c=t("message.msg_err_max_size_upload")):c=t("message.msg_err_ext_image_file");var r=Object(p.a)(s),l=s.state.curItem;if(!b.a.isBlank(c))return l.upload_thumbnail="",l.thumbnail_message=c,void s.setState({curItem:l});l.thumbnail_message="",s.setState({curItem:l});var o=new FileReader;o.onload=function(e){l.upload_thumbnail=e.target.result,l.upload_thumbnail_name=i,r.setState({curItem:l})},o.readAsDataURL(a)}},s.onClickDeleteAvatar=function(e){var t=s.state.curItem;t.thumbnail_message="",t.thumbnail_upload="",t.thumbnail=null,s.setState({curItem:t})},s.onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,4),o=a.substr(0,11);c.map((function(t,a){return r===t.iso_code&&"name"===l&&(n.data[a].name=e.target.validity.valid?i:s.state.curItem.data[a].name),r===t.iso_code&&"description"===o&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage},s.jsxTemplate=cc,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;v.a.SCREEN_MODE.ADD==e.screen_mode&&(e.status=1),this.setState({curItem:e})}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new rc(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new rc(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,i.iso_code=this.employee.iso_code,!b.a.isArrayData(i.data)){e.next=22;break}if(r=b.a.find(i.data,"is_default",1)){e.next=19;break}return e.abrupt("return");case 19:i.data.map((function(e,t){return i.data[t].name=""===e.name?r.name:e.name,i.data[t].description=""===e.description?r.description:e.description,i})),e.next=23;break;case 22:return e.abrupt("return",!1);case 23:Va.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function oc(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var dc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=oc,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Va.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function hc(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(nc,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,onClickAddDevice:t.onClickAddDevice,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(lc,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(dc,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"error-level-system",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("error_level.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("error_level.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{className:"header-col width10"}),Object(m.jsx)("div",{className:"name"===r.sort_column?"header-col width30 sorting "+r.order_by:"header-col width30 sorting",children:Object(m.jsx)("p",{children:a("error_level.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:a("error_level.description")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var mc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAddDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:a,addDevice:!0}))}},n.onClickCloseAddDevice=function(e){e&&n.getList(),n.setState({addDevice:!1})},n.onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id=t.id,Va.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.dataEmployees=e.dataEmployees,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(t["name_"+i.iso_code]=i.name,b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,Va.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=hc,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,addDevice:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,Va.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),uc=Object(f.a)("common")(mc),pc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.id," "]})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:b.a.isBlank(e.thumbnail)?"":Object(m.jsx)("img",{style:{maxHeight:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail})})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.name," "]})})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsxs)("p",{children:[e.description," "]})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function jc(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=this.props.t,c=null;return s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),c=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:n("error_type.name"),inputClass:"form-control",required:1===e.is_default?"required":"",inputId:"name_"+e.iso_code,inputName:"name_"+e.iso_code,value:i.data[a].name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:n("error_type.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})})]})})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("error_type.edit_title"):n("error_type.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:n("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12vcol-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:n("employee.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:i.status,onChange:function(e){t.handleInputChange(e)}})})]})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsxs)("div",{className:"file-upload",children:[Object(m.jsx)("label",{children:n("error_type.avatar")}),Object(m.jsx)("ul",{className:"row",children:Object(m.jsx)("li",{className:"col-md-12 col-12",children:Object(m.jsxs)("div",{className:"item-add-file-upload",children:[Object(m.jsx)("input",{onChange:function(e){return t.onFileAvatarChange(e)},type:"file",id:"upload_thumbnail",name:"upload_thumbnail"}),i.upload_thumbnail?"":Object(m.jsx)("div",{className:"add-file-upload",children:Object(m.jsxs)("label",{htmlFor:"upload_thumbnail",className:"file-upload",children:[Object(m.jsx)("i",{className:"icon-picture-o"})," ",Object(m.jsx)("span",{children:n("common.upload_image")})]})}),b.a.isBlank(i.upload_thumbnail)?b.a.isBlank(i.thumbnail)?"":Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:v.a.SERVER_DATA+"/"+i.thumbnail}),Object(m.jsxs)("div",{className:"file-upload-action",children:[Object(m.jsx)("label",{className:"edit",htmlFor:"upload_thumbnail",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})}),Object(m.jsx)("span",{className:"delete",onClick:function(e){return t.onClickDeleteAvatar(e)},children:Object(m.jsx)("var",{className:"icon-trash-o"})})]})]}):Object(m.jsxs)("div",{className:"view-file-upload",children:[Object(m.jsx)("img",{alt:"Upload",src:i.upload_thumbnail}),Object(m.jsx)("div",{className:"file-upload-action",children:Object(m.jsx)("label",{className:"edit",htmlFor:"file_upload",children:Object(m.jsx)("var",{className:"icon-pencil-square-o"})})})]})]})})}),b.a.isBlank(i.thumbnail_message)?"":Object(m.jsx)("div",{className:"alert alert-danger",children:i.thumbnail_message})]})})})]})})]}),Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:c})]})})})})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:n("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("common.update"):n("common.create")})]})]})}var bc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.iso_code_language;return s.trans=n,s.iso_code_language=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){"vi"===this.iso_code_language&&(this.addRuleForField("name_vi","trim",!0),this.addRuleForField("name_vi","required",!0,this.trans("validate_rule.required"),this.trans("error_level.name")),this.addRuleForField("name_vi","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("error_level.name"))),"en"===this.iso_code_language&&(this.addRuleForField("name_en","trim",!0),this.addRuleForField("name_en","required",!0,this.trans("validate_rule.required"),this.trans("error_level.name")),this.addRuleForField("name_en","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("error_level.name")))}},{key:"setAlias",value:function(){"vi"===this.iso_code_language&&this.v.setAlias({name_vi:this.trans("error_level.name")}),"en"===this.iso_code_language&&this.v.setAlias({name_en:this.trans("error_level.name")})}}]),a}(ue),vc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onFileAvatarChange=function(e){var t=s.props.t,a=e.target.files[0];if(a&&void 0!==a&&null!==a){var i=a.name,n=a.size,c=null;b.a.checkExtensionFile(i,1)?n<=0?c=t("message.msg_err_file_size"):n>v.a.COMMON.MAX_IMAGE_SIZE&&(c=t("message.msg_err_max_size_upload")):c=t("message.msg_err_ext_image_file");var r=Object(p.a)(s),l=s.state.curItem;if(!b.a.isBlank(c))return l.upload_thumbnail="",l.thumbnail_message=c,void s.setState({curItem:l});l.thumbnail_message="",s.setState({curItem:l});var o=new FileReader;o.onload=function(e){l.upload_thumbnail=e.target.result,l.upload_thumbnail_name=i,r.setState({curItem:l})},o.readAsDataURL(a)}},s.onClickDeleteAvatar=function(e){var t=s.state.curItem;t.thumbnail_message="",t.thumbnail_upload="",t.thumbnail=null,s.setState({curItem:t})},s.onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,4),o=a.substr(0,11);c.map((function(t,a){return r===t.iso_code&&"name"===l&&(n.data[a].name=e.target.validity.valid?i:s.state.curItem.data[a].name),r===t.iso_code&&"description"===o&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage},s.jsxTemplate=jc,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;v.a.SCREEN_MODE.ADD==e.screen_mode&&(e.status=1),this.setState({curItem:e})}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new bc(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new bc(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,i.iso_code=this.employee.iso_code,!b.a.isArrayData(i.data)){e.next=22;break}if(r=b.a.find(i.data,"is_default",1)){e.next=19;break}return e.abrupt("return");case 19:i.data.map((function(e,t){return i.data[t].name=""===e.name?r.name:e.name,i.data[t].description=""===e.description?r.description:e.description,i})),e.next=23;break;case 22:return e.abrupt("return",!1);case 23:Wa.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function _c(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var gc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=_c,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Wa.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function fc(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(pc,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,onClickAddDevice:t.onClickAddDevice,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(vc,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(gc,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"error-type-system",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("error_type.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("error_type.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{className:"header-col width10"}),Object(m.jsx)("div",{className:"name"===r.sort_column?"header-col width30 sorting "+r.order_by:"header-col width30 sorting",children:Object(m.jsx)("p",{children:a("error_type.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:a("error_type.description")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var xc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAddDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:a,addDevice:!0}))}},n.onClickCloseAddDevice=function(e){e&&n.getList(),n.setState({addDevice:!1})},n.onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id=t.id,Wa.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.dataEmployees=e.dataEmployees,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(t["name_"+i.iso_code]=i.name,b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,Wa.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=fc,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,addDevice:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,Wa.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Oc=Object(f.a)("common")(xc),yc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.id," "]})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:b.a.isBlank(e.thumbnail)?"":Object(m.jsx)("img",{style:{maxHeight:"20px"},src:v.a.SERVER_DATA+"/"+e.thumbnail})})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.name," "]})})}),Object(m.jsx)("div",{className:"body-col width30",children:Object(m.jsxs)("p",{children:[e.description," "]})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function Mc(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=this.props.t,c=null;return s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),c=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:n("error_state.name"),inputClass:"form-control",required:1===e.is_default?"required":"",inputId:"name_"+e.iso_code,inputName:"name_"+e.iso_code,value:i.data[a].name,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:200})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:n("error_state.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})})]})})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("error_state.edit_title"):n("error_state.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:n("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12vcol-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:n("employee.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:i.status,onChange:function(e){t.handleInputChange(e)}})})]})})})})]}),Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:c})]})})})})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:n("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?n("common.update"):n("common.create")})]})]})}var Nc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t,c=e.iso_code_language;return s.trans=n,s.iso_code_language=c,s}return Object(s.a)(a,[{key:"setRule",value:function(){"vi"===this.iso_code_language&&(this.addRuleForField("name_vi","trim",!0),this.addRuleForField("name_vi","required",!0,this.trans("validate_rule.required"),this.trans("error_level.name")),this.addRuleForField("name_vi","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("error_level.name"))),"en"===this.iso_code_language&&(this.addRuleForField("name_en","trim",!0),this.addRuleForField("name_en","required",!0,this.trans("validate_rule.required"),this.trans("error_level.name")),this.addRuleForField("name_en","maxLength",200,this.trans("validate_rule.maxLength_input"),this.trans("error_level.name")))}},{key:"setAlias",value:function(){"vi"===this.iso_code_language&&this.v.setAlias({name_vi:this.trans("error_level.name")}),"en"===this.iso_code_language&&this.v.setAlias({name_en:this.trans("error_level.name")})}}]),a}(ue),Cc=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_STATE.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_STATE.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_STATE.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_STATE.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR_STATE.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_STATE.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR_STATE.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),kc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,4),o=a.substr(0,11);c.map((function(t,a){return r===t.iso_code&&"name"===l&&(n.data[a].name=e.target.validity.valid?i:s.state.curItem.data[a].name),r===t.iso_code&&"description"===o&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage},s.jsxTemplate=Mc,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;v.a.SCREEN_MODE.ADD==e.screen_mode&&(e.status=1),this.setState({curItem:e})}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Nc(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new Nc(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,i.iso_code=this.employee.iso_code,!b.a.isArrayData(i.data)){e.next=22;break}if(r=b.a.find(i.data,"is_default",1)){e.next=19;break}return e.abrupt("return");case 19:i.data.map((function(e,t){return i.data[t].name=""===e.name?r.name:e.name,i.data[t].description=""===e.description?r.description:e.description,i})),e.next=23;break;case 22:return e.abrupt("return",!1);case 23:Cc.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Dc(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var wc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=Dc,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Cc.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Ac(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(yc,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,onClickAddDevice:t.onClickAddDevice,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(kc,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions,iso_code_language:this.employee.lang}):"",o=this.state.delete?Object(m.jsx)(wc,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"error-type-system",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("error_state.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("error_state.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{className:"header-col width10"}),Object(m.jsx)("div",{className:"name"===r.sort_column?"header-col width30 sorting "+r.order_by:"header-col width30 sorting",children:Object(m.jsx)("p",{children:a("error_state.name")})}),Object(m.jsx)("div",{className:"header-col width30",children:Object(m.jsx)("p",{children:a("error_state.description")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var Ic=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAddDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:a,addDevice:!0}))}},n.onClickCloseAddDevice=function(e){e&&n.getList(),n.setState({addDevice:!1})},n.onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,name:"",description:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id=t.id,Cc.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.dataEmployees=e.dataEmployees,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(t["name_"+i.iso_code]=i.name,b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,Cc.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=Ac,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,addDevice:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,Cc.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Pc=Object(f.a)("common")(Ic),Yc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsxs)("div",{className:"body-col width20",children:[Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("common.id"),":"]})," ",e.id]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("error.code"),":"]})," ",e.error_code]})]}),Object(m.jsxs)("div",{className:"body-col width20",children:[Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("error.field"),": "]}),e.error_state_name]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("error.id_error_type"),": "]}),e.error_type_name]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("error.id_error_level"),": "]}),e.error_level_name]})]}),Object(m.jsxs)("div",{className:"body-col width40",children:[Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[t("error.device"),":"]})," ",e.device_group_name]})," ",Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Message: "})," ",e.message]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Description: "})," ",e.description]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Solutions: "}),e.solutions]})]}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function Ec(){var e,t=this,a=this.state,i=a.curItem,s=a.allLanguage,n=a.dataErrorType,c=a.dataErrorLevel,r=a.dataErrorState,l=a.dataDeviceGroup,o=this.props.t,d=null;return s&&(e=s.map((function(e,a){return Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)("span",{onClick:function(a){t.onClickShowTab(a,e.iso_code)},className:i.tabActive===e.iso_code?"nav-link active":"nav-link",id:"name-tab-"+e.iso_code,children:e.name})},a)})),d=s.map((function(e,a){return Object(m.jsx)("div",{className:i.tabActive===e.iso_code?"tab-pane fade show active":"tab-pane fade",id:"name-"+e.iso_code,role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:o("error.message"),inputClass:"form-control",inputId:"message_"+e.iso_code,inputName:"message_"+e.iso_code,value:i.data[a].message,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:400})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:o("error.description"),inputClass:"form-control",inputId:"description_"+e.iso_code,inputName:"description_"+e.iso_code,value:i.data[a].description,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:1e3})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(le,{label:o("error.solutions"),inputClass:"form-control",inputId:"solutions_"+e.iso_code,inputName:"solutions_"+e.iso_code,value:i.data[a].solutions,onChange:function(e){t.handleInputTranslateChange(e),t.validateOne(e)},maxLength:1e3})})})]})})},a)}))),Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:i.screen_mode===v.a.SCREEN_MODE.EDIT?o("error.edit_title"):o("error.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:o("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:o("employee.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:i.status,onChange:function(e){t.handleInputChange(e)}})})]})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{required:"required",label:o("error.id_error_type"),instanceId:"id_error_type",className:"id_error_type",name:"id_error_type",value:n.filter((function(e){return e.id===i.id_error_type})),onChange:function(e){t.handleDropdownChange(e,"id_error_type")},optionList:n,placeHolder:o("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:o("error.id_error_level"),required:"required",instanceId:"id_error_level",className:"id_error_level",name:"id_error_level",value:c.filter((function(e){return e.id===i.id_error_level})),onChange:function(e){t.handleDropdownChange(e,"id_error_level")},optionList:c,placeHolder:o("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:o("error.id_error_state"),required:"required",instanceId:"id_error_state",className:"id_error_state",name:"id_error_state",value:r.filter((function(e){return e.id===i.id_error_state})),onChange:function(e){t.handleDropdownChange(e,"id_error_state")},optionList:r,placeHolder:o("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:o("error.id_device_group"),required:"required",instanceId:"id_device_group",className:"id_device_group",name:"id_device_group",value:l.filter((function(e){return e.id===i.id_device_group})),onChange:function(e){t.handleDropdownChange(e,"id_device_group")},optionList:l,placeHolder:o("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:o("error.error_code"),required:"required",inputClass:"form-control",inputId:"error_code",inputName:"error_code",value:i.error_code,onChange:function(e){t.handleInputChange(e),t.validateOne(e)},maxLength:100})})})]})})]}),Object(m.jsx)("div",{className:"box-translate",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsxs)("div",{className:"tab-main",children:[Object(m.jsx)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:e}),Object(m.jsx)("div",{className:"tab-content",id:"tabContent",children:d})]})})})})]}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:o("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:i.screen_mode===v.a.SCREEN_MODE.EDIT?o("common.update"):o("common.create")})]})]})}var Lc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("id_error_type","trim",!0),this.addRuleForField("id_error_type","required",!0,this.trans("validate_rule.required"),this.trans("error.id_error_type")),this.addRuleForField("id_error_type","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("error.id_error_type")),this.addRuleForField("id_error_level","trim",!0),this.addRuleForField("id_error_level","required",!0,this.trans("validate_rule.required"),this.trans("error.id_error_level")),this.addRuleForField("id_error_level","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("error.id_error_level")),this.addRuleForField("id_error_state","trim",!0),this.addRuleForField("id_error_state","required",!0,this.trans("validate_rule.required"),this.trans("error.id_error_state")),this.addRuleForField("id_error_state","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("error.id_error_state")),this.addRuleForField("id_device_group","trim",!0),this.addRuleForField("id_device_group","required",!0,this.trans("validate_rule.required"),this.trans("error.id_device_group")),this.addRuleForField("id_device_group","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("error.id_device_group")),this.addRuleForField("error_code","trim",!0),this.addRuleForField("error_code","required",!0,this.trans("validate_rule.required"),this.trans("error.error_code")),this.addRuleForField("error_code","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("error.error_code"))}},{key:"setAlias",value:function(){this.v.setAlias({id_error_type:this.trans("error.id_error_type"),id_error_level:this.trans("error.id_error_level"),id_error_state:this.trans("error.id_error_state"),id_device_group:this.trans("error.id_device_group"),error_code:this.trans("error.error_code")})}}]),a}(ue),Sc=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.ERROR.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.ERROR.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Tc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;s.props.t;if("id_error_type"===t)if(b.a.isObjectEmpty(e))i.id_error_type="";else{var n=e.value;i[t]=n,a.setValidateMessage({id_error_type:""},!0)}if("id_error_level"===t)if(b.a.isObjectEmpty(e))i.id_error_level="";else{n=e.value;i[t]=n,a.setValidateMessage({id_error_level:""},!0)}if("id_error_state"===t)if(b.a.isObjectEmpty(e))i.id_error_state="";else{n=e.value;i[t]=n,a.setValidateMessage({id_error_state:""},!0)}if("id_device_group"===t)if(b.a.isObjectEmpty(e))i.id_device_group="";else{n=e.value;i[t]=n,a.setValidateMessage({id_device_group:""},!0)}a.setState({curItem:i})},s.onClickShowTab=function(e,t){var a=s.state.curItem;b.a.isBlank(t)||(a.tabActive=t,s.setState({curItem:a}))},s.handleInputTranslateChange=function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var n=s.state.curItem,c=s.state.allLanguage,r=a.substr(-2,2),l=a.substr(0,7),o=a.substr(0,11),d=a.substr(0,9);c.map((function(t,a){return r===t.iso_code&&"message"===l&&(n.data[a].message=e.target.validity.valid?i:s.state.curItem.data[a].message),r===t.iso_code&&"description"===o&&(n.data[a].description=e.target.validity.valid?i:s.state.curItem.data[a].description),r===t.iso_code&&"solutions"===d&&(n.data[a].solutions=e.target.validity.valid?i:s.state.curItem.data[a].solutions),1})),n[a]=e.target.validity.valid?i:s.state.curItem[a],s.setState({curItem:n})}},s.state={curItem:s.props.curItem,allLanguage:s.props.allLanguage,dataErrorType:[],dataErrorLevel:[],dataErrorState:[],dataDeviceGroup:[]},s.jsxTemplate=Ec,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;v.a.SCREEN_MODE.ADD==e.screen_mode&&(e.status=1),this.getListErrorType(),this.getListErrorLevel(),this.getListErrorState(),this.getListDeviceGroup(),this.setState({curItem:e})}},{key:"getListDeviceGroup",value:function(){var e=this,t={id_language:this.employee.id_language};Wt.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataDeviceGroup:t}):e.setState({dataDeviceGroup:[]})}))}},{key:"getListErrorState",value:function(){var e=this,t={id_language:this.employee.id_language};Cc.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorState:t}):e.setState({dataErrorState:[]})}))}},{key:"getListErrorLevel",value:function(){var e=this,t={id_language:this.employee.id_language};Va.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorLevel:t}):e.setState({dataErrorLevel:[]})}))}},{key:"getListErrorType",value:function(){var e=this,t={id_language:this.employee.id_language};Wa.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataErrorType:t}):e.setState({dataErrorType:[]})}))}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Lc(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new Lc(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:if(this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,i.iso_code=this.employee.iso_code,!b.a.isArrayData(i.data)){e.next=22;break}if(r=b.a.find(i.data,"is_default",1)){e.next=19;break}return e.abrupt("return");case 19:i.data.map((function(e,t){return i.data[t].message=""===e.message?r.message:e.message,i.data[t].description=""===e.description?r.description:e.description,i.data[t].solutions=""===e.solutions?r.solutions:e.solutions,i})),e.next=23;break;case 22:return e.abrupt("return",!1);case 23:Sc.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Rc(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var Fc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=Rc,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Sc.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);a(857);function Hc(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(Yc,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,onClickAddDevice:t.onClickAddDevice,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(Tc,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions}):"",o=this.state.delete?Object(m.jsx)(Fc,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"error-type-system",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("error.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("error.message"),inputClass:"form-control",inputId:"message",inputName:"message",value:r.message,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width20 sorting "+r.order_by:"header-col width20 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:a("error.field")})}),Object(m.jsx)("div",{className:"header-col width40",children:Object(m.jsx)("p",{children:a("error.info")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var Bc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAddDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:a,addDevice:!0}))}},n.onClickCloseAddDevice=function(e){e&&n.getList(),n.setState({addDevice:!1})},n.onClickAdd=function(){var e={},t=[],a=n.state.allLanguage;e.screen_mode=v.a.SCREEN_MODE.ADD,e.tabActive="",a.map((function(a,i){1===a.is_default&&(e.tabActive=1===a.is_default?a.iso_code:"");var s={is_default:a.is_default,iso_code:a.iso_code,id_language:a.id,message:"",description:"",solutions:""};return t.push(s)})),e.data=t,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n),i=n.state.curItem;i.id=t.id,Sc.instance.getDetail(i,(function(e){if(e){t.data=e.data,t.dataEmployees=e.dataEmployees,t.screen_mode=v.a.SCREEN_MODE.EDIT;var i=b.a.find(e.data,"is_default",1);if(b.a.isObjectEmpty(i))return!1;if(b.a.isArrayData(e.data))e.data.map((function(e,a){return 1===e.is_default&&(t.tabActive=e.iso_code),1}));a.setState({curItem:t,add:!0})}}),!1)}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,Sc.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=Hc,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,addDevice:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,Sc.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.message=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Uc=Object(f.a)("common")(Bc),Vc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onItemClick=function(){e.props.onItemClick&&"function"===typeof e.props.onItemClick&&e.props.onItemClick(e.props.index)},e.onItemClickDelete=function(){e.props.onItemClickDelete&&"function"===typeof e.props.onItemClickDelete&&e.props.onItemClickDelete(e.props.index)},e.onStatusChange=function(){e.props.onStatusChange&&"function"===typeof e.props.onStatusChange&&e.props.onStatusChange(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem,t=this.props.t;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)(Je.a,{}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.id})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.device_group_name})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.name})}),Object(m.jsx)("div",{className:"body-col width20",children:Object(m.jsx)("p",{children:e.slug})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("p",{children:e.unit})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status_"+e.id,inputName:"status",checked:1*e.status===1?1:0,disabled:!_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.APPROVAL),onChange:this.onStatusChange.bind(this)})})}),Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsx)("div",{className:"functions",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.EDIT)?this.onItemClick.bind(this):null,"data-tip":t("common.edit"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-pencil-square-o","aria-hidden":"true"})}),Object(m.jsx)("li",{className:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?"":"disabled",onClick:_.a.getPermisson(this.props.actions,v.a.AUTH_MODE.DEL)?this.onItemClickDelete.bind(this):null,"data-tip":t("common.delete"),"data-type":"warning","data-class":"tooltip-action",children:Object(m.jsx)("var",{className:"icon-trash-o","aria-hidden":"true"})})]})})})]},e.id)}}]),a}(r.Component);function Wc(){var e=this,t=this.state,a=t.curItem,i=t.dataDeviceGroup,s=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-add",dialogClassName:"modal-lg modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:a.screen_mode===v.a.SCREEN_MODE.EDIT?s("device_parameter.edit_title"):s("device_parameter.add_title")}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseAdd.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsxs)("div",{className:"box-info",children:[Object(m.jsx)("h2",{children:s("common.info")}),Object(m.jsx)("div",{className:"box-info-content",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-12",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("p",{className:"control-label",children:s("employee.status")}),Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"status",inputName:"status",checked:a.status,onChange:function(t){e.handleInputChange(t)}})})]})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(mt,{label:s("device_parameter.id_device_group"),required:"required",instanceId:"id_device_group",className:"id_device_group",name:"id_device_group",value:i.filter((function(e){return e.id===a.id_device_group})),onChange:function(t){e.handleDropdownChange(t,"id_device_group")},optionList:i,placeHolder:s("common.choose")})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("device_parameter.name"),required:"required",inputClass:"form-control",inputId:"name",inputName:"name",value:a.name,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("device_parameter.slug"),required:"required",inputClass:"form-control",inputId:"slug",inputName:"slug",value:a.slug,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xl-6 col-lg-6 col-md-6 col-12",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:s("device_parameter.unit"),inputClass:"form-control",inputId:"unit",inputName:"unit",value:a.unit,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},maxLength:20})})})]})})]})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClickCloseAdd.bind(this,!1),children:s("common.cancel")}),Object(m.jsx)("button",{type:"button",className:"btn btn-save",onClick:this.onSave.bind(this),children:a.screen_mode===v.a.SCREEN_MODE.EDIT?s("common.update"):s("common.create")})]})]})}var qc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("id_device_group","trim",!0),this.addRuleForField("id_device_group","required",!0,this.trans("validate_rule.required"),this.trans("device_parameter.id_device_group")),this.addRuleForField("id_device_group","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device_parameter.id_device_group")),this.addRuleForField("name","trim",!0),this.addRuleForField("name","required",!0,this.trans("validate_rule.required"),this.trans("device_parameter.name")),this.addRuleForField("name","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("device_parameter.name")),this.addRuleForField("slug","trim",!0),this.addRuleForField("slug","required",!0,this.trans("validate_rule.required"),this.trans("device_parameter.slug")),this.addRuleForField("slug","maxLength",100,this.trans("validate_rule.maxLength_input"),this.trans("device_parameter.slug"))}},{key:"setAlias",value:function(){this.v.setAlias({id_device_group:this.trans("device_parameter.id_device_group"),name:this.trans("device_parameter.name"),slug:this.trans("device_parameter.slug")})}}]),a}(ue),zc=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getList",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_PARAMETER.LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"updateStatus",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_PARAMETER.UPDATE_STATUS,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=a.mess;t(a.status,i)}}))}catch(a){t(!1,a)}}},{key:"save",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_PARAMETER.SAVE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,null,a)}}},{key:"delete",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_PARAMETER.DELETE,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=null,s=a.mess;b.a.isObjectEmpty(a.data)||(i=a.data),t(a.status,i,s)}}))}catch(a){t(!1,a)}}},{key:"getDetail",value:function(e,t){try{new x.a(!0).post(v.a.URL.DEVICE_PARAMETER.DETAIL,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i={};a.status&&"object"===typeof a.data&&(i=a.data),t(i)}}))}catch(a){t({})}}},{key:"getDropdownList",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_PARAMETER.DROPDOWN_LIST,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}},{key:"getDropdownListAttr",value:function(e,t){try{new x.a(!1).post(v.a.URL.DEVICE_PARAMETER.DROPDOWN_LIST_ATTR,e,(function(e,a){if("function"===typeof t){if(!e||!a)return;var i=[],s=0;a.status&&Array.isArray(a.data)&&(i=a.data,s=a.total_row),t(i,s,"")}}))}catch(a){t(!1,0,a)}}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),Gc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleDropdownChange=function(e,t){var a=Object(p.a)(s),i=a.state.curItem;if("id_device_group"===t)if(b.a.isObjectEmpty(e))i.id_device_group="";else{var n=e.value;i[t]=n,a.setValidateMessage({id_device_group:""},!0)}a.setState({curItem:i})},s.state={curItem:Object.assign({},s.props.curItem),dataDeviceGroup:[]},s.jsxTemplate=Wc,s.handleDropdownChange=s.handleDropdownChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.curItem;v.a.SCREEN_MODE.ADD==e.screen_mode&&(e.status=1),this.getListDeviceGroup(),this.setState({curItem:e})}},{key:"getListDeviceGroup",value:function(){var e=this,t={id_language:this.employee.id_language};Wt.instance.getDropdownList(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataDeviceGroup:t}):e.setState({dataDeviceGroup:[]})}))}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new qc(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.curItem,a=this,i=Object.assign({},this.state.curItem),s=b.a.isBlank(t.id)?b.a.isBlank(this.props.curItem.screen_mode)?v.a.SCREEN_MODE.ADD:this.props.curItem.screen_mode:v.a.SCREEN_MODE.EDIT,n=new qc(this.props),e.next=6,n.FLValidationAll(t);case 6:if(!(c=e.sent)){e.next=10;break}return this.setValidateMessage(c),e.abrupt("return");case 10:this.removeAllValidateMessage(),i.screen_mode=s,i.iso_code_lang=this.employee.lang,i.id_language=this.employee.id_language,i.iso_code=this.employee.iso_code,zc.instance.save(i,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseAdd(!0)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"error")}),!0);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function $c(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("common.delete"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.onClickCloseDelete.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:t("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.onClickCloseDelete.bind(this),className:"btn btn-cancel",text:" "+t("common.cancel"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.cancel")}),Object(m.jsx)(oe,{onClick:this.onDeleteAction.bind(this),className:"btn btn-save",text:t("common.delete"),title:t("common.delete")})]})]})}var Kc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=$c,s}return Object(s.a)(a,[{key:"onClickCloseDelete",value:function(){this.props.onClickCloseDelete&&"function"===typeof this.props.onClickCloseDelete&&this.props.onClickCloseDelete(!1,null)}},{key:"onDeleteAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status=-1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,zc.instance.delete(t,(function(e,t,i){e?(a.toast(i,"info"),a.props.onClickCloseDelete(!0,t)):t?a.setValidateMessage(t):b.a.isBlank(i)||a.toast(i,"DeviceParameter")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Jc(){var e,t=this,a=this.props.t,i=this.state,s=i.curItem,n=i.dataList,c=i.allLanguage,r=i.searchParam;e=n.map((function(e,i){return Object(m.jsx)(Vc,{index:i,dataItem:e,onItemClick:t.onItemClick,onItemClickDelete:t.onItemClickDelete,onStatusChange:t.onStatusChange,actions:t.actions,onClickAddDevice:t.onClickAddDevice,t:a},"row_item_"+i)}));var l=this.state.add?Object(m.jsx)(Gc,{t:a,allLanguage:c,curItem:s,onClickCloseAdd:this.onClickCloseAdd,auth:this.props.auth,actions:this.actions}):"",o=this.state.delete?Object(m.jsx)(Kc,{t:a,curItem:s,onClickCloseDelete:this.onClickCloseDelete,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"error-type-system",children:[l,o,Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("device_parameter.title")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon icon-search"})})}),Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?"add":"add disabled",onClick:_.a.getPermisson(this.actions,v.a.AUTH_MODE.NEW)?this.onClickAdd.bind(this):null,children:Object(m.jsx)("span",{className:"icon icon-plus"})})})]})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("common.id"),inputClass:"form-control",inputId:"id",inputName:"id",value:r.id,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("device_parameter.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:r.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===r.sort_column?"header-col width10 sorting "+r.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("common.id")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:a("device_parameter.id_device_group")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:a("device_parameter.name")})}),Object(m.jsx)("div",{className:"header-col width20",children:Object(m.jsx)("p",{children:a("device_parameter.slug")})}),Object(m.jsx)("div",{className:"header-col width10",children:Object(m.jsx)("p",{children:a("device_parameter.unit")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"status")},className:"status"===r.sort_column?"header-col width10 sorting text-center "+r.order_by:"header-col width10 sorting text-center ",children:Object(m.jsx)("p",{children:a("common.status")})}),Object(m.jsx)("div",{className:"header-col width10 text-end",children:Object(m.jsx)("strong",{children:a("common.action")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:b.a.isBlank(e)?Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")}):e})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}var Xc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickAddDevice=function(e){var t=n.state.dataList;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(a.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:a,addDevice:!0}))}},n.onClickCloseAddDevice=function(e){e&&n.getList(),n.setState({addDevice:!1})},n.onClickAdd=function(){var e={};e.screen_mode=v.a.SCREEN_MODE.ADD,n.setState({curItem:e,add:!0})},n.onClickCloseAdd=function(e){e&&n.getList(),n.setState({add:!1})},n.onClickCloseDelete=function(e,t){e&&t&&n.getList(),n.setState({delete:!1})},n.onItemClick=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,a.setState({curItem:t,add:!0})}},n.onStatusChange=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e],a=Object(p.a)(n);t.screen_mode=v.a.SCREEN_MODE.EDIT,t.id_language=n.employee.id_language;var i=t.status;i=1*i===1?0:1,t.status=i,t.updated_by=n.employee.first_name+" "+n.employee.last_name,zc.instance.updateStatus(t,(function(e,t){e&&a.setState({dataList:a.state.dataList})}))}},n.onItemClickDelete=function(e){if(b.a.isArrayData(n.state.dataList)){var t=n.state.dataList[e];n.setState({curItem:t,delete:!0})}},n.jsxTemplate=Jc,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},add:!1,addDevice:!1,delete:!1,formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,zc.instance.getList(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"DeviceParameter")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getList()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"DeviceParameter")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"DeviceParameter")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getList()}},{key:"onClickReload",value:function(){this.getList()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getList()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.id=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getList()}))}},{key:"handleSearch",value:function(){this.getList()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Zc=Object(f.a)("common")(Xc),Qc=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsxs)("div",{className:"body-row",children:[Object(m.jsx)("div",{className:"body-col width10",children:Object(m.jsxs)("p",{children:[e.id," "]})}),Object(m.jsx)("div",{className:"body-col width40",children:Object(m.jsx)("p",{children:Object(m.jsxs)("strong",{children:[e.name," "]})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"mail_now_"+e.id,inputName:"mail_now",checked:1*e.mail_now===1?1:0,onChange:this.props.onStatusChange.bind(this,this.props.index,"now")})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"mail_day_"+e.id,inputName:"mail_day",checked:1*e.mail_day===1?1:0,onChange:this.props.onStatusChange.bind(this,this.props.index,"day")})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"mail_month_"+e.id,inputName:"mail_month",checked:1*e.mail_month===1?1:0,onChange:this.props.onStatusChange.bind(this,this.props.index,"month")})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"mail_year_"+e.id,inputName:"mail_year",checked:1*e.mail_year===1?1:0,onChange:this.props.onStatusChange.bind(this,this.props.index,"year")})})}),Object(m.jsx)("div",{className:"body-col width10 text-center",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{inputId:"mail_all_"+e.id,inputName:"mail_all",checked:1*e.mail_all===1?1:0,onChange:this.props.onStatusChange.bind(this,this.props.index,"all")})})})]},e.id)}}]),a}(r.Component);function er(){var e,t=this,a=this.props.t,i=this.state,s=i.dataList,n=i.searchParam;return e=s.map((function(e,i){return Object(m.jsx)(Qc,{index:i,dataItem:e,onStatusChange:t.onStatusChange,actions:t.actions,t:a},"row_item_"+i)})),Object(m.jsxs)("div",{className:"employee-config-mail",children:[Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("h2",{children:a("account.mail_notify")})}),Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("ul",{children:Object(m.jsx)("li",{children:Object(m.jsx)("div",{className:"search",onClick:this.onSearch.bind(this),children:Object(m.jsx)("span",{className:"icon-search"})})})})})]})}),this.state.formSearch?Object(m.jsx)("div",{className:"form-search",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(ce,{label:a("project.name"),inputClass:"form-control",inputId:"name",inputName:"name",value:n.name,onChange:function(e){t.handleSearchInputChange(e)},maxLength:100})})}),Object(m.jsx)("div",{className:"col-xs-12 col-sm-3 col-md-3 col-lg-3",children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsxs)("button",{type:"button",className:"btn btn-search",onClick:this.handleSearch.bind(this),children:[" ",a("common.search")," "]}),Object(m.jsxs)("button",{type:"button",className:"btn btn-reset",onClick:this.onResetSearch.bind(this),children:[" ",a("common.reset")," "]})]})})]})}):"",Object(m.jsxs)("div",{className:"data-view",children:[Object(m.jsx)("div",{className:"main-header",children:Object(m.jsxs)("div",{className:"header-row",children:[Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"id")},className:"id"===n.sort_column?"header-col width10 sorting "+n.order_by:"header-col width10 sorting",children:Object(m.jsx)("p",{children:a("employee.id")})}),Object(m.jsx)("div",{onClick:function(e){return t.onSort(e,"name")},className:"name"===n.sort_column?"header-col width40 sorting "+n.order_by:"header-col width40 sorting",children:Object(m.jsx)("p",{children:a("project.name")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:a("common.now")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:a("common.day")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:a("common.month")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:a("common.year")})}),Object(m.jsx)("div",{className:"header-col width10 text-center",children:Object(m.jsx)("p",{children:a("common.all")})})]})}),Object(m.jsx)("div",{className:"main-body",children:Object(m.jsx)("div",{className:"body",children:e||Object(m.jsx)("div",{className:"data-empty",children:a("common.data_empty")})})})]}),Object(m.jsx)("div",{className:"main-paging",children:Object(m.jsx)(et,{total:parseInt(this.paging.total),current:this.paging.current,currentInput:this.paging.currentInput,inputChangedHandler:this.inputChangedHandler,inputChangedEnter:this.inputChangedEnter,inputChangedBlue:this.inputChangedBlue,onClickReload:function(e){return t.onClickReload.bind(t)},onSelectPage:function(e){return t.onSelectPage.bind(t,e)}})})]})}a(858);var tr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onStatusChange=function(e,t){var a=n.state.dataList;if(b.a.isArrayData(a)){var i=a[e],s=Object(p.a)(n);if(!b.a.isObjectEmpty(i)){switch(t){case"all":i.mail_now=1==i.mail_all?0:1,i.mail_day=1==i.mail_all?0:1,i.mail_month=1==i.mail_all?0:1,i.mail_year=1==i.mail_all?0:1,i.mail_all=1==i.mail_all?0:1;break;case"now":i.mail_now=1==i.mail_now?0:1;break;case"day":i.mail_day=1==i.mail_day?0:1;break;case"month":i.mail_month=1==i.mail_month?0:1;break;case"year":i.mail_year=1==i.mail_year?0:1}1==i.mail_now&&1==i.mail_day&&1==i.mail_month&&1==i.mail_year?i.mail_all=1:i.mail_all=0,a[e]=i,je.instance.updateStatusMailConfig(i,(function(e,t){e&&s.setState({dataList:a})}))}}},n.jsxTemplate=er,n.state={curItem:{},dataList:[],searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1},formSearch:!1,allLanguage:b.a.isBlank(n.employee)?[]:n.employee.languages},n.paging={total:0,current:1,currentInput:1},n.inputChangedHandler=n.inputChangedHandler.bind(Object(p.a)(n)),n.inputChangedEnter=n.inputChangedEnter.bind(Object(p.a)(n)),n.inputChangedBlue=n.inputChangedBlue.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListProjectConfigMail()}},{key:"getListProjectConfigMail",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,je.instance.getListProjectConfigMail(t,(function(t,a){if(b.a.isArrayData(t)){e.setState({dataList:t});var i=parseInt(a/e.state.searchParam.limit);a%e.state.searchParam.limit>0&&(i+=1),e.paging.total=i,e.paging.current=e.state.searchParam.index,e.paging.currentInput=e.state.searchParam.index,e.state.total_row=a}else e.setState({dataList:[],total_row:0}),e.paging.total=0,e.paging.current=1,e.paging.currentInput=1;e.forceUpdate()}))}},{key:"inputChangedHandler",value:function(e){var t=this,a=e.target,i=a.name,s=a.value;if("current"===i){if(!b.a.isBlank(s)){var n=this.props.t;if(!b.a.isNumber(s))return void t.toast(n("common.page_is_number"),"error")}t.paging.currentInput=s,t.forceUpdate()}if("limit"===i){var c=this.state.searchParam;c.limit=s,this.setState({searchParam:c},(function(){t.getListProjectConfigMail()}))}}},{key:"inputChangedEnter",value:function(e){var t=this;if("Enter"===e.key){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"inputChangedBlue",value:function(e){var t=this;if("current"===e.target.name){var a=this.paging.currentInput;if(!b.a.isBlank(a)){var i=this.props.t;if(!b.a.isNumber(a))return void t.toast(i("common.page_is_number"),"error")}if(b.a.isBlank(a)&&!b.a.isNumber(a))return;parseInt(a)>this.paging.total&&(a=t.paging.total),a<=0&&(a=1),t.paging.current=a,t.paging.currentInput=a,this.onSelectPage(a),t.forceUpdate()}}},{key:"onSelectPage",value:function(e){var t=this;t.state.searchParam.index=e,t.state.searchParam.offset=e>0?(e-1)*t.state.searchParam.limit:0,t.getListProjectConfigMail()}},{key:"onClickReload",value:function(){this.getListProjectConfigMail()}},{key:"onSort",value:function(e,t){this.state.searchParam.sort_column=t,this.state.searchParam.order_by=""===this.state.searchParam.order_by||"asc"===this.state.searchParam.order_by?"desc":"asc",this.getListProjectConfigMail()}},{key:"onSearch",value:function(){var e=!1===this.state.formSearch;this.setState({formSearch:e})}},{key:"onResetSearch",value:function(){var e=this,t=this.state.searchParam;t.name=null,t.index=1,t.offset=0,e.paging.current=1,e.paging.currentInput=1,e.paging.total=1,e.setState({searchParam:t},(function(){e.getListProjectConfigMail()}))}},{key:"handleSearch",value:function(){this.getListProjectConfigMail()}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),ar=Object(f.a)("common")(tr);function ir(){var e=this.props.t;return Object(m.jsx)("div",{className:"document",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("h2",{children:e("account.documents")})})})})}),Object(m.jsx)("div",{className:"col-md-12",children:Object(m.jsx)("iframe",{id:"framePrintId",width:"100%",title:"Document",height:"1150",name:"framePrintId",frameBorder:"0",src:"/document.pdf"})})]})})}var sr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=ir,n.state={curItem:{}},n}return Object(s.a)(a,[{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),nr=Object(f.a)("common")(sr),cr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onClickOnOff=function(){e.props.onClickOnOff&&"function"===typeof e.props.onClickOnOff&&e.props.onClickOnOff(e.props.index)},e.onClickControlCalender=function(){e.props.onClickControlCalender&&"function"===typeof e.props.onClickControlCalender&&e.props.onClickControlCalender(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsx)("li",{className:"col-md-3",children:Object(m.jsxs)("div",{className:"inverter-item",children:[Object(m.jsx)("div",{className:"title",children:e.name}),Object(m.jsx)("div",{className:"iv-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("img",{src:"/inverter.png",className:1==e.status_control?"on":"off"})}),Object(m.jsxs)("div",{className:"col-md-6 text-center",children:[Object(m.jsx)("div",{className:"mccb",children:"MCCB"}),Object(m.jsx)("div",{onClick:this.onClickOnOff.bind(this),className:1==e.status_control?"action-on-off on":"action-on-off off",children:1==e.status_control?"ON":"OFF"})]})]})}),Object(m.jsxs)("div",{className:"iv-content",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Power"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.activePower})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"kW"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"PF"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.powerFactor})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Temp"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.internalTemperature})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"\u2103"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Efficiency"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"90"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"%"})})]})]}),Object(m.jsx)("div",{className:"calendar-onoff",children:Object(m.jsx)("span",{onClick:this.onClickControlCalender.bind(this),children:"Setup"})})]})},this.props.index)}}]),a}(r.Component);function rr(){var e=this.state.curItem;console.log(e);var t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("device.device"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseOnOff.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:1==e.status_control?Object(m.jsx)("p",{children:t("device.message_off")}):Object(m.jsx)("p",{children:t("device.message_on")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.onClickCloseOnOff.bind(this,!1),className:"btn btn-cancel",text:" "+t("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickOnOffAction.bind(this),className:"btn btn-save",text:t("common.yes"),title:t("common.yes")})]})]})}var lr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=rr,s}return Object(s.a)(a,[{key:"onClickOnOffAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status_control=1==t.status_control?0:1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Ls.instance.updateOnOff(t,(function(e,t){e?(a.toast(t,"info"),a.props.onClickCloseOnOff(!0)):b.a.isBlank(t)||a.toast(t,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function or(){this.state.curItem;var e=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[e("device.delete_scheduled")," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.closeDeleteCalendar.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:e("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.closeDeleteCalendar.bind(this),className:"btn btn-cancel",text:" "+e("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:e("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickOnOffAction.bind(this),className:"btn btn-save",text:e("common.yes"),title:e("common.yes")})]})]})}var dr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=or,s}return Object(s.a)(a,[{key:"onClickOnOffAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,Ls.instance.deleteItemCalendarControl(t,(function(e,t){e?(a.toast(t,"info"),a.props.closeDeleteCalendar(!0)):b.a.isBlank(t)||a.toast(t,"error")}),!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function hr(){var e=this,t=this.state,a=t.curItem,i=t.eventsList,s=t.searchParam;Ye.a.locale("en-GB");var n=this.props.t,c=Object(qs.b)(Ye.a),r=this.state.deleteItemCalendar?Object(m.jsx)(dr,{t:n,curItem:this.state.itemCalendar,closeDeleteCalendar:this.closeDeleteCalendar,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"main-cal",children:[Object(m.jsx)("div",{className:"del",children:r}),Object(m.jsx)("div",{className:"cal",children:Object(m.jsxs)(Se.a,{visible:!0,className:"modal-control-calendar",dialogClassName:"modal-xl modal-dialog-scrollable",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[n("device.control_calendar"),": Device ",a.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onCloseControlCalender.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("div",{className:"add-date",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{value:s.date_from,inputId:"date_from",format:"DD/MM/YYYY HH:mm",dateFormat:"dd/MM/yyyy HH:mm",inputClass:"form-control",inputName:"date_from",minDate:s.min_date,handleChange:function(t){e.handleInputDateChange(t),e.validateOne(t)},maxLength:20,showIconCalendar:!0,timeIntervals:60,showTimeSelect:!0})})}),Object(m.jsx)("div",{className:"col-md-1 text-center",children:Object(m.jsx)("span",{className:"to",children:"To"})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{value:s.date_to,inputId:"date_to",format:"DD/MM/YYYY HH:mm",dateFormat:"dd/MM/yyyy HH:mm",inputClass:"form-control",inputName:"date_to",minDate:s.date_from,handleChange:function(t){e.handleInputDateChange(t),e.validateOne(t)},maxLength:20,showIconCalendar:!0,timeIntervals:60,showTimeSelect:!0})})}),Object(m.jsx)("div",{className:"col-md-1",children:Object(m.jsx)(oe,{onClick:this.onClickAddControlCalendarAction.bind(this),className:"btn btn-save",text:n("device.add"),title:n("device.add")})})]})}),Object(m.jsx)(qs.a,{localizer:c,events:i,startAccessor:"start",endAccessor:"end",step:60,style:{height:500},defaultView:"month",onSelectEvent:this.onSelectEvent.bind(this)})]})]})})]})}var mr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("date_from","trim",!0),this.addRuleForField("date_from","required",!0,this.trans("validate_rule.required"),this.trans("device.date_from")),this.addRuleForField("date_from","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.date_from")),this.addRuleForField("date_to","trim",!0),this.addRuleForField("date_to","required",!0,this.trans("validate_rule.required"),this.trans("device.date_to")),this.addRuleForField("date_to","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.date_to"))}},{key:"setAlias",value:function(){this.v.setAlias({date_from:this.trans("device.date_from"),date_to:this.trans("device.date_to")})}}]),a}(ue),ur=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).closeDeleteCalendar=function(e){e&&s.getListControlCalendar(),s.setState({deleteItemCalendar:!1},(function(){document.body.classList.remove("on")}))},s.state={curItem:s.props.curItem,itemCalendar:{},deleteItemCalendar:!1,searchParam:{date_from:Ye()().format("DD/MM/YYYY HH:mm"),min_date:Ye()().format("DD/MM/YYYY HH:mm")},eventsList:[]},s.jsxTemplate=hr,s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListControlCalendar()}},{key:"getListControlCalendar",value:function(){var e=this,t=this.state.curItem,a=Object.assign({},t);a.id_device=t.id;var i=[];Ls.instance.getListControlCalendar(a,(function(t,a){b.a.isArrayData(t)?(t.map((function(e,t){i.push({title:e.title,start:new Date(e.start),end:new Date(e.end),index:t,id:e.id,id_device:e.id_device})})),e.setState({eventsList:i})):e.setState({eventsList:[]})}))}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,"date_from"==a&&(s.date_to=Ye()(b.a.dateFormat(i,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm")).add(2,"hours").format("DD/MM/YYYY HH:mm")),this.setState({searchParam:s})}}},{key:"onClickAddControlCalendarAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.curItem,i=t.searchParam,s=this,n=Object.assign({},i),c=new mr(this.props),e.next=5,c.FLValidationAll(n);case 5:if(!(r=e.sent)){e.next=9;break}return this.setValidateMessage(r),e.abrupt("return");case 9:if(this.removeAllValidateMessage(),n.screen_mode=v.a.SCREEN_MODE.ADD,!b.a.isBlank(a.id)){e.next=13;break}return e.abrupt("return");case 13:n.id=a.id,n.id_device=a.id,n.deviceID=a.id_device,n.date_from=b.a.dateFormat(i.date_from,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),n.date_to=b.a.dateFormat(i.date_to,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),n.hash_id=this.props.hash_id,Ls.instance.saveControlCalendar(n,(function(e,t,a){e?(s.toast(a,"info"),i.date_from=null,i.date_to=null,s.setState({searchParam:i},(function(){s.getListControlCalendar()}))):t?s.setValidateMessage(t):b.a.isBlank(a)||s.toast(a,"error")}),!0);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelectEvent",value:function(e){b.a.isObjectEmpty(e)||this.setState({itemCalendar:e,deleteItemCalendar:!0},(function(){document.body.classList.add("on")}))}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new mr(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(ee);function pr(){var e=this.state.searchParam,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Change Mode "}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseChangeMode.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:1==e.scheduled_mode?Object(m.jsx)("p",{children:t("device.change_mode_auto")}):Object(m.jsx)("p",{children:t("device.change_mode_manual")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.onClickCloseChangeMode.bind(this,!1),className:"btn btn-cancel",text:" "+t("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickChangeModeAction.bind(this),className:"btn btn-save",text:t("common.yes"),title:t("common.yes")})]})]})}var jr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem,searchParam:s.props.searchParam},s.jsxTemplate=pr,s}return Object(s.a)(a,[{key:"onClickChangeModeAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.searchParam).scheduled_mode=1==t.scheduled_mode?2:1,this.props.calbackChangeMode(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function br(){var e=this,t=this.state,a=t.curItem,i=t.dataListInverter,s=t.searchParam,n=this.props.t,c=this.state.showOnOffPopup?Object(m.jsx)(lr,{t:n,curItem:a,onClickCloseOnOff:this.onClickCloseOnOff,auth:this.props.auth,actions:this.actions}):"",r=this.state.showControlCalendar?Object(m.jsx)(ur,{t:n,curItem:a,onCloseControlCalender:this.onCloseControlCalender,auth:this.props.auth,actions:this.actions,hash_id:this.state.hash_id}):"",l=this.state.changeMode?Object(m.jsx)(jr,{t:n,curItem:this.state.curItem,searchParam:s,onClickCloseChangeMode:this.onClickCloseChangeMode,calbackChangeMode:this.calbackChangeMode,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"tab-control",children:[c,r,l,Object(m.jsxs)("div",{className:"main-manual",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{label:"Manual Mode",inputId:"scheduled_manual_mode",inputName:"scheduled_manual_mode",checked:1==s.scheduled_mode?1:0,onChange:this.handleInputChange.bind(this)})})})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{label:"Auto Mode",inputId:"scheduled_auto_mode",inputName:"scheduled_auto_mode",checked:2==s.scheduled_mode?1:0,onChange:this.handleInputChange.bind(this)})})})})]}),2==s.scheduled_mode?Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("legend",{children:Object(m.jsx)("span",{children:n("device.limit_power")})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"limit_power_status",inputName:"limit_power_status",checked:1*s.limit_power_status===1?1:0,onChange:this.handleInputChange.bind(this)})})}),Object(m.jsx)("div",{className:"mb-3s",children:Object(m.jsx)(ce,{placeholder:n("device.limit_power"),inputClass:"form-control",inputId:"limit_power",inputName:"limit_power",value:s.limit_power,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^(?!0\\d)\\d*[\\.]{0,1}(\\.\\d+)?$",disabled:!s.limit_power_status,maxLength:20})})]})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("legend",{children:Object(m.jsx)("span",{children:n("device.limit_energy")})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(se,{inputId:"limit_energy_status",inputName:"limit_energy_status",checked:1*s.limit_energy_status===1?1:0,onChange:this.handleInputChange.bind(this)})})}),Object(m.jsx)("div",{className:"mb-3s",children:Object(m.jsx)(ce,{placeholder:n("device.limit_energy"),inputClass:"form-control",inputId:"limit_energy",inputName:"limit_energy",value:s.limit_energy,onChange:function(t){e.handleInputChange(t),e.validateOne(t)},pattern:"^(?!0\\d)\\d*[\\.]{0,1}(\\.\\d+)?$",disabled:!s.limit_energy_status,maxLength:20})})]})}),Object(m.jsx)("div",{className:"col-md-3",children:Object(m.jsx)(oe,{onClick:this.onClickSaveExportLimitationAction.bind(this),className:"btn btn-save",text:n("device.add"),title:n("device.add")})})]}):""]}),Object(m.jsx)("div",{className:"main-device-limit",children:Object(m.jsx)("ul",{className:"row",children:b.a.isArrayData(i)?i.map((function(t,a){return Object(m.jsx)(cr,{index:a,dataItem:t,actions:e.actions,onClickOnOff:e.onClickOnOff,onClickControlCalender:e.onClickControlCalender,t:n},"row_item_"+a)})):""})})]})}var vr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){}},{key:"setAlias",value:function(){this.v.setAlias({})}}]),a}(ue),_r=(a(859),function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).calbackChangeMode=function(e){var t=Object(p.a)(n),a={export_limitation_control_mode:e.scheduled_mode,hash_id:n.state.hash_id,type:"export_control"};Ls.instance.updateControlMode(a,(function(a,i){a?t.setState({searchParam:e,changeMode:!1}):b.a.isBlank(i)||t.toast(i,"error")}),!0)},n.onClickCloseChangeMode=function(){n.setState({changeMode:!1})},n.onClickControlCalender=function(e){var t=n.state.dataListInverter;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||n.setState({showControlCalendar:!0,curItem:a})}},n.onCloseControlCalender=function(){n.setState({showControlCalendar:!1})},n.onClickCloseOnOff=function(e){e&&n.getListInverter(),n.setState({showOnOffPopup:!1})},n.onClickOnOff=function(e){var t=n.state.dataListInverter;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||n.setState({showOnOffPopup:!0,curItem:a})}},n.jsxTemplate=br,n.state={hash_id:n.props.hash_id,curItem:{},curProject:{},dataListInverter:[],showOnOffPopup:!1,changeMode:!1,searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1,max_date:b.a.getCurrentDDMMYYYY(),current_date:b.a.getCurrentDDMMYYYY(),scheduled_mode:1,limit_power_status:1,limit_energy_status:1}},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListInverter(),this.getProjectDetail()}},{key:"getProjectDetail",value:function(){var e=this.state.searchParam,t=this,a={hash_id:this.state.hash_id};Ls.instance.getProjectDetail(a,(function(a){a&&(e.scheduled_mode=a.export_limitation_control_mode,e.limit_energy_status=a.limit_energy_status,e.limit_power_status=a.limit_power_status,e.limit_power=a.limit_power,e.limit_energy=a.limit_energy,t.setState({curProject:a,searchParam:e}))}),!1)}},{key:"handleInputChange",value:function(e){var t=e.target,a=this,i=t.name,s=t.value;if("checkbox"===t.type&&(s=t.checked?1:0),i){var n=this.state.searchParam;if("scheduled_manual_mode"==i){if(1==n.scheduled_mode)return;a.setState({changeMode:!0})}if("scheduled_auto_mode"==i){if(2==n.scheduled_mode)return;a.setState({changeMode:!0})}"limit_energy_status"==i&&(n[i]=1==n.limit_energy_status?0:1),"limit_power_status"==i&&(n[i]=1==n.limit_power_status?0:1),"limit_energy"!=i&&"limit_power"!=i||(n[i]=e.target.validity.valid?s:n[i],a.setState({searchParam:n}))}}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new vr(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListInverter",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,t.hash_id=this.state.hash_id,t.type="private",Ls.instance.getListInverter(t,(function(a,i){console.log("aaa: ",t,a),b.a.isArrayData(a)?e.setState({dataListInverter:a}):e.setState({dataListInverter:[]}),e.forceUpdate()}))}},{key:"onClickSaveExportLimitationAction",value:function(){var e=this.state.searchParam,t=this,a={limit_energy:e.limit_energy?e.limit_energy:null,limit_power:e.limit_power?e.limit_power:null,hash_id:this.state.hash_id,type:"save"};Ls.instance.updateModePowerAndEnergy(a,(function(a,i){a?t.setState({searchParam:e}):b.a.isBlank(i)||t.toast(i,"error")}),!0)}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee)),gr=Object(f.a)("common")(_r),fr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onClickOnOff=function(){e.props.onClickOnOff&&"function"===typeof e.props.onClickOnOff&&e.props.onClickOnOff(e.props.index)},e.onClickControlCalender=function(){e.props.onClickControlCalender&&"function"===typeof e.props.onClickControlCalender&&e.props.onClickControlCalender(e.props.index)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.dataItem;return Object(m.jsx)("li",{className:"col-md-2",children:Object(m.jsxs)("div",{className:"inverter-item",children:[Object(m.jsx)("div",{className:"title",children:e.name}),Object(m.jsx)("div",{className:"iv-title",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("img",{src:"/inverter.png",className:1==e.status_control?"on":"off"})}),Object(m.jsxs)("div",{className:"col-md-6 text-center",children:[Object(m.jsx)("div",{className:"mccb",children:"MCCB"}),Object(m.jsx)("div",{onClick:this.onClickOnOff.bind(this),className:1==e.status_control?"action-on-off on":"action-on-off off",children:1==e.status_control?"ON":"OFF"})]})]})}),Object(m.jsxs)("div",{className:"iv-content",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Power"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.activePower})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"kW"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"PF"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.powerFactor})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Temp"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:e.internalTemperature})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"\u2103"})})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("span",{children:"Setpoint"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"90"})}),Object(m.jsx)("div",{className:"col-md-4 text-center",children:Object(m.jsx)("span",{children:"%"})})]})]})]})},this.props.index)}}]),a}(r.Component);function xr(){var e=this.state.curItem,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[t("device.device"),": ",e.name," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseOnOff.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:1==e.status_control?Object(m.jsx)("p",{children:t("device.message_off")}):Object(m.jsx)("p",{children:t("device.message_on")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.onClickCloseOnOff.bind(this,!1),className:"btn btn-cancel",text:" "+t("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickOnOffAction.bind(this),className:"btn btn-save",text:t("common.yes"),title:t("common.yes")})]})]})}var Or=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=xr,s}return Object(s.a)(a,[{key:"onClickOnOffAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,t.status_control=1==t.status_control?0:1,t.updated_by=this.employee.first_name+" "+this.employee.last_name,Ls.instance.updateOnOff(t,(function(e,t){e?(a.toast(t,"info"),a.props.onClickCloseOnOff(!0)):b.a.isBlank(t)||a.toast(t,"error")}),!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function yr(){var e=this.state.searchParam,t=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",children:"Change Mode "}),Object(m.jsx)("span",{className:"close",onClick:this.props.onClickCloseChangeMode.bind(this,!1),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:1==e.scheduled_mode?Object(m.jsx)("p",{children:t("device.change_mode_auto")}):Object(m.jsx)("p",{children:t("device.change_mode_manual")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.onClickCloseChangeMode.bind(this,!1),className:"btn btn-cancel",text:" "+t("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:t("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickChangeModeAction.bind(this),className:"btn btn-save",text:t("common.yes"),title:t("common.yes")})]})]})}var Mr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem,searchParam:s.props.searchParam},s.jsxTemplate=yr,s}return Object(s.a)(a,[{key:"onClickChangeModeAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.state.searchParam).scheduled_mode=1==t.scheduled_mode?2:1,this.props.calbackChangeMode(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);function Nr(){this.state.curItem;var e=this.props.t;return Object(m.jsxs)(Se.a,{visible:!0,className:"modal-delete-device",dialogClassName:"",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsxs)("h5",{className:"modal-title",children:[e("device.delete_scheduled")," "]}),Object(m.jsx)("span",{className:"close",onClick:this.props.closeDeleteCalendar.bind(this),children:Object(m.jsx)("var",{className:"icon-cancel-music"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:e("common.message_delete")})}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)(oe,{onClick:this.props.closeDeleteCalendar.bind(this),className:"btn btn-cancel",text:" "+e("common.no"),"data-dismiss":"modal","aria-hidden":"true",title:e("common.no")}),Object(m.jsx)(oe,{onClick:this.onClickOnOffAction.bind(this),className:"btn btn-save",text:e("common.yes"),title:e("common.yes")})]})]})}var Cr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={curItem:s.props.curItem},s.jsxTemplate=Nr,s}return Object(s.a)(a,[{key:"onClickOnOffAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({},this.state.curItem),a=this,Ls.instance.deleteListCalendarControl(t,(function(e,t){e?(a.toast(t,"info"),a.props.closeDeleteCalendar(!0)):b.a.isBlank(t)||a.toast(t,"error")}),!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(ee);a(860);function kr(){var e=this,t=this.state,a=t.curItem,i=t.dataListInverter,s=t.searchParam,n=t.eventsList;Ye.a.locale("en-GB");var c=this.props.t,r=Object(qs.b)(Ye.a),l=this.state.showOnOffPopup?Object(m.jsx)(Or,{t:c,curItem:a,onClickCloseOnOff:this.onClickCloseOnOff,auth:this.props.auth,actions:this.actions}):"",o=this.state.deleteItemCalendar?Object(m.jsx)(Cr,{t:c,curItem:this.state.itemCalendar,closeDeleteCalendar:this.closeDeleteCalendar,auth:this.props.auth,actions:this.actions}):"",d=this.state.changeMode?Object(m.jsx)(Mr,{t:c,curItem:this.state.curItem,searchParam:s,onClickCloseChangeMode:this.onClickCloseChangeMode,calbackChangeMode:this.calbackChangeMode,auth:this.props.auth,actions:this.actions}):"";return Object(m.jsxs)("div",{className:"main-auto",children:[l,o,d,Object(m.jsx)("div",{className:"add-date",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-12",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{label:"Manual Mode",inputId:"scheduled_mode_manual",inputName:"scheduled_mode_manual",checked:1==s.scheduled_mode?1:0,onChange:this.handleInputChange.bind(this)})})})}),Object(m.jsx)("div",{className:"col-md-2",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{label:"Auto Mode",inputId:"scheduled_mode_auto",inputName:"scheduled_mode_auto",checked:2==s.scheduled_mode?1:0,onChange:this.handleInputChange.bind(this)})})})})]}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12",children:2==s.scheduled_mode?Object(m.jsx)("div",{className:"scheduled",children:Object(m.jsxs)("fieldset",{children:[Object(m.jsx)("legend",{children:Object(m.jsx)("span",{children:c("device.scheduled")})}),Object(m.jsxs)("div",{className:"choose-device",children:[Object(m.jsxs)("h2",{children:[c("device.device_list")," "]}),Object(m.jsx)("ul",{className:"row",children:b.a.isArrayData(i)?i.map((function(t,a){return Object(m.jsx)("li",{className:"col-md-2",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("div",{className:"checkmark",children:Object(m.jsx)(ne,{label:t.name,inputId:"id_device_"+a,inputName:"id_device_"+a,checked:1==t.checked?1:0,onChange:e.handleCheckedChange.bind(e,a)})})})},a)})):""})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{value:s.date_from,inputId:"date_from",format:"DD/MM/YYYY HH:mm",dateFormat:"dd/MM/yyyy HH:mm",inputClass:"form-control",inputName:"date_from",minDate:s.min_date,handleChange:function(t){e.handleInputDateChange(t),e.validateOne(t)},maxLength:20,showIconCalendar:!0,timeIntervals:60,showTimeSelect:!0})})}),Object(m.jsx)("div",{className:"col-md-1 text-center",children:Object(m.jsx)("span",{className:"to",children:"To"})}),Object(m.jsx)("div",{className:"col-md-5",children:Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(Ee,{value:s.date_to,inputId:"date_to",format:"DD/MM/YYYY HH:mm",dateFormat:"dd/MM/yyyy HH:mm",inputClass:"form-control",inputName:"date_to",minDate:s.date_from,handleChange:function(t){e.handleInputDateChange(t),e.validateOne(t)},maxLength:20,showIconCalendar:!0,timeIntervals:60,showTimeSelect:!0,S:!0})})}),Object(m.jsx)("div",{className:"col-md-1",children:Object(m.jsx)(oe,{onClick:this.onClickAddControlCalendarAction.bind(this),className:"btn btn-save",text:c("device.add"),title:c("device.add")})})]})}),Object(m.jsx)("div",{className:"col-md-6"})]})]})}):""})})]})})}),2==s.scheduled_mode?Object(m.jsx)("div",{className:"main-calendar",children:Object(m.jsx)(qs.a,{localizer:r,events:n,startAccessor:"start",endAccessor:"end",step:60,style:{height:500},defaultView:"week",onSelectEvent:this.onSelectEvent.bind(this)})}):"",Object(m.jsx)("div",{className:"manual-list-device",children:Object(m.jsx)("ul",{className:"row",children:b.a.isArrayData(i)?i.map((function(t,a){return Object(m.jsx)(fr,{index:a,dataItem:t,actions:e.actions,onClickOnOff:e.onClickOnOff,t:c},"row_item_"+a)})):""})})]})}var Dr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;Object(i.a)(this,a),s=t.call(this);var n=e.t;return s.trans=n,s}return Object(s.a)(a,[{key:"setRule",value:function(){this.addRuleForField("date_from","trim",!0),this.addRuleForField("date_from","required",!0,this.trans("validate_rule.required"),this.trans("device.date_from")),this.addRuleForField("date_from","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.date_from")),this.addRuleForField("date_to","trim",!0),this.addRuleForField("date_to","required",!0,this.trans("validate_rule.required"),this.trans("device.date_to")),this.addRuleForField("date_to","maxLength",20,this.trans("validate_rule.maxLength_input"),this.trans("device.date_to"))}},{key:"setAlias",value:function(){this.v.setAlias({date_from:this.trans("device.date_from"),date_to:this.trans("device.date_to")})}}]),a}(ue),wr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).onClickCloseChangeMode=function(){n.setState({changeMode:!1})},n.calbackChangeMode=function(e){var t=Object(p.a)(n),a={schedule_control_mode:e.scheduled_mode,hash_id:n.state.hash_id,type:"schedule_control"};Ls.instance.updateControlMode(a,(function(a,i){a?t.setState({searchParam:e,changeMode:!1}):b.a.isBlank(i)||t.toast(i,"error")}),!0)},n.closeDeleteCalendar=function(e){e&&n.getListControlCalendar(),n.setState({deleteItemCalendar:!1})},n.onClickCloseOnOff=function(e){e&&n.getListInverter(),n.setState({showOnOffPopup:!1})},n.onClickOnOff=function(e){var t=n.state.dataListInverter;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||n.setState({showOnOffPopup:!0,curItem:a})}},n.jsxTemplate=kr,n.state={hash_id:n.props.hash_id,curItem:{},dataListInverter:[],showOnOffPopup:!1,deleteItemCalendar:!1,changeMode:!1,itemCalendar:{},searchParam:{limit:v.a.COMMON.LIMIT,offset:0,index:1,max_date:b.a.getCurrentDDMMYYYY(),current_date:b.a.getCurrentDDMMYYYY(),scheduled_mode:1,date_from:Ye()().format("DD/MM/YYYY HH:mm"),min_date:Ye()().format("DD/MM/YYYY HH:mm")},eventsList:[]},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(n)),n.handleInputDateChange=n.handleInputDateChange.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getListInverter(),this.getListControlCalendar(),this.getProjectDetail()}},{key:"getProjectDetail",value:function(){var e=this,t=this.state.searchParam,a={hash_id:this.state.hash_id};Ls.instance.getProjectDetail(a,(function(a){a&&(t.scheduled_mode=a.schedule_control_mode,e.setState({curProject:a,searchParam:t}))}),!1)}},{key:"handleInputDateChange",value:function(e){var t=e.target,a=t.name,i=t.value;if("checkbox"===t.type&&(i=t.checked?1:0),a){var s=this.state.searchParam;s[a]=i,"date_from"==a&&(s.date_to=Ye()(b.a.dateFormat(i,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm")).add(2,"hours").format("DD/MM/YYYY HH:mm")),this.setState({searchParam:s})}}},{key:"validateOne",value:function(){var e=Object(K.a)($.a.mark((function e(t){var a,i,s,n,c,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,i=a.name,s=a.value,!i){e.next=10;break}return n=Object(j.a)({},i,s),c=new Dr(this.props),e.next=8,c.validateOne(n,i);case 8:null!=(r=e.sent)&&this.setValidateMessage(r,!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCheckedChange",value:function(e){var t=this.state.dataListInverter;if(b.a.isArrayData(t)){var a=t[e];b.a.isObjectEmpty(a)||(t[e].checked=1==t[e].checked?0:1,this.setState({dataListInverter:t}))}}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.name;t.value;if("checkbox"===t.type&&(t.checked?1:0),a){var i=this.state.searchParam;if("scheduled_mode_auto"==a){if(2==i.scheduled_mode)return;this.setState({changeMode:!0})}if("scheduled_mode_manual"==a){if(1==i.scheduled_mode)return;this.setState({changeMode:!0})}}}},{key:"onClickAddControlCalendarAction",value:function(){var e=Object(K.a)($.a.mark((function e(){var t,a,i,s,n,c,r,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,t.curItem,a=t.searchParam,i=t.dataListInverter,s=this,n=Object.assign({},a),c=new Dr(this.props),e.next=5,c.FLValidationAll(n);case 5:if(!(r=e.sent)){e.next=9;break}return this.setValidateMessage(r),e.abrupt("return");case 9:if(this.removeAllValidateMessage(),n.screen_mode=v.a.SCREEN_MODE.ADD,b.a.isArrayData(i)){e.next=13;break}return e.abrupt("return");case 13:l=i.filter((function(e){return 1==e.checked})),b.a.isArrayData(l)||s.toast("You haven't selected a device","error"),n.dataDevices=l,n.date_from=b.a.dateFormat(a.date_from,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),n.date_to=b.a.dateFormat(a.date_to,"YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss"),Ls.instance.saveArrControlCalendar(n,(function(e,t,i){e?(s.toast(i,"info"),a.date_from=null,a.date_to=null,s.setState({searchParam:a},(function(){s.getListControlCalendar()}))):t?s.setValidateMessage(t):b.a.isBlank(i)||s.toast(i,"error")}),!0);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getListControlCalendar",value:function(){var e=this,t=this.state,a=t.curItem,i=t.hash_id,s=Object.assign({},a);s.hash_id=i;var n=[];Ls.instance.getListBySiteControlCalendar(s,(function(t,a){b.a.isArrayData(t)?(t.map((function(e,t){n.push({title:e.title,start:new Date(e.start),end:new Date(e.end),index:t,id:e.id,id_device:e.id_device,id_site:e.id_site,hash_id:e.hash_id,date_from:e.date_from,date_to:e.date_to})})),e.setState({eventsList:n})):e.setState({eventsList:[]})}))}},{key:"onSelectEvent",value:function(e){b.a.isObjectEmpty(e)||this.setState({itemCalendar:e,deleteItemCalendar:!0})}},{key:"getListInverter",value:function(){var e=this,t=this.state.searchParam;t.id_language=this.employee.id_language,t.id_employee=this.employee.id_employee,t.hash_id=this.state.hash_id,t.type="private",Ls.instance.getListInverter(t,(function(t,a){b.a.isArrayData(t)?e.setState({dataListInverter:t}):e.setState({dataListInverter:[]}),e.forceUpdate()}))}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Ar=Object(f.a)("common")(wr);a(861);function Ir(){var e=this.props.t,t=this.state.type,a=null;switch(this.state.type){case 1:a=Object(m.jsx)(Ar,{hash_id:this.state.hash_id,auth:this.props.auth,actions:this.actions,t:e},Math.random());break;case 2:a=Object(m.jsx)(gr,{hash_id:this.state.hash_id,auth:this.props.auth,actions:this.actions,t:e},Math.random())}return Object(m.jsxs)("div",{className:"devices",children:[Object(m.jsx)(xs,{hash_id:this.state.hash_id},Math.random()),Object(m.jsx)("div",{className:"page-breadcrumb",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"device-tab-scada",children:Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{onClick:this.setTabOnOff.bind(this,1),className:1==t?"active":"",children:e("device.scheduled_control")}),Object(m.jsx)("li",{onClick:this.setTabOnOff.bind(this,2),className:2==t?"active":"",children:e("device.export_limitation_control")})]})})})})}),a]})}var Pr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e,s){var n;return Object(i.a)(this,a),(n=t.call(this,e,s)).jsxTemplate=Ir,n.state={hash_id:b.a.isObjectEmpty(n.params)?null:n.params.id,curItem:{},type:1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({type:1})}},{key:"componentWillReceiveProps",value:function(e){e.match.params.id!==this.props.match.params.id&&this.setState({hash_id:e.match.params.id},(function(){}))}},{key:"setTabOnOff",value:function(e){this.setState({type:e})}},{key:"render",value:function(){return this.jsxTemplate.call(this)}}]),a}(ee),Yr=Object(f.a)("common")(Pr),Er=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return Object(m.jsx)(d.a,{children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/",exact:!0,children:Object(m.jsx)(u,{children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/",component:ve})})})}),Object(m.jsx)(h.a,{path:"/forgot-password",children:Object(m.jsx)(u,{children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/forgot-password",exact:!0,component:xe})})})}),Object(m.jsx)(h.a,{path:"/error-404",children:Object(m.jsx)(u,{children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/error-404",exact:!0,component:ze})})})}),Object(m.jsx)(h.a,{path:"/reset-password",children:Object(m.jsx)(u,{children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/reset-password",exact:!0,component:Ne})})})}),Object(m.jsx)(h.a,{path:"/dashboard",children:Object(m.jsx)(T,{children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/dashboard",exact:!0,component:function(t){return Object(m.jsx)(va,{parent:e.props.parent,auth:e.props.auth,baseParam:t})}})})})}),Object(m.jsx)(h.a,{path:"/main",children:Object(m.jsx)(z,{parent:this.props.parent,children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/main",exact:!0,component:function(t){return Object(m.jsx)(vs,{parent:e.props.parent,auth:e.props.auth,baseParam:t})}})})})}),Object(m.jsx)(h.a,{path:"/user",children:Object(m.jsx)(B,{children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/user",exact:!0,component:function(t){return Object(m.jsx)(Ve,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/user/config-receive-email",exact:!0,component:function(t){return Object(m.jsx)(ar,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/user/documents",exact:!0,component:function(t){return Object(m.jsx)(nr,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/user/notifications",exact:!0,component:function(t){return Object(m.jsx)(sc,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}})]})})}),Object(m.jsx)(h.a,{path:"/system/:path?",children:Object(m.jsx)(I,{children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/system",exact:!0,component:function(t){return Object(m.jsx)(Ke,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/project-group",exact:!0,component:function(t){return Object(m.jsx)(ha,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/project",exact:!0,component:function(t){return Object(m.jsx)(aa,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/role",exact:!0,component:function(t){return Object(m.jsx)(ot,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/permission",exact:!0,component:function(t){return Object(m.jsx)(jt,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/user",exact:!0,component:function(t){return Object(m.jsx)(Mt,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/error-level",exact:!0,component:function(t){return Object(m.jsx)(uc,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/error-type",exact:!0,component:function(t){return Object(m.jsx)(Oc,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/error-state",exact:!0,component:function(t){return Object(m.jsx)(Pc,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/error",exact:!0,component:function(t){return Object(m.jsx)(Uc,{auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/system/device-parameter",exact:!0,component:function(t){return Object(m.jsx)(Zc,{auth:e.props.auth,baseParam:t})}})]})})}),Object(m.jsx)(h.a,{path:"/private",children:Object(m.jsx)(z,{parent:this.props.parent,children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/private/:id",exact:!0,component:function(t){return Object(m.jsx)(As,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/private/:id/dashboard",exact:!0,component:function(t){return Object(m.jsx)(As,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/private/:id/devices",exact:!0,component:function(t){return Object(m.jsx)(Zs,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/private/:id/activities",exact:!0,component:function(t){return Object(m.jsx)(dn,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/private/:id/analytics",exact:!0,component:function(t){return Object(m.jsx)(An,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/private/:id/reports",exact:!0,component:function(t){return Object(m.jsx)(En,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/notifications",exact:!0,component:function(t){return Object(m.jsx)(sc,{parent:e.props.parent,auth:e.props.auth,baseParam:t})}}),Object(m.jsx)(h.a,{path:"/private/:id/config",exact:!0,component:function(t){return Object(m.jsx)($n,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/private/:id/control",exact:!0,component:function(t){return Object(m.jsx)(Yr,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}})]})})}),Object(m.jsx)(h.a,{path:"/notify",children:Object(m.jsx)(T,{children:Object(m.jsx)(h.c,{children:Object(m.jsx)(h.a,{path:"/notify",exact:!0,component:function(t){return Object(m.jsx)(sc,{parent:e.props.parent,auth:e.props.auth,baseParam:t})}})})})}),Object(m.jsx)(h.a,{path:"/project",children:Object(m.jsx)(T,{parent:this.props.parent,children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{path:"/project/:id",exact:!0,component:function(t){return Object(m.jsx)(Ta,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/:id/dashboard",exact:!0,component:function(t){return Object(m.jsx)(Ta,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/:id/devices",exact:!0,component:function(t){return Object(m.jsx)(ti,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/:id/activities",exact:!0,component:function(t){return Object(m.jsx)(ui,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/:id/analytics",exact:!0,component:function(t){return Object(m.jsx)(Yi,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/:id/reports",exact:!0,component:function(t){return Object(m.jsx)(Fi,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/:id/config",exact:!0,component:function(t){return Object(m.jsx)(Qi,Object(o.a)({parent:e.props.parent,auth:e.props.auth,baseParam:t},t))}}),Object(m.jsx)(h.a,{path:"/project/notifications",exact:!0,component:function(t){return Object(m.jsx)(sc,{parent:e.props.parent,auth:e.props.auth,baseParam:t})}})]})})})]})})}}]),a}(l.a.Component),Lr=(a(862),function(e){return Object(m.jsx)(Q.a,{limit:1,position:"top-right",autoClose:e.autoClose,hideProgressBar:e.hideProgressBar,newestOnTop:e.newestOnTop,closeOnClick:!0,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})}),Sr=function(e){Object(n.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).setPermission(),s}return Object(s.a)(a,[{key:"setPermission",value:function(){var e=localStorage.getItem(v.a.COMMON.ACCESS_PARAM);if(!b.a.isBlank(e))try{var t=JSON.parse(b.a.base64Decrypt(e));this.permission=t}catch(a){}}},{key:"render",value:function(){return Object(m.jsx)(d.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(Lr,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0}),Object(m.jsx)(Er,{auth:this.permission,parent:this})]})})}}]),a}(r.Component)},348:function(e,t,a){"use strict";a.r(t),function(e){a(2);var i=a(36),s=a.n(i),n=(a(353),a(216),a(354),a(344)),c=a(340),r=a(341),l=a(867),o=a(157),d=a(342),h=a(343),m=a(3),u=a(1),p=a(11),j=a(0);e.CMSHttp=p.a;var b=localStorage.getItem(m.a.COMMON.EMPLOYEE_INFO),v=JSON.parse(u.a.base64Decrypt(b));o.a.init({interpolation:{escapeValue:!1},lng:u.a.isBlank(v)?"en":v.lang,resources:{vi:{common:d},en:{common:h}}}),t.default=o.a,s.a.render(Object(j.jsx)(l.a,{i18n:o.a,children:Object(j.jsx)(n.a,{})}),document.getElementById("root")),Object(c.a)(),r.a()}.call(this,a(46))},354:function(e,t,a){},363:function(e,t){},365:function(e,t){},376:function(e,t){},378:function(e,t){},405:function(e,t){},407:function(e,t){},408:function(e,t){},413:function(e,t){},415:function(e,t){},434:function(e,t){},446:function(e,t){},449:function(e,t){},498:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},743:function(e,t,a){},748:function(e,t,a){var i=a(196),s=a(106),n=a(87),c=a(310),r=/\s+/g,l=0,o=c.create({constructor:function(){var e=this;e._emitterListener={},e._emitterCallbacks=[],e._emitterLimit=999,e.className="emitter"},on:function(e,t){var a=this,s=i.args(arguments);return 1===s.length&&(t=s[0],e=null),n.function(t)?e?(d(e,(function(i){if(a._emitterListener[i]||(a._emitterListener[i]=[]),a._emitterListener[i].length===a._emitterLimit)throw new Error("instance event `"+i+"` pool is full as "+this._emitterLimit);n.function(t)&&(a._emitterListener[i].push(t),a.emit("newListener",e))})),a):(a._emitterCallbacks.push(t),a):a},before:function(e,t){return this.on("before"+e,t)},after:function(e,t){return this.on("after"+e,t)},un:function(e,t){var a=this;return d(e,(function(i){a._emitterListener[i]&&t?s.each(a._emitterListener,(function(i,s){if(t===s)return a._emitterListener.splice(i,1),a.emit("removeListener",e),!1})):a._emitterListener=[]})),a},emit:function(e){var t=this,a=s.toArray(arguments).slice(1),i=!0;return d(e,(function(e){var n=Date.now();s.each(t._emitterCallbacks,(function(i,s){t.alienEmitter={type:e,timestamp:n,id:l++},s.apply(t,a)})),t._emitterListener[e]&&s.each(t._emitterListener[e],(function(s,c){t.alienEmitter={type:e,timestamp:n,id:l++},!1===c.apply(t,a)&&(i=!1)}))})),i}});function d(e,t){s.each(e.trim().split(r),(function(e,a){t(a)}))}function h(e,t){if(!(t=t||[]).length)return!0;var a=!0;return s.each(t,(function(t,i){if("!"===i[0]){if(a=!0,e===i.slice(1))return a=!1,!1}else if(a=!1,e===i)return a=!0,!1})),a}o.pipe=function(e,t,a){e.on((function(){var e=this.alienEmitter.type;if(h(e,a)){var i=s.toArray(arguments);i.unshift(this.alienEmitter.type),t.emit.apply(t,i)}}))},e.exports=o},749:function(e,t,a){var i=a(311),s=a(197),n=a(196),c=/[aA0]/g,r="abcdefghijklmnopqrstuvwxyz",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="0123456789",d=0,h=0;t.number=function(e,t){var a;return(e=i.parseInt(e,0))===(t=i.parseInt(t,0))?e:(e>t&&(a=e,e=t,t=a),Math.floor(Math.random()*(t-e+1)+e))},t.string=function(e,a){var s,n="",d="";for(e=Math.abs(i.parseInt(e,6)),(a=String(a||"a")).indexOf("a")>-1&&(d+=r),a.indexOf("A")>-1&&(d+=l),a.indexOf("0")>-1&&(d+=o),s=(d+=a.replace(c,"")).length-1;e--;)n+=d[t.number(0,s)];return n},t.guid=function(e,t){var a=[],c=new Date,r="",l=c.getTime(),o=n.args(arguments),m="",u=16;switch(o.length){case 0:e=!1,t=u;break;case 1:"boolean"===typeof o[0]?t=u:(e=!1,t=o[0])}if(t=Math.max(t,u),e){l!==h&&(h=l,d=0);var p=(l=String(l)).length;m=i.to62(d++),r=l+(m=s.padLeft(m,t-p,"0"))}else{var j=s.padLeft(c.getFullYear(),4,"0"),b=s.padLeft(c.getMonth()+1,2,"0"),v=s.padLeft(c.getDate(),2,"0"),_=s.padLeft(c.getHours(),2,"0"),g=s.padLeft(c.getMinutes(),2,"0"),f=s.padLeft(c.getSeconds(),2,"0");a.push(j),a.push(b),a.push(v),a.push(_),a.push(g),a.push(f);var x=a.join("");x!==h&&(h=x,d=0),m=i.to62(d++),m=s.padLeft(m,t-14,"0"),a.push(m),r=a.join("")}return r}},750:function(e,t,a){var i=a(87),s=a(311),n=a(197),c=a(751),r=/^-?[\d.]+$/;function l(e){return i.array(e)||"filelist"===i(e)}e.exports=function(e){e.addRule("trim",(function(e,t,a){a&&(this.data[this.path]="string"===i(e)||"number"===i(e)?String(e).trim():""),t()})),e.addRule("type",(function(e,t,a){var s=this,r=s.path,l=s.getRuleParams(r,"required");l=!l||l[0];var o=s.getAlias(r)||r;if(!l&&!e)return t(null);switch(a){case"array":return t("array"===i(e)?null:n.assign(c.get("type","array"),o,a));case"number":return t(/^-?\d+(\.?\d{0,3}$)|^\.?\d{0,3}$|^-$/g.test(e)?null:n.assign(c.get("type","number"),o,a));case"decimal":return t(/^\d*\.?\d*$/.test(e)?null:n.assign(c.get("type","number"),o,a));case"number_positive":return t(/^\d+(\.\d{1,3})?$/.test(e)?null:n.assign(c.get("type","number"),o,a));case"integer":return"number"===typeof e&&(e=e.toString()),e=e.replace(/^-/,""),t(/^(0|[1-9]\d*)$/.test(e)?null:n.assign(c.get("type","integer"),o,a));case"mobile":return t(/^1\d{10}$/.test(e)?null:n.assign(c.get("type","mobile"),o,a));case"email":return t(i.email(e)?null:n.assign(c.get("type","email"),o,a));case"url":return t(i.url(e)?null:n.assign(c.get("type","url"),o,a));case"dateDMY":return t(i.date(e)?null:n.assign(c.get("type","date"),o,a));case"dateYMD":return t(i.date(e,!0)?null:n.assign(c.get("type","date"),o,a));case"dateDMYHm":return t(i.dateTimeToMinute(e)?null:n.assign(c.get("type","date"),o,a));case"dateYMDHm":return t(i.dateTimeToMinute(e,!0)?null:n.assign(c.get("type","date"),o,a));case"numreicAllowZero":return"number"===typeof e&&(e=e.toString()),t(/^[0-9]*$/.test(e)?null:n.assign(c.get("type","numreicAllowZero"),o,a))}})),e.addRule("required",(function(e,t,a){if(!a)return t();var s="number"===typeof e?e.toString():e,n=l(s);t("file"===i(s)||(n?s:s||"").length>0?null:c.get("required"))}));var t=function(e){var t={0:"minLength",1:"maxLength"};return function(a,i,n){n=s.parseInt(n);var r="number"===typeof a?a.toString():a,o=this.getRuleParams(this.path,"required"),d=!o||o[0],h=l(r),m=(h?r:r||"").length,u=0===e?m>=n:m<=n;if(!m&&!d)return i();i(h?u?null:c.get(t[e],"select"):u?null:c.get(t[e],"input"))}};e.addRule("minLength",t(0)),e.addRule("maxLength",t(1)),e.addRule("equal",(function(e,t,a){t((e=e||"")===this.getData(a)?null:"${1}\u5fc5\u987b\u4e0e"+this.getAlias(a)+"\u76f8\u540c")}));var a=function(e){return function(t,a,i){t=t||"";var n=this.getRuleParams(this.path,"required");return(n=!n||n[0])||""!==t&&null!==t&&"undefined"!==typeof t?r.test(t)?(t=s.parseFloat(t),i=s.parseFloat(i),void a((0===e?t>=i:t<=i)?null:c.get(e?"max":"min"))):a("${1}\u5fc5\u987b\u4e3a\u6570\u503c\u683c\u5f0f"):a(null)}};e.addRule("min",a(0)),e.addRule("max",a(1)),e.addRule("step",(function(e,t,a){if(e=e||"",!this.getRuleParams(this.path,"required")&&!e)return t(null);if(!r.test(e))return t("${1}\u5fc5\u987b\u4e3a\u6570\u503c\u683c\u5f0f");var i=this.getRuleParams(this.path,"min")[0];if(e=s.parseInt(e,0),!(a=s.parseInt(a,0)))return t(null);t((e-i)%a?"${1}\u9012\u589e\u6b65\u8fdb\u503c\u5fc5\u987b\u662f"+a+"\uff0c\u6700\u5c0f\u503c\u4e3a"+i:null)}));var o=function(e){return function(t,a,s){if(!s)return a();if("array"!==i(t))return a("${1}\u5fc5\u987b\u4e3a\u6570\u7ec4\u683c\u5f0f");var n=t.length;a(e?n>s?c.get("most"):null:n<s?c.get("least"):null)}};e.addRule("least",o(0)),e.addRule("most",o(1))}},751:function(e,t){var a={minLength:{input:"'".concat(1,"kh\xf4ng \u0111\u01b0\u1ee3c nh\u1ecf h\u01a1n ",2," k\xfd t\u1ef1'"),select:"'".concat(1," \xedt nh\u1ea5t ph\u1ea3i ch\u1ecdn ",2," m\u1ee5c'")},maxLength:{input:"'".concat(1," kh\xf4ng \u0111\u01b0\u1ee3c l\u1edbn h\u01a1n ",2," k\xfd t\u1ef1'"),select:"'".concat(1," nhi\u1ec1u nh\u1ea5t ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn ",2," m\u1ee5c '")},least:"'".concat(1," \xedt nh\u1ea5t ph\u1ea3i ch\u1ecdn ",2," m\u1ee5c'"),most:"'".concat(1,"nhi\u1ec1u nh\u1ea5t ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn ",2," m\u1ee5c'"),type:{array:"'".concat(1," b\u1eaft bu\u1ed9c ph\u1ea3i l\xe0 gi\xe1 tr\u1ecb Array '"),number:"'".concat(1," ph\u1ea3i l\xe0 s\u1ed1 '"),integer:"'".concat(1," ph\u1ea3i l\xe0 s\u1ed1 ch\u1eb3n.'"),mobile:"'".concat(1," ph\u1ea3i l\xe0 format s\u1ed1 \u0111i\u1ec7n tho\u1ea1i '"),email:"'".concat(1,"ph\u1ea3i l\xe0 format email '"),url:"'".concat(1," ph\u1ea3i l\xe0 \u0111\u1ecba ch\u1ec9 website '"),date:"'".concat(1," invalid date'"),numreicAllowZero:"'".concat(1," invalid'")},required:"'".concat(1," kh\xf4ng \u0111\u01b0\u1ee3c r\u1ed7ng.'"),equal:"'".concat(1," v\xe0 ",2," ph\u1ea3i gi\u1ed1ng nhau.'"),min:"'".concat(1," kh\xf4ng nh\u1ecf h\u01a1n ",2,"'"),max:"'".concat(1," kh\xf4ng l\u1edbn h\u01a1n ",2,"'"),step:"'".concat(1," gi\xe1 tr\u1ecb k\u1ebf ti\u1ebfp l\xe0 ",2,"'")};t.get=function(e,t){var i=a[e];return t?i&&i[t]||"":i},t.set=function(e,t,i){i?(a[e]=a[e]||{},a[e][i]=t):a[e]=t}},752:function(e,t,a){},753:function(e,t,a){},762:function(e,t,a){},820:function(e,t,a){},821:function(e,t,a){},827:function(e,t,a){},828:function(e,t,a){},829:function(e,t,a){},830:function(e,t,a){},831:function(e,t,a){},832:function(e,t,a){},833:function(e,t,a){},835:function(e,t){},836:function(e,t){},837:function(e,t,a){},838:function(e,t,a){},839:function(e,t,a){},840:function(e,t,a){},841:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},844:function(e,t,a){},845:function(e,t,a){},846:function(e,t,a){},847:function(e,t,a){},848:function(e,t,a){},849:function(e,t,a){},850:function(e,t,a){},851:function(e,t,a){},852:function(e,t,a){},853:function(e,t,a){},854:function(e,t,a){},855:function(e,t,a){},856:function(e,t,a){},857:function(e,t,a){},858:function(e,t,a){},859:function(e,t,a){},860:function(e,t,a){},861:function(e,t,a){},87:function(e,t,a){(function(t){for(var a="undefined",i=/^https?:\/\/([a-z\d-]+\.)+[a-z]{2,5}(:[1-9]\d{0,4})?(\/|\/[\w#!:.?+=&%@!\-\/]+)?$/i,s=/^\w+[-+.\w]*@([a-z\d-]+\.)+[a-z]{2,5}$/i,n=/^[\da-z]{24}$/,c=/invalid/i,r=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,l=/^(\d{4})[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,o=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4} ([012]{0,1}[0-9]:[0-6][0-9])$/,d=/^(\d{4})[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01]) ([012]{0,1}[0-9]:[0-6][0-9])$/,h=function(e){if(e!==e)return"nan";if(typeof e===a)return a;if(typeof window!==a&&e===window)return"window";if(typeof t!==a&&e===t)return"global";if(typeof document!==a&&e===document)return"document";if(null===e)return"null";var i=Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return/element/.test(i)?"element":i},m=0,u="string number function object undefined null nan element regexp boolean array window document global".split(" "),p=function(e){var t=e.replace(/^\w/,(function(e){return e.toUpperCase()}));h[e]=h[t]=function(t){return h(t)===e}};m<u.length;m++)p(u[m]);h.plainObject=function(e){return"object"===h(e)&&Object.getPrototypeOf(e)===Object.prototype},h.emptyObject=function(e){return h.plainObject(e)&&0===Object.keys(e).length},h.empty=function(e){return typeof e===a||h.null(e)},h.url=function(e){return"string"===h(e)&&i.test(e)},h.email=function(e){return"string"===h(e)&&s.test(e)},h.validDate=function(e){return!c.test(new Date(e).toString())},h.error=function(e){return e&&e instanceof Error},h.mongoId=function(e){return typeof(e!==a&&typeof e._bsontype!==a&&"ObjectId"===e._bsontype)||n.test(e.toString())},h.emptyData=function(e){return h.empty(e)||""===e},h.localIP=function(e){if((e=String(e).toUpperCase().trim()).indexOf("::")>-1||"localhost"===e||e.indexOf("127.0.0.1")>-1)return!0;var t=e.split("."),a=Number(t[0]),i=Number(t[1]);return 10===a||(172===a&&i>15&&i<32||192===a&&168===i)},h.date=function(e,t){var a=r;if("undefined"!==typeof t&&!0===t&&(a=l),!e.match(a))return!1;var i=e.split("/"),s=e.split("-"),n=i.length,c=s.length,o="";n>1?o=e.split("/"):c>1&&(o=e.split("-"));var d=parseInt(o[0]),h=parseInt(o[1]),m=parseInt(o[2]);t&&(d=parseInt(o[2]),h=parseInt(o[1]),m=parseInt(o[0]));if(1===h||h>2)return!(d>[31,28,31,30,31,30,31,31,30,31,30,31][h-1]);if(2===h){var u=!1;return(m%4||!(m%100))&&m%400||(u=!0),!(!1===u&&d>=29)&&!(!0===u&&d>29)}},h.dateTimeToMinute=function(e,t){var a=o;if("undefined"!==typeof t&&!0===t&&(a=d),e.match(a)){var i=e.split("/"),s=e.split("-"),n=i.length,c=s.length,r="",l="";n>1?l=e.split("/"):c>1&&(l=e.split("-"));var h=l[2].split(" ");r=h[1];var m=parseInt(l[0]),u=parseInt(l[1]),p=parseInt(h[0]),b=parseInt(r[1].split(":")[0]),v=parseInt(r[1].split(":")[1]);return t&&(m=parseInt(h[0]),u=parseInt(l[1]),p=parseInt(l[0])),!!j(m,u,p)&&(!(b>24)&&!(v>60))}return!1};var j=function(e,t,a){if(1===t||t>2)return!(e>[31,28,31,30,31,30,31,31,30,31,30,31][t-1]);if(2===t){var i=!1;return(a%4||!(a%100))&&a%400||(i=!0),!(!1===i&&e>=29)&&!(!0===i&&e>29)}};e.exports=h}).call(this,a(46))}},[[348,1,2]]]);
//# sourceMappingURL=main.1efcec56.chunk.js.map